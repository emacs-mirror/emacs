2014-12-29  Paul Eggert  <eggert@cs.ucla.edu>

	* org-clock.el (org-clock-save): Prefer (system-name) to system-name.

2014-10-29  Paul Eggert  <eggert@cs.ucla.edu>

	Simplify use of current-time and friends.
	* org-archive.el (org-archive-subtree)
	(org-archive-to-archive-sibling):
	* org-clock.el (org-resolve-clocks, org-clock-get-sum-start)
	(org-clock-special-range):
	* org-timer.el (org-timer-seconds):
	* org.el (org-read-date-analyze, org-get-cursor-date):
	* ox-html.el (org-html-format-spec):
	* ox-icalendar.el (org-icalendar--vtodo):
	Omit unnecessary call to current-time.
	* org-clock.el (org-clock-get-table-data): Omit unnecessary, lossy
	conversion from floating point to Emacs time and back.
	(org-resolve-clocks): Prefer two-argument floor.
	* org-compat.el (org-float-time): Simplify to an alias because
	time-to-seconds now behaves like float-time with respect to nil arg.
	* org.el (org-get-cursor-date):
	Don't call current-time twice to get the current time stamp,
	as this can lead to inconsistent results.

2014-10-20  Glenn Morris  <rgm@gnu.org>

	* Merge in all changes up to 24.4 release.

2014-10-12  Marco Wahl  <marcowahlsoft@gmail.com>

	* org-agenda.el (org-get-entries-from-diary):
	Use `diary-fancy-display' instead of the obsolete
	`diary-display-hook'.

2014-10-12  Nicolas Goaziou  <mail@nicolasgoaziou.fr>

	* ox.el (org-export-async-start): Limit first argument to lambda
	expressions.

	* ox-publish.el (org-publish, org-publish-all)
	(org-publish-current-file): Replace `ignore', per limit stated above.

2014-10-12  Christopher Schmidt  <ch@ristopher.com>

	* org.el (orgstruct-make-binding): Do not use loop in interpreted code.

2014-10-12  Mike McLean  <mike.mclean@pobox.com>  (tiny change)

	* org-agenda.el (org-agenda-time-grid): Change docstring.

2014-10-12  Nicolas Goaziou  <mail@nicolasgoaziou.fr>

	* ox.el (org-export-async-start): Allow to use symbols as function.

2014-10-03  Achim Gratz  <Stromeko@Stromeko.DE>

	* ob-sh.el (org-babel-sh-initiate-session): After initiating a
	session, initialize the marker `comint-last-output-start' since it
	is going to be used by the ANSI color filter without further
	checks in Emacs 23 and throws an error.

	* ob-lilypond.el: Change prefix from `ly-' to
	`org-babel-lilypond-' throughout.

	* org-footnote.el: Forward declare `org-element-context',
	`org-element-property' and `org-element-type'.

	* org.el: Add forward declarations for a number of functions that
	the compiler otherwise warns about as potentially undefined at
	runtime.

	* ob-core.el: Add comment to forward declaration of
	'org-src-preserve-indentations'.

	* ob-exp.el: Require org-src to import
	'org-src-preserve-indentations'.

	* ob-haskell.el, ob-python.el: Remove superfluous forward
	declaration of 'org-src-preserve-indentations', since it gets
	imported by other requires.

	* ob-core.el (org-every): Forward declare 'org-every'.

	* ob-C.el: Require cl during compilation so that lexical-let is
	known.

	* org-entities.el: Remove superfluous require of org-macs.
	Forward declare 'org-toggle-pretty-entities' and
	'org-pretty-entities'.

	* ox.el (org-export-get-parent): Move definition of
	'org-export-get-parent' before first use.  Leave comment at original
	place of definition.

	* org.el (org-uniquify): Move definition of 'org-uniquify' before
	first use.  Leave comment at original place of definition.

	* ob-tangle.el (org-babel-tangle): When `file-name-directory'
	returns nil, do not run make-directory.  Remove superfluous when
	clauses by using short-circuiting `and' instead.

2014-10-03  Alex Kosorukoff  <alex@3form.com>  (tiny change)

	* org-capture.el (org-capture-fill-template): Set `mark-active' to
	nil.

2014-10-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-prepare): Reset preset filters when
	using sticky agendas.

	* org-agenda.el (org-agenda-get-sexps): Don't add tags as text
	properties.

	* org-capture.el (org-capture-fill-template):
	Take `org-extend-today-until' into account when setting the format time
	string.

	* org.el (org-paste-subtree): Fix match subexpression.

	* org.el (org-fix-ellipsis-at-bol): Delete.
	(org-mode, org-show-context, org-isearch-end): Don't use
	`org-fix-ellipsis-at-bol'.

	* org-agenda.el (org-agenda-filter-apply): Fix setting of
	`org-agenda-filtered-by-category'.

	* org.el (org-fontify-meta-lines-and-blocks-1): Fix handling
	of `org-hidden-keywords'.

	* org-agenda.el (org-cmp-ts): Fix agenda entry type checking.

	* org-agenda.el (org-entries-lessp): Fix inactive timestamp
	comparison.

	* org-agenda.el (org-agenda-mode): Let `org-agenda-redo' DTRT
	when agenda are sticky.
	(org-agenda-tag-filter-while-redo): Delete.
	(org-agenda-list, org-agenda-redo, org-agenda-filter-by-tag):
	Remove unused code.
	(org-agenda-clockreport-mode, org-agenda-set-mode-name):
	Don't consider tag filters.

	* org.el (org-fix-ellipsis-at-bol)
	(org-first-headline-recenter): Use `set-window-start' instead
	of `recenter'.

	* org-agenda.el (org-recenter-heading): Delete.

	* org.el (org-insert-heading): With one universal prefix argument
	or `org-insert-heading-respect-content' set to `t', always respect
	the content, i.e. don't insert a list item and don't convert
	normal lines into headings.  Update docstring.
	(org-insert-heading-respect-content): Remove unused arg.
	(org-insert-todo-heading-respect-content): Don't use
	`org-insert-todo-heading-respect-content', use the second argument
	of `org-insert-todo-heading' instead.

	* org-mobile.el (org-mobile-edit): Use only one arg.

	* org.el (org-overview): Don't call `recenter'.

	* org-agenda.el (org-agenda-custom-commands-local-options):
	Fix misquoted values.

	* org.el (org-property-re): Also match null properties by default.
	(org-entry-delete): Also delete null properties.
	(org-read-property-value): Allow the empty string as a new value.
	(org-delete-property): Throw a message when there is not property
	to delete.

	* org-agenda.el (org-agenda-insert-diary-make-new-entry):
	Fix docstring.

	* org.el (org-re-property): New parameter `allow-null' to match
	property with a null value.
	(org-entry-put): Correctly update a property with a null
	value.

	* ox-md.el (org-md-headline): When exporting with a HTML table of
	contents, add HTML anchors to Markdown headlines.

	* org.el (org-insert-heading): Don't insert an item when called
	with two universal prefix arguments.

	* org-agenda.el (org-agenda-finalize): Remove duplicate check for
	'org-hd-marker.

	* org-agenda.el (org-agenda-prepare-window): New parameter
	`filter-alist' to set the filters correctly when
	`org-agenda-persistent-filter' is on.
	(org-agenda-prepare): Use the new parameter for
	`org-agenda-prepare-window'.

	* org-compat.el (org-in-invisibility-spec-p): Tiny code cleanup.
	(org-move-to-column): Only remove '(org-filtered) from
	`buffer-invisibility-spec'.

	* org-agenda.el (org-agenda-mode): Add buffer invisibility specs.
	(org-agenda-filter-hide-line, org-agenda-remove-filter):
	Set the 'invisible text property to 'org-filtered.
	(org-agenda-show-new-time): Add the default face to avoid the
	foreground of the last character on the line to leak into the
	timestamp notification.

	* org-agenda.el (org-get-time-of-day): Don't return time string
	from within links.

	* org-timer.el (org-timer-value-string): Always return a positive
	value.  Add docstring.

	* org-capture.el (org-capture-steal-local-variables): Don't steal
	`mark-active', which should be nil in the target buffer.

	* org-agenda.el (org-agenda-remove-filter): Use `save-excursion'.

	* org.el (org-move-subtree-down): Use `org-end-of-subtree' instead
	of `outline-end-of-subtree'.
	(outline-end-of-subtree): Remove advice.

	* org-mouse.el (org-mouse-move-tree, org-mouse-do-remotely):
	Use `org-end-of-subtree' instead of `outline-end-of-subtree'.

	* org-agenda.el (org-cmp-ts): Argument `type' is not optional.
	Don't quote it.

	* org-habit.el (org-habit-insert-consistency-graphs): Don't remove
	filter overlays as we don't use overlays for filters anymore.

	* org-agenda.el (org-agenda-local-vars):
	Add `org-agenda-top-headline-filter'.
	(org-agenda-filter-by-category): Fix syntax.
	(org-agenda-filter-show-all-top-filter): New function.
	(org-agenda-filter-by-top-headline)
	(org-agenda-filter-remove-all): Use the new function.
	(org-agenda-filter-top-headline-apply): Use a dedicated symbol
	`top-headline'.

	* org.el (org-entry-properties): Ensure the special property is
	not commented out when matched.

	* org-agenda.el (org-agenda-write): Code cleanup.
	(org-agenda-mark-filtered-text)
	(org-agenda-unmark-filtered-text)
	(org-agenda-fix-tags-filter-overlays-at): Delete.
	(org-agenda-remove-marked-text): Use the `property' argument
	instead of hard-coding 'org-filtered.
	(org-agenda-filter-remove-all): Use `org-agenda-finalize'.
	(org-agenda-filter-hide-line): Rewrite using text properties
	instead of overlays.
	(org-agenda-remove-filter): New function.
	(org-agenda-filter-show-all-tag)
	(org-agenda-filter-show-all-cat)
	(org-agenda-filter-show-all-re): Rewrite using
	`org-agenda-remove-filter'.

	* org-attach.el (org-attach-dir): When the property is "inherited"
	from a variable outside of the file, do not use
	`org-entry-property-inherited-from' to find the attachment
	position, assume we need to go back to the current headline.

	* ob-R.el (org-babel-R-assign-elisp): Fix parsing of a
	one-dimensional value.

	* org.el (org-insert-heading): Fix bug when trying to insert a
	heading when point is before the first headline and not at the
	beginning of a line.

	* org-table.el (org-table-eval-formula): Fix conversion of
	inactive timestamps to active ones.

	* org.el (org-set-regexps-and-options):
	Allow `org-complex-heading-regexp-format' to match [/] and [%] cookies
	when they are both before and after the heading.

	* org-agenda.el (org-agenda-max-todos, org-agenda-max-tags)
	(org-agenda-max-effort): Fix type strings.

	* org-capture.el (org-capture-fill-template): Deactivate region
	while trying to align tags on the current headline.

	* org-agenda.el (org-agenda-finalize): Filter by top headline if
	`org-agenda-top-headline-filter' is set.

2014-10-03  Bernt Hansen  <bernt@norang.ca>

	* org-macs.el: Remove restriction when locating markers.

2014-10-03  Dmitry Gorbik  <dgorbik@me.com>  (tiny change)

	* org.el (org-fast-tag-selection): Fix window splitting.

2014-10-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-screen.el (org-babel-screen-test): Use unpredictable name for
	temporary file.

	* ob-screen.el (org-babel-screen-session-write-temp-file):
	Use unpredictable temp file name, fixes bug#17416.

2014-10-03  Ian Kelling  <ian@iankelling.org>

	* ob-core.el (org-babel-insert-result): Test all list elements
	against listp and (eq element 'hline) instead of checking just the
	first.

2014-10-03  Konstantin Kliakhandler  <kosta@slumpy.org>  (tiny change)

	* org-agenda.el (org-agenda-redo): Reapply the filters correctly.

2014-10-03  Kyle Meyer  <kyle@kyleam.com>  (tiny change)

	* ox.el (org-export-show-temporary-export-buffer): Fix typo.

2014-10-03  Matt Lundin  <mdl@imapmail.org>

	* ox-publish.el (org-publish-find-title, org-publish-find-date):
	Make sure to call org-export-get-environment in copy of buffer if
	emacs is already visiting. Otherwise, #+bind variables meant for
	export can be set in live buffers.

	* org.el (org-agenda-inhibit-startup): fix docstring to reflect
	default value

	* ox-publish.el (org-publish-find-title, org-publish-find-date):
	Fix unnecessary invocations of org-mode with org-inhibit-startup.

2014-10-03  Nick Dokos  <ndokos@gmail.com>

	* org-table.el (org-table-clean-before-export): The regexes match
	spaces in addition to the special characters that might be used in
	the first column as special marking characters.  Remove the space
	from the character class.

	* ox-ascii.el (org-ascii-superscript): Change _ to ^ in the
	output.

2014-10-03  Nick Dokos  <ndokos@redhat.com>

	* org-table.el (org-table-show-reference): Call `set-window-start'
	with the calculated values `min' and `max', not with
	(point-min) and (point-max).

2014-10-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ox-latex.el (org-latex-link): Improve test for unnumbered
	headlines.

	* ox-ascii.el (org-ascii--fill-string): Allow filling even when
	`org-export-preserve-breaks' is non-nil.

	* org.el (org-N-empty-lines-before-current): Make sure to delete
	only empty lines, not trailing whitespaces.

	* ox-html.el (org-html-headline): Make sure even listified
	headlines have proper anchors so internal links can refer to them.
	Small refactoring.

	* org-src.el (org-edit-src-code): Fix regexp.
	(org-edit-src-exit): Do not remove auto-save timer.  This is
	handled by the timer itself.

	* org.el (org-re-property): Fix regexp.  Improve docstring.

	* org-element.el (org-element-property-drawer-parser)
	(org-element-node-property-parser): Ignore lines that are not node
	properties.
	(org-element-node-property-interpreter): Allow nil properties.

	* org.el (org-re-property): Fix regexp to match properties with
	empty values.

	* org-element.el (org-element-headline-interpreter): Take into
	consideration `org-odd-levels-only' value.  Small refactoring.

	* ox-texinfo.el (org-texinfo--get-node): Return a node or anchor
	name.
	(org-texinfo--sanitize-content): Fix regexp.
	(org-texinfo-link): Fix various bugs in link export.

	* ox-beamer.el (org-beamer-link):
	* ox-html.el (org-html-link):
	* ox-latex.el (org-latex-link):
	* ox-odt.el (org-odt-link): When radio link has no valid
	target (e.g., this is a subtree export and the radio target is not
	in the exported subtree), simply return contents.

	* org.el (org-called-with-limited-levels): Initialize variable.

	* org-agenda.el (org-agenda-write): Write headings in proper
	order.

	* org-element.el (org-element-table-interpreter):
	Enhance docstring.

	* ox-md.el (org-md-link): Allow custom link type export function.

	* ox-texinfo.el (org-texinfo-template): Fix language and encoding
	case.

	* ox-md.el (org-md-separate-elements): Outside of lists, preserve
	blank lines between paragraphs and plain lists.

	* org-element.el (org-element-normalize-contents): Fix indentation
	removal when there is an empty line within a verse block.

	* ox-texinfo.el (org-texinfo--normalize-headlines): Properly add a
	section to the contents.

	* ox-texinfo.el (org-texinfo--normalize-headlines): Do not set pre
	blanks since the value is now hard-coded.
	(org-texinfo-headline): Force one blank line before contents, when non
	empty.  Refactoring.
	(org-texinfo-src-block): Refactor code.  Comply to predicate naming.

	* ox-texinfo.el (org-texinfo--sanitize-node):
	Handle " (not)allowed" case.

	* ox-texinfo.el (org-texinfo-headline): Remove wrong code
	comments.

	* ox-texinfo.el (org-texinfo-headline): Remove `not-in-toc'
	special case for tags.

	* ox-texinfo.el (org-texinfo-headline): Remove LaTeXism (optional
	arguments within square brackets).

	* ox-texinfo.el (org-texinfo-info-process): Fix docstring.
	(org-texinfo-compile): Do not check for impossible cases (e.g., if the
	previous variable contains a function).

	* ox-texinfo.el (org-texinfo-max-toc-depth): Fix docstring.

	* ox-texinfo.el (org-texinfo--make-option-string,
	org-texinfo--sanitize-headline,
	org-texinfo--sanitize-headline-contents): Remove.

	* ox-texinfo.el (org-texinfo--sanitize-node): "@", "{" and "}"
	characters are allowed in a node name.  So are "(" and ")" unless
	"(" starts the name and there is ")" somewhere in the name.
	Also trim and collapse whitespace characters.  Renamed from
	`org-texinfo--sanitize-menu'.
	(org-texinfo--get-node): Do not sanitize node names over zealously.
	Ensure returned node names are unique.
	(org-texinfo-headline): Only add @node command where it makes sense.

	* ox-texinfo.el (org-texinfo--sanitize-menu)
	(org-texinfo--sanitize-content): Fix docstrings.

	* ox-texinfo.el (org-texinfo--normalize-headlines): Make sure a
	blank line always follows nodes.

	* ox-texinfo.el (org-texinfo-make-menu): Change signature.
	Remove some intermediate functions.  Generate the full master menu when
	asked.
	(org-texinfo--build-menu): Use a simpler algorithm.
	(org-texinfo--format-entries): Fix entries when both node and title
	are different.
	(org-texinfo--menu-entries): Rename from `org-texinfo--generate-menu-list'.
	(org-texinfo-headline): Move menu handling to next function.
	(org-texinfo-section): Handle menu for current parent.
	(org-texinfo--menu-headlines, org-texinfo--generate-detailed):
	Remove functions.
	(org-texinfo--normalize-headlines): New function.

	* ox-texinfo.el (org-texinfo-headline): Fix @appendix command.

	* ox-texinfo.el (org-texinfo-headline): Do not sanitize heading
	text for sectioning command.

	* ox-texinfo.el (org-texinfo--generate-menu-list): ":COPYING: nil"
	is expected to be equivalent to no COPYING property at all.

	* ox-texinfo.el (org-texinfo-item): Fix blank lines between items.

	* ox-texinfo.el (org-texinfo-plain-list): Fix format string.
	Small refactoring.

	* ox-texinfo.el (texinfo): Provide new export property.
	(org-texinfo-template): Use dedicated title for hard copy, when
	available.

	* ox-texinfo.el (org-texinfo-headline): Always obey to a non-nil
	:APPENDIX: property.  Small refactoring.

	* ox-texinfo.el (org-texinfo-verse-block): Generate somewhat
	meaningful Texinfo code instead of LaTeX.

	* ox-texinfo.el (org-texinfo-table): Remove reference to
	"verbatim" attribute.  Handle table.el tables.  Tiny refactoring.
	(org-texinfo-table--org-table, org-texinfo-table--table.el-table):
	Remove functions.
	(org-texinfo-table-column-widths): Indent code correctly.  Ignore
	special column, if any.  Add a comment about the limitation on the
	width computation.
	(org-texinfo-table-row): Small refactoring.

	* ox-texinfo.el (texinfo): Do not provide a default value for
	@setfilename value.
	(org-texinfo-filename): Remove variable.
	(org-texinfo-template): Correctly find value for @setfilename command.
	If none is possible, do not provide the command at all.

	* ox.el (org-export-to-file): Provide output file name in
	communication channel, through :output-file property.

	* ox-texinfo.el (org-texinfo-template): Do not hardcode "Manual"
	in top node.

	* ox-texinfo.el (org-texinfo-classes): Change default value.
	Update docstring.
	(org-texinfo-template): Insert header string from current class after
	"@settitle" command.  Always provide "\input texinfo" at the beginning
	of the output.

	* ox-texinfo.el (org-texinfo-template): Remove spurious blank
	lines in output.  Refactor code.

	* ox-texinfo.el (org-texinfo-template): Fix multi-line subtitles.

	* ox-texinfo.el (org-texinfo-template): Make sure table of
	contents are allowed before inserting them.

	* ox-texinfo.el (org-texinfo-template): Check if copying data is
	not nil before using it.

	* ox-texinfo.el (org-texinfo-template): Fix multi-line subauthors.
	Correctly add email, when provided.  Check if author info is
	wanted first.

	* ox-texinfo.el (org-texinfo-node-description-column)
	(org-texinfo-format-drawer-function): Fix docstrings.

	* ox-texinfo.el (texinfo): Make sure comments are ignored.
	(org-texinfo-comment, org-texinfo-comment-block): Remove functions.

	* ox-texinfo.el (org-texinfo-template): Properly pad @direntry
	description.

	* org-element.el (org-element-headline-parser): Add missing
	`:post-blank' property in docstring.

	* ox-latex.el (org-latex-table-scientific-notation):
	Set appropriate value.
	(org-latex-listings-options): Fix docstring.

	* ox.el (org-export-raw-special-block-p): New function.

	* org-element.el (org-element-link-parser): Properly handle
	multi-line links according to RFC 3986 when enclosed within square
	brackets.

	* org-element.el (org-element-parse-secondary-string): Clone all
	local variables from current buffer before parsing a secondary
	string.  Small refactoring.
	(org-element-object-variables): Remove variable.

	* ox-odt.el (org-odt--format-paragraph): Change signature to
	include info.
	(org-odt-footnote-reference, org-odt-paragraph): Apply signature
	change.

	* org-clock.el (org-clocktable-indent-string): Use "\emsp" instead
	of "\__", which is not supported anymore since Org 8.0.

	* ox-odt.el (org-odt--paragraph-style): New function.
	(org-odt--format-paragraph): Use new function to get proper style
	to apply.

	* org-element.el (org-element--current-element): Fix regexp.

	* org-element.el (org-element--current-element): Fix regexp
	matching latex environments.  Discrepancy with regexp used in
	`org-element-latex-environment-parser' introduced matching errors.

	* ox-ascii.el (org-ascii--table-cell-width): Correctly export
	tables with width cookies.

	* org.el (org-insert-heading): Fix error when inserting a headline
	before first headline, with point not at bol.  Remove source block
	check for consistency with behavior after first headline.
	Tiny fix to docstring.

	* org.el (org-scan-tags): Fix typo in docstring.

	* ox.el (org-export--get-inbuffer-options): Return the empty
	string instead of nil when TITLE keywords has no value.
	(org-export--get-buffer-attributes): Do not set :title property
	early.
	(org-export--get-global-options): Do not ignore anymore nil values.
	Small refactoring.
	(org-export-as): Correctly set :title here.

	* org-list.el (org-list-repair): Fix typo in docstring.

	* ox-ascii.el (org-ascii--current-text-width): Tiny fix.

	* ox-org.el (org-org-section): Tiny refactoring.  Use appropriate
	property.

	* ox-org.el (org-org-headline): Ignore footnote sections.
	(org-org-section): New function.

	* ox-beamer.el (org-beamer-select-environment): Ignore persistent
	tags when displaying environments.

	* ox-ascii.el (org-ascii-indented-line-width): Update docstring.
	(org-ascii-paragraph): Do not apply indentation to the very first line
	of a section.

	* ox-latex.el (org-latex-inlinetask): Skip body if contents are
	empty.

	* ox-html.el (org-html-standalone-image-p): Ensure paragraph
	contains at least a link before return a non-nil value.
	Clarify docstring.

	* ox.el (org-export-data): Always return a string, as specified
	by the docstring.

	* ox-ascii.el (org-ascii--indent-string): Fix regexp to avoid
	stack overflow in regexp matcher on very long lines.

	* org-element.el (org-element-timestamp-parser): Fix docstring.

	* ox-icalendar.el (org-icalendar-include-sexps,
	org-icalendar-blocked-headline-p): Fix docstrings.
	(org-icalendar-clear-blank-lines): Fix docstring and regexp.

	* ox-icalendar.el (org-icalendar-entry):
	Use `org-icalendar-with-timestamps'.

2014-10-03  Nicolas Richard  <theonewiththeevillook@yahoo.fr>

	* org.el (org-cycle-internal-local): Don't show a trailing
	character when cycling a subtree that ends with a non-newline
	character at the end of the buffer or the narrowed region.

2014-10-03  Sebastien Vauban  <sva-news-D0wtAvR13HarG/iDocfnWg@public.gmane.org>

	* ox-ascii.el (org-ascii--box-string): Choose more universal
	Unicode characters for boxquote corners.

2014-10-03  Marco Wahl  <marcowahlsoft@gmail.com>  (tiny change)

	* org-agenda.el (org-agenda-bulk-mark)
	(org-agenda-bulk-mark-regexp, org-agenda-bulk-toggle-all):
	Fix org-agenda-bulk-mark-all when time-grid is shown.

2014-06-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org-compat.el (activate-mark): Set transient-mark-mode buffer-locally.

2014-06-22  Mario Lang  <mlang@delysid.org>

	* org-list.el (org-list-insert-item): The the -> the.

	* org-bibtex.el (org-bibtex-fields): The the -> the.

2013-06-22  Dmitry Antipov  <dmantipov@yandex.ru>

	* ob-core.el (org-babel-insert-result): Prefer point-min-marker
	and point-max-marker.
	* org-mouse.el (org-mouse-do-remotely): Prefer point-marker
	to copy-marker of point.

2014-05-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org-compat.el (org-font-lock-ensure): New function.
	* ox-odt.el (org-odt-do-format-code):
	* ox-html.el (org-html-fontify-code):
	* org.el (org-fontify-like-in-org-mode):
	* org-src.el (org-src-font-lock-fontify-block):
	* org-clock.el (org-clock-get-clocktable): Use it.
	* ox-org.el (org-org-publish-to-org): Use it.  Avoid using find-file
	from Elisp.

2014-05-12  Eric Schulte  <eric.schulte@gmx.com>

	* ob-screen.el (org-babel-screen-session-write-temp-file)
	(org-babel-screen-test):
	Use unpredictable names for temporary files.  (Bug#17416)

2014-04-22  Aaron Ecay  <aaronecay@gmail.com>

	* org-src.el (org-edit-src-exit): Place an undo boundary before
	writing changes back to parent buffer.

2014-04-22  Achim Gratz  <Stromeko@Stromeko.DE>

	* ob-gnuplot.el (org-babel-gnuplot-process-vars):
	`org-babel-gnuplot-table-to-data´ expects a table, so we need to
	construct one when Babel hands us a vector.

	* ob-ref.el (org-babel-ref-parse):
	If `org-babel-current-src-block-location' is a marker, it can be from
	another buffer, use marker-position instead in this case.

2014-04-22  Arun Persaud  <apersaud@lbl.gov>  (tiny change)

	* org-src.el (org-edit-src-exit): Don't add indentation on empty lines.

2014-04-22  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-insert-heading): Fix behavior when point is at the
	beginning of a heading or a list item.  Enhance docstring.

	* ox-html.el (org-html-infojs-install-script): Don't install
	infojs scripts when #+INFOJS_OPT: is empty.

	* org.el (org-mode): Fix the use of `org-*-element' functions for
	C-M-a and C-M-e but fix C-M-e.

	* org-agenda.el (org-agenda-search-view): Fix tag.

	* org.el (org-check-before-invisible-edit): Don't just cycle, show
	the subtree, as cycling may leave the current heading folded.
	(org-contextualize-validate-key): Fix wrong test.

	* org-bibtex.el (org-bibtex-headline): Don't throw an error when
	trying to add a keyword field to a BibTeX entry that is not known
	by BibTeX or defined by the user.
	(org-bibtex, org-bibtex-no-export-tags): Fix docstrings.

	* ox-latex.el (org-latex-src-block): Fix wrong propagation of
	labels and captions when using the listings environment.

	* org.el (org-sort-entries): Fix the number of blank lines to
	keep for the last entry to sort.

	* org-clock.el (org-clock-put-overlay): Fix display when
	`org-indent-mode' is on.

	* org.el (org-sort-entries): Allow to sort by clocking time.

	* org-agenda.el (org-agenda-finalize): Apply all filters
	correctly.

	* org.el (org-update-dblock): Use `save-excursion' instead of
	`save-window-excursion' so that blocks can edit other windows and
	change the window layout.

	* org-agenda.el (org-agenda-mode): Disable `indent-tabs-mode'.
	(org-agenda-dim-blocked-tasks): Make overlays intangible.
	(org-agenda-show-new-time): Fix bug when deleting a timestamp
	right after changing it.
	(org-agenda-check-for-timestamp-as-reason-to-ignore-todo-item)
	(org-agenda-get-sexps, org-agenda-filter-by-regexp)
	(org-agenda-filter-top-headline-apply): Fix indentation.

	* org.el (org-cycle): Try `org-try-cdlatex-tab' before trying
	to edit/move as in a table.

	* org-agenda.el (org-agenda-show-new-time): Don't use
	`move-beginning-of-line' as it is slower and not needed.

	* org-compat.el (org-move-to-column): Temporarily set
	`buffer-invisibility-spec' more accurately.

	* ox-latex.el (org-latex-text-markup-alist): Use \ul{...} for
	underlining instead of \uline{...} as requiring the hyperref
	package makes \uline{...} unusable on headline.

	* org.el (org-latex-default-packages-alist): Add the "soul"
	package.

	* org.el (org-refresh-properties): Don't add the property to
	the whole subtree, only to the part between the beginning of
	the headline and the end of the "content", before any other
	headline.  This fix a bug about properties displayed as
	inherited in the agenda, where Org properties are checked
	against text properties.

	* ox-latex.el (org-latex--text-markup): Replace newlines by
	whitespaces in \verb constructs.

	* org-agenda.el (org-agenda-filter-hide-line): Hide from the
	beginning of the line to the beginning of the next line.
	(org-agenda-show-new-time): Use `move-beginning-of-line' and
	`move-end-of-line'.
	(org-agenda-drag-line-forward): Adapt to the new definition of
	hidden filtered lines.

	* org-compat.el (org-move-to-column): Always ignore invisible
	text in agenda buffer, and when there is both a bracket link
	and '(org-link) as a member of `buffer-invisibility-spec'.
	Add a docstring.

	* org.el (org-align-tags-here): Add docstring and remove useless
	arguments when calling `org-move-to-column'.

	* org-table.el (org-table-copy-down)
	(org-table-find-dataline, org-table-move-row)
	(org-table-insert-hline, org-table-kill-row):
	* org-agenda.el (org-agenda-next-item)
	(org-agenda-previous-item, org-agenda-todo)
	(org-agenda-priority, org-agenda-show-new-time)
	(org-agenda-clock-in, org-agenda-clock-out): Remove useless
	arguments when calling `org-move-to-column'.

	* org.el (org-refile): Fix calling with a numeric prefix argument
	of 3 to refile and keep.

	* org-clock.el (org-clock-get-table-data): When :link is `t' in
	the clocktable parameters, bracket links in the clocktable should
	only contain their description, other C-c C-o will try to open the
	bracket link at point instead of the headline.

	* org-agenda.el (org-agenda-todo): Always restore the window state
	after `org-agenda-change-all-lines' has been called.
	(org-agenda-open-link): Don't throw an error when trying to open a
	link when the point is on a place that is not associated with a
	buffer.

	* ox-latex.el (org-latex-link): Escape `%' characters.

	* org.el (org-entry-get-with-inheritance): Remove wrong quote.
	(org-entry-get): Only try to combine file properties with local
	properties when the property drawer contains such local property,
	not when the property drawer exists.

	* ox-latex.el (org-latex-link):
	* ox-html.el (org-html-link):
	* ox-beamer.el (org-beamer-link): Fix links to radio targets.

	* ox-ascii.el (org-ascii-link): For links to a radio target, use
	the link, not the target.

	* org.el (org-do-emphasis-faces): Explicitly prevent nested
	emphasis.
	(org-insert-heading): Don't remove whitespaces following an empty
	headline.

	* org-timer.el (org-timer-stop): Set `org-timer-current-timer' to
	nil.

	* org.el (org-store-link): Ensure desc is not nil before matching
	a regexp against it.  Fall back on an empty string when no
	description is available.

	* org-agenda.el (org-agenda-list-stuck-projects): Bugfix: set
	`org-agenda-buffer-name'.

	* org-capture.el (org-capture-finalize): Ensure to widen the
	buffer when the target buffer is not initially narrowed.

	* org-compat.el (org-move-to-column): Fix bug about ignoring
	bracket links visibility status in tables with S-RET.

	* org-src.el (org-edit-src-find-region-and-lang): Check if we are
	in a table.el table last.

	* org.el (org-delete-property): Don't suggest to delete the
	CATEGORY property when the category is not explicitly set in the
	property drawer.  Also enforce matching when completing.
	(org-insert-heading): Fix regression: with two universal prefixes,
	insert heading at the end of the subtree.
	(org-insert-todo-heading): Bugfix: only enforce the first TODO
	state when arg is '(4).

	* org-agenda.el (org-agenda-skip-subtree-if): Fix docstring.

	* org.el (org-contextualize-validate-key): Fix bug: perform the
	check even when (buffer-file-name) returns `nil'.

	* org-colview.el (org-columns-display-here): Let-bind `fm'.

	* org.el (org-emphasis-alist): Use `org-verbatim' for =text=
	and `org-code' for ~text~.
	(org-open-link-marker): Fix typo in docstring.

	* org-colview.el (org-columns-display-here): Fix the column
	view for numbers with a format specifier (e.g. {+; %5.1f}).

	* org-src.el (org-edit-src-code): Throw a warning instead of
	an error when loading the mode fails, otherwise the user is
	left with unusable buffers.

	* org-table.el (org-table-copy-down)
	(org-table-find-dataline, org-table-move-row)
	(org-table-insert-hline, org-table-kill-row):
	Use `org-move-to-column' with the IGNORE-INVISIBLE arg set to `t', so
	that abbreviated rows don't interfer with setting the cursor back
	at the correct position.

	* org.el (org-agenda-prepare-buffers): Use `save-excursion'
	instead of `save-window-excursion'.
	(org-file-contents): Return an empty string instead of the
	message.
	(org-open-at-point): Fix bug when opening a plain link followed by
	a bracket link.
	(org-ctrl-c-ctrl-c): Fix behavior when hitting C-c C-c on LaTeX
	formulas in tables.
	(org-refile--get-location): New internal function using a wider
	set of possible refile locations.
	(org-refile-get-location): Use it.
	(org-refile): Fix bug when refiling the last subtree of the
	buffer: don't leave out the last character.
	(org-sort-entries): Restore the point location when there is
	nothing to sort.

	* org-table.el (org-table-field-info): Throw a user error when not
	at a table.

	* org-agenda.el (org-agenda-drag-line-forward):
	Call `org-agenda-mark-clocking-task' when done.
	(org-agenda-mark-clocking-task): Small refactoring.

	* org-compat.el (org-set-transient-map): Alias pointing at
	`set-transient-map' if defined, at `set-temporary-overlay-map'
	otherwise.

	* org-agenda.el (org-agenda-next-item)
	(org-agenda-previous-item, org-agenda-toggle-archive-tag)
	(org-agenda-todo, org-agenda-priority, org-agenda-clock-in)
	(org-agenda-clock-out): Put the cursor back on the correct
	column, when possible.
	(org-agenda-todo): When `org-clock-out-when-done' is `t', also
	remove the current clock overlay.

	* org.el (org-format-latex-options): Fix docstring.

	* ox.el (org-export--get-subtree-options): When using the headline
	as a title for a subtree export, only take the true heading, no
	TODO keyword, no priority cookie, no tag.

	* org.el (customize-package-emacs-version-alist): Fix Org version
	for Emacs 24.4.

	* org.el (org-demote): Ignore invisible text when aligning tags.
	(org-set-tags): When JUST-ALIGN is 'ignore-column, ignore
	invisible text when restoring the cursor to the correct column.

	* ob-python.el (org-babel-python-var-to-python): Bugfix: Strip
	properties before formatting the results.

	* org-agenda.el (org-agenda-regexp-filter-preset): Fix typo in
	docstring.
	(org-agenda-reapply-filters): New function.
	(org-agenda-drag-line-forward): Rewrite to fix a bug when used
	in filtered agendas.
	(org-agenda-drag-line-backward): Rewrite using
	`org-agenda-drag-line-forward'.

	* ob-table.el (org-sbe): Rename from `sbe'.

	* org.el (org-store-link): When a link has been stored, always
	returns it.

	* ob-python.el (org-babel-python-var-to-python): Fix code typo.

	* org-entities.el (org-entities-help): Prevent the display of
	pretty entities, as this help buffer is meant to list literal
	strings, not utf-8 representations.

2014-04-22  Benjamin Drieu  <bdrieu@april.org>

	* org.el (org-store-link): Fix selection of the function to store
	the link.

2014-04-22  Ilya Shlyakhter  <ilya_shl@alum.mit.edu>

	* org.el (org-entry-get-with-inheritance): Temporarily let-bind
	`org-file-properties', `org-global-properties' and
	`org-global-properties-fixed' to nil before calling
	`org-entry-get' on entries up the hierarchy from the queried
	entry.

2014-04-22  Justin Gordon  <justin.gordon@gmail.com>

	* ox-md.el (org-md-separate-elements): Fix blank line insertion
	between elements.

	* ox-md.el (org-md-inner-template): New function.

2014-04-22  Leonard Randall  <leonard.a.randall@gmail.com>  (tiny change)

	* org-bibtex.el (org-bibtex-headline): Fix insertion of keywords
	of unknown BibTeX entries.

2014-04-22  Markus Hauck  <markus1189@gmail.com>  (tiny change)

	* org-agenda.el (org-agenda-get-scheduled):
	If `org-agenda-skip-scheduled-if-deadline-is-shown' is set to
	'repeated-after-deadline, still show tasks without any deadline

2014-04-22  Michael Brand  <michael.ch.brand@gmail.com>

	* org-table.el (org-table-fix-formulas): Handle multiple #+TBLFM
	lines with `forward-line'.

2014-04-22  Michael Weylandt  <michael.weylandt@gmail.com>  (tiny change)

	* ox-latex.el (org-latex-export-to-latex): Downcase the language
	name when using minted highlighting for src block exports.

2014-04-22  Nick Dokos  <ndokos@gmail.com>

	* org-mobile.el (org-mobile-create-index-file): delete :grouptags
	entries from tags list when creating the org-mobile index file.

2014-04-22  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ox.el (org-export-copy-to-kill-ring): Comply to docstrings
	standards.

	* org.el (org-sparse-tree): Fix code typo.  Small refactoring.

	* ox-latex.el (org-latex-link):
	* ox-html.el (org-html-link):  Do not expand absolute file names
	and do not try to fix hierarchy part, as it is already taken care of
	at the parser level.

	* ox-md.el (org-md-link): Ditto.  Also fix absolute file names.

	* ox-odt.el (org-odt-link):
	* ox-man.el (org-man-link):
	* ox-texinfo.el (org-texinfo-link):
	* org-element.el (org-element-link-parser): Fix ill-defined "file"
	type links.  Expand absolute file names in the process.

	* org.el (org-make-link-regexps): Use `regexp-opt' instead of
	`mapconcat' and `regexp-quote'.

	* ox-html.el (org-html-link):
	* ox-latex.el (org-latex-link):
	* ox-man.el (org-man-link):
	* ox-odt.el (org-odt-link):
	* ox-html.el (org-html-link):
	* ox-latex.el (org-latex-link):
	* ox-man.el (org-man-link):
	* ox-odt.el (org-odt-link):
	* ox-texinfo.el (org-texinfo-link): Append "//" after some link
	types.

	* ox-md.el (org-md-link):
	* org.el (org-make-link-regexps): Allow optional double slashes
	after type.  Small refactoring.

	* org-element.el (org-element-headline-parser): Tiny refactoring.

	* org-element.el (org-element-headline-parser): Correctly parse
	blank lines after a headline.

	* org-element.el (org-element-table-cell-parser)
	(org-element-table-cell-successor): Recognize cell even when last
	vertical bar is missing.

	* ox-md.el (org-md-example-block): handle switches and references
	in source blocks.

	* org.el (org-latex-packages-alist)
	(org-latex-default-packages-alist): Update docstrings.

	* ox-ascii.el (org-ascii--unique-links): Ignore white spaces when
	uniquifying links in section.

	* ox-odt.el (org-odt-template): Ignore blank titles.

	* ox-publish.el (org-publish-find-title): Fix (invalid-read-syntax
	"#").

	* ox-ascii.el (org-ascii-link):
	* ox-beamer.el (org-beamer-link):
	* ox-html.el (org-html-link):
	* ox-latex.el (org-latex-link):
	* ox-md.el (org-md-link):
	* ox-odt.el (org-odt-link): Update radio target export according
	to recent changes.

	* org-element.el (org-element-all-successors)
	(org-element-object-restrictions): Prioritize `link' over other
	successors in order to find radio links starting with another
	syntax object (e.g., an entity).  Also allow text markup within
	radio targets.
	(org-element-link-parser): Add contents to radio targets.

	* org.el (org-make-target-link-regexp): Fix regexp so it can match
	targets starting with an Org object (e.g., an entity).
	(org-ctrl-c-ctrl-c): Fix function when applied on an object contained
	within a radio target.

	* org.el (org-mode): Change "\" and "~" characters syntax from
	`punctuation' to `symbol' so they are on par with other characters
	used in Org syntax (e.g., "/", "*"...).

	* ox-beamer.el (org-beamer-publish-to-pdf):
	* ox-latex.el (org-latex-publish-to-pdf): Ensure ".tex" file is
	generated in the same directory as the ".org" file.

	* ox-latex.el (org-latex-headline): Hard-code "\underline" in
	sections because "\uline" ("ulem" package) returns an error and
	"\ul" ("soul" package) doesn't support chinese characters.

	* ox-ascii.el (org-ascii-link): Correctly handle case mismatch
	between radio targets and radio links.

	* org-element.el (org-element-link-parser): "radio" links have
	their path downcased to avoid introducing case mismatch with their
	relative radio target.  With this change it is also necessary to
	add contents to them, since `:path' property no longer matches
	real value of the link.
	(org-element-radio-target-parser): Downcase value as explained
	above.  Store the initial value in a new `:raw-value' property.

	* org-element.el (org-element-context): Fix parsing of bold
	objects at the beginning of a headline.

	* org-element.el (org-element-context): Fix timestamps parsing.

	* ox-beamer.el (org-beamer-item): Insert the export snippet right
	after the first \item, not all of them.

	* org-element.el (org-element--list-struct): Fix regexp.

	* org-element.el (org-element-inlinetask-parser): Fix parsing when
	regular and degenerate inlinetasks are mixed in the section.

	* ox-md.el (org-md-link): Generate md links to other Org files
	instead of html links.  Do not confuse caption and alt-text.
	Provide "img" as default alt-text.

	* org-element.el (org-element-normalize-contents): Do not ignore
	empty lines when an object follows.
	(org-element-interpret-data): Do not remove properties by
	side-effect when interpreting a string, as it also removes them
	from the parse tree, making the string unusable without its
	:parent property.

	* ob-exp.el (org-babel-exp-process-buffer): Also check
	`org-src-preserve-indentation' to know when to preserve indentation.
	(org-babel-exp-code-template): Include switches in template.
	(org-babel-exp-code): Provide %switches placeholder.

	* ox-latex.el (org-latex-plain-list): Do not automatically
	enclose value for :options attribute within square brackets.
	Instead, append them verbatim next to the block name, as special
	blocks do.

	* ob-exp.el (org-babel-exp-code): Fix export of src blocks with
	flags.
	(org-babel-exp-process-buffer): Make processing more robust when
	results are inserted before source block or when source block is
	followed by multiple blank lines.

	* ox.el (org-export-insert-default-template): Only insert
	keywords and options relatives to the selected back-end.
	Ignore those relatives to its parent in the case of a derived back-end.

	* ox-beamer.el: Remove unnecessary package definitions in default
	class.

	* ox-latex.el (org-latex-headline, org-latex-item): Fix items
	starting with a square bracket.

	* org.el (org-mode-restart): Fix turning off `org-indent-mode'
	when necessary.
	(org-get-previous-line-level): Do not call `org-current-level'
	twice unless necessary.  Also, avoid using `line-number-at-pos'
	when the information needed is to know if point is in the first
	line of the visible part of the buffer.

	* ob-core.el (org-babel-get-inline-src-block-matches): Do not
	compute line number if all is needed is to know if we're on the
	first one.

	* ox-md.el (org-md-item): Do not return an error when exporting
	an empty item.

	* ox-beamer.el (org-beamer-select-environment): Function doesn't
	work if fast tag selection is disabled, so make sure it is always
	on, independently on user's configuration.

2014-04-22  Nikolai Weibull  <now@disu.se>  (tiny change)

	* org.el (org-mode): Add guard around set-face-foreground.

2014-04-22  Rasmus Pank Roulund  <w530@pank.eu>

	* ox-html.el (org-html-html5-elements): Drop reference to hgroup.

2014-04-22  Rick Frankel  <rick@rickster.com>

	* ox-html.el (org-html-link): Unescape org-escaped links an
	re-escape for html (browser).

2014-04-22  Sacha Chua  <sacha@sachachua.com>

	* org.el (org-refresh-properties): Don't throw an error when
	reaching the end of the buffer.

2014-04-22  Stefan-W. Hahn  <stefan.hahn@s-hahn.de>  (tiny change)

	* org-bibtex.el (org-bibtex-read): Check string length before
	using aref.

2014-04-22  Yasushi SHOJI  <yashi@atmark-techno.com>

	* ox-ascii.el (org-ascii--current-text-width): Convert `length'
	to `string-width'.
	(org-ascii--build-title, org-ascii--build-toc)
	(org-ascii--list-listings, org-ascii--list-tables)
	(org-ascii-template--document-title)
	(org-ascii-inner-template, org-ascii-format-inlinetask-default)
	(org-ascii-format-inlinetask-default, org-ascii-item
	(org-ascii--table-cell-width, org-ascii-table-cell)
	(org-ascii--current-text-width): Likewise.

2014-02-25  Glenn Morris  <rgm@gnu.org>

	* org-version.el (org-odt-data-dir):
	Remove incorrect, duplicate definition.  (Bug#16734)

2014-01-08  Paul Eggert  <eggert@cs.ucla.edu>

	Spelling fixes.
	* org-irc.el (org-irc-ellipsify-description): Rename from
	org-irc-elipsify-description.  All uses changed.

2013-01-07  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-clock-cancel-hook)
	(org-clock-leftover-time): Fix typo in docstring.

	* ox-odt.el (org-odt--frame): Add a draw:name property to the
	draw:frame tag.
	(org-odt-format-label): Don't use short-caption at all.

	* org-rmail.el (org-rmail-follow-link): Don't raise an error when
	no article is matched.

	* org.el (org-set-tags): Ignore invisible text when restoring
	cursor position.
	(org-refile-get-location): Check for a refile position when the
	position is not nil, otherwise allow to create the parent node if
	the user requests it.
	(org-refile-allow-creating-parent-nodes): Fix typo in
	docstring.
	(org-entry-get): Minor docstring enhancement.
	(org-set-startup-visibility): Bugfix.
	(org-shiftcontrolup, org-shiftcontroldown):
	When `org-support-shift-select' is not `nil', let-bind it to nil if
	point is on a clock log.  Otherwise throw an error.

	* ob-lob.el (org-babel-lob-files): Fix custom type.
	(org-babel-lob-ingest): Small docstring fix.

	* org-agenda.el (org-cmp-ts): Fix bug: interpret `late' as
	`later than any date' instead of `later than today'.

	* org.el (org-do-emphasis-faces): Handle false positives by
	restarting the re-search one char after the beginning of the
	match, not one char before its ending.
	(org-entry-put): Check that the value provided is a string.  If it
	is nil, convert it to the empty string.

	* ob-latex.el (org-babel-latex-htlatex-packages): Use repeat
	instead of list as the defcustom type.

	* ox.el (org-export-with-creator):
	* org.el (org-loop-over-headlines-in-active-region)
	(org-mouse-1-follows-link, org-provide-todo-statistics):
	* org-agenda.el (org-agenda-custom-commands-local-options)
	(org-agenda-start-with-log-mode)
	(org-agenda-show-inherited-tags): Don't quote const values.

	* ox-texinfo.el (org-texinfo-def-table-markup):
	* org-inlinetask.el (org-inlinetask-show-first-star):
	* ob-maxima.el (org-babel-maxima-command): Add type.

	* org-table.el (org-table-fix-formulas): Handle multiple
	#+tblfm: lines.

	* ox.el (org-export-to-file): Fix typo in docstring.

	* org.el (org-self-insert-command)
	(orgtbl-self-insert-command): Change the value of the
	`delete-selection' property to allow other commands like
	`electric-pair-will-use-region' to be run before deletion.

	* org-attach.el (vc-git): Require.
	(org-attach-commit): Check whether git is installed.

2013-01-07  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ox-icalendar.el (org-icalendar--combine-files): Make sure
	anniversaries do not end up in *Message* buffer instead of the ICS
	file.

	* ox-html.el: Clean up "FIXME" comments.

	* ox-publish.el (org-publish-resolve-external-fuzzy-link):
	Fix docstring.

	* ox.el (org-export-smart-quotes-regexps): Fix smart quote
	detection when it is followed by an open parenthesis syntax class.

	* org-element.el (org-element-inline-babel-call-successor):
	Use original regexp to stay up-to-date with Babel changes.
	(org-element--affiliated-re): Fix affiliated keyword regexp.

	* ox-org.el (org-org-identity): Since back-end specific keywords
	are stripped from output, also remove attr_backend keywords.
	(org-babel-exp-process-buffer): Fix duplicate evaluation with
	:wrap src.
	(org-babel-exp-non-block-elements): Remove function.

2013-01-07  Ted Wiles  <thewiles@wharton.upenn.edu>  (tiny change)

	* org-habit.el (org-habit-parse-todo): Match all TODO keywords,
	not just "TODO".

2013-01-07  Miguel Ruiz  <rbenit68@yahoo.es>  (tiny change)

	* ob-gnuplot.el (org-babel-gnuplot-quote-tsv-field): Fix code
	typo.

2013-01-07  Vladimir Lomov  <lomov.vl@gmail.com>  (tiny change)

	* ox-html.el (org-html-style-default): New classes caption.t-above
	and caption.t-bottom.
	(org-html-table): Use new classes.

2013-12-23  Chong Yidong  <cyd@gnu.org>

	* org.el (orgstruct-make-binding): Call set-transient-map instead
	of old name set-temporary-overlay-map.

2013-12-06  Achim Gratz  <Stromeko@Stromeko.DE>

	* org-crypt.el: Declare `epg-context´.
	(org-encrypt-string): Correct indentation.

	* org.el (org-version): Replace `_version´ by `version1´.

2013-12-06  Alexander Vorobiev  <alexander.vorobiev@gmail.com>  (tiny change)

	* org-compat.el (org-get-x-clipboard): Use w32-get-clipboard-data
	to get the clipboard data under Windows.

2013-12-06  Bastien Guerry  <bzg@gnu.org>

	* ox.el (org-export-with-sub-superscripts):
	* org.el (org-use-sub-superscripts): Fix version and enhance
	docstring again.

	* ox.el (org-export-with-sub-superscripts):
	* org.el (org-use-sub-superscripts): Enhance docstrings.

	* org-macs.el (org-autoload): Delete.

	* org-docview.el ("docview"): Fix declarations and require
	doc-view directly.

	* org-id.el (org-id-copy)
	(org-id-get-with-outline-path-completion)
	(org-id-get-with-outline-drilling, org-id-new):

	* org-colview.el:
	(org-colview-initial-truncate-line-value)
	(org-columns-open-link, org-string-to-number):
	* org-clock.el:
	(org-clock-put-overlay, org-count-quarter, org-clock-loaded):
	* org-archive.el (org-get-local-archive-location):
	* org-agenda.el (org-agenda-todo-custom-ignore-p):
	Autoload.

	* org.el (org-return-follows-link):
	* ob-python.el (org-babel-python-command): Don't use :set.

	* ox-odt.el (org-odt-content-template-file): Fix version.

	* ox-texinfo.el (org-texinfo-filename): Fix default value.
	(org-texinfo-format-headline-function): Use 'ignore as the
	default value.
	(org-texinfo-format-drawer-function): Use a function as the
	default value.  Update docstring.
	(org-texinfo-drawer): Always use
	`org-texinfo-format-drawer-function' as it is now a function
	by default.
	(org-texinfo-headline):
	Compare `org-texinfo-format-headline-function' against 'ignore.
	(org-texinfo-inlinetask):
	Compare `org-texinfo-format-inlinetask-function' against 'ignore.

	* ox-odt.el (org-odt-format-drawer-function): Use a function as
	the default value.  Update docstring.
	(org-odt-format-headline-function)
	(org-odt-format-inlinetask-function): Fix default value.
	(org-odt-drawer): Always use `org-odt-format-drawer-function'
	as it is now a function by default.
	(org-odt-format-headline--wrap):
	Compare `org-odt-format-headline-function' against 'ignore.

	* ox-latex.el (org-latex-format-drawer-function): Use a function
	as the default value.  Update docstring.
	(org-latex-format-inlinetask-function): Fix default value.
	(org-latex-drawer): Always use
	`org-latex-format-drawer-function' as it is now a function by
	default.
	(org-latex-inlinetask):
	Compare `org-latex-format-inlinetask-function' against 'ignore.

	* ox-html.el (org-html-format-drawer-function): Use a function as
	the default value.  Update docstring.
	(org-html-format-headline-function)
	(org-html-format-inlinetask-function): Fix default value.
	(org-html--format-toc-headline)
	(org-html-format-headline--wrap):
	Compare `org-html-format-headline-function' against 'ignore.
	(org-html-inlinetask):
	Compare `org-html-format-inlinetask-function' against 'ignore.

	* ox-ascii.el (org-ascii-format-drawer-function): Use a
	function as the default value.  Update docstring.
	(org-ascii-drawer): Always use
	`org-ascii-format-drawer-function' as it is now a function by
	default.
	(org-ascii-format-inlinetask-default): New function.
	(org-ascii-format-inlinetask-function):
	Use `org-ascii-format-inlinetask-default' as the default.

	* org.el (org-mouse-1-follows-link): Use :set to set the default
	value.  Update custom type.
	(org-log-note-headings): Fix order or list items in the custom
	type.
	(orgstruct-heading-prefix-regexp): Use an empty string as the
	default value.  Use 'regexp as the custom type.
	(orgstruct-make-binding): Tiny docstring enhancement.
	Assume `orgstruct-heading-prefix-regexp' is a string.

	* org-agenda.el (org-agenda-search-view-max-outline-level):
	Set default value to 0.  Update docstring.
	(org-agenda-deadline-leaders): Fix custom type.
	(org-search-view):
	Assume `org-agenda-search-view-max-outline-level' is a number.

	* ob-ruby.el (org-babel-ruby-nil-to): Fix custom type.

	* ob-python.el (org-babel-python-mode): Use :set to set the
	default value.
	(org-babel-python-None-to): Fix custom type.

	* ob-plantuml.el (org-plantuml-jar-path): Fix default value.
	(org-babel-execute:plantuml): Assume `org-plantuml-jar-path' is a
	string.

	* ob-latex.el (org-babel-latex-htlatex): Fix default value.
	(org-babel-latex-htlatex-packages): Fix custom type.
	(org-babel-execute:latex): Assume `org-babel-latex-htlatex' is a
	string.

	* ox-odt.el (org-odt-display-outline-level): Fix version.

	* ox-odt.el (org-odt-inline-formula-rules)
	(org-odt-inline-image-rules, org-odt-use-date-fields): Add version
	and package-version.

	* ox-html.el (org-html-format-drawer-function)
	(org-html-format-headline-function)
	(org-html-format-inlinetask-function)
	(org-html-creator-string): Add version and package-version.

	* ox-html.el (org-html-text-markup-alist): Fix version.

	* org-agenda.el (org-agenda-set-restriction-lock): Autoload.

	* ob-calc.el (org--var-syms): Rename from `var-syms'.

	* ob-lilypond.el (ly-compile-lilyfile): Remove redundant
	let-binding.

	* ob-table.el (sbe): Move debug declaration.

	* org-clock.el (org--msg-extra): Rename from `msg-extra'.

2013-12-06  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-ctrl-c-ctrl-c): When point is on an unsupported
	object, look for something to do at a higher level instead of
	bailing out.

	* ox-html.el (org-html-format-latex): Add an argument.  Ensure
	latex header is the same as specified in the original buffer when
	exporting a LaTeX fragment or environment.
	(org-html-latex-environment, org-html-latex-fragment):
	Apply signature change.

	* ox-publish.el (org-publish-cache-ctime-of-src): Return an error
	when publishing a non-existent file.

	* org-element.el (org-element-paragraph-separate): More accurate
	regexp.

	* org.el (org-entry-get): Widen buffer in order to retrieve
	properties, as `org-entry-properties' and
	`org-entry-get-with-inheritance' already do.

	* ox-html.el (org-html--format-toc-headline): Add missing headline
	number in TOC entries.

	* org.el (org-entry-properties): Ignore narrowing when retrieving
	current headline properties.

2013-12-06  Thierry Volpiatto  <thierry.volpiatto@gmail.com>  (tiny change)

	* org-crypt.el (org-encrypt-string, org-encrypt-entry)
	(org-decrypt-entry): Fix warning.

2013-11-17  Paul Eggert  <eggert@cs.ucla.edu>

	Spelling fixes.
	* ob-python.el (org-babel-python-with-earmuffs):
	Rename from org-babel-python-with-earmufs.  All uses changed.
	(org-babel-python-without-earmuffs):
	Rename from org-babel-python-without-earmufs.  All uses changed.

2013-11-12  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-set-restriction-lock): Autoload.

2013-11-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	Address some byte-compiler warnings.
	* ob-calc.el (org--var-syms): Rename from `var-syms'.
	* ob-lilypond.el (ly-compile-lilyfile): Remove redundant let-binding.
	* ob-table.el (sbe): Move debug declaration.
	* org-clock.el (org--msg-extra): Rename from `msg-extra'.
	* org.el (org-version): Avoid var name starting with _.
	(org-inhibit-startup, org-called-with-limited-levels)
	(org-link-search-inhibit-query, org-time-was-given)
	(org-end-time-was-given, org-def, org-defdecode, org-with-time):
	* org-colview.el (org-agenda-overriding-columns-format):
	* org-agenda.el (org-agenda-multi, org-depend-tag-blocked)
	(org-agenda-show-log-scoped):
	* ob-python.el (py-which-bufname, python-shell-buffer-name):
	* ob-haskell.el (org-export-copy-to-kill-ring):
	* ob-exp.el (org-link-search-inhibit-query):
	* ob-R.el (ess-eval-visibly-p):
	* ob-core.el (org-src-window-setup): Declare before use.
	(org-babel-expand-noweb-references): Remove unused `blocks-in-buffer'.
	* ox-odt.el (org-odt-hfy-face-to-css):
	* org-src.el (org-src-associate-babel-session, org-src-get-lang-mode):
	* org-bibtex.el (org-bibtex-get, org-bibtex-ask, org-bibtex)
	(org-bibtex-check):
	* ob-tangle.el (org-babel-tangle, org-babel-spec-to-string)
	(org-babel-tangle-single-block, org-babel-tangle-comment-links):
	* ob-table.el (sbe):
	* ob-sqlite.el (org-babel-sqlite-expand-vars):
	* ob-sql.el (org-babel-sql-expand-vars):
	* ob-shen.el (org-babel-execute:shen):
	* ob-sh.el (org-babel-execute:sh, org-babel-sh-evaluate):
	* ob-scala.el (org-babel-scala-evaluate):
	* ob-ruby.el (org-babel-ruby-table-or-string)
	(org-babel-ruby-evaluate):
	* ob-python.el (org-babel-python-table-or-string)
	(org-babel-python-evaluate-external-process)
	(org-babel-python-evaluate-session):
	* ob-picolisp.el (org-babel-execute:picolisp):
	* ob-perl.el (org-babel-perl-evaluate):
	* ob-maxima.el (org-babel-execute:maxima):
	* ob-lisp.el (org-babel-execute:lisp):
	* ob-java.el (org-babel-execute:java):
	* ob-io.el (org-babel-io-evaluate):
	* ob-haskell.el (org-babel-execute:haskell):
	* ob-fortran.el (org-babel-execute:fortran):
	* ob-exp.el (org-babel-exp-code):
	* ob-emacs-lisp.el (org-babel-execute:emacs-lisp):
	* ob-ditaa.el (org-babel-execute:ditaa):
	* ob-core.el (org-babel-execute-src-block, org-babel-sha1-hash)
	(org-babel-parse-header-arguments, org-babel-reassemble-table)
	(org-babel-goto-src-block-head, org-babel-mark-block)
	(org-babel-expand-noweb-references, org-babel-script-escape)
	(org-babel-process-file-name):
	* ob-clojure.el (org-babel-execute:clojure):
	* ob-calc.el (org-babel-execute:calc):
	* ob-awk.el (org-babel-execute:awk):
	* ob-R.el (org-babel-expand-body:R):
	* ob-C.el (org-babel-C-execute): Avoid deprecated ((lambda) ...).

2013-11-12  Glenn Morris  <rgm@gnu.org>

	* ox-html.el (org-html-scripts): Add 2013 to copyright years.
	(org-html-infojs-template): Copyright holder to FSF.

2013-11-12  Aaron Ecay  <aaronecay@gmail.com>

	* ox-latex.el (org-latex-inline-image-rules): Add "svg" to
	supported filetypes.
	(org-latex--inline-image): Implement SVG files inclusion.
	(org-latex-headline): Don’t insert alternate title if identical to
	regular one.

	* ob-python.el: Update the arglist passed to `declare-function'
	for `run-python'.

	* ob-tangle.el (org-babel-tangle): Use `light' argument to
	`org-babel-get-src-block-info'.

	* ob-core.el (org-babel-execute-src-block): Return nil in case of
	`:results none'.  Also run `org-babel-after-execute-hook' in this
	circumstance.

	* org-id.el (org-id-locations-save): Bind print-(level,length) to
	nil in this function.

	* ob-R.el (org-babel-R-graphics-devices): New defvar.
	(org-babel-R-construct-graphics-device-call): Use it instead of a
	hard-coded list of graphics devices.

	* ob-core.el (org-babel-when-in-src-block): New macro.
	(org-babel-execute-src-block-maybe)
	(org-babel-expand-src-block-maybe)
	(org-babel-load-in-session-maybe, org-babel-pop-to-session-maybe):
	Use it.
	(org-babel-execute-src-block): Use `copy-tree' to prevent setf
	from modifying users variables withing let-bound `info' variable.

	* ob-exp.el (org-export-babel-evaluate): Add a 'inline-only
	option.
	(org-babel-exp-results): Implement 'inline-only for
	`org-export-babel-evaluate'.

	* org.el (org-edit-special): Use prefix arg.

	* ob-awk.el (org-babel-expand-body:awk, ob-picolisp.el)
	(org-babel-expand-body:picolisp): Remove optional arg.

	* ob-R.el (org-babel-R-initiate-session): Handle case where the
	session buffer exists, but does not have a live process.
	(org-babel-R-construct-graphics-device-call): Change file
	extension of tikz graphics files to .tikz.

	* org-src.el (org-edit-src-exit): Don't modify the undo list when
	inserting the code.

	* ox-latex.el (org-latex-plain-text): Properly escape "~" for
	LaTeX export.
	(org-latex-image-default-option): Change default value to "".
	(org-latex-image-default-width, org-latex-image-default-height):
	New variables.
	(org-latex-inline-image-rules): Make .tikz files as exportable
	with LaTeX.
	(org-latex--inline-image): Support tikz images.  Also support
	separate :width and :height parameters for images.

	* org-bibtex.el (org-bibtex-ask): Use `visual-line-mode' instead
	of longlines-mode.

2013-11-12  Abdó Roig-Maranges  <abdo.roig@gmail.com>

	* org.el (org-format-latex): Do not re-generate a LaTeX preview if
	the image already exists.

	* org-agenda.el (org-agenda-search-view-max-outline-level):
	New option to define the max level for the entries shown by the search
	view.  A value of 1 means to show the top parent of the entries.

	* org.el (org-create-formula-image-with-dvipng): Fix bug that made
	this function fail with no :foreground and :background attributes
	set, due to bad handling of "Transparent" color.  Fix bug when
	colors are not `default'.
	(org-format-latex-options): Add `auto' to docstring.
	(org-format-latex): Get face colors at point and put them inside
	opt.
	(org-create-formula-image-with-imagemagick): Fix bug when handling
	"Transparent" bg color.
	(org-dvipng-color-format): Same as `org-latex-color-format' for
	dvipng-style color specification.

2013-11-12  Achim Gratz  <Stromeko@Stromeko.DE>

	* ob-core.el (org-babel-check-confirm-evaluate): Return result of
	evaluating the function pointed to by `org-confirm-babel-evaluate'
	when it is a functionp and its value as a variable otherwise.
	(org-babel-get-rownames, org-table.el)
	(org-table-transpose-table-at-point): Replace the inadvertent use
	of mapcar* (from cl) by plain mapcar and direct cons manipulation.
	(org-babel-params-from-properties):
	Use `org-babel-current-src-block-location' for evaluating new-style
	header-argument properties.  Remove superfluous save-match-data
	clauses.  Comment which properties get evaluated where.
	(org-babel-insert-header-arg, org-babel-parse-src-block-match):
	Replace `if' with empty else part by `when' for readability.
	(org-babel-params-from-properties): Inquire for language specific
	and default header properties.  Language specific header
	properties take precedence over default header properties and
	old-style header property specifications.

	* org.el (org-re-property): Re-implement using full regex for
	`org-re-property'.  Add optional argument LITERAL to flag when
	PROPERTY should to be regex-quoted.  Move before definition of
	`org-re-property'.
	(org-re-property-keyword): Remove, functionality is subsumed by
	`org-re-property'.
	(org-property-re): Define using `org-re-property'.
	Improve definition so that this regex can be
	(org-entry-get, org-property-values): Adjust match number for
	PROPVAL.  (org-entry-put): Use `org-re-property' instead of
	`org-re-property-keyword'.
	used in all situations.  Extend docstring with explanation of
	matching groups.
	(org-at-property-p): Implement using `org-element-at-point'.
	(org-entry-properties, org-buffer-property-keys, org-indent-line):
	Use `org-property-re' and adjust match group numbers accordingly.

	* org-compat.el (define-obsolete-variable-alias)
	(define-obsolete-function-alias): Actually remove the third (and
	any following) argument from the argument list before calling the
	advised function.  Extend eval-and-compile clause and add advices
	for functions that have different parameter lists in XEmacs.
	Add variable definitions that XEmacs lacks .

	* ob-fortran.el (org-every): Declare.

	* org-element.el (org-element-node-property-parser):
	Use `org-property-re' and adjust match group numbers accordingly.
	Move `looking-at' out of the let clause to not rely on the
	unspecified evaluation order inside the let.

	* ob-eval.el, ob.el, org-macro.el, org-mhe.el: Require org-macs
	and org-compat as necessary.

	* ob-tangle.el (org-edit-special, org-store-link)
	(org-open-link-from-string): Declare functions.

	* org-macs.el (declare-function): Define macro to use autoload
	instead for XEmacs.

	* ox-html.el, ox-odt.el: XEmacs does not have table.el, so use
	'noerror on the require form.

	* ox-texinfo.el (org-texinfo-table-column-widths): Fix spliced
	argument list that XEmacs complains about by adding parenthesis.

	* ob-octave.el (org-babel-octave-initiate-session): If octave-inf
	can't be loaded, try octave instead before giving up.
	Emacs 24.3.50 and upwards replaces octave-inf with just plain octave.

	* org-id.el (org-id-update-id-locations): Autoload interactive
	function.

	* ob-core.el (org-babel-parse-inline-src-block-match):
	* ob-exp.el (org-babel-exp-src-block): Give header arguments from
	properties priority over default header arguments.

	* ob-sh.el (org-babel-sh-var-to-sh): When detecting a table, the
	first line could be the symbol `hline' rather than a list of table
	cells, so check for that as well.

	* org.el (org-table-clean-did-remove-column):
	* org-table.el (org-table-clean-did-remove-column): Move defvar,
	this dynamic variable is only used in org-table.

	* org-table.el (org-table-colgroup-info): Remove unused defvar for
	`org-table-colgroup-info'.
	(org-table-clean-before-export): Let-bind regular expression
	strings and remove unused matching group.
	Use `org-table-clean-did-remove-column' in cond statement rather than
	branching via if to avoid code duplication.  Remove the code
	associated with the removed `org-table-colgroup-info'.
	(orgtbl-export): Remove unused internal function.

	* org-macro.el (org-macro-expand): Do not try to interpret the
	macro replacement text as a regex so that escaped backslashes and
	commas in macro arguments will be interpreted correctly.

	* ob-perl.el (org-babel-perl-wrapper-method): Select output handle
	only after evaluation so that output is not mixed into results
	eavaluation.
	(org-babel-perl-evaluate): Fix the handling of results for
	":results output" to also parse tables.  Use the same lambda
	construction as in ob-sh.el to avoid code duplication.

	* ob-exp.el (org-babel-exp-results, org-babel-lob-execute):
	Suppress user confirmation of the emacs-lisp wrapper execution
	around a lob call.

	* ob-perl.el (org-babel-perl-wrapper-method): Use TAB as separator
	for table results as expected by
	`org-babel-import-elisp-from-file´.

	* ob-core.el (org-babel-number-p): String match for any number
	moved first so that the match data for the length check does not
	become corrupted.
	(org-babel-confirm-evaluate-answer-no): Dynamically scoped
	variable, if bound non-nil the confirmation dialog will not be
	initiated and denial of evaluation is assumed.
	(org-babel-check-confirm-evaluate): New macro to establish
	bindings based on INFO.
	(org-babel-check-evaluate): New defsubst that checks if the
	evaluation of a code block is disabled.  Refactors the first part
	of the original function `org-babel-confirm-evaluate´.
	(org-babel-confirm-evaluate): New defsubst that checks if the user
	should be queried and returns the answer.  Keeps the second part
	of the original function `org-babel-confirm-evaluate´.
	Re-implement using bindings for common subexpressions.
	(org-babel-execute-src-block): Do not ask for confirmation if the
	cached result is current.
	(org-babel-call-process-region-original): Change declaration into
	definition with nil initial value at the beginning of the file and
	drop the later definition.  Add comment that the dynamic scoping
	of this variable is done for tramp.

	* org-table.el (org-table-eval-formula): The condition-case to
	check for must be "error", not "user-error".

	* ob-perl.el (org-babel-execute:perl): Pass `result-params´
	through to `org-babel-perl-evaluate´.
	(org-babel-variable-assignments:perl): Add "my" to variable
	declaration so that it becomes compatible with "use strict;".
	Use new internal formatting function `org-babel-perl--var-to-perl´.
	(org-babel-perl--var-to-perl): New internal function, uses Perl
	non-interpolating quoting on the string that defines the variable
	to suppress spurious interpretation of it as Perl syntax.
	(org-babel-perl-wrapper-method): Use a block and declare all
	variables as "my", also use Perl quoting throughout.  Redirect
	STDOUT to the temporary file so that simply "print" will put the
	results there.  Check the return value and output in table form if
	it is an ARRAY ref, otherwise print it without a final newline.
	(org-babel-perl-preface): Content of this variable is prepended to
	body before invocation of perl.  Rename input parameter body to
	ibody and let-bind body to concatentation of
	`org-babel-perl-preface' and ibody.  Implement results
	interpretation so that tables are easier to produce.

	* ob-eval.el (org-babel-eval): Use simplified version of
	`org-babel--shell-command-on-region´, we are the only caller of
	this function.
	(org-babel--shell-command-on-region):
	Replace `org-babel-shell-command-on-region´ with a much more simplified
	internal version, remove superfluous DOCSTRING and interactive
	clause, strip out all conditionals which were never used.  Prevent
	deletion of temporary input file to aid debugging when the symbol
	`org-babel--debug-input´ is bound and has non-nil value.

	* ob-tangle.el (org-babel-tangle): Do not change signature, a nil
	arg is even documented in the manual.

	* org-src.el: Change declaration of `org-babel-tangle´ to "arg"
	for first argument.

	* ob-core.el (org-babel-execute-src-block): Add binding for
	merged-params to avoid multiple evaluation of
	`org-babel-merge-params´.  Rename cache? to cache-p, add binding
	for cache-current-p and use it.  Do not run
	`org-babel-confirm-evaluate´ if source block has a cache and the
	cache value is current (there is no evaluation involved in this
	case).

	* org.el (org-current-time): Replace call to obsolete function
	`time-to-seconds´ with a call to compatibility function
	`org-float-time´.

	* org-compat.el (user-emacs-directory): If not bound, define as an
	alias to `user-init-directory´ so that XEmacs continues to be
	happy with Org.

	* org-macs.el: New macro to allow the 5-argument form of load to
	be used where possible without breaking compatibility with XEmacs.

	* org.el (org-version, org-reload):
	Use `org-load-noerror-mustsuffix´ instead of adding a fifth argument
	to load directly.  Guard against undefined variable load-suffixes,
	which doesn't exist in XEmacs.

	* org.el: Use
	`org-define-obsolete-{function,variable}-alias´instead of
	`define-obsolate{function,variable}-alias´.

	* org-compat.el (user-error): Defalias to `error´ for Emacsen that
	don't have it.

	* ob-python.el (org-babel-python-hline-to)
	(org-babel-python-None-to): Specify customize group as 'org-babel
	and widget type as 'string.

	* ob.el (org-babel-result-cond): Macro expansion needs to unquote
	formal parameter `result-params´.

	* org.el (org-reload): Major rewrite.

	* org.el (org-clock-get-last-clock-out-time): Declare function.

2013-11-12  Alan Schmitt  <alan.schmitt@polytechnique.org>

	* ob-ocaml.el (org-babel-prep-session:ocaml):
	Use `save-window-excursion' around the code starting the tuareg
	process.
	(org-babel-ocaml-command): New option to specify the name of the
	toplevel to run.
	(org-babel-prep-session:ocaml): Directly call
	`tuareg-run-process-if-needed' with `org-babel-ocaml-command' as
	argument.
	(org-babel-execute:ocaml): Always append ";;" at the end of the
	expression before sending it to the toplevel.  Do not remove the
	type information if "verbatim" is a results parameter of the code
	block.
	(org-babel-ocaml-parse-output): Make sure the complete type is
	taken into account when matching against known types.

	* org-faces.el (org-footnote): Fix docstring.

2013-11-12  Andreas Leha  <andreas@lehas.net>

	* ob-latex.el (org-babel-execute:latex): Add a tizk option that
	copies the body of the block into a tikz file.

2013-11-12  Arun Persaud  <apersaud@lbl.gov>

	* org-agenda.el (org-agenda-prefix-format): Add documentation for
	the new %b option.
	(org-prefix-has-breadcrumbs): Add flag, `t' when %b is set.
	(org-agenda-format-item): Add breadcrumbs if requested.
	(org-compile-prefix-format): Add compiled information for
	breadcrumbs, add %b option.

2013-11-12  Aurélien Aptel  <aurelien.aptel@gmail.com>  (tiny change)

	* ox-html.el (org-html-code, org-html-verbatim): Remove fancy
	string replacements for code and verbatim text when exporting to
	HTML.

2013-11-12  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-align-tags-here): Fix bug: move to the correct
	position.
	(org-agenda-prepare-buffers): Restore the point position.
	(org-insert-link): Don't remove brackets when they belong to a
	timestamp in a headline.

	* org-capture.el (org-capture-refile): Don't finalize prematurely.
	(org-capture): Store :return-to-wconf earlier.
	(org-capture-place-template): Don't store :return-to-wconf when
	called from a capture template using `function', rely on the early
	:return-to-wconf value store from `org-capture'.

	* org-compat.el (org-move-to-column): New argument
	`ignore-invisible' to turn on `buffer-invisibility-spec'.

	* org-agenda.el (org-agenda-show-new-time): Ignore invisible text
	when inserting the new time as a text property.
	(org-agenda-filter-make-matcher): When filtering tags and hitting
	space, filter out entries with tags, only keep those without tags.
	(org-agenda-drag-line-forward, org-agenda-drag-line-backward):
	Fix bugs: don't drag lines without text and don't drag lines
	before/after hidden lines.

	* ox-odt.el (org-odt-table-style-format): Use %s for inserting the
	rel-width property as a string.
	(org-odt-template): Fall back on a string for :rel-width.

	* org.el (org-directory, org-default-notes-file)
	(org-reverse-note-order): Don't use the `org-remember'
	customization group.
	(org-require-autoloaded-modules): Don't require
	`org-remember'.

	* org-capture.el: Update commentary section to reflect the fact
	that org-remember.el is not used anymore.

	* org.el (org-babel-load-file): Set `exported-file' correctly, in
	case the file as been tangled using a buffer-local value.

	* ob-tangle.el (org-babel-tangle-file): Return the list of tangled
	files.

	* ox-org.el (org-org-publish-to-org): When htmlizing an .org file,
	ensure to show all headings and all blocks before fontifying.

	* ob-shen.el (org-babel-ruby-var-to-ruby): Declare.

	* ox.el: Fix comment: remove reference to the obsolete variable
	`org-export-language-setup'.

	* org.el (org-set-regexps-and-options-for-tags): Fix concatenation
	of the tags list.

	* ox-odt.el (org-odt-pixels-per-inch): Use 96.0 as the default.

	* org.el (org-refile): With a numeric prefix argument of `3',
	emulate (setq org-refile-keep t) and copy the subtree to the
	target location, don't delete it.
	(org-set-regexps-and-options-for-tags): Fix the setting of tag
	groups when relying on `org-tag-alist', not on tags directly set
	in the buffer with the #+TAGS option.

	* org-agenda.el (org-agenda-archive-with): Save window excursion.

	* org.el (org-forward-element, org-backward-element): Throw a
	message instead of an error when trying to move from a position
	where there is no element.
	(org-clock-is-active): Fix docstring.

	* org-list.el (org-sort-list): Use `x' instead of `c' for sorting
	plain list by checked status.

	* org.el (org-structure-template-alist): Fix custom type and
	default value.
	(org-set-regexps-and-options-for-tags): Enhance docstring.
	(org-set-regexps-and-options): Make sure not to add
	`org-tag-alist' twice when setting this variable through et
	#+setupfile: directive.
	(org-tags-expand): Use `with-syntax-table'.

	* org-list.el (org-sort-list): Implement sorting by "checked"
	status for check lists.

	* org-table.el (org-table-sum): Fix rounding error when summing
	times.

	* ob-scheme.el (org-babel-scheme-execute-with-geiser): Fix code
	typo.  Add declarations.

	* ox-html.el (org-html-link-use-abs-url): New option.
	(org-html-link): Use it to prepend relative links with the value
	of HTML_LINK_HOME, when defined.

	* org.el (org-refile): Fix refiling the active region within an
	list.  Don't store the last refiled subtree in the kill ring.

	* org.el (org-mode-map): Remap `forward-paragraph' and
	`backward-paragraph' to `org-forward-element' and
	`org-backward-element'.

	* ox-html.el (org-html-begin-plain-list): New parameter
	`ordered-num' to tell whether the list is ordered numerically.
	(org-html-plain-list): Handle alphabetical ordered list.

	* org-agenda.el (org-batch-agenda): Let-bind `org-agenda-sticky'
	to nil during batch export.

	* org.el (org-copy-subtree): Fix typo in docstring.
	(org-scan-tags): Don't disable `case-fold-search' too early.

	* org-agenda.el (org-agenda-skip-eval): Fix typo in docstring.

	* org-capture.el (org-capture-set-target-location): Don't throw an
	error when `org-time-was-given' is not bound.

	* org-clock.el (org-clock-modify-effort-estimate):
	Clarify docstring.

	* org.el (org-set-regexps-and-options-for-tags): Return a list
	with tag-related variables.
	(org-set-regexps-and-options): Append tags from a setup file to
	the local tags of the file.
	(org-agenda-prepare-buffers): Set tags from a setup file by
	calling `org-set-regexps-and-options' when necessary.
	(org-set-regexps-and-options): Fix `org-deadline-time-hour-regexp'
	and `org-scheduled-time-hour-regexp'.

	* org-table.el (org-table-TBLFM-begin-regexp): Rename from
	`org-TBLFM-begin-regexp'.
	(org-table-calc-current-TBLFM): Rename from
	`org-calc-current-TBLFM'.

	* org.el (org-ctrl-c-ctrl-c): Require org-table if needed.
	(org-refresh-properties): Put the text property on the whole
	subtree, not just on the headline.
	(org-get-outline-path): Remove statistical and checkboxes cookies.

	* org-agenda.el (org-agenda, org-search-view, org-tags-view)
	(org-agenda-get-day-entries, org-agenda-set-restriction-lock):
	Use (current-buffer) as the value of `org-agenda-restrict'.  Fix a bug
	about narrowing to wrong region boundaries when
	`org-agenda-restrict' is non-nil.

	* org.el (org-agenda-text-search-extra-files): Fix typos in
	docstring.
	(org-insert-heading): Fix case when there the first heading starts
	at the beginning of the buffer.

	* ob-core.el (org-babel-expand-src-block):
	Use `org-called-interactively-p'.

	* org.el (org-agenda-prepare-buffers): Avoid duplicates in
	`org-tag-alist-for-agenda' correctly.
	(org-read-date-minibuffer-local-map): Check if we are at the
	beginning of the prompt, not if we are after a whitespace.
	Bind C-. to `calendar-goto-today'.

	* org-clock.el (org-clock-in): Don't forward by one character when
	setting the marker in the clock history.

	* org.el (org-read-date-minibuffer-local-map):
	Call `calendar-goto-today' only if there is a space before point in the
	minibuffer prompt.
	(org-insert-heading): Reveal context when called interactively.
	Fix bug about wrong conversion of lines with :END: or #+end_ into
	headlines.
	(org-in-drawer-p): New function.
	(org-meta-return): Use `org-catch-invisible-edits' and the
	`org-in-drawer-p' to check whether we are within a drawer.

	* org-list.el (org-sort-list): Fix infloop.

	* org.el (org-clone-subtree-with-time-shift): Unconditionally ask
	for a time shift if there is a time-stamp.  Don't ask for a time
	shift when called with a universal prefix argument.

	* ob-core.el (org-babel-insert-result): Fix bug when inserting
	results as a list: ensure we split a string containing "\n".

	* ox-html.el: Fix copyright header.

	* org.el (org-store-link): Don't add a search string when storing
	a link from a radio target.
	(org-open-at-point): Jump to the radio link (<<<radio>>>), not to
	the simple target (<<target>>).

	* org-table.el (org-table-get-remote-range): Fix typo.

	* org-datetree.el (org-datetree-find-month-create)
	(org-datetree-find-day-create): Add a docstring.
	(org-datetree-find-year-create): Only match headlines with a
	year or a year and one or more tags.

	* org-crypt.el (org-crypt-check-auto-save)
	(org-crypt-use-before-save-magic): Use `org-add-hook' when the
	hooks are local hooks.

	* org-agenda.el (org-agenda-mode): Use `org-add-hook' and merge
	upstream change from Emacs 2013-04-18T00:12:33Z!monnier@iro.umontreal.ca.

	* ob-core.el (org-babel-pop-to-session-maybe): Fix docstring.
	(org-babel-pop-to-session-maybe): Use true function's name,
	not its alias.

	* org-agenda.el (org-agenda-drag-line-forward)
	(org-agenda-drag-line-backward): New commands.
	(org-agenda-mode-map): Bind the new commands to M-<down> and
	M-<up> respectively.

	* org.el (org-insert-heading): Fix insertion of items.

	* org-capture.el (org-capture-use-agenda-date): Fix docstring.

	* org-agenda.el (org-agenda-bulk-toggle): Fix docstring.
	(org-agenda-bulk-toggle-all): New command.
	(org-agenda-mode-map): Bind `org-agenda-bulk-toggle' to `M-m'
	and `org-agenda-bulk-toggle-all' to `M-*'.
	(org-agenda-menu): Add `org-agenda-bulk-toggle' and
	`org-agenda-bulk-toggle-all'.
	(org-agenda-bulk-mark, org-agenda-bulk-unmark): Jump to the
	next headline, not the next line.

	* org-capture.el (org-mks): Fix bug: let-bind `case-fold-search'
	to nil while matching the first letter of a multi-letters
	template.

	* org.el (org-store-link): When a bracket link is found in a
	headline, use the link description or the link path.
	(org-flag-drawer, org-hide-block-toggle)
	(org-goto-left, org-goto-right, org-promote)
	(org-paste-subtree, org-narrow-to-block, org-sort-entries)
	(org-insert-link, org-offer-links-in-entry, org-open-file)
	(org-refile, org-refile-get-location)
	(org-refile-check-position, org-prepare-dblock, org-todo)
	(org-auto-repeat-maybe, org-show-todo-tree, org-sparse-tree)
	(org-occur, org-priority, org-scan-tags)
	(org-get-tags-string, org-property-action, org-set-effort)
	(org-entry-put, org-insert-drawer)
	(org-compute-property-at-point)
	(org-property-next-allowed-value, org-evaluate-time-range)
	(org-closest-date, org-timestamp-change)
	(org-revert-all-org-buffers, org-cycle-agenda-files)
	(org-agenda-file-to-front, org-remove-file)
	(org-preview-latex-fragment, org-format-latex)
	(org-create-math-formula, org-create-formula-image)
	(org-speed-command-help, org-check-before-invisible-edit)
	(org-modifier-cursor-error, org-hidden-tree-error)
	(org-mark-subtree, org-kill-line, org-first-sibling-p)
	(org-up-element, org-down-element)
	(org-drag-element-backward, org-drag-element-forward)
	(org-unindent-buffer, org-speedbar-set-agenda-restriction):
	Use `user-error' instead of `error'.

	* ox-latex.el (latex): Don't force exporting with smart quotes.

	* ox.el (org-export-with-smart-quotes): Mention the need to use
	the relevant Babel package when setting this option to non-nil.

	* org-src.el (org-edit-src-turn-on-auto-save): New option.
	(org-edit-src-code): Use it.
	(org-edit-src-auto-save-idle-delay): Enhance docstring.

	* org-capture.el (org-mks): Make cursor invisible.

	* org.el (org-link-expand-abbrev): Save match data before before
	calling the replacement function.

	* org-list.el (org-sort-list): Don't move point when matching time
	values.

	* org.el (org-shifttab): Show the correct number of empty
	headlines when called with a numeric prefix argument.
	Enhance docstring.
	(org-uniquify): Use `copy-sequence'.
	(org-adaptive-fill-function, org-fill-paragraph): Throw a useful
	error message when parse an element fails in the current buffer.

	* ox.el (org-export-with-planning): Enhance docstring.

	* org.el (org-closed-keep-when-no-todo): New option.
	(org-todo): Use the new option.
	(org-open-line): Rename from `org-ctrl-o'.
	(org-mode-map): Use `remap'.
	(org-cycle-emulate-tab, org-file-apps)
	(org-set-font-lock-defaults)
	(org-translate-link-from-planner, org-link-search)
	(org-refile-get-targets, org-read-date-get-relative):
	Minor code clean-up: fix dangling parentheses.

	* org-agenda.el (org-agenda-entry-text-mode): Also check against
	regexp filters.
	(org-timeline): Handle `org-agenda-show-log'.

	* org-clock.el (org-clock-select-task): Remove successive
	duplicates in the clock history to consider.

	* org.el (org-uniquify-alist): Improve docstring.
	(org-make-tags-matcher, org-change-tag-in-region): Add buffer's
	tags to the tags completion table.
	(org-tags-expand): Prevent circular replacement of group tags.
	Tiny docstring formatting.
	(org-uniquify): Make a defsubst.  Use `delete-dups' instead of
	`add-to-list'.
	(org-todo): Also remove the CLOSED planning information when
	removing the TODO keyword.
	(org-forward-heading-same-level): Fix bug when forwarding
	to a hidden subtree of the same level.
	(org-tags-expand): Use word delimiters when building the tag
	search regexp.

	* org-clock.el (org-clock-insert-selection-line): Don't display
	the clockout time.

	* org.el (org-emphasis-regexp-components): Make a defvar.
	(org-emphasis-alist): New default value: don't set HTML tags.
	(org-emphasize, org-set-emph-re): Use the new value of
	`org-emphasis-alist'.

	* org-mobile.el (org-mobile-edit): Insert new headings at the end
	of the parent subtree.  Use `org-at-heading-p' instead of the
	obsolete `org-on-heading-p'.

	* org.el (org-insert-heading): When called from a list item and
	`org-insert-heading-respect-content' is non-nil, insert a heading,
	not an item.
	(org-insert-heading-respect-content): Fix docstring.
	(org-insert-heading): When in a non-empty non-headline line,
	convert the current line into a headline.

	* org-table.el (org-table-copy-down): Don't move cursor when
	getting the field.

	* ox-icalendar.el (org-icalendar-export-current-agenda): Do not
	evaluate babel code blocks.

	* ox-html.el (html): Add more options.

	* ox-publish.el (org-publish-project-alist): Add :with-planning in
	docstring.

	* ob-exp.el (org-babel-exp-src-block): Tiny docstring fix.

	* ox-icalendar.el (org-icalendar--combine-files): Fix typo.

	* org-mouse.el (org-mouse-agenda-context-menu): Fix a function's
	name.

	* ox.el (org-export-options-alist, org-export--skip-p):
	Use `:with-planning' instead of `:with-plannings', to keep in sync
	with the corresponding option's name.

	* ob-core.el (org-babel-confirm-evaluate): Fix typo in docstring.

	* org-agenda.el (org-agenda-undo, org-agenda)
	(org-agenda-append-agenda)
	(org-agenda-get-restriction-and-command, org-agenda-write)
	(org-agenda-clock-cancel)
	(org-agenda-diary-entry-in-org-file, org-agenda-diary-entry)
	(org-agenda-execute-calendar-command)
	(org-agenda-goto-calendar, org-agenda-convert-date)
	(org-agenda-bulk-mark, org-agenda-bulk-action)
	(org-agenda-show-the-flagging-note): Use `user-error' instead of
	`error'.

	* org-macs.el (org-with-remote-undo): Normalize argument names.

	* org.el (org-store-log-note): Fix `buffer-undo-list' when called
	after `org-agenda-todo'.
	(org-add-log-note): Minor formatting fix.

	* org-agenda.el (org-agenda-append-agenda): Set buffer read only.

	* org-clock.el (org-clock-select-task): Throw a user error when
	the clock history is empty.

	* org-table.el (org-table-get-remote-range): Fix docstring: use
	#+NAME instead of #+TBLNAME.

	* ob-ref.el: Use #+NAME instead of #+TBLNAME in comment.

	* ox-html.el (org-html-table-row-tags): Better example.

	* org-clock.el (org-clock-select-task): Fix window to buffer.
	Hide the cursor.
	(org-clock-insert-selection-line): Add the clock-out time.

	* ox-html.el (org-html-table-row-tags): Allow new dynamically
	bound value `row-number'.
	(org-html-table-row): Bind `row-number' to the number of the
	row (first row is 0).

	* org.el (org-minutes-to-clocksum-string): Round fractions of
	minutes.

	* ox-html.el (org-html-table-row-tags): Fix example in docstring.

	* org-agenda.el (org-agenda-span-to-ndays): Enhance docstring.
	(org-agenda-goto-date): Fix bug when going to a date in month
	view.
	(org-agenda-goto-date): Put the cursor on the agenda line with the
	selected date.
	(scheduled/deadline items with hour spec) then redo an agenda*.

	* org-clock.el (org-clock-resolve): Enhance the content of the
	help window.

	* org-footnote.el (org-footnote-auto-label): Minor docstring fix.

	* ox-odt.el (org-odt-link): Fix bug: convert & to &amp; in
	links.

	* ox-html.el (org-html-table-row): Dynamically bind
	`rowgroup-number', `start-rowgroup-p', `end-rowgroup-p',
	`top-row-p', `bottom-row-p'.
	(org-html-table-row-tags): Update docstring: tell what variables
	are dynamically bound.

	* org-src.el (org-edit-src-code): Don't set
	`buffer-auto-save-file-name' unless `auto-save-default' is
	non-nil.

	* ox.el (org-export-table-row-group): Fix typo in docstring.

	* org-table.el (orgtbl-apply-fmt): Enhance docstring.

	* org.el (org-file-contents): Make the message more prominent.

	* ox.el (org-export-replace-region-by): New function.

	* ox-texinfo.el (org-texinfo-convert-region-to-texinfo),
	* ox-md.el (org-md-convert-region-to-md),
	* ox-latex.el (org-latex-convert-region-to-latex),
	* ox-html.el (org-html-convert-region-to-html): New functions to
	replace the active region by its export into various backends.

	* org-faces.el (org-agenda-restriction-lock): Use less flashy
	colors.

	* org-agenda.el
	(org-agenda-restriction-lock-highlight-subtree): New option.
	(org-agenda-top-headline-filter): Rename from
	`org-agenda-top-headline-filter'.
	(org-find-top-headline): Rename from `org-find-top-category'.
	Add a docstring.
	(org-agenda-filtered-by-top-headline): Rename from
	`org-agenda-filtered-by-top-category'.
	(org-agenda-filter-by-top-headline): Rename from
	`org-agenda-filter-by-top-category'.  Fix docstring.
	(org-agenda-filter-top-headline-apply): Rename from
	`org-agenda-filter-top-category-apply'.  Fix docstring.
	(org-agenda-mode-map): Update binding.
	(org-agenda-get-todos): Set `todo-state' earlier so that we can
	skip false-positives in time.

	* org.el (org-get-todo-state): Add a docstring.
	(org-ctrl-o): New command to insert a new row in tables
	(like `M-S-<down>' does) and open a line elsewhere.
	(org-mode-map): Bind the new command to `C-o'.
	(org-set-regexps-and-options): Process tags from an external setup
	file.

	* org-agenda.el (org-agenda-dim-blocked-tasks): Enhance docstring.
	(org-agenda-finalize-entries): Conditionally apply limits so
	that we don't manipulate big lists uselessly.
	(org-agenda-limit-entries): Limit exclusively.  E.g., when
	limiting to a maximum of "2 tags", don't limit among tagged
	entries only, but limit among all entries.
	(org-agenda-limit-interactively): New command.
	(org-agenda-mode-map): Bind the new command to "~".
	(org-agenda-redo): Small fix: don't use `eval'.

	* org.el (org-ctrl-c-ctrl-c): Fix bug wrt updating checkboxes: the
	list beginning should be stored using a marker so that updating
	[%0] to [%50] will not throw an error.
	(org-babel-load-file): Move `org-babel-load-file' from
	ob-tangle.el to here so that it is correctly autoloaded by Emacs
	before Org is required.

	* org-mac-message.el: Delete.

	* org.el (org-modules): org-mac-message.el is not a core package
	anymore.

	* org-table.el (orgtbl-to-generic): Fix bug when exporting the
	cells of radio tables with 'hline.

	* org.el (org-speed-commands-default): Use ?s for
	`org-narrow-to-subtree'.

	* org-agenda.el (org-agenda-start-on-weekday): Fix typo.
	(org-agenda-start-day): Enhance docstring.

	* org-src.el (org-src-native-tab-command-maybe): Check that we are
	in a source code block.

	* org-mobile.el: Remove useless defvar.

	* org.el (org-indent-line): A line just below a line with a list
	item is now indented depending on the indentation of this list
	item.

	* org.el (org-options-keywords): Add #+TARGET.

	* org-clock.el (org-resolve-clocks-if-idle): Only try to resolve
	last clock if the clock buffer still exists.
	(org-clock-out, org-clock-cancel): Set markers to nil.

	* ox-org.el (org-org-publish-to-org):
	* ox-html.el (org-html-publish-to-html): Use the custom extension.

	* org.el (org-cycle-internal-local): Fix invalid search bound when
	`org-cycle-include-plain-lists' is set to 'integrate.

	* org.el (org-sparse-tree-default-date-type): Add an option for
	closed time-stamps.
	(org-sparse-tree): Allow to check against closed time-stamps.
	(org-re-timestamp): Handle closed time-stamps.
	(org-closed-in-range): Delete.

	* org-capture.el (org-capture-import-remember-templates):
	Take care of adding :jump-to-captured option if needed.

	* org.el (org-toggle-pretty-entities): Enhance messages.
	(org-raise-scripts): Handle scripts like "a_b^c".

	* org-capture.el (org-capture-templates): Document new option
	:jump-to-captured in the docstring.  Offer the complete list of
	options when customizing.
	(org-capture-finalize): Handle :jump-to-captured.

	* org.el (org-agenda-prepare-buffers): Fix bugs: don't let-bind
	`org-tag-alist' to nil and don't append duplicate tags to
	`org-tag-alist-for-agenda'.
	(org-store-link): Storing multiple links in the active region now
	requires a triple prefix argument.
	(org-store-link, org-link-search): Fix handling of links to #+NAME
	and #+TARGET keywords.

	* org-compat.el (org-ignore-region): Tiny docstring fix.

	* org-capture.el (org-capture): Don't store multiple links over
	lines in the active region.

	* ox-odt.el (org-odt-special-block): Don't wrap annotations into
	<text:p>...</text:p> at all.
	(org-odt--fix-annotations): New function.
	(org-odt--export-wrap): Use the new function to fix annotations
	insertion in content.xml.

	* org.el (org-mode-flyspell-verify): Require 'org-element so that
	`org-element-affiliated-keywords' is defined.

	* ox-odt.el (org-odt-special-block): Don't insert annotations
	using style "Text_20_body".

	* org.el (org-toggle-tags-groups): Correctly highlight group tags.
	(org-tags-expand): Expand tags as words, with characters ?@
	and ?_ being considered words constituents.
	(org-set-regexps-and-options): Don't read setup files from
	read-only buffers.
	(org-file-contents): When no-error is non-nil, throw a less
	intrusive message.

	* org-agenda.el (org-agenda-scheduled-leaders)
	(org-agenda-deadline-leaders): Re-align leaders to the left,
	back to a 11 characters width.

	* org.el (org-refile-cache-check-set): More informative message.

	* org-agenda.el (org-tags-view): Set the matcher after preparing
	the agenda, as `org-tag-groups-alist-for-agenda' might be needed.
	(org-agenda-filter-make-matcher): New parameter `filter' and
	`type'.  Handle group tags.
	(org-agenda-filter-expand-tags): New function.
	(org-agenda-filter-apply): Handle group tags.

	* org.el (org-blank-before-new-entry): Tiny docstring fix.
	(org-tag-alist-for-agenda): Add docstring.
	(org-tag-groups-alist-for-agenda): New global variable.
	(org-tag-groups-alist): New buffer-local variable.
	(org-tag-alist, org-tag-persistent-alist): Handle :grouptags.
	(org-group-tags): New option.
	(org-toggle-group-tags): New command.
	(org-mode-map): Bind `org-toggle-group-tags' to `C-c C-x q'.
	(org-set-regexps-and-options-for-tags): New function, factored
	out from `org-set-regexps-and-options'.
	(org-set-regexps-and-options): Don't handle tags, they are now
	handled separately by `org-set-regexps-and-options-for-tags'.
	(org-assign-fast-keys): Handle :grouptags.
	(org-mode): Use `org-set-regexps-and-options-for-tags' on top
	of `org-set-regexps-and-options'.
	(org-fontify-meta-lines-and-blocks-1): Fontify group tags.
	(org-make-tags-matcher): Expand group tags in the matcher.
	(org-tags-expand): New function.
	(org-tags-completion-function): Tiny code clean up.
	(org-set-current-tags-overlay): Add a docstring.
	(org-fast-tag-selection): Highlight group tags.
	(org-agenda-prepare-buffers): Set `org-tag-alist-for-agenda'
	and `org-tag-groups-alist-for-agenda'.  Don't uniquify
	`org-tag-alist-for-agenda' as we may need the grouping
	information for filtering in the agenda buffer.
	(org-uniquify-alist): New function.

	* org-pcomplete.el (pcomplete/org-mode/file-option/tags):
	Handle :grouptags.

	* org-faces.el (mode-line): New face for group tags.

	* ob-core.el (org-babel-hash-show-time): Tiny docstring
	enhancement.

	* org-element.el (org-element-paragraph-separate): Use new name
	`org-list-allow-alphabetical'.

	* org-list.el (org-list-allow-alphabetical): Rename from
	`org-alphabetical-lists'.
	(org-list-empty-line-terminates-plain-lists): Rename from
	`org-empty-line-terminates-plain-lists'.
	(org-checkbox-hierarchical-statistics): Rename from
	`org-hierarchical-checkbox-statistics'.

	* org.el (org-image-actual-width): Update docstring.
	(org-display-inline-images): Use the #+attr_html: :width syntax.
	(org-modules): Remove deleted libraries, add new ones.

	* ox-html.el (org-html-indent): Default to nil, as non-nil can
	break indentation of source code blocks.
	(org-html-link): Don't insert nil if there is no attributes.
	(org-html-link--inline-image): Use the correct syntax for image
	attributes.  Allow :width :height and :alt as predefined
	attributes for inline images.
	(org-html-link, org-html-table): Use the standard syntax---
	e.g. "#+attr_html: :options ..."--- to get attributes.

	* ox.el (org-export-table-cell-alignment): Treat an empty cell as
	a number if it follows a number.

	* ox.el (org-export-as): Allow user functions in
	`org-export-before-parsing-hook' to modify the point.

	* org.el (org-entry-add-to-multivalued-property): Add the new
	value by appending it at the end of the line.

	* org-table.el (orgtbl-to-generic): New parameter `backend' to
	export cells content using a specific backend.
	(orgtbl-to-latex, orgtbl-to-texinfo): Export cells to LaTeX
	and Texinfo before sending the table.

	* ox.el (org-export-define-backend)
	(org-export-define-derived-backend): Make defuns and update
	docstrings.

	* ox-texinfo.el (texinfo):
	* ox-org.el (org):
	* ox-odt.el (odt):
	* ox-md.el (md):
	* ox-man.el (man):
	* ox-latex.el (latex):
	* ox-icalendar.el (icalendar):
	* ox-html.el (html):
	* ox-beamer.el (beamer):
	* ox-ascii.el (ascii): Use `org-export-define-backend' and
	`org-export-define-derived-backend' as defuns, not macros.

	* org.el (org-set-regexps-and-options):
	Use `org-table-set-constants'.

	* org-table.el (org-table-set-constants): New function.
	(orgtbl-ctrl-c-ctrl-c): Use it.

	* org-pcomplete.el
	(pcomplete/org-mode/block-option/clocktable): Add parameters.

	* org.el (org-options-keywords): Remove "INFOJS_OPT": it is added
	through ox-html.el now.

	* org-agenda.el (org-agenda-redo): Set filters after agenda has
	been redone.

	* org.el (org-store-link): When there is an active region, store
	each line as a separate link.
	(org-insert-all-links): Use a default description when links
	do not have one already.

	* org-agenda.el (org-agenda-redo): Fix code typo.

	* org.el (org-link-display-format): Fix docstring.

	* ox-publish.el (org-publish-org-to)
	(org-publish-org-sitemap, org-publish-find-title)
	(org-publish-find-date)
	(org-publish-cache-file-needs-publishing):
	Set `org-inhibit-startup' to t when visiting files for
	publication.

	* ox-org.el (org-org-publish-to-org): Kill buffers not visited at
	publication time.

	* org.el (org-set-font-lock-defaults): Set font-lock keywords
	correctly for plain links.

	* ox-texinfo.el (org-texinfo-logfiles-extensions)
	(org-texinfo-remove-logfiles): New options.
	(org-texinfo-compile): Use the new options to remove files
	after compiling a Texinfo file.

	* ox-texinfo.el (org-texinfo-coding-system): New option.
	(org-texinfo-template): Add @documentlanguage and
	@documentencoding.
	(org-texinfo-headline): Add a space before tags.
	(org-texinfo-export-to-texinfo, org-texinfo-export-to-info):
	Use `org-texinfo-coding-system' as the coding system for
	exported buffers.
	(org-texinfo-publish-to-texinfo): New function.

	* ox-texinfo.el (org-texinfo-filename)
	(org-texinfo-info-process, org-texinfo-max-toc-depth)
	(org-texinfo--sanitize-menu): Docstrings tiny fixes.

	* org-agenda.el (org-agenda-dim-blocked-tasks): Only throw a
	message when called interactively.  Fix docstring position in the
	defun.

	* ox-html.el (org-html--build-meta-info): Fix setting of
	http-equiv="Content-Type".

	* org-agenda.el (org-agenda-mode-map): Use ?= for filtering by
	regexp and ?| for removing all filters.
	(org-agenda-filter-remove-all): New command.
	(org-agenda-filter-show-all-re): Rename from
	`org-agenda-filter-show-all-regexp'.
	(org-agenda-filter-by-regexp):
	Call `org-agenda-filter-show-all-re'.

	* org-list.el (org-insert-item): Don't ask for a definition term
	when insert an item in a description list.

	* org-agenda.el (org-agenda-Quit): Set `org-agenda-buffer' to nil.
	This prevents bugs when calling e.g., `org-diary' after quitting
	an agenda window.
	(org-agenda-entry-types): Move earlier in the file.
	(org-agenda-custom-commands-local-options, org-diary)
	(org-agenda-get-day-entries): Don't hardcode the default agenda
	entry types, use `org-agenda-entry-types'.
	(org-agenda-custom-commands): Fix default setting so that the
	customize interface does not complain about a mismatch.

	* org.el (org-export-backends): Add new backends.

	* ox-html.el (org-html-indent): New option.
	(org-html-use-unicode-chars): New option.
	(org-html-pretty-output): Delete.
	(org-html-final-function): Use the new options.

	* ox-html.el (org-html-link): Fix handling of abbreviated links
	which include a file: protocol.
	(org-html--build-postamble): Default to today's date.
	(org-html--build-meta-info): When #+DATE contains a time stamp,
	parse it as a RFC 822 time string, otherwise simply insert the
	date as a string.

	* ox.el (org-export--copy-to-kill-ring-p): New function.
	(org-export-copy-to-kill-ring): Use 'if-interactive as the
	default.
	(org-export-to-buffer, org-export-to-file):
	Use `org-export--copy-to-kill-ring-p' and fix docstrings.

	* ox-odt.el (org-odt-export-as-odf):
	Use `org-export--copy-to-kill-ring-p'.

	* org.el (org-set-font-lock-defaults): Fontify macros.

	* org-faces.el (org-macro): New face.

	* org.el (org-clone-subtree-with-time-shift): Only prompt for a
	time shift when the entry at point has a time stamp and when the
	command is called with a universal prefix argument.
	(org-execute-file-search-functions): Docstring fix.

	* org-compat.el (org-defvaralias): Fix declare form.

	* org-clock.el (org-clocktable-defaults): Add :mstart parameter.
	(org-clock-special-range): New argument mstart.
	(org-dblock-write:clocktable, org-dblock-write:clocktable)
	(org-clocktable-write-default, org-clocktable-steps)
	(org-clock-get-table-data): Handle the :mstart parameter.

	* org.el (org-map-entries): Use `save-window-excursion'.

	* org-compat.el (org-defvaralias): New compatibility function.

	* org-list.el (org-cycle-include-plain-lists): Also add to the
	'org-cycle customization group.
	(org-list-allow-alphabetical)
	(org-checkbox-hierarchical-statistics)
	(org-list-empty-line-terminates-plain-lists)
	(org-list-description-max-indent): Rename and add aliases to old
	names.

	* org-element.el (org-element-context): Prevent an error when
	getting the context of a table rule.

	* org.el (org-deadline-time-hour-regexp)
	(org-scheduled-time-hour-regexp): New buffer local variables.
	(org-set-regexps-and-options): Set the new variables.

	* org-agenda.el (org-agenda-custom-commands-local-options):
	Add :deadline* and :scheduled* to the list of possible agenda entry
	types.
	(org-agenda): Implement a new agenda type agenda* with :scheduled*
	and :deadline* replacing :scheduled and :deadline respectively in
	agenda entry types.  In such agenda, only scheduled and deadline
	items with a time specification [h]h:mm will be considered.
	(org-agenda-entry-types): Document the new agenda entry types
	:scheduled* and :deadline*.
	(org-agenda-list): New parameter `with-hour'.  Use :scheduled* and
	:deadline*.
	(org-agenda-get-day-entries): Handle :scheduled* and :deadline*.
	(org-agenda-get-deadlines, org-agenda-get-scheduled):
	New parameter `with-hour'.  Use `org-deadline-time-hour-regexp' or
	`org-scheduled-time-hour-regexp' as the search string if needed.
	(org-agenda-to-appt): Use :scheduled* and :deadline* by default,
	as other scheduled and deadline items don't have a time spec and
	cannot be turned into appointments.  Trim bracket links and use
	only the description as the appointment text.
	(org-agenda-get-restriction-and-command):
	Add default description for the agenda* view.
	(org-agenda-run-series): Handle agenda* views.

	* org-faces.el (org-agenda-filter-tags)
	(org-agenda-diary, org-agenda-calendar-event)
	(org-agenda-calendar-sexp): Minor code clean up.
	(org-agenda-filter-category): Docstring fix.
	(org-agenda-filter-category): New face.

	* org-agenda.el (org-agenda-local-vars):
	Add `org-agenda-re-filter-overlays' and `org-agenda-regexp-filter'.
	(org-agenda-mode-map): Use "|" for
	`org-agenda-filtered-by-regexp'.
	(org-agenda-re-filter-overlays): New variable.
	(org-agenda-mark-filtered-text):
	Use `org-agenda-re-filter-overlays'.
	(org-agenda-finalize, org-agenda-redo): Allow regexp filtering.
	(org-agenda-filter-by-category): Set `org-agenda-category-filter'
	here instead of within `org-agenda-apply-filter'.
	(org-agenda-regexp-filter): New variable.
	(org-agenda-filter-by-regexp): New function to filter agenda
	buffers by regexp.
	(org-agenda-filter-make-matcher): Make matcher for regexp filters.
	(org-agenda-filter-apply): Don't set `org-agenda-tag-filter' and
	`org-agenda-category-filter'.  Maybe apply regexp filter.
	(org-agenda-filter-hide-line): Add docstring.
	Hide regexp-filtered lines.
	(org-agenda-filter-show-all-tag, org-agenda-filter-show-all-cat):
	Add docstring.
	(org-agenda-filter-show-all-regexp): New function.
	(org-agenda-set-mode-name): Add regexp-filter information.
	(org-agenda-custom-commands-local-options): Add regexp filter.
	(org-agenda-regexp-filter-preset): New variable.
	(org-agenda-prepare): Use the new variable.

	* ox-odt.el (org-odt-code, org-odt-verbatim):
	Use `org-odt--encode-plain-text'.

	* ox-html.el (org-html-link): Minor code clean-up.

	* org.el (org-insert-heading): DTRT when in a narrowed region.

	* org-compat.el (org-buffer-narrowed-p): New compatibility
	function.

	* ox-html.el (org-html-format-inline-image): Fix missing string in
	formatting string.

	* org-agenda.el (org-agenda-skip-scheduled-if-deadline-is-shown):
	New allowed value `repeated-after-deadline' which will prevent the
	display of scheduled items when repeated after the current
	deadline.
	(org-agenda-get-scheduled): Handle the new value.

	* org.el (org-time-string-to-absolute): Tiny docstring fix.

	* ox-html.el (org-html-style-default): New classes `footpara' and
	`footdef' for the footnotes paragraphs and definitions.
	(org-html-format-footnote-definition): Wrap the footnote
	definitions into their own div.
	(org-html-paragraph): Don't add extra <br/> after a paragraph in a
	footnote.
	(org-html-container-element, org-html-divs): Mention that
	org-info.js will not work when changing the defaults.

	* ox-md.el (md): Export underlined text as verbatim.

	* ox-html.el (org-html-style-default): New CSS .underline and
	#org-div-home-and-up.
	(org-html-text-markup-alist): Don't hardcode the style, use the
	new class .underline.
	(org-html-home/up-format): Don't hardcode the style, use
	#org-div-home-and-up.
	(org-html-center-block): Use the .center class.

	* ox-md.el (org-md-underline): New function.

	* org-agenda.el (org-sorting-choice): Fix default value.

	* ox-html.el (org-html-format-footnote-definition)
	(org-html-footnote-section): Don't wrap footnote definitions into
	tables.
	(org-html-paragraph): Add HTML style and class parameter when the
	paragraph is in a footnote definition.  Also allow to add an extra
	string after the paragraph.  Further parameters can be added for
	paragraphs in other environments.
	(org-html-template): Always include the title as <h1
	class="title"></h1>, even when there is no title, as org-info.js
	needs it.

	* org-element.el (org-element-map): Fix tiny typo in docstring.

	* org-agenda.el (org-agenda-day-view): Fix parameter's name.

	* ox-html.el (org-html-format-inline-image): Don't add superfluous
	<p></p> when there is an empty caption.

	* org-agenda.el (org-agenda-refile): Enhance docstring.  Allow to
	clear the refile cache with C-0 or C-u C-u C-u.

	* ox-md.el (org-md-export-as-markdown): Tiny docstring fix.  Fix a
	library keyword in the comment section.

	* org.el (org-toggle-item): Convert all normal lines as items when
	there is a region, and only convert the first line when called
	with a universal prefix argument.  This is consistent with the
	behavior of `org-toggle-heading'.
	(org-toggle-heading): When the region contains only normal lines,
	a universal prefix arg will only convert the first line.  This is
	more consistent with `org-toggle-item'.
	(orgstruct-setup): Add `org-ctrl-c-minus' and `org-ctrl-c-star'.
	(customize-package-emacs-version-alist):
	Update `customize-package-emacs-version-alist'.

	* ox-texinfo.el (org-export-texinfo)
	(org-texinfo-filename, org-texinfo-classes)
	(org-texinfo-format-headline-function)
	(org-texinfo-node-description-column)
	(org-texinfo-active-timestamp-format)
	(org-texinfo-link-with-unknown-path-format)
	(org-texinfo-tables-verbatim)
	(org-texinfo-table-scientific-notation)
	(org-texinfo-text-markup-alist)
	(org-texinfo-format-drawer-function)
	(org-texinfo-format-inlinetask-function)
	(org-texinfo-info-process):
	* ox-odt.el (org-odt-format-drawer-function)
	(org-odt-format-headline-function)
	(org-odt-format-inlinetask-function):
	* ox-md.el (org-export-md, org-md-headline-style): Fix :version
	and :package-version keywords.

	* org.el (org-time-clocksum-use-effort-durations): Don't set to t
	by default as it will change many clocktables out there.  Let the
	user decides whether she wants to turn this on.

	* org.el (org-agenda-inhibit-startup): Revert to nil as the default.

	* org-agenda.el (org-agenda-dim-blocked-tasks): Revert to t as the
	default.

	* ox-html.el (org-html-style-default): More cosmetic tweaks.
	(org-html-head-include-default-style): Minor docstring update.

	* ox.el (org-export-snippet-translation-alist)
	(org-export-coding-system, org-export-in-background)
	(org-export-async-init-file, org-export-invisible-backends)
	(org-export-dispatch-use-expert-ui):
	* ox-texinfo.el (org-texinfo-filename, org-texinfo-classes)
	(org-texinfo-format-headline-function)
	(org-texinfo-node-description-column)
	(org-texinfo-active-timestamp-format)
	(org-texinfo-link-with-unknown-path-format)
	(org-texinfo-tables-verbatim)
	(org-texinfo-table-scientific-notation)
	(org-texinfo-text-markup-alist)
	(org-texinfo-format-drawer-function)
	(org-texinfo-format-inlinetask-function)
	(org-texinfo-info-process):
	* ox-man.el (org-man-tables-centered)
	(org-man-table-scientific-notation)
	(org-man-source-highlight, org-man-source-highlight-langs)
	(org-man-pdf-process, org-man-logfiles-extensions):
	* ox-html.el (org-html-allow-name-attribute-in-anchors)
	(org-html-coding-system, org-html-divs):
	* ox-ascii.el (org-ascii-text-width)
	(org-ascii-headline-spacing, org-ascii-indented-line-width)
	(org-ascii-paragraph-spacing, org-ascii-charset)
	(org-ascii-underline, org-ascii-bullets)
	(org-ascii-links-to-notes)
	(org-ascii-table-keep-all-vertical-lines)
	(org-ascii-table-widen-columns)
	(org-ascii-table-use-ascii-art)
	(org-ascii-format-drawer-function)
	(org-ascii-format-inlinetask-function):
	* org.el (org-modules, org-export-backends)
	(org-highlight-latex-and-related, orgstruct-setup-hook):
	* org-attach.el (org-attach-git-annex-cutoff):
	* org-archive.el (org-archive-file-header-format):
	* org-agenda.el (org-agenda-todo-ignore-time-comparison-use-seconds):
	* ob-python.el (org-babel-python-hline-to)
	(org-babel-python-None-to):
	* ob-ditaa.el (org-ditaa-eps-jar-path):
	* ob-core.el (org-babel-results-keyword): Add :version and
	:package-version.

	* ox-ascii.el: Use utf-8-emacs as the file coding system.

	* org-capture.el (org-capture-templates, org-capture-string)
	(org-capture-steal-local-variables)
	(org-capture-empty-lines-before)
	(org-capture-empty-lines-after)
	(org-capture-insert-template-here)
	(org-capture-import-remember-templates): Fix or add docstring.

	* ox-html.el (org-html-style-default): Cosmetic changes.
	(org-html-postamble, org-html-preamble)
	(org-html-preamble-format): Update docstring.

	* org-agenda.el (org-agenda-format-date-aligned)
	(org-agenda-time-of-day-to-ampm-maybe)
	(org-scheduled-past-days)
	(org-agenda-normalize-custom-commands)
	(org-agenda-run-series, org-store-agenda-views): Fix or add
	docstring.

	* ox-latex.el:
	(org-latex-table-scientific-notation, org-latex-verse-block):
	Fix typos in docstrings.

	* ox-html.el (org-html-text-markup-alist)
	(org-html-pretty-output, org-html-link-org-files-as-html)
	(org-html-postamble, org-html-preamble)
	(org-html-format-inline-image, org-html-splice-attributes)
	(org-export-splice-style, org-html-htmlize-region-for-paste)
	(org-html-fix-class-name)
	(org-html-format-footnote-reference)
	(org-html-format-footnotes-section)
	(org-html-footnote-section, org-html--anchor)
	(org-html--todo, org-html--tags, org-html-format-headline)
	(org-html-toc, org-html-format-section, org-html-checkbox)
	(org-html-format-list-item, org-html-format-latex)
	(org-html-encode-plain-text)
	(org-html-table-first-row-data-cells)
	(org-html-table--table.el-table, org-html-final-function):
	Fix or add docstring.

	* org.el (org-insert-heading): If the current item has a checkbox,
	insert the new item with a checkbox.

	* org.el (org-insert-heading): Don't delete spaces in empty
	headlines.

	* ox-odt.el (org-odt-keyword): Fix typo.

	* ox-latex.el (org-latex-toc-command): Cosmetic docstring change.

	* ox-html.el (org-html-encode-plain-text): Fix typo in docstring.

	* org-faces.el (org-column): Update docstring.

	* org-colview.el: Update error message.

	* org.el (org-modules): Do not include org-mew.el, org-vm.el,
	org-w3m.el, org-wl.el as these files are now part of contrib/.

	* org-mew.el:
	* org-vm.el:
	* org-w3m.el:
	* org-wl.el: Delete (moved to Org's contrib/ directory.)

	* org-capture.el (org-mks): Move from org-mks.el.

	* org-mks.el: Delete.

	* ox-html.el (html): Update HTML options names.

	* org.el (org-show-context): Don't try to fix ellipsis when
	showing a subtree in agenda.

	* ox-html.el (html): Reintroduce #+HTML_HEAD_EXTRA, previously
	known as HTML_STYLE_EXTRA.
	(org-html-head): Enhance docstring.
	(org-html-head-extra): Reintroduce.  Was `org-html-style-extra'.
	(org-html--build-head): Rename from `org-html--build-head'.
	Add information from `org-html-head-extra'.
	(org-html-template): Use `org-html--build-head'.

	* ox-html.el (org-html-display-buffer-mode): Delete.
	(org-html-export-as-html): Use `set-auto-mode' instead of
	`org-html-display-buffer-mode'.

	* org-agenda.el (org-agenda-write): Overwrite file when called
	non-interactively.

	* org-mobile.el (org-mobile-edit): Workaround a
	`org-insert-heading-respect-content' bug which prevents correct
	insertion when point is invisible

	* org.el (org-previous-line-empty-p): New parameter to allow
	checking next line.  Add a docstring.
	(org-insert-heading): Handle two universal prefix arguments as
	advertised in the docstring.  Don't insert new lines when
	creating a heading after the first heading in the current
	subtree.
	(org-insert-heading-respect-content): New optional argument
	arg, passed to `org-insert-heading'.

	* org.el (org-mode): Remove syntax entries.
	Use `org-backward-element' and `org-forward-element' for
	`beginning-of-defun-function' and `end-of-defun-function': this
	allows using C-M-a and C-M-e before the first headline.

	* ox-html.el (html): Remove :html-htmlized-css-url :options-alist.

	* ox-org.el (org-org-htmlized-css-url): Rename from
	`org-html-htmlized-org-css-url' and moved here from ox-html.el.
	(org-org-publish-to-org): Handle :htmlized-source in
	publishing projects.

	* ox-html.el (org-html-style-default): Update docstring.
	(org-html-infojs-install-script, org-html--build-style):
	Update property names.
	(org-html-head-include-scripts)
	(org-html-head-include-default-style, org-html-head):
	Respectively rename from `org-html-style-include-scripts',
	`org-html-style-include-default' and `org-html-style', now
	obsolete.
	(org-html-style-extra): Delete.

	* org-clock.el (org-clock-out): Fix bug: if a closing note needs
	to be stored in the drawer where clocks are stored, let's
	temporarily remove `org-clock-remove-empty-clock-drawer' from
	`org-clock-out-hook'.

	* ob-tangle.el (org-babel-tangle): Remove unused attempt of
	prompting the user of the tangle file name since :tangle is always
	set.  Don't prompt for a tangle file name when called with two
	universal prefix arg outside of a src block.
	Use `org-babel-tangle-single-block'.
	(org-babel-tangle-single-block): New function.
	(org-babel-tangle-collect-blocks): Use the new function.

	* org-table.el (org-table-convert-region, org-table-export)
	(org-table-align, org-table-beginning-of-field)
	(org-table-copy-down, org-table-check-inside-data-field)
	(org-table-insert-column, org-table-find-dataline)
	(org-table-delete-column, org-table-move-column)
	(org-table-insert-row, org-table-insert-hline)
	(org-table-kill-row, org-table-paste-rectangle)
	(org-table-wrap-region, org-table-sum, org-table-get-formula)
	(org-table-get-formula, org-table-get-stored-formulas)
	(org-table-fix-formulas, org-table-maybe-eval-formula)
	(org-table-rotate-recalc-marks, org-table-eval-formula)
	(org-table-get-range, org-table-get-descriptor-line)
	(org-table-find-row-type, org-table-recalculate)
	(org-table-iterate, org-table-iterate-buffer-tables)
	(org-table-formula-handle-first/last-rc)
	(org-table-edit-formulas, org-table-fedit-shift-reference)
	(org-rematch-and-replace, org-table-shift-refpart)
	(org-table-fedit-finish, org-table-fedit-lisp-indent)
	(org-table-show-reference, org-table-show-reference)
	(org-table-show-reference, org-table-show-reference)
	(org-table-force-dataline, orgtbl-error, orgtbl-export)
	(orgtbl-send-replace-tbl, org-table-to-lisp)
	(orgtbl-send-table, orgtbl-send-table, orgtbl-send-table)
	(orgtbl-toggle-comment, orgtbl-insert-radio-table)
	(orgtbl-to-unicode, org-table-get-remote-range)
	(org-table-get-remote-range, org-table-copy-dow)
	(org-table-check-inside-data-field, org-table-insert-colum)
	(org-table-find-dataline, org-table-delete-colum)
	(org-table-move-column, org-table-insert-ro)
	(org-table-insert-hline, org-table-kill-ro)
	(org-table-paste-rectangle, org-table-wrap-regio)
	(org-table-sum, org-table-get-formul)
	(org-table-get-stored-formulas, org-table-fix-formula)
	(org-table-maybe-eval-formul, org-table-rotate-recalc-marks)
	(org-table-eval-formul, org-table-get-range)
	(org-table-get-descriptor-lin, org-table-find-row-type)
	(org-table-recalculat, org-table-iterate)
	(org-table-iterate-buffer-table)
	(org-table-formula-handle-first/last-r)
	(org-table-edit-formulas, org-table-fedit-shift-referenc)
	(org-rematch-and-replace, org-table-shift-refpar)
	(org-table-fedit-finish, org-table-fedit-lisp-inden)
	(org-table-show-reference, org-table-force-datalin)
	(orgtbl-error, orgtbl-export, orgtbl-send-replace-tb)
	(org-table-to-lisp, orgtbl-send-tabl, orgtbl-toggle-comment)
	(orgtbl-insert-radio-tabl, orgtbl-to-unicode)
	(org-table-get-remote-range): Use `user-error' instead of
	`error' for user errors.

	* ob-core.el (org-babel-load-in-session): Throw a useful error
	when there is no code block at point.

	* ob-tangle.el (org-babel-tangle): Rename the ONLY-THIS-BLOCK
	parameter to ARG.  Allow two universal prefix arguments to tangle
	by the target file of the block at point.
	(org-babel-tangle-collect-blocks): New parameter TANGLE-FILE
	to restrict the collection of blocks to those who will be
	tangled in TARGET-FILE.

	* org-src.el (org-edit-src-auto-save-idle-delay): Use a delay of 0
	by default (i.e., deactivate auto-saving.)
	(org-edit-src-code): Set `buffer-auto-save-file-name' for
	auto-saving with `auto-save-mode'.

	* org.el (org-deadline, org-schedule): When called with two
	universal prefix arguments, set the warning time or the delay
	relatively to the current timestamp, not to today's date.

	* org-agenda.el (org-agenda-filter-apply):
	Deactive `org-agenda-entry-text-mode' when filtering.
	(org-agenda-entry-text-mode): Don't allow in filtered views.
	Don't show the maximum number of lines when turning off.

	* ox-html.el (org-html-headline): Add comment.

	* org.el (org-mode): Set `paragraph-start'.

	* org-agenda.el (org-agenda-entry-text-leaders): New option.
	(org-agenda-entry-text-show-here): Use it.

	* ox-html.el (org-html-link--inline-image): Always retrieve
	attributes for inline images.
	(org-html-link): Fix trailing whitespace at the end of the opening
	<a ...> HTML tag.
	(org-html-headline): For headlines whose first element is a
	headline and not a section, pretend there is an empty section (as
	"") for the correct HTML div to be inserted.

	* org-agenda.el (org-agenda-collect-markers)
	(org-create-marker-find-array): Move to ox-icalendar.el.
	(org-agenda-marker-table, org-check-agenda-marker-table):
	Delete.

	* ox-icalendar.el (org-icalendar-create-uid): New parameter
	H-MARKERS to only update some headlines, not the whole file.
	(org-icalendar--combine-files): When exporting to an .ics file
	only add UID to the headlines shown in the agenda buffer.
	(org-agenda-collect-markers, org-create-marker-find-array):
	Move here.

	* org-agenda.el (org-agenda-write): Ask before overwriting an
	existing file.

	* org-pcomplete.el (pcomplete/org-mode/file-option/infojs_opt):
	Use `org-html-infojs-opts-table'.

	* ox-html.el (org-html-infojs-opts-table):
	(org-html-use-infojs, org-html-infojs-options)
	(org-html-infojs-template): Move from ox-jsinfo.el.  Rename using
	the org-html- prefix.
	(org-html-infojs-install-script): Move from ox-jsinfo.el.

	* ox-jsinfo.el: Delete.

	* ox-html.el (org-html-section): Fix indentation.
	(org-html-inner-template): Add the document title here, within the
	"content" class, as the org-info.js needs it.
	(org-html-template): Don't include the document's title here.
	(org-html-format-inlinetask-function): Remove wrong example.

	* ob-tangle.el (org-babel-tangle-collect-blocks): Don't collect
	blocks in commented out headings.

	* ox-latex.el (org-latex-logfiles-extensions)
	(org-latex-remove-logfiles): Improve docstrings.

	* org-capture.el (org-capture): Cosmetic fix.

	* org-protocol.el (org-protocol-create-for-org)
	(org-protocol-create): Small docstrings enhancements.

	* org-protocol.el (org-protocol-capture): Small docstring fix.

	* org.el (org-speed-command-activate): Only forbid in src code
	blocks.

	* org-indent.el
	(org-indent-add-properties): Bugfix: prevent negative value for
	`added-ind-per-lvl'.

	* org.el (org-mode): Add `org-fix-ellipsis-at-bol' to
	`isearch-mode-end-hook' so that any isearch fixes the problem with
	ellipsis on the first line.
	(org-fix-ellipsis-at-bol): New defsubst.
	(org-show-context, org-isearch-end): Use it.

	* org-agenda.el (org-agenda-deadline-leaders): New formatting
	string for past deadlines.
	(org-agenda-scheduled-leaders): Small change.
	(org-agenda-get-deadlines): Use the new formatting string.

	* ob-lob.el (org-babel-lob-execute): Rename cache? to cache-p.

	* org.el (org-speed-command-activate): Don't activate speed
	commands within blocks.

	* org.el (org-show-context): Remove useless catch.  Make sure the
	top of the window is a visible headline.
	(org-activate-plain-links): Remove unused catch.

	* org-macs.el (org-get-alist-option): Return nil, not (nil), so
	that `org-show-context' DTRT.

	* org.el (org-imenu-get-tree): Fix bug when matching against empty
	headlines.
	(org-overview): Stay on current line.
	(org-map-entries): Fix docstring.

	* org-macs.el (org-unmodified): Update comment.  Don't define
	`with-silent-modifications' for emacsen that don't have it.

	* org-compat.el (org-with-silent-modifications):
	New compatibility macro.

	* org.el (org-refresh-category-properties)
	(org-refresh-properties, org-entry-blocked-p)
	(org-agenda-prepare-buffers):

	* org-indent.el (org-indent-remove-properties)
	(org-indent-add-properties):

	* org-colview.el (org-columns-display-here)
	(org-columns-remove-overlays, org-columns-quit)
	(org-columns-edit-value, org-columns-compute-all)
	(org-columns-compute, org-agenda-colview-compute):

	* org-clock.el (org-clock-sum): Use the compatibility macro
	`org-with-silent-modifications' instead of
	`with-silent-modifications'.

	* org.el (org-sort-remove-invisible): Remove emphasis markers.

	* org.el (org-sort-remove-invisible): Use defsust.  Do not only
	check against invisible links, truly returns the visible part of
	the string.
	(org-sort-remove-invisible): Add a docstring.
	(org-sort-entries): Remove hidden links when comparing entries.

	* org-list.el (org-sort-list): Remove hidden links when comparing
	list items.

	* ox-html.el (org-html-headline): Fix typo.
	(org-html-format-headline--wrap): Cosmetic change.

	* org.el (org-at-clock-log-p): Delete.

	* org-clock.el (org-at-clock-log-p): Move here.

	* ox-html.el (org-html-format-headline-function): Fix docstring.

	* ob-sql.el (org-babel-execute:sql): Add header row delimiter for
	both mysql and postgresql.

	* org.el (org-agenda-prepare-buffers): Don't use
	`with-silent-modifications' too early.

	* org-macs.el: Add a comment on when to use `org-unmodified' and
	when to use `with-silent-modifications'.

	* org-colview.el (org-columns-display-here)
	(org-columns-remove-overlays, org-columns-quit)
	(org-columns-edit-value, org-columns-compute-all)
	(org-columns-compute, org-agenda-colview-compute):
	* org-clock.el (org-clock-sum):
	* org.el (org-refresh-category-properties)
	(org-refresh-properties, org-entry-blocked-p)
	(org-agenda-prepare-buffers): Use `with-silent-modifications'
	instead of `org-unmodified'.

	* ox-publish.el (org-publish-sitemap-date-format): Small docstring
	enhancement.

	* ox-latex.el (org-latex-format-headline-default-function):
	New option.
	(org-latex-format-headline-function): Use the new option as
	the default value.
	(org-latex-toc-command): Don't add vertical space after the table
	of contents.

	* org.el (org-entry-blocked-p): Use `org-unmodified' instead of
	`org-with-buffer-modified-unmodified'.
	(org-agenda-prepare-buffers): Fix indentation.

	* org-macs.el (org-unmodified): Rename from
	`org-with-buffer-modified-unmodified'.
	(org-with-buffer-modified-unmodified): Delete.

	* ob-python.el (org-babel-python-command): Use a defcustom.
	(org-babel-python-mode): Use a defcustom and default to
	'python-mode when featured.

	* org-agenda.el (org-agenda-start-day): Refer to `org-read-date'
	in the docstring.

	* ox-org.el (org-org-publish-to-org): Autoload.

	* org-protocol.el:
	* org-bibtex.el: Remove remember support.

	* org-clock.el (org-clock-heading-for-remember): Delete.
	(org-clock-in): Do not set the heading for remember.

	* org.el (org-move-subtree-down, org-forward-element)
	(org-backward-element):

	* org-table.el (org-table-previous-field)
	(org-table-move-column, org-table-move-row):

	* org-list.el (org-move-item-down, org-move-item-up)
	(org-cycle-item-indentation): Use `user-error' when moving or
	modifying the element at point is not possible.

	* ox-html.el (org-html-table-header-tags)
	(org-html-table-data-tags, org-html-table-row-tags)
	(org-html-table-align-individual-fields): Use the
	org-export-html group.
	(org-html-inline-src-block, org-html-link): Fix error messages.
	(org-html-begin-plain-list): Fix formatting, better FIXME
	comment.

	* org.el (org-fill-paragraph): Fill using
	`org-mode-transpose-word-syntax-table'.

	* ox-org.el (org-org-publish-to-org): New defun.

	* ox-html.el (org-export-htmlize): Delete group.
	(org-html-htmlize-output-type)
	(org-html-htmlized-org-css-url)
	(org-html-htmlize-region-for-paste): Rename from
	org-export-htmlize-*.
	(org-html-htmlize-generate-css, org-html-fontify-code):
	Use the correct names.

	* org-compat.el (org-file-equal-p): New compatibility function.

	* ox.el (org-export-output-file-name): Use the new function.

	* org-clock.el (org-clock-set-current)
	(org-clock-delete-current): Delete.
	(org-clock-in, org-clock-out): Set and delete
	`org-clock-current-task'.  Minor code clean-up.

	* org-clock.el (org-clock-in, org-clock-in-last):
	Tell `org-current-time' to always return a past time.

	* org.el (org-current-time): New argument `past' to force
	returning a past time when rounding.

	* org-agenda.el (org-agenda-unmark-clocking-task): New function.
	(org-agenda-mark-clocking-task): Use it.
	(org-agenda-clock-in): Let the cursor where it is.
	(org-agenda-clock-out): Ditto.  Also remove the
	`org-agenda-clocking' overlay.

	* org-agenda.el (org-agenda-set-restriction-lock): Fix restriction
	so that it ends at the beginning of the next headline at the same
	level.

	* org.el (org-set-effort, org-property-next-allowed-value):
	When needed, update the current clock effort time.
	(org-next-link): New parameter `search-backward'.  Fix bug when at
	a link with no 'org-link face, e.g., in a DONE headline.  Throw a
	message instead of an error.
	(org-previous-link): Use `org-next-link'.

	* org-agenda.el (org-agenda-format-item): Only set the breadcrumbs
	when `org-prefix-has-breadcrumbs' is non-nil.

	* org.el (org-mode): Don't make characters from
	`org-emphasis-alist' word constituents.
	(org-mode-transpose-word-syntax-table): Rename from
	`org-syntax-table'.
	(org-transpose-words):
	Use `org-mode-transpose-word-syntax-table'.

	* ox.el (org-export--dispatch-ui)
	(org-export--dispatch-action): Use integers for control chars.

	* org-agenda.el (org-agenda-set-restriction-lock): Put the
	overlay until the end of the subtree, not the end of the
	headline.

	* org.el (org-entry-delete, org-delete-property): New optional
	arg delete-empty-drawer, a string, to delete any empty drawer
	with that name.
	(org-toggle-ordered-property): Delete the drawer "PROPERTIES"
	if empty.

	* org-src.el (org-src-mode-map, org-edit-src-code)
	(org-edit-fixed-width-region, org-edit-src-save): Use C-c C-k
	for `org-edit-src-abort'.

	* org.el (org-mode): Use org-unmodified during startup
	initialization for functions that may be inhibited.

	* org-table.el (org-table-align): Only set the window start
	when table alignment is performed in the selected window.

	* org-src.el (org-edit-src-auto-save-idle-delay): New option.
	(org-src-ask-before-returning-to-edit-buffer): Make a defcustom.
	(org-edit-src-code-timer): New timer variable.
	(org-edit-src-code): Run the timer.
	(org-edit-fixed-width-region): Enhance message.
	(org-edit-src-exit): Cancel the timer.
	(org-edit-src-save): Prevent saving when editing fixed-width
	buffer, exiting will save already.
	(org-edit-src-exit): Inconditionally kill the src/example
	editing buffer.

	* org-pcomplete.el (pcomplete/org-mode/file-option):
	Require 'org-element.  This fixes a bug about unbound variable
	`org-element-affiliated-keywords' when trying to complete a
	keyword before 'org-element was required.

	* org-list.el (org-list-bullet-string): Replace match when there
	is a match, otherwise just return the bullet.

	* org-src.el (org-src-mode-map): New binding C-c k to abort
	editing.
	(org-edit-src-code): Mention the keybinding to abort editing
	and go back to the correct position.
	(org-edit-src-abort): New command to abort editing.

	* ox-html.el (org-html--build-meta-info): Add a newline before
	the title meta information.

	* org.el (org-return-follows-link): Mention that this does not
	affect the behavior of RET in tables.

	* ox-html.el (org-html--build-mathjax-config): Only include
	MathJax configuration if the resulting HTML contains LaTeX
	fragments.

	* org.el (org-syntax-table, org-transpose-words): Delete.
	(org-mode): Syntactically Define {} and <> as parentheses.
	(org-drag-line-forward, org-drag-line-backward):
	New functions.
	(org-shiftmetaup, org-shiftmetadown): Fall back on the new
	functions instead of throwing an error.
	(org-make-org-heading-search-string): Don't use statistic or [x/y]
	cookies when creating a link.

	* ox-html.el (org-html-table): Append #+attr_html attributes.

	* org.el (org-emphasis-alist, org-protecting-blocks):
	* org-src.el (org-edit-src-find-region-and-lang):
	* org-list.el (org-list-forbidden-blocks):
	* org-footnote.el (org-footnote-forbidden-blocks):
	Remove references to the deleted DocBook exporter.

	* org.el (org-end-of-line): Don't throw an error outside elements.

	* ox-html.el (org-html-link): Don't throw an error if the value
	of the :ID: property has not been generated by uuidgen.

	* org-pcomplete.el (pcomplete/org-mode/file-option/x):
	Resurrect.  Use `org-default-options' to initialize completion
	fonctions for the most important keywords.

	* org-macs.el (org-default-options): Rename and adapt from
	`org-get-current-options'.

	* org.el (org-options-keywords): Add keywords.

	* ox-odt.el (org-odt-convert-read-params): Fix typo in prompt.

	* ox-latex.el (org-latex-horizontal-rule): Fix typo in docstring.

	* ox-html.el (org-html-display-buffer-mode): New option.
	(org-html-export-as-html): Use it.

	* ob-core.el (org-babel-insert-result): Fix bug when inserting
	an empty string as the result.

	* org.el (org-timestamp-change): New optional parameter
	`suppress-tmp-delay' to suppress temporary delay like "--2d".
	(org-auto-repeat-maybe): Suppress temporary delays.

	* org-agenda.el (org-agenda-get-scheduled): When the delay is
	of the form "--2d" and there is a repeater, ignore the delay
	for further repeated occurrences.

	* org-agenda.el (org-agenda-get-deadlines)
	(org-agenda-get-scheduled): Minor refactoring.

	* org.el (org-time-string-to-absolute): Tiny docstring enhancement.
	(org-edit-special): Don't allow to edit when buffer is read only.

	* ox-html.el (org-html-format-latex): Don't set `cache-relpath'
	and `cache-dir' when `processing-type' is 'mathjax.
	(org-html-format-latex): Fix conversion in non-file buffers.

	* org.el (org-speed-commands-default): Bind `B' and `F' to
	`org-previous-block' and `org-next-block'.
	(org-read-date-minibuffer-local-map): Use "!" instead of "?" to
	see today's diary as "?" is already bounded by Calendar.
	(org-read-date-minibuffer-local-map): Use "." to go to today's
	date.

	* ob-core.el (org-babel-next-src-block)
	(org-babel-previous-src-block): Rewrite using
	`org-next-block'.

	* org.el (org-next-block, org-previous-block): New navigation
	commands.
	(org-mode-map): Bind the new commands to C-c C-F and C-c C-B
	respectively.

	* org-agenda.el (org-agenda-write): Don't copy headlines' subtrees
	when writing to an .org file.

	* org.el (org-copy-subtree): New parameter `nosubtrees'.

	* org-agenda.el (org-agenda-write): Allow writing to an .org file.

	* org.el (org-paste-subtree): Fix typo in docstring.

	* org-agenda.el (org-agenda-get-todos)
	(org-agenda-get-timestamps): Use nil as `ts-date' for diary
	sexpressions.
	(org-agenda-get-todos): Skip diary sexps when trying to sort by
	timestamp.
	(org-agenda-max-entries, org-agenda-max-todos)
	(org-agenda-max-tags, org-agenda-max-effort): New options.
	(org-timeline, org-agenda-list, org-search-view)
	(org-todo-list, org-tags-view): Tell `org-agenda-finalize-entries'
	what agenda type we are currently finalizing for.
	(org-agenda-finalize-entries): Limit the number of entries
	depending on the new options.
	(org-agenda-limit-entries): New function.

	* org.el (org-deadline): Allow a double universal prefix argument
	to insert/update a warning cookie.
	(org-deadline): Allow a double universal prefix argument to
	insert/update a delay cookie.

	* org-agenda.el (org-agenda-skip-scheduled-delay-if-deadline):
	New option.  The structure of the possible values is copied
	from `org-agenda-skip-deadline-prewarning-if-scheduled'.
	(org-agenda-get-scheduled): Honor the two new option,
	`org-scheduled-delay-days' and
	`org-agenda-skip-deadline-prewarning-if-scheduled'.  I.e. if a
	scheduled entry has a delay cookie like "-2d" (similar to the
	prewarning cookie for deadline), don't show the entry until
	needed.

	* org.el (org-deadline-warning-days): Small docstring fix.
	(org-scheduled-delay-days): New option (see
	`org-deadline-warning-days'.)
	(org-get-wdays): Use the new option.

	* org-agenda.el (org-agenda-sorting-strategy): Document the
	new sorting strategies.
	(org-agenda-get-todos, org-agenda-get-timestamps)
	(org-agenda-get-deadlines, org-agenda-get-scheduled): Add a
	`ts-date' text property with scheduled, deadline or timetamp
	date.
	(org-cmp-ts): New function to compare timestamps.
	(org-em): Add a docstring.
	(org-entries-lessp): Use `org-cmp-ts' to compare timestamps.
	Implement the following sorting strategies: timestamp-up/down,
	scheduled-up/down, deadline-up/down, ts-up/down (for active
	timestamps) and tsia-up/down (for inactive timestamps.)

	* ob-lilypond.el (ly-process-basic): Bugfix, don't use `pcase'.

	* org.el (org-contextualize-validate-key): Check against two new
	context predicates [not-]in-buffer.

	* org-agenda.el (org-agenda-custom-commands-contexts):
	Document the new [not-]in-buffer context predicates.

	* ob-core.el (org-ts-regexp): Remove duplicate defconst'ing.
	(org-babel-result-regexp): Don't use `org-ts-regexp', use a regexp
	string directly.

	* ob-lilypond.el (ly-process-basic): Don't use `ly-gen-png' and
	friends, rely on the extension of the output file.

	* org-archive.el (org-archive-file-header-format): New option.
	(org-archive-subtree): Use it.

	* ob-lilypond.el (ly-process-basic): Rely on ly-gen-png/pdf/eps to
	set the output type.

	* org.el (org-read-date-minibuffer-local-map): New variable.
	(org-read-date): Use it.
	(org-read-date-minibuffer-setup-hook): Mark as obsolete.
	(org-read-date): Bind `!' to `diary-view-entries' in order to
	check diary entries while setting an Org date.

	* org-agenda.el (org-diary): Only keep the descriptions of the
	links since Org links are not active in the diary buffer.

	* org-faces.el (org-priority): New face.

	* org.el (org-font-lock-add-priority-faces): Use the new face.

	* org-agenda.el (org-agenda-fontify-priorities): Use the
	org-priority face and add specific agenda face on top of it.

	* org-agenda.el (org-agenda-show-clocking-issues)
	(org-agenda-format-item): Let-bind
	`org-time-clocksum-use-effort-durations' to nil.

	* org.el (org-ctrl-c-ctrl-c): Only throw a message when using two
	universal prefix arguments on a list where all items are already
	in a transitory state.  Refine the error when the checkbox cannot
	be toggled.

	* org.el ("org-loaddefs.el"): Load org-loaddefs.el before
	requiring any org library.  Also use `load', not
	`org-load-noerror-mustsuffix'.
	(org-effort-durations): Move up to fix a compiler warning.
	(org-edit-special): Fix typo in docstring.
	(org-time-clocksum-format): Add a version tag and add to the
	'org-clock group.
	(org-time-clocksum-use-fractional): Ditto.
	(org-time-clocksum-use-effort-durations): New option to allow
	using `org-effort-durations' when computing clocksum durations.
	(org-minutes-to-clocksum-string): Use the new option.

	* org-clock.el (org-clocktable-write-default): Let-bind
	`org-time-clocksum-use-effort-durations' to a new clocktable
	parameter ":effort-durations".

	* org-entities.el (org-entities): "neg" should be used in LaTeX
	math mode.  Add the "neg" entity.

	* org-mobile.el (org-mobile-allpriorities): New option.
	(org-mobile-create-index-file): Use the new option.

	* org-latex.el (org-export-latex-inline-images): New option.

	* org.el (org-forward-heading-same-level): Before the first
	headline, go to the first headline.
	(org-backward-heading-same-level): Before the first headline,
	go to the beginning of the buffer, like
	`outline-previous-visible-heading' does.

	* org-exp.el (org-export-plist-vars): Don't use
	`org-export-html-inline-images' to set the :inline-images
	property, use distinct properties for the various backends.

	* org-publish.el (org-publish-project-alist): Ditto.

	* org-latex.el (org-export-latex-links): Use :latex-inline-images
	instead of :inline-images.

	* org-odt.el (org-compat): Require.

	* org.el (org-parse-time-string): Allow strings supported by
	tags/properties matcher (eg <now>, <yesterday>, <-7d>).

	* org-clock.el (org-clock-rounding-minutes): New option to round
	the time by N minutes in the past when clocking in or out.
	(org-clock-in, org-clock-in-last, org-clock-out): Use the new
	option.

	* org.el (org-current-time): New optional parameter
	`rounding-minutes' to override the use of
	`org-time-stamp-rounding-minutes' for rounding.

	* org-clock.el (org-clock-special-range): Small docstring fix.
	New parameter 'weekstart to define the week start day.
	(org-clock-special-range, org-dblock-write:clocktable)
	(org-dblock-write:clocktable, org-clocktable-write-default)
	(org-clocktable-steps, org-clock-get-table-data): Use the new
	parameter.
	(org-clocktable-defaults): Set monday as the starting day of the
	week by setting :wstart to 1.

	* org.el (org-store-link): Fix the naming of internal links to
	lines starting with a keyword.

	* org-agenda.el (org-agenda-Quit, org-agenda-quit)
	(org-agenda-exit, org-agenda-kill-all-agenda-buffers):
	Docstring fixes.

	* org.el (org-last-set-property-value): New variable.
	(org-read-property-name): Fix dangling parentheses.
	(org-set-property-and-value): New command to manually set
	both the property and the value.  A prefix arg will use the
	last property-value pair set without prompting the user.
	(org-set-property): Set `org-last-set-property-value'.
	(org-mode-map): Bind the new command to `C-c C-x P'.
	(org-find-invisible-foreground): Delete.
	(org-mode): Use `face-background' instead of
	`org-find-invisible-foreground'.
	(org-startup-options): New startup keywords.
	(org-log-into-drawer): Update docstring to explain how to set this
	variable through the startup keyword "logdrawer" and "nologdrawer".
	(org-log-states-order-reversed): Document the new startup keywords
	"logstatesreversed" and "nologstatesreversed".
	(org-mode-map): Use `org-remap' instead of binding `M-t' to
	`org-transpose-words' directly.
	(org-syntax-table): New variable.
	(org-transpose-words): New command, simply wrapping the new
	syntax table around `transpose-words'.
	(org-mode-map): Bind `org-transpose-words' to `M-t'.
	(org-store-link): Use keyword at point as the search string.
	Use `delq nil' instead of `delete nil'.
	(org-make-org-heading-search-string): Rewrite using
	org-element.el.  Not an interactive function anymore.

	* org-pcomplete.el (pcomplete/org-mode/drawer): Ditto.

	* org-mobile.el (org-mobile-files-alist): Ditto.

	* org.el (org-store-link): When creating a link to a heading with
	a bracket link, don't escape this link with curly braces as the
	escaped link is not active anyway; use the description instead.
	If the headline only consists of a bracket link, add a star to the
	description so that the user knows this is an internal link.

	* org-w3m.el (org-w3m-store-link): New function.

	* org.el (org-store-link): Update the error message when no method
	is available for storing a link.  Use `user-error' for this.
	Remove handling w3m links from this function.
	(org-insert-heading, org-insert-todo-heading): A double prefix arg
	force the insertion of the subtree at the end of the parent
	subtree.
	(org-store-link): A double prefix argument now skips module
	store-link functions to only use Org's core functions.  Also, when
	several modular store-link functions match, ask for which one to
	use.
	(org-cycle, org-cycle-internal-global)
	(org-cycle-internal-local, org-display-outline-path): Let-bind
	`message-log-max' to nil so that messages don't populate the
	*Messages* buffer.

	* org-table.el (org-table-eval-formula): Handle localized
	time-stamps by internally converting them to english during
	formulas evaluation.

	* org.el (org-clock-timestamps-up): Fix declarations.

	* ob-core.el (org-split-string): Declare function.

	* org-html.el (org-html-export-list-line): Add CSS classes to
	these list HTML tags: <ul> <dl> and <ol>.

	* org-clock.el (org-clock-timestamps-up)
	(org-clock-timestamps-down, org-clock-timestamps-change):
	Add an optional argument N to change timestamps by several units.

	* org.el (org-shiftcontrolup, org-shiftcontroldown): Ditto.

	* org-exp.el (org-export-copy-to-kill-ring): Add a new choice
	'if-interactive and use it as the default.
	(org-export-push-to-kill-ring): Use the new choice.

	* org.el (org-block-entry-blocking): New variable.
	(org-todo): Use it.  Also use `user-error' when a TODO state
	change is blocked.
	(org-block-todo-from-children-or-siblings-or-parent):
	Display `org-block-entry-blocking' in the user-error message.

	* org.el (org-get-cursor-date): New optional argument WITH-TIME to
	add the time of the day.

	* org-capture.el (org-capture): When capturing from the agenda and
	with a non-nil value for `org-capture-use-agenda-date', a `C-1'
	prefix will set the capture time to the HH:MM of the current line
	or the current HH:MM.

	* org-agenda.el (org-agenda-capture): New optional argument
	WITH-TIME: when set to 1, the capture time will be set to the
	HH:MM time of the current line, or the current HH:MM time.

	* org.el (org-latex-preview-ltxpng-directory): Fix docstring
	formatting.
	(org-deadline-close): Use `org-time-stamp-to-now'.
	(org-time-stamp-to-now): Use `org-float-time' instead of the
	obsolete `time-to-seconds' function.
	(org-format-outline-path): Fix bug: add the separator string after
	the prefix.
	(org-display-inline-images): Search for #+ATTR within the current
	paragraph.
	(org-days-to-time): Make obsolete.
	(org-time-stamp-to-now): Rename from `org-days-to-time'.
	Allow to compare time-stamps based on seconds.

	* org-agenda.el (org-agenda-todo-ignore-time-comparison-use-seconds):
	New option to compare time stamps using seconds, not days.
	(org-agenda-todo-custom-ignore-p)
	(org-agenda-check-for-timestamp-as-reason-to-ignore-todo-item):
	Use the new function's name and the new option.

	* org-clock.el (org-clock-sound): Enhance docstring.
	(org-notify): Use the parameter `play-sound' as argument for
	`org-clock-play-sound'.
	(org-clock-play-sound): New optional argument `clock-sound' to
	override `org-clock-sound'.

	* org-agenda.el (org-agenda-format-item): Fix initialization
	of the level text property.

	* org.el (org-format-outline-path): Small docstring
	enhancement.
	(org-display-outline-path): Fix order or arguments.

	* org.el (org-activate-plain-links)
	(org-activate-bracket-links): Add a new 'htmlize-link text
	property, so that htmlize (> version 1.42) can linkify the
	links.
	(org-display-outline-path): Allow a string value for the
	`as-string' parameter.  Such a value will replace the "/"
	separator in the output.  New argument `as-string'.
	(org-refile-keep): New variable.
	(org-copy): New command to copy notes.
	(org-refile): New parameter msg to override the "Refile" string in
	the default prompt.
	(org-mode-map): Bind "C-c M-w" to `org-copy'.
	(org-refile-get-location): Use the current file name as the
	default target when there is no refile history.
	(org-cycle-hide-inline-tasks): New function to hide inline tasks
	when cycling.
	(org-cycle-hook): Use the new function.
	(org-entry-put): Fix bug when updating the last clock.
	(org-use-last-clock-out-time-as-effective-time): New option.
	(org-current-effective-time): Use the new option.

	* org-clock.el (org-clock-get-last-clock-out-time):
	New function.

	* org.el (org-toggle-inline-images): Only send a message when
	called interactively.
	(org-scan-tags): Fix the declaration and the use of
	`org-agenda-format-item'.

	* org-agenda.el (org-agenda-add-time-grid-maybe): Use the
	correct number of parameters for `org-agenda-format-item'.
	Add a docstring.

	* org.el (org-outline-level): Go at the beginning of the
	headline first to always return a sensible result.

	* org-agenda.el (org-search-view, org-agenda-get-todos)
	(org-agenda-get-timestamps, org-agenda-get-sexps)
	(org-agenda-get-progress, org-agenda-get-deadlines)
	(org-agenda-get-scheduled, org-agenda-get-blocks): Return the
	correct level depending on `org-odd-levels-only'.
	(org-agenda-prefix-format): A new specifier `%l' allows to insert
	X spaces when the item is of level X.
	(org-search-view, org-get-entries-from-diary)
	(org-agenda-get-todos, org-agenda-get-timestamps)
	(org-agenda-get-sexps, org-agenda-get-progress)
	(org-agenda-get-deadlines, org-agenda-get-scheduled)
	(org-agenda-get-blocks, org-agenda-change-all-lines): Add a
	new text property 'level, a string with as many whitespaces as
	the level of the item.
	(org-agenda-format-item, org-compile-prefix-format):
	Handle the new `%l' specifier.

	* org-colview.el (org-columns-next-allowed-value): Add the
	CLOCKSUM property to the list of properties that can be
	changed interactively from the column view.

	* org.el (org-entry-put): Allow to set the CLOCKSUM property
	by updating the most recent clock.  This is useful in the
	column view when you want to use S-<left/right> to update the
	last clock of the entry at point.
	(org-image-actual-width): New choice: use #+ATTR* or fall back on
	a number.
	(org-display-inline-images): Implement the new choice.
	(org-image-actual-width): Rename from `org-image-fixed-width'.
	Update the docstring.  Give more choice.
	(org-display-inline-images): Use the option new choices.
	(org-image-fixed-width): New option to set a fixed width for
	inline images.
	(org-display-inline-images): Use the new option.

	* org-agenda.el (org-class): Allow to use holiday strings for
	the `skip-weeks' arguments.

	* org.el (org-mode): Set the syntax of the " character to "string
	quote".

	* org-agenda.el (org-agenda-append-agenda): Bugfix: correctly
	check whether we are in `org-agenda-mode'.
	(org-agenda): Set `org-agenda-buffer-name' correctly with sticky
	agendas and non-custom commands.

2013-11-12  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-src.el (org-edit-src-exit): Let overlay survive after the
	buffer has been saved.

	* ox-texinfo.el (org-texinfo-export-to-texinfo): Use new style
	backquoting.
	(org-texinfo-export-to-info): Use new style backquoting.

	* ob-latex.el (org-babel-execute:latex): Call `file-name-sans-extension'
	instead of `file-base-name'.

	* org.el (org-insert-heading): Improve whitespace behavior at
	end of subtree.
	(org-latex-default-packages-alist): Add the `rotating' package to
	the list of default packages.  Improve docstring.
	(org-insert-property-drawer): Insert only after space in current
	line.
	(org-forward-paragraph, org-backward-paragraph): Do not deactivate
	the mark.
	(org-special-ctrl-o): New option.
	(org-open-line): Don't do anything special unless `org-special-ctrl-o'
	is non-nil.

	* org-agenda.el (org-agenda-custom-commands-local-options):
	(org-agenda-span, org-agenda-ndays-to-span)
	(org-agenda-span-to-ndays, org-agenda-list, org-agenda-later)
	(org-agenda-change-time-span, org-agenda-compute-starting-span):
	Add support for fortnight view.
	(org-agenda-menu): Add fortnight view command.
	(org-agenda-fortnight-view): New command.

	* org-timer.el (org-clock-sound): Silence compiler.

	* org.el (org-beginning-of-line, org-end-of-line):
	Bind deactivate-mark to avoid that this command deactivates it.
	(org-make-tags-matcher): Do not interpret / in property value as
	starter of TODO match.
	(org-overview): Preserve point.
	(org-read-date-minibuffer-local-map): Don't replace disputed keys
	when defining this keymap.
	(org-read-date): Remove unnecessary binding of
	`org-replace-disputed-keys'.
	(org-insert-heading): Allow to remove blank lines if the user does
	not want any.
	(org-unlogged-message): Fix typo in dostring.

	* ob-ruby.el: New customizations `org-babel-ruby-hline-to' and
	`org-babel-ruby-nil-to'
	(org-babel-ruby-var-to-ruby): Convert incoming 'hlines.
	(org-babel-ruby-table-or-string): Convert outgoing nils.

	* org.el (org-file-apps-defaults-gnu): Use `xdg-open' to open
	files where available.

	* org-table.el (orgtbl-radio-table-templates): Improve docstring.

	* org.el (org-unlogged-message): New function.
	(org-cycle, org-cycle-internal-global, org-cycle-internal-local)
	(org-global-cycle, org-display-outline-path):
	Use `org-unlogged-message'.

	* org-pcomplete.el (org-make-org-heading-search-string):
	Fix function declaration.
	(pcomplete/org-mode/searchhead): Remove incorrect second arguments
	to `org-make-org-heading-search-string'.

	* org.el (org-read-date): Turn off replacing disputed keys when
	defining the minibuffer keys during date selection.
	(org-insert-heading): Improve the empty line insertion behavior.
	Basically, never remove empty lines, only add them.

	* org-attach.el (org-attach-commit): Use vc-git to find the git
	repository.

	* org-compat.el (org-move-to-column): Turn off invisibility stuff
	for moving the cursor to a column.

	* org.el (org-modules): Update with the new module org-mac-link.
	(org-display-outline-path): Do not log outline path in Message
	buffer.
	(org-agenda-ignore-drawer-properties): New option.
	(org-agenda-prepare-buffers):
	Honour `org-agenda-ignore-drawer-properties'.

	* org-clock.el (org-clock-goto): Recenter to thrd line

	* org-table.el (orgtbl-send-replace-tbl): Allow multiple spaces
	between keywords in RECEIVE ORGTBL lines.

	* org.el (org-bookmark-names-plist): New user option.
	(org-set-regexps-and-options-for-tags): Use `org-bookmark-names-plist'.
	(org-refile): Use `org-bookmark-names-plist'.

	* org-capture.el (org-capture-bookmark-last-stored-position):
	Use `org-bookmark-names-plist'.

	* org.el (org-insert-heading): Rewritten from scratch.
	(org-N-empty-lines-before-current): New function
	(org-insert-heading-respect-content): Set the correct argument to
	force a heading even in lists.

	* org-colview.el (org-columns-display-here): Enforce fixed width
	font.

	* org-faces.el (org-column): Setting font width has been shifted
	to org-colview.el.

	* org.el (org-mode-flyspell-verify): Check for src block.

	* org-table.el (org-table-convert-region): Fix interactive
	statement.

	* org-ctags.el (org-ctags-path-to-ctags): Avoid usine `case'.

	* org.el (org-beginning-of-line, org-end-of-line):
	Set disable-point-adjustment when the command ends next to invisible
	text.

	* ob-lob.el (org-babel-lob-files): Fix custom type.

	* org-agenda.el (org-agenda-export-html-style, org-agenda-ndays)
	(org-agenda-inactive-leader, org-agenda-day-face-function)
	(org-agenda-auto-exclude-function): Fix custom type.

	* org-bibtex.el (org-bibtex-prefix): Fix custom type.

	* org-clock.el (org-clock-heading-function):
	(org-show-notification-handler): Fix custom type.

	* org-footnote.el (org-footnote-auto-adjust): Fix custom type.

	* org-protocol.el (org-protocol-default-template-key): Fix custom
	type.

	* org.el (org-make-link-description-function):
	(org-link-translation-function):
	(org-link-frame-setup):
	(org-refile-target-verify-function):
	(org-get-priority-function):
	(org-use-fast-tag-selection):
	(org-columns-modify-value-for-display-function):
	(org-sparse-tree-default-date-type):
	* ox-html.el (org-html-postamble):
	(org-html-postamble-format):
	(org-html-preamble-format):
	* ox-odt.el (org-odt-content-template-file):
	* ox.el (org-export-with-archived-trees):
	(org-export-initial-scope): Fix custom type.

	* org.el (org-insert-heading): Fix problem with inserting heading.
	Check for checkbox at the beginning of the item, not just at the
	beginning of the line.
	(org-small-year-to-year): Fix docstring typo.
	(org-show-siblings): By default, also show siblings from a
	bookmark jump.

	* org-agenda.el (org-agenda-set-restriction-lock): Highlight only
	the headline when agenda is restricted to a subtree.  Do not
	highlight the entire subtree.

	* org-table.el (org-table-eval-formula): Work-around for calc-eval
	regression.

	* ox.el (org-export-dispatch): Make sure the last position marker
	uses the base buffer if there is one.
	(org-export-dispatch-last-position): New variable.
	(org-export-dispatch): Save position of cursor at the moment when
	the export command is called.  Restore that position temporarily
	when repeating the previous export command.

	* org.el (org-insert-heading): Shrink whitespace at end of subtree
	when `org-insert-heading-respect-content' is on.

	* org-list.el (org-sort-list): Respect sorting-type and
	getkey-func when they are specified in the call.

	* org.el (org-sort-entries): Respect sorting-type and getkey-func
	when they are specified in the call.
	(org-format-outline-path): New argument SEPARATOR to specify a
	string that is inserted between parts of the outline path.
	(org-display-outline-path): New argument SEPARATOR, to specify a
	string that is inserted between parts of the outline path.

	* org-colview.el (org-dblock-write:columnview): Change the capture
	of pos to after inserting the original content

2013-11-12  Christian Moe  <mail@christianmoe.com>

	* ox-odt.el (org-odt-line-break, org-odt-plain-text):
	Remove newline after line-break tag.

2013-11-12  Christophe Junke  <christophe.junke@inria.fr>  (tiny change)

	* org.el (org-set-font-lock-defaults): Let footnote fontifications
	be done before other links' fontification.  This allows links
	appearing inside footnotes to be both visible and active.

2013-11-12  Christopher Schmidt  <christopher@ch.ristopher.com>

	* org.el (orgstruct-setup): Major rewrite.
	(orgstruct++-mode): Overwrite local non-org vars again.
	(orgstruct-mode): Simplify implementation.  Emulate outline's
	buffer-invisiblity-spec.
	(orgstruct-heading-prefix-regexp): Change default value to nil.
	(orgstruct-error): Use `user-error' if available.
	{pro,de}motion commands if `orgstruct-heading-prefix-regexp' is
	non-nil.  Always use `org-outline-level'.  Bind org-shift*.
	(orgstruct-make-binding): Major rewrite.
	(org-cycle-global-status, org-cycle-subtree-status): Set state
	property.
	(org-heading-components): Use `org-heading-regexp' in
	orgstruct-mode.
	(orgstruct-heading-prefix-regexp, orgstruct-setup-hook):
	New options.
	(orgstruct-initialized): New variable.
	(org-get-local-variables): Honour state property.
	(org-run-like-in-org-mode): Use `let' instead of `progv'.  Do not
	override variables with non-default values.
	(org-forward-heading-same-level): Do not skip to headlines on
	another level.  Handle negative prefix argument correctly.
	(org-backward-heading-same-level):
	Use `org-forward-heading-same-level'.

2013-11-12  Craig Tanis  <craig-tanis@utc.edu>  (tiny change)

	* ox-latex.el (org-latex-src-block): Change format string to position
	caption after figure content.

2013-11-12  Eric Abrahamsen  <eric@ericabrahamsen.net>

	* org.el (org-ctrl-c-ctrl-c): `C-c C-c' on a link is usually a
	no-op.  If that link is in a headline, act as if the `C-c C-c' was
	called on the headline, not the link.

	* ox-html.el (org-html-doctype-alist): New variable holding an
	alist of (X)HTML doctypes
	(org-html-xhtml-p, org-html-html5-p, org-html-close-tag):
	New function.
	(org-html-html5-fancy): New export option, determining whether or
	not to use HTML5-specific elements.
	(org-html-html5-elements): New variable, new HTML5 elements.
	(org-html-special-block): Export special blocks to new HTML5
	elements.
	(org-html-format-inline-image): Use <figure> and <figcaption> for
	standalone images.
	(org-html-format-inline-image, org-html--build-meta-info)
	(org-html--build-head, org-html--build-pre/postable)
	(org-html-template, org-html-horizontal-rule)
	(org-html-format-list-item, org-html-line-break, org-html-table)
	(org-html-verse-block): Changes to allow flavored export.

	* ox-latex.el (org-latex--org-table, org-latex-table-row):
	Allow use of the "tabu" and "longtabu" table environments.  New table
	attribute :spread handles the width specification syntax of "tabu"
	and "longtabu" table environments.

2013-11-12  Eric Schulte  <eric.schulte@gmx.com>

	* org-bibtex.el (org-bibtex-read-buffer): Reads all bibtex entries
	in a buffer.
	(org-bibtex-read-file): Read all bibtex entries in a file.
	(org-bibtex-import-from-file): Import all bibtex entries from a
	file into the current buffer.

	* ob-tangle.el (org-babel-load-file): When called with a prefix
	argument the tangled emacs-lisp file will be byte compiled.

	* ob-tangle.el (org-babel-tangle): Tangled files should not be
	writable.

	* ob-emacs-lisp.el (org-babel-execute:emacs-lisp): Better about
	when to fully escape the results or just print them close to
	verbatim.

	* ob.el (org-babel-result-cond): This function should now be used
	by all language backends to handle the processing of raw code
	block output into scalar results, table results, or ignored
	results depending on the value of result-params.

	* ob-C.el (org-babel-C-execute): Use org-babel-result-cond.

	* ob-R.el (org-babel-R-evaluate-external-process)
	(org-babel-R-evaluate-session):
	* ob-awk.el (org-babel-execute:awk):
	* ob-clojure.el (org-babel-execute:clojure):
	* ob-emacs-lisp.el (org-babel-execute:emacs-lisp):
	* ob-fortran.el (org-babel-execute:fortran):
	* ob-io.el (org-babel-io-evaluate):
	* ob-java.el (org-babel-execute:java):
	* ob-lisp.el (org-babel-execute:lisp):
	* ob-maxima.el (org-babel-execute:maxima):
	* ob-picolisp.el (org-babel-execute:picolisp):
	* ob-python.el (org-babel-python-evaluate-external-process):
	(org-babel-python-evaluate-session):
	* ob-scala.el (org-babel-scala-evaluate):
	* ob-sh.el (org-babel-sh-evaluate):
	* ob-shen.el (org-babel-execute:shen):
	* ob-sql.el (org-babel-execute:sql):
	* ob-sqlite.el (org-babel-execute:sqlite):
	Use `org-babel-result-cond'.

	* ob.el (org-babel-common-header-args-w-values): Add a new "none"
	header argument.
	(org-babel-execute-src-block): Don't do *any* result processing if
	the "none" header argument has been specified.
	(org-babel-sha1-hash): Remove the none header argument from header
	arg lists when calculating cache sums.
	(org-babel-insert-result): Flesh out some documentation.

	* ob.el (org-babel-insert-result): Don't escape results in
	drawers.

	* ob-python.el (org-babel-python-hline-to): Customize hline
	conversion to python.
	(org-babel-python-None-to): Customize none conversion from python.
	(org-babel-python-var-to-python): Use new variable.
	(org-babel-python-table-or-string): Use new variable.

	* org.el (org-babel-load-languages): Add ob-makefile to
	`org-babel-load-languages'.

	* ob-makefile.el: New file.

	* ob-sh.el (org-babel-sh-evaluate): Don't could 0-length shebangs.

	* org.el (org-format-latex): Simplify and now make use of the new
	`org-create-formula-image' function.
	(org-create-formula-image): Provides a simpler interface to the
	two backend-specific functions.

	* ob-core.el (org-babel-default-header-args): It is likely that
	someone meant to set :padlines to "yes", but accidentally set
	:padnewlines to "yes".  Either way lets just remove this which
	shouldn't have any functional effect.

	* ob-haskell.el (org-babel-default-header-args:haskell):
	Set :padlines to "no" by default.

	* ob-exp.el (org-babel-exp-non-block-elements): Ignore inline
	source block on #+ prefixed lines.

	* ob-core.el (org-babel-merge-params): Replace `remove-if' with
	`org-remove-if'.  More careful to check that the colname- and
	rowname-names header arguments exist during merge.  When merging
	parameters, if a variable is replaced with a new value, then
	delete colnames/rownames for the original value of that variable.

	* ob-ditaa.el (org-babel-ditaa-java-cmd): Make java executable
	configurable for ditaa blocks.

	* ob-sh.el (org-babel-sh-var-to-string): Fix bug in ob-sh when
	dealing with list variables.

	* ob-core.el (org-babel-demarcate-block):
	Include `org-src-lang-modes' in block demarcation options.

	* ob-C.el: Don't modify `org-babel-load-languages' from ob-*
	files.

	* ob-latex.el (org-babel-latex-htlatex): Set this variable to
	"htlatex" (or path to said) to enable svg generation from latex
	code blocks.
	(org-babel-latex-htlatex-packages): Libraries required for
	automatic svg generation.
	(org-babel-execute:latex): Generate SVG images directly from latex
	code blocks (assumes tikz).

	* ob-exp.el (org-babel-exp-non-block-elements): Use lob call name
	when exporting.

	* ob-scheme.el (org-babel-scheme-get-repl)
	(org-babel-scheme-make-session-name)
	(org-babel-scheme-execute-with-geiser, org-babel-execute:scheme):
	Fix whitespace and indentation.

	* ob-core.el (org-babel-set-current-result-hash): Update the
	match-string holding the hash data, and correct overlay
	maintenance.
	(org-babel-find-named-result): Call lines are not results.
	(org-babel-where-is-src-block-result): Don't implicitly name the
	results of call lines.
	(org-babel-exp-non-block-elements): There is now another element
	on the call line info list.

	* ob-lob.el (org-babel-lob-get-info): Return the name (if any) at
	the end of the info list.
	(org-babel-lob-execute): Pass the name through to execution.

	* ob-core.el (org-babel-execute-src-block): Ensure that the
	location is set before anything else is done.

	* ob-ref.el (org-babel-ref-parse): Evaluate Emacs Lisp values in
	header arguments at the location of the original code block.

	* ob-gnuplot.el (org-babel-expand-body:gnuplot): Use new header
	arguments.

	* ob-core.el (org-babel-common-header-args-w-values): Mention new
	header arguments.
	(org-babel-expand-body:generic): Use new header arguments.
	(org-babel-read-result): More robust matching of examplized
	ranges.
	(org-babel-result-end): More robust matching of examplized ranges.

	* ob-gnuplot.el (org-babel-expand-body:gnuplot): Gnuplot, close
	output terminal when opened.
	(org-babel-gnuplot-prefix): Customization variable prefix gnuplot
	code blocks.
	(org-babel-expand-body:gnuplot): Customization variable prefix
	gnuplot code blocks.

	* ob-core.el (org-babel-params-from-properties): Now returns a
	list of alists and does *not* call `org-babel-merge-params'.
	(org-babel-parse-src-block-match):
	(org-babel-parse-inline-src-block-match):
	* ob-exp.el (org-babel-exp-src-block):
	(org-babel-exp-non-block-elements):
	* ob-lob.el (org-babel-lob-execute): Handle new list of lists
	output of `org-babel-params-from-properties'.

	* ob-gnuplot.el (org-babel-header-args:gnuplot): Term is a gnuplot
	header argument.

	* ob-tangle.el (org-babel-tangle): Fix bug in tangle-file.
	Collect tangle modes, and only apply them to the file after all
	tangling has completed, including the post-tangle-hook.

	* ob-core.el (org-babel-read): Do not read #-prefix header-arg
	value as emacs lisp.

	* ob-core.el (org-babel-current-src-block-location):
	(org-babel-execute-src-block):
	* ob-exp.el (org-babel-exp-results):
	* ob-lob.el (org-babel-lob-execute):
	Rename `org-babel-current-exec-src-block-head' to
	`org-babel-current-src-block-location'.

	* ob-core.el (org-babel-common-header-args-w-values): Adding the
	new :tangle-mode header argument.
	(org-babel-read): Read values starting with a "#" character as
	emacs lisp.

	* ob-tangle.el (org-babel-tangle): Use the new :tangle-mode header
	argument.

	* org-pcomplete.el (pcomplete/org-mode/block-option/src): Use the
	new :tangle-mode header argument.

	* ob-exp.el (org-babel-exp-results): Save the code block location
	into `org-babel-current-exec-src-block-head' during export.

	* ob-comint.el (org-babel-comint-with-output): More robust edebug
	spec.

	* ob-lob.el (org-babel-lob-execute): Set the
	`org-babel-current-exec-src-block-head' variable when executing
	inline or lob style code.

	* ob-core.el (org-babel-execute-src-block):
	The `org-babel-current-exec-src-block-head' variable should point to
	the outermost code block.

	* org.el (org-some): An org-mode version of the cl some function.

	* ob-fortran.el (org-babel-fortran-var-to-fortran): More careful
	check if values are matrices.

	* org.el (org-every): An Org-mode version of the cl every
	function.

	* ob-tangle.el (org-babel-tangle-jump-to-org):
	Use `org-src-switch-to-buffer' to jump from src to org.  Use the
	existing `org-edit-src' functionality to jump back to the correct
	point in the code block in the original Org-mode buffer.

	* ob-gnuplot.el (org-babel-gnuplot-quote-tsv-field): Only wrap
	gnuplot data values in " when necessary.  Replace missing values
	with blank space in gnuplot.
	(org-babel-expand-body:gnuplot):
	(org-babel-gnuplot-quote-timestamp-field): Fix indentation.
	(org-babel-header-args:gnuplot): Declare the.
	(org-babel-expand-body:gnuplot): Params is an alist not a plist.
	(org-babel-header-args:gnuplot): Declare gnuplot-specific header
	argument.
	(*org-babel-gnuplot-missing*): Dynamic variable used to hold the
	value of the missing header argument.
	(org-babel-gnuplot-process-vars): Wrap in local binding for
	missing value.
	(org-babel-gnuplot-quote-tsv-field): Replace missing value with
	the missing header argument value when present.

	* ob-org.el (org-babel-expand-body:org): Allow insertion of
	non-strings into Org code blocks.
	(org-babel-inline-result-wrap): New option controlling the
	wrapping of inline results.
	(org-babel-examplize-region): Use the new defcustom.

	* ox-beamer.el (org-beamer--format-frame): If contents is nil,
	then replace it with an empty string.

	* ob-core.el (org-babel-read): More restrictive elisp eval of
	header arguments.

	* ob-lob.el (org-babel-lob-execute): Include default elisp header
	args in call lines.

	* ob-core.el (org-babel-result-cond): Don't over-evaluate
	result-params in macro.

	* ob-ruby.el (org-babel-execute:ruby): Use `org-babel-result-cond'
	in Ruby code blocks.
	(org-babel-ruby-evaluate): Delay table processing.

	* ob-js.el (org-babel-execute:js): Use `org-babel-result-cond' in
	JavaScript code blocks.

	* ob-scheme.el (org-babel-execute:scheme):
	Use `org-babel-result-cond' in scheme code blocks.

	* ob-ocaml.el (org-babel-execute:ocaml):
	Use `org-babel-result-cond' in OCaml code blocks.

	* ob-haskell.el (org-babel-execute:haskell):
	Use `org-babel-result-cond' in Haskell code blocks.

	* ob-core.el (org-babel-result-cond): The "raw", "org" and
	"drawer" :results header argument values preclude table processing
	unless the "table" argument is given as well.
	(org-babel-execute-src-block): Make sure we process file results
	before they are passed to the post-processing code block, and not
	afterwards.  Tangles these two header arguments in the code, but
	makes for more intuitive behavior and enables important use cases.
	(org-babel-read): Read code block values with earmuffs as Emacs
	Lisp.
	(org-babel-common-header-args-w-values): Add :post to the list of
	header arguments.
	(org-babel-execute-src-block): Post process results when the :post
	header argument has been supplied.

	* ob-R.el (org-babel-R-initiate-session): Remove unnecessary
	save-excursion nested inside a save-window-excursion.

	* ob-core.el (org-babel-src-name-w-name-regexp): Update the regexp
	used to match code block names.
	(org-babel-get-src-block-info): Remove the code used to parse this
	alternate variable specification syntax.
	(org-babel-insert-result): Cycle tables for :results org and
	:results wrap.

	* ob-python.el (org-babel-python-initiate-session-by-key): Fix a
	bug pointed out by Gary Oberbrunner.
	(org-babel-python-initiate-session-by-key): Add "-i" to the python
	command on windows sessions.  Actually setting new session names.
	Pass Python buffer names to the new `run-python' command.
	(org-babel-python-with-earmufs): Add earmufs to a buffer name.
	(org-babel-python-without-earmufs): Remove earmufs from a buffer name.
	(org-babel-python-initiate-session-by-key): Set the buffer name in
	a way which is understandable by the new python.el
	(org-babel-python-buffers): Change the default python buffer name.

	* ob-core.el (org-babel-number-p): Don't interpret single "-" as a
	number.

	* ob-perl.el (org-babel-perl--var-to-perl): Print Perl variables
	with a format string.

	* ob-core.el (org-babel-where-is-src-block-result): Allow comments
	between code blocks and un-named results.

	* ob-sqlite.el (org-babel-sqlite-table-or-scalar): Don't read
	sqlite output as lisp.

	* ob-core.el (org-babel-check-confirm-evaluate): Refactoring.
	(org-babel-confirm-evaluate): Fix whitespaces.
	(org-babel-execute-src-block): A cond makes it more clear that we
	definitely do not execute without user confirmation.
	(org-babel-call-process-region-original): Fix line over 80 chars
	long.

	* ob-tangle.el (org-babel-tangle-collect-blocks): Update comment
	to reflect changed variable name.

	* ob-core.el (org-babel-expand-src-block): Return value of
	expanded code block on non-interactive calls.

	* ob-perl.el (org-babel-perl-var-wrap): Customizable wrapper for
	variables in perl code.
	(org-babel-perl-var-to-perl): Use said wrapper.

	* ob-sql.el (org-babel-execute:sql): Use the org-babel-eval
	command instead of shell-command.

	* ob-ocaml.el (org-babel-prep-session:ocaml): Check that
	`tuareg-run-caml' is defined before use.
	(tuareg-run-ocaml): Declare for compiler.

	* ob-core.el (org-babel-result-regexp): Simplify regexp given new
	time hash layout.
	(org-babel-current-result-hash): New match string.
	(org-babel-hide-hash): New match string.
	(org-babel-where-is-src-block-result): New match string, and
	insert hashes in the new format.

	* ob-core.el (org-ts-regexp): Declare.
	(org-babel-result-regexp): Now matching time stamp as well.
	(org-babel-hash-show-time): New variable controlling the display
	of time stamps.
	(org-babel-current-result-hash):
	(org-babel-hide-all-hashes):
	(org-babel-where-is-src-block-result): Use hash time stamps.

	* ob-core.el: New file.

	* org-macs.el: `org-load-noerror-mustsuffix' requires an autoload.

2013-11-12  Feng Shu  <tumashu@gmail.com>

	* ox-odt.el (org-odt--translate-latex-fragments):
	* ox-html.el (org-html-latex-environment)
	(org-html-latex-fragment): Fix imagemagick support.

	* org.el (org-create-formula-image-with-imagemagick):
	Generate correct size formula image.
	(org-format-latex-header): Change pagestyle command position.

	* ox-latex.el (org-latex--caption/label-string): Allow to build a
	caption string from `:caption' attribute of #+ATTR_LATEX.

	* ox.el (org-export-dictionary): Add Simplified Chinese
	translations for `org-export-dictionary'.

2013-11-12  Florian Beck  <fb@miszellen.de>  (tiny change)

	* org.el (org-activate-bracket-links): Remove escapes from the
	help string.

2013-11-12  Francesco Pizzolante  <xxx@public.gmane.org>  (tiny change)

	* ox-html.el (org-html-headline): Normalize the construction of
	outline-container DIVs by always using the inner headline ID.

	* org.el (org-agenda-prepare-buffers): Protect with
	`org-unmodified'.

2013-11-12  Gregor Kappler  <gregor@alcedo.(none)>  (tiny change)

	* ox.el (org-export-as): Make sure org-export-babel-evaluate is
	not nil before calling `org-export-execute-babel-code'.

2013-11-12  Grégoire Jadi  <gregoire.jadi@gmail.com>

	* org.el (org-reftex-citation): Fix contrib package name in the
	docstring.
	(org-preview-latex-fragment, org-display-inline-images):
	Detect whether a graphic display is available before inlining images to
	prevent an error.
	(org-startup-with-latex-preview): New option.
	(org-startup-options): New startup keywords for the new option.
	(org-mode): Turn on/off LaTeX preview depending on the new option.
	(org-reverse-string): Add `org-reverse-string' to reverse a
	string.

	* org-id.el (org-id-new, org-id-decode):
	Replace `org-id-reverse-string' by `org-reverse-string'.

	* ob-core.el (org-babel-trim): Replace `org-babel-reverse-string'
	by `org-reverse-string' and declare it.

2013-11-12  Gustav Wikström  <gustav.erik@gmail.com>  (tiny change)

	* org-agenda.el (org-agenda-filter-by-category): Display all
	filtered out categories.

2013-11-12  Ilya Zonov  <izonov@gmail.com>  (tiny change)

	* org-mouse.el (org-mouse-context-menu): Add a correct newtext
	parameter for "All Set" and "All Clear" menu items.

2013-11-12  Ingo Lohmar  <i.lohmar@gmail.com>  (tiny change)

	* org.el (org-insert-todo-heading-respect-content): Pass correct
	prefix arg to always insert heading.

	* org-agenda.el
	(org-agenda-propertize-selected-todo-keywords): New function to
	highlight the current agenda todo keywords depending on
	`org-todo-keyword-faces'.
	(org-todo-list): Use the new function.

2013-11-12  Ippei FURUHASHI  <top.tuna+orgmode@gmail.com>

	* org-table.el (org-calc-current-TBLFM): New function to
	re-calculate the table by applying the #+TBLFM in the line where
	the point is.  Ensure to remove the currently inserted TBLFM line,
	when calling `org-table-recalculate' returns an error and the
	processing stops.

	* org.el (org-ctrl-c-ctrl-c): Call `org-calc-current-TBLFM' when
	point is in the #+TBLFM line.

	* org-table.el (org-TBLFM-begin): New function.
	(org-TBLFM-begin-regexp): New variable.

	* org.el (org-at-TBLFM-p): New function.
	(org-TBLFM-regexp): New defconst.

2013-11-12  Ivan Vilata i Balaguer  <ivan@selidor.net>  (tiny change)

	* org-clock.el (org-clock-get-table-data): Pass tstart and tend
	time strings through `org-matcher-time' to allow relative times
	besides absolute ones, convert result to encoded time.

2013-11-12  Jambunathan K  <kjambunathan@gmail.com>

	* ox-html.el (org-html-code, org-html-verbatim): Transcode value.
	(org-html--tags, org-html-format-headline)
	(org-html--format-toc-headline, org-html-checkbox)
	(org-html-table-cell, org-html-timestamp)
	(org-html-verse-block, org-html-special-string-regexps): Replace
	named HTML entities with their numeric counterparts.  This keeps
	Freemind backend happy.

	* org-odt.el (org-export-odt-schema-dir): Modify to accommodate
	change in rnc file names.

	* org-lparse.el (org-lparse-and-open)
	(org-lparse-do-convert): Open exported files with system-specific
	application.

	* org-odt.el: Don't meddle with `org-file-apps'.

2013-11-12  Jarmo Hurri  <jarmo.hurri@syk.fi>

	* org-table.el (org-define-lookup-function): New macro.  Call it
	to generate new lookup functions `org-lookup-first',
	`org-lookup-last' and `org-lookup-all'.

	* org-gnus.el (org-gnus-no-server): New option to start Gnus using
	`gnus-no-server'.
	(org-gnus-no-new-news): Use the new option.

2013-11-12  Jonas Hoersch  <coroa@online.de>  (tiny change)

	* org.el (org-cycle-hide-inline-tasks): Re-hide inline tasks when
	switching to 'children visibility state.

	* org-inlinetask.el (org-inlinetask-toggle-visibility): Don't use
	`org-show-entry' as it cannot unfold an inlinetask properly.

2013-11-12  Jonathan Leech-Pepin  <jonathan.leechpepin@gmail.com>

	* ox-texinfo.el: New file.

2013-11-12  Joost Diepenmaat  <joost@zeekat.nl>  (tiny change)

	* org.el (org-indent-region): BEGIN_SRC and END_SRC lines should
	not be considered part of the source block for the purposes of
	indentation.

2013-11-12  Justus Piater  <justus-dev@piater.name>

	* org-agenda.el
	(org-agenda-skip-deadline-prewarning-if-scheduled): Add an option
	to skip the deadline prewarning if the scheduled date is in the
	future.

2013-11-12  Kodi Arfer  <git@arfer.net>  (tiny change)

	* ox-html.el (org-html-toc): Use <nav> instead of <div> for the
	root element when appropriate.
	(org-html-paragraph): Wrap "Figure %d:" in <span
	class="figure-number">.
	(org-html-list-of-tables, org-html-table): Wrap "Table %d:" in
	<span class="table-number">.
	(org-html-list-of-listings): Wrap "Listing %d:" in
	<span class="listing-number">.
	(org-html-table): For HTML5, omit :html-table-attributes but not
	:id or :attr_html.
	(org-html--build-meta-info): Insert no timestamp when
	:time-stamp-file is nil.

2013-11-12  Lawrence Mitchell  <wence@gmx.li>

	* ox-html.el (org-html-close-tag): Add space before attr.

	* ox.el (org-export-resolve-fuzzy-link): Look for fuzzy link in a
	cache before trying to resolve it in the parse tree.

2013-11-12  Le Wang  <le.wang@agworld.com.au>

	* org-src.el (org-edit-src-code): Use marker with insertion type t
	to track end and remove hack requiring delete from beg to (1-
	end).

2013-11-12  Max Mikhanosha  <max@openchat.com>

	* org-habit.el (org-habit-get-faces): Add show done days green
	option.

	* org-agenda.el (org-agenda-format-item): Ensure effort is "" when
	unset

2013-11-12  Michael Brand  <michael.ch.brand@gmail.com>

	* org-table.el (org-table-eval-formula): Align the arrow pointing
	to the error in a Calc formula to the other fomula debugger logs.

	* org.el (org-link-escape-chars-browser): Add char double quote.
	(org-open-at-point): Use the constant
	`org-link-escape-chars-browser'.

	* org-table.el (org-table-get-remote-range): Extend regexp to
	match "#+NAME: table" additionally to "#+TBLNAME: table".

	* org-table.el (org-table-eval-formula): Use `keep-empty' in more
	places.  Keep empty fields during preprocessing.
	(org-table-make-reference): Use nan (not a number) for empty
	fields in Calc formulas.  A range with only empty fields should
	not always return 0 but also empty string, consistent with field
	reference of an empty field.  Use future design for nan but
	replicate current behavior.
	(org-table-number-regexp): Extend 0x hex to fixed-point number,
	add <radix>#<number>, add Calc infinite numbers uinf, -inf and
	inf.

2013-11-12  Muchenxuan Tong  <demon386@gmail.com>  (tiny change)

	* org-mobile.el (org-mobile-push): Add `save-restriction'.

2013-11-12  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ox-latex.el (org-latex-compile): Remove all numbered temporary
	files after compiling.

	* org-element.el (org-element-headline-interpreter): Take into
	consideration `org-odd-levels-only' when building a headline.

	* ox-org.el (org-org-headline): Correctly set transcoded headline
	level during subtree export.

	* ox-html.el (org-html--format-toc-headline): TOC entries are
	closer to regular headline formatting.

	* org-element.el (org-element-context): Fix error when parsing
	affiliated keywords, e.g. "caption".

	* org.el (org-do-emphasis-faces): Look for verbatim status at
	correct location.
	(org-open-at-point): Check if link is non-nil before matching it.
	(org-export-insert-default-template): Make sure strings are
	properly quoted when inserting a template.  Specifically, default
	value for drawers should be d:(not "LOGBOOK"), not d:(not
	LOGBOOK).
	(org-insert-heading): Do not error out when inserting is to be
	done at one of the buffer's boundaries.

	* ox-latex.el (org-latex-listings-options): Use correct number of
	backslash characters in the example.

	* org-element.el (org-element-latex-or-entity-successor)
	(org-element-latex-fragment-parser): Use `org-latex-regexps'
	instead of `org-format-latex-options'.

	* ox-ascii.el:
	* ox-beamer.el:
	* ox-html.el:
	* ox-icalendar.el:
	* ox-md.el: Remove comments at the beginning of the file since
	the library is documented in Org manual.

	* org-element.el (org-element--list-struct):
	Use `org-match-string-no-properties'.  Fix block parsing in lists.

	* ox-publish.el (org-publish-all): Fix compilation problem.

	* org-element.el (org-element-timestamp-interpreter):
	Correctly interpret timestamps with delays.
	(org-element-timestamp-parser)
	(org-element-timestamp-interpreter): Parse warning delays.

	* ox-beamer.el (org-beamer--format-section): Fix regression which
	prevents frames from being propely exported.

	* ox.el (org-export-with-backend): Ensure function will use
	provided back-end.

	* org-list.el (org-list-allow-alphabetical): Remove reference to
	unused VALUE.

	* ox-beamer.el (org-beamer--format-section): Protect fragile
	commands in sections.

	* org.el (org-ctrl-c-ctrl-c): When using C-c C-c at an item with
	point on a link, make sure checkbox, if any, is toggled.

	* ox-beamer.el (org-beamer--format-block): Return an error message
	when using a special environment as a block type.  Also check for
	incomplete environment definitions.

	* org-element.el (org-element-at-point): If point is at the end of
	the buffer, and that buffer ends with a list, and there's no final
	newline, return last element in last item instead of plain list.
	Fix infloop when called on a blank line at the end of the buffer
	after a headline.

	* org.el (org-forward-paragraph, org-backward-paragraph):
	New functions.

	* org.el (org-meta-return): Allow M-RET to insert items within
	drawers.  Rewrite function.

	* org-element.el (org-element-footnote-definition-parser):
	Fix value for :contents-begin when first line of footnote definition
	is empty besides the label.
	(org-element-at-point): Return correct element when point is on a
	blank line just below a headline.
	(org-element-paragraph-parser):
	Use `org-match-string-no-properties'.  Small fixes to paragraph
	parsing.

	* org.el (org-adaptive-fill-function): Do not handle
	`adaptive-fill-regexp' in comments as the behavior is not
	satisfying.

	* org-list.el (org-list-struct-apply-struct): Do not move item's
	contents within a child above when repairing indentation.

	* ox-html.el (org-html--build-meta-info): Fix output of meta tags
	when properties are present.

	* ox.el (org-export-collect-headlines): Do not build TOC for
	headlines below H value.

	* org-element.el (org-element-context): Modify misleading
	comment.
	(org-element-text-markup-successor)
	(org-element-latex-or-entity-successor)
	(org-element-export-snippet-successor)
	(org-element-footnote-reference-successor)
	(org-element-inline-babel-call-successor)
	(org-element-inline-src-block-successor)
	(org-element-line-break-successor, org-element-link-successor)
	(org-element-plain-link-successor, org-element-macro-successor)
	(org-element-radio-target-successor)
	(org-element-statistics-cookie-successor)
	(org-element-sub/superscript-successor)
	(org-element-table-cell-successor, org-element-target-successor)
	(org-element-timestamp-successor): Remove LIMIT argument.
	(org-element--parse-objects, org-element--get-next-object-candidates):
	Apply signature change to successors.
	(org-element-context): Narrow buffer around object containers so
	parsing of objects when using this function is done under the same
	restrictions as in buffer parsing.

	* ox.el (org-export-table-cell-alignment): Ensure required
	variables are available.  Use correct :test.
	(org-export-table-cell-width): Modify key (now an element) and
	value structure (now a vector) of cache so it can use `eq' as
	test.  Elements are circular lists so `equal' cannot apply on them.

	* ox-publish.el (project-plist): Remove variable.

	* ox.el (org-export-to-buffer, org-export-to-file):
	Fix docstrings.

	* ox-org.el (org-export-as-org): Add missing BODY-ONLY argument,
	which is always nil in this back-end.

	* org.el (org-adaptive-fill-function): Look for a fill prefix at
	the beginning of the paragraph and subsquently on its second line
	instead of the current line.

	* ob-core.el (org-babel-get-src-block-info): Look for indentation
	value at the correct location.

	* ox.el (org-export-data-with-backend): Set temporary back-end as
	the new back-end in local communication channel.
	(org-export-filter-apply-functions): Handle corner case where
	back-end is nil.  Only provide back-end name (a symbol) as second
	argument of filters, not the full back-end (a vector).

	* ox-publish.el (org-publish-find-title): Fix title when no
	#+TITLE property is provided.

	* ox.el (org-export-store-default-title): Remove-function.
	(org-export--default-title): Remove variable.
	(org-export-options-alist): Do not use a default value.
	(org-export--get-buffer-attributes): Store a default title.
	(org-export-as): Apply function removal.
	(org-export--get-global-options): Do not set a property with an
	explicitly nil value.

	* ox-publish.el (org-publish-sitemap-sort-files)
	(org-publish-sitemap-sort-folders)
	(org-publish-sitemap-ignore-case, org-publish-sitemap-requested)
	(org-publish-sitemap-date-format)
	(org-publish-sitemap-file-entry-format): Set prefix to
	"org-publish-sitemap" instead of "org-sitemap".
	(org-publish-compare-directory-files)
	(org-publish-get-base-files-1, org-publish-projects)
	(org-publish-format-file-entry): Use new prefix.

	* org-clock.el (org-clock-total-time-cell-format)
	(org-clock-file-time-cell-format): Use correct type.

	* ob-haskell.el:
	* ox-ascii.el (org-ascii-export-as-ascii)
	(org-ascii-export-to-ascii):
	* ox-beamer.el (org-beamer-export-as-latex)
	(org-beamer-export-to-latex, org-beamer-export-to-pdf):
	* ox-html.el (org-html-export-as-html, org-html-export-to-html):
	* ox-icalendar.el (org-icalendar-export-to-ics):
	* ox-latex.el (org-latex-export-as-latex)
	(org-latex-export-to-pdf):
	* ox-man.el (org-man-export-to-man, org-man-export-to-pdf):
	* ox-md.el (org-md-export-as-markdown, org-md-export-to-markdown):
	* ox-odt.el (org-odt-export-to-odt):
	* ox-org.el (org-org-export-as-org, org-org-export-to-org):
	* ox-publish.el (org-publish-org-to):
	* ox-texinfo.el (org-texinfo-export-to-texinfo)
	(org-texinfo-export-to-info):
	* ox.el (org-export-to-buffer): Add two arguments: one to trigger
	asynchronous export and the other to do extra processing from
	within the buffer.
	(org-export-to-file): Add two arguments: one to trigger
	asynchronous export and the other to do extra processing on the
	output file.
	(org-export-async-start): Small clean up.

	* ox.el (org-export-as): Use new back-end structure.
	(org-export-current-backend): New variable.
	(org-export-as): Use new variable.

	* ox-ascii.el (org-ascii-table): Remove spurious new line between
	a table and the caption below.

	* ox.el (org-export-to-file): Preserve coding system when writing
	output.
	(org-export-stack-mode-map): Fix compilation error with Emacs <
	24.
	(org-export--dispatch-action): Maintain compatibility with Emacs
	23.

	* org.el (org-adaptive-fill-function, org-fill-paragraph):
	Add support for `adaptive-fill-regexp' in paragraphs and comments.
	(org-indent-line): Fix indentation after a list.

	* ox.el (org-export--get-inbuffer-options): Multiple options can
	now be set through the same buffer keyword.

	* org-element.el (org-element-plain-list-parser): Fix infloop when
	parsing a list at the end of buffer, if buffer doesn't end at a
	line beginning.
	(org-element-link-parser): Do not url-decode parsed links.

	* org-pcomplete.el (pcomplete/org-mode/file-option): Remove
	spurious white spaces, excepted for source blocks' opening string.
	Small refactoring.
	(pcomplete/org-mode/file-option): Remove spurious colons from
	block boundaries.

	* ox-publish.el (org-publish-find-date): Also return date for
	directories.
	(org-publish-get-base-files-1): Fix :recursive parameter ignoring
	extension restriction.

	* ox-beamer.el: Remove strange indentation in default header.
	(org-beamer-template): Fix missing newlines in header.

	* ox-latex.el (org-latex-template): Fix missing newlines in
	header.

	* ox.el (org-export-insert-default-template):
	Fix "wrong-type-argument" error in template insertion.

	* org.el (org-fill-paragraph): Use empty commented lines as
	separators when filling comments.  This mimics default behavior
	from "newcomment.el", which is not used in Org.

	* ox-html.el (org-html-link): Add image attributes to "img" tag,
	not to the "a" container.  Also fix spacing for attributes.

	* org.el (org-fill-paragraph): Do not mix consecutive comments
	when filling any of them.

	* ox-html.el (org-html-format-headline--wrap): Fix number of
	arguments when setting `org-html-format-headline-function'.

	* org-element.el (org-element-item-interpreter): This patch fixes
	"(wrong-type-argument arrayp nil)" error when trying to interpret
	empty items.  Correctly interpret back plain lists with "*" items.
	This fixes "This is not a list" error returned in this case.

	* ox-latex.el (org-latex-listings): Update docstring.

	* org-pcomplete.el (pcomplete/org-mode/file-option/options):
	Apply changes to export back-end definition.

	* org.el (org-get-export-keywords): Apply changes to export
	back-end definition.

	* ox-html.el (org-html--format-toc-headline): Make use of
	anonymous back-ends.

	* ox-odt.el (org-odt-footnote-reference): Make use of anonymous
	back-ends.
	(org-odt-format-label, org-odt-toc)
	(org-odt-format-headline--wrap): Use `org-export-with-backend'
	instead of `org-export-with-translations'.

	* ox.el (org-export--registered-backends): Rename from
	`org-export-registered-backends'.
	(org-export-invisible-backends): Remove variable.
	(org-export-get-backend, org-export-get-all-transcoders
	org-export-get-all-options, org-export-get-all-filters):
	New functions.  It replaces `org-export-backend-translate-table'.
	(org-export-barf-if-invalid-backend, org-export-derived-backend-p,
	org-export-define-backend, org-export-define-derived-backend):
	Rewrite functions using new representation.
	(org-export-backend-translate-table): Remove function.
	(org-export-get-environment): Use new function.
	(org-export--get-subtree-options, org-export--parse-option-keyword,
	org-export--get-inbuffer-options, org-export--get-global-options,
	org-export-to-buffer org-export-to-file, org-export-string-as
	org-export-replace-region-by): Update docstring.
	(org-export-data-with-translations): Remove function.
	Use `org-export-data-with-backend' with a temporary back-end instead.
	(org-export-data-with-backend, org-export-as): Reflect new definition
	for back-ends.
	(org-export--dispatch-action, org-export--dispatch-ui): Reflect new
	definition for back-ends and variable removal.  Refactoring.
	(org-export-filter-apply-functions): Call functions with
	current back-end's name, not full back-end.

	* org.el (org-export-backends, org-create-formula--latex-header):
	Use new structure and variables.

	* ox-html.el (org-html-inline-images): Change default value and
	remove `maybe'.
	(org-html-format-inline-image): Remove functions.
	(org-html--wrap-image, org-html--format-image)
	(org-html-inline-image-p): New functions.
	(org-html-latex-environment, org-html-latex-fragment): Use new
	functions.
	(org-html-standalone-image-p): Use new functions.  Also remove an
	unused optional argument.
	(org-html-link, org-html-paragraph): Correctly export hyperlinked
	images.

	* ox.el (org-export-dictionary): Update some translations.

	* ox-odt.el (org-odt-label-styles, org-odt-category-map-alist):
	Fix docstring.
	(org-odt-format-label): Add docstring.  Internationalize prefix.

	* ox.el (org-export-dictionary): Add entry for colons.

	* ox-odt.el (org-odt--suppress-some-translators): Remove function.

	* ox-html.el (org-html-link): Remove left-over binding.

	* ox-beamer.el (org-beamer-environments-extra): Allow to add raw
	title in environment definition.
	(org-beamer--format-block): Handle new placeholders.

	* ox-html.el (org-html-link): Small refactoring.

	* org-element.el (org-element--current-element):
	Fix org-meta-return error at the end of buffer.

	* ox-odt.el (org-odt-category-map-alist): Fix internationalization
	of "Table" and "Listing".

	* ox.el (org-export-dictionary): Remove useless dictionary
	entries.

	* ox-ascii.el (org-ascii--build-caption): Apply removal.

	* ox.el (org-export-dictionary): Add spanish and german
	translations.

	* ox-odt.el (org-odt-link): Fuzzy links to an headline with a
	description always use that description, even if the description
	is the same as the headline title.
	(org-odt-plain-text): Allow to turn smart quotes off.

	* ox-latex.el (org-latex--get-footnote-counter): Remove function.

	* org.el (org-setup-filling): Set `paragraph-start' and
	`paragraph-separate'.
	(org-fill-paragraph-separate-nobreak-p): Remove function.
	(org-mode): Do not set `paragraph-start'.

	* ox-html.el (html): Replace "HTML_HTML5_FANCY",
	"HTML_INCLUDE_STYLE" and "HTML_INCLUDE_SCRIPTS" with,
	respectively, ":html5-fancy", "html-style" and "html-scripts"
	options.
	(org-html-html5-fancy): Reformat docstring.
	(org-html-template): Fix typo preventing insertion of link up/link
	home anchors.

	* org.el (org-create-formula--latex-header): Replace AUTO with
	appropriate language when previewing snippets.

	* ox-latex.el (org-latex-item): Allow hyperref and footnotemark in
	items description tags.  Also remove a unnecessary hack allowing
	footnotemark with an optional argument in the tag.

	* ox.el (org-export-resolve-fuzzy-link): Fix link resolution when
	link lives before the first headline.

	* org-element.el (org-element-special-block-parser): Fix typo in
	regexp matching block type.  Also quote the type so it can contain
	special characters.

	* ox-latex.el (org-latex-pdf-process): This argument can cause
	problem with links with a relative path, since compilation happens
	in a different directory.

	* org.el (org-latex-default-packages-alist): Load "ulem" package
	by default.  Use "[normalem]" option to preserve \emph definition.

	* ox-latex.el (org-latex-text-markup-alist): Use "\uline" and
	"\sout" commands from "ulem" package.

	* org.el (org-latex-default-packages-alist): Document need for
	"soul" package.

	* ox-latex.el (org-latex-text-markup-alist): Use \ul (from "soul"
	package) instead of \underline for underline text.

	* ox.el (org-export-read-attribute): Fix "Wrong argument type"
	error when attributes start with :key "".

	* org.el (org-fill-paragraph-separate-nobreak-p)
	(org-fill-line-break-nobreak-p)
	(org-fill-paragraph-with-timestamp-nobreak-p): Fix docstrings.

	* org-element.el (org-element--list-struct): Fix failing
	"plain-list-parser" test.

	* ox-latex.el (org-latex-src-block): Handle :float attribute.
	Its value can be set to "t", "multicolumn" or "nil".  Also remove
	:long-listing attribute, which is now replaced with :float nil.
	(org-latex--org-table): Replace :float table with :float t.
	(org-latex--inline-image): Replace :float figure with :float t.
	(org-latex-long-listings): Remove variable.

	* org-element.el (org-element--list-struct): New function.
	(org-element-plain-list-parser, org-element--current-element):
	Use new function.

	* ox-man.el (org-man-compile):
	* ox-texinfo.el (org-texinfo-compile): Use appropriate argument.

	* ox-latex.el (org-latex-compile):
	* ox-man.el (org-man-compile):
	* ox-texinfo.el (org-texinfo-compile): Properly set working
	directory.

	* ox-latex.el (org-latex-compile):
	* ox-texinfo.el (org-texinfo-compile): Make sure generated file
	can be found by `file-exists-p'.

	* ox-md.el (md): Delegate underscore transcoding to HTML back-end.

	* org-element.el (org-element--remove-indentation):
	Small optimization.
	(org-element--remove-indentation): New function.
	(org-element-example-block-parser, org-element-src-block-parser):
	Use new function.
	(org-element-src-block-interpreter): Update function according to
	change.

	* ox.el (org-export-unravel-code): Do not remove any indentation
	since it now happens at the parser level.
	(org-export-table-cell-width): Be sure to use cache even when
	stored value is nil.
	(org-export--default-title): Fix "Symbol's value as variable is
	void: org-export--default-title".

	* ox-ascii.el (org-ascii--table-cell-width): Cache results of this
	internal function since it is called at each cell, though its
	value only change column wise.

	* ox.el (org-export-resolve-fuzzy-link): Change property name
	holding cache.
	(org-export-table-has-header-p, org-export-table-row-group)
	(org-export-table-cell-width, org-export-table-cell-alignment):
	Cache results.
	(org-export-table-cell-address): Refactor.
	(org-export-get-parent): Inline function.
	(org-export-options-alist): Change default value for :title
	property.
	(org-export--default-title): New dynamically scoped variable.
	(org-export-store-default-title): New function.
	(org-export--get-buffer-attributes): Remove title handling.
	(org-export--get-global-options): Revert "ox: Fix default title".
	Refactor code.

	* ox-html.el (org-html-format-latex): Provide a prefix for
	temporary file when using dvipng, even if the current buffer isn't
	associated to a file.

	* ox.el (org-export-resolve-radio-link): Ignore whitespace
	differences when resolving a radio link.
	(org-export-resolve-radio-link): Fix radio target resolution.

	* org-element.el (org-element--current-element): Be stricter when
	matching arguments in LaTeX environments.  In particular, do not
	allow anything else than options and arguments in the opening
	line.

	* ox-html.el (org-html-inner-template): Remove code relative to
	bibliography.
	(org-html-bibliography): Remove function.

	* ox-latex.el (org-latex-plain-text): Protect ^ char with \^{},
	not only \^, so it doesn't become a diacritic.

	* ox-html.el (org-html--build-meta-info): Fix code typo.

	* ox.el (org-export-expand-include-keyword): Avoid using `read' to
	determine file name.
	(org-export--get-global-options): Properly set default title,
	i.e. when to TITLE keyword is provided.

	* org-element.el (org-element--parse-elements): Also parse visible
	headlines within an otherwise compacted headline.

	* ox.el (org-export-expand-include-keyword): Tolerate included
	file names without double quotes.
	(org-export-resolve-fuzzy-link): Fix caching process.

	* ox-publish.el (org-publish-find-date): Fix "Invalid time
	specification" error with timestamps in DATE.

	* org-element.el (org-element--current-element): Allow the opening
	string of a LaTeX environment to contain additional arguments.

	* org.el (org-insert-heading): Refactor to use `org-in-item-p'
	only once.

	* ox.el (org-export-expand): Optionally add affiliated keywords to
	results.

	* ox-org.el (org-org-identity): Use new argument for
	`org-export-expand'.

	* org.el (org-fill-paragraph): Move to table beginning before
	aligning the table when M-q is called from an affiliated keyword.

	* org-list.el (org-list-allow-alphabetical): Properly update
	`org-list-allow-alphabetical' when changed after org.el has been
	loaded.

	* org-element.el (org-element-fixed-width-interpreter):
	Fix interpretation of fixed-width elements with a nil or empty string
	value.

	* ox-html.el (org-html-link): Don't skip the link description when
	it matches the name of the headline it targets.

	* ox-html.el (org-html-link): Don't skip the link description when
	it matches the name of the headline it targets.

	* ox-ascii.el (ascii): Remove nonexistent function.

	* ox-icalendar.el (icalendar): Ignore footnotes.
	(org-icalendar--combine-files): Small refactoring.

	* ox.el (org-export--skip-p, org-export--interpret-p):
	When `org-export-with-footnotes' is nil, ignore completely footnotes
	references and definitions instead of exporting them verbatim.

	* ox-beamer.el (org-beamer--frame-level): Small refactoring.
	(org-beamer--format-block, org-beamer-headline): Do not systematically
	downcase environment names as some require upper case in their
	names (e.g. noteNH and CJK).

	* ox.el (org-export-with-timestamps): Only applies to isolated
	timestamps, i.e. timestamps in a paragraph containing only
	timestamps and empty strings.
	(org-export--skip-p): Skip timestamps according to new behavior.

	* ox-latex.el (org-latex--script-size): Handle consecutive
	alterning sub and superscript.

	* ox-org.el (org-org-identity): Fix docstring.  Tiny refactoring.
	(org-org-headline, org-org-keyword): Fix docstring.

	* ox-latex.el (org-latex--script-size): Use \text command for
	subscript and superscript.  This is far superior to \mathrm, but
	it requires "amstext" package.  In particular, accented characters
	are now allowed within sub/superscript.

	* org.el (org-latex-default-packages-alist): Add "amstext"
	package.

	* ox-latex.el (org-latex--script-size): Fix error when using
	sub/superscript within sub/superscript.

	* ox-latex.el (org-latex--script-size): New function.
	(org-latex-subscript, org-latex-superscript): Use new function.
	Remove instructions since everything is documented in Org manual.

	* ox.el (org-export-with-smart-quotes): Use LATEX instead of LaTeX
	for keywords, the latter being hard to type, somewhat difficult to
	read, and overall just pedantic.

	* ox-latex.el (org-latex-classes): Be more explicit about
	LATEX_HEADER_EXTRA.

	* ox-html.el (org-html--build-meta-info): Fix invalid characters
	in html attributes.

	* ox.el (org-export-filters-alist): Remove macro filter.
	(org-export-filter-macro-functions): Remove variable.

	* ox-beamer.el (beamer): Install a default class set-up when
	loading library.

	* ox-latex.el (org-latex-classes): Update docstring.

	* ox-latex.el (org-latex--inline-image): Remove specific default
	image width for floats.  If no width nor height is provided, it
	should default to `org-latex-image-default-width' value.

	* org.el (org-extract-attributes-from-string)
	(org-attributes-to-string): Remove functions.

	* ox-html.el (html): Rename :html-table-tag property into
	:org-table-attributes.
	(org-html-table-default-attributes): New variable.
	(org-html-table-tag): Remove variable.
	(org-html--make-attribute-string): New function.
	(org-html-link--inline-image, org-html-table): Use new function.
	(org-html-splice-attributes, org-export-splice-style):
	Remove functions.
	(org-html-inline-image-rules): Remove out of context part of the
	docstring.

	* ox.el (org-export-read-attribute): Allow to use empty strings in
	attributes.

	* ox-html.el (org-html-metadata-timestamp-format): New variable,
	renamed from `org-html--timestamp-format'.
	(org-html--build-meta-info, org-html-format-spec,
	org-html--build-pre/postamble): Use new variable.

	* ox.el (org-export-table-row-number): New function.
	(org-export-table-cell-address): Use new function.

	* org-element.el (org-element-table-cell-successor): Parse table
	cells with missing ending space.

	* ox-latex.el (org-latex--math-table): Fix inline-math table
	environment.

	* ox-html.el (org-html-doctype): Make value fit on a single line
	so `org-export-insert-default-template' can handle it.
	(org-html-creator-string): Change default value.

	* ox.el (org-export-creator-string): Change default value.

	* ox-html.el (org-html-postamble-format)
	(org-html-preamble-format): Allow last modification time of source
	in template.  Fix docstrings.
	(org-html-format-spec): Produce last modification time when the source
	is a file.

	* ox.el (org-export-with-archived-trees, org-export-with-author)
	(org-export-with-clocks, org-export-with-date)
	(org-export-creator-string, org-export-with-drawers)
	(org-export-with-email, org-export-with-emphasize)
	(org-export-exclude-tags, org-export-with-fixed-width)
	(org-export-with-footnotes, org-export-with-latex)
	(org-export-headline-levels, org-export-default-language)
	(org-export-preserve-breaks, org-export-with-entities)
	(org-export-with-inlinetasks, org-export-with-planning)
	(org-export-with-priority, org-export-with-section-numbers)
	(org-export-select-tags, org-export-with-smart-quotes)
	(org-export-with-special-strings)
	(org-export-with-statistics-cookies)
	(org-export-with-sub-superscripts, org-export-with-toc)
	(org-export-with-tables, org-export-with-tags)
	(org-export-with-tasks, org-export-time-stamp-file)
	(org-export-with-timestamps, org-export-with-todo-keywords):
	Fix docstrings.

	* ox-html.el (org-html-postamble-format): Slightly change default
	value so "Generated by" string doesn't get duplicated.
	(org-html-creator-string): Fix docstring.

	* ox.el (org-export--get-inbuffer-options)
	(org-export--list-bound-variables)
	(org-export--generate-copy-script, org-export-string-as)
	(org-export-expand-include-keyword)
	(org-export--prepare-file-contents): Inhibit startup process when
	calling `org-mode'.

	* ox-publish.el (org-publish-find-date): Fix "bad timestamp" error
	with some DATE values: :date property in communication channel is
	no longer a string.

	* ox.el (org-export-insert-default-template): New function.
	(org-export--dispatch-ui, org-export--dispatch-action): Access to
	the function through the dispatcher.

	* ox-icalendar.el (org-icalendar-convert-timestamp):
	Update docstring.
	(org-icalendar-dtstamp): New function.
	(org-icalendar--vevent, org-icalendar--vtodo): Use new function.

	* ox-ascii.el (org-ascii-link):
	* ox-html.el (org-html-keyword):
	* ox-latex.el (org-latex-keyword, org-latex-link):
	* ox-man.el (org-man-keyword):
	* ox-md.el (org-md-link):
	* ox-odt.el (org-odt-keyword):
	* org.el (org-store-link, org-link-search, org-options-keywords):
	Remove reference to TARGET keyword.

	* ox.el (org-export-resolve-fuzzy-link, org-export-get-ordinal):
	Do not use TARGET as a destination for links anymore.

	* ox-org.el (org): Add a menu entry for the back-end.
	(org-org-export-as-org, org-org-export-to-org): New functions.

	* org.el (org-export-backends): Accept `org' as a loadable
	back-end.

	* ox-ascii.el (org-ascii-template--document-title): Use new function.

	* ox-beamer.el (org-beamer-template): Use new function.

	* ox-html.el (org-html-format-spec): Use new function.

	* ox-latex.el (org-latex-template): Use new function.
	(org-latex-date-timestamp-format): Remove variable.

	* ox.el (org-export-date-timestamp-format): New variable.
	(org-export-get-date): New function.

	* ox-odt.el (org-odt--format-paragraph): New function.
	(org-odt-paragraph): Use new function to limit code duplication.
	(org-odt-footnote-reference): Change default style for paragraphs
	when transcoding a footnote definition.

	* org-macro.el (org-macro--collect-macros): Fix a bug where
	reading a macro in a setup file would remove other macros read so
	far from template.  Change function signature.
	(org-macro-initialize-templates): Apply signature change from function
	above.

	* ox.el (org-export--list-bound-variables): Rename from
	`org-export--install-letbind-maybe'.  Though, only return list of
	bound variables instead of installing them as buffer-local
	variables.
	(org-export-get-environment): Use new function.  Take care of the
	installation of bound variables.
	(org-export--generate-copy-script): Make sure non-Org variables are
	also installed in buffer copy.

	* ox.el (org-export-get-environment): Update comment.
	(org-export--install-letbind-maybe): Go into SETUPFILE files and
	handle BIND keywords there.

	* ox-latex.el (org-latex-link): Do not prefix relative paths with
	"file://".

	* org.el (org-link-search): Preserve priority of #+TARGET over
	#+NAME when resolving a link.

	* ox-latex.el (org-latex-long-listings): New variable.
	(org-latex-src-block): Use new variable.

	* ox.el (org-export-data): White spaces after export snippets are
	never ignored.

	* org-element.el (org-element-macro-parser): Allow to escape
	escaping character before a comma.  Also do not trim spaces at
	argument boundaries.

	* ox.el (org-export-async-start): Use correct coding system so
	unibyte characters do not appear in the resulting buffer or file.
	(org-export--copy-to-kill-ring-p): Move function elsewhere in the
	file.

	* ox-latex.el (org-latex--inline-image): Fix error when no default
	width, height and option are provided and no attribute is set for
	the inline image.

	* org.el (org-comment-or-uncomment-region): Fix commenting lines
	beginning with a link.
	(org-delete-char): Fix "Invalid use of `\\' in replacement text"
	when deleting a character in a cell which contains "\"
	(org-export-backends): Remove duplicates.  Reorder alphabetically.

	* ox-texinfo.el (org-texinfo-plain-list): Use `member' instead of
	`memq' when matching strings.

	* ox.el (org-export-read-attribute): Do not use `read' to read
	attributes.  Instead, extract keywords and values from it, which
	means each value will be a string when non-nil.

	* ox-beamer.el (org-beamer-plain-list): Use new attribute syntax.

	* ox-html.el (org-html--textarea-block): Use new attribute syntax.

	* ox-latex.el (org-latex--inline-image, org-latex--org-table)
	(org-latex--math-table): Use new attribute syntax.

	* ox-man.el (org-man-table--org-table): Use new attribute syntax.
	Small refactoring.

	* ox-odt.el (org-odt-link--inline-image, org-odt-table-cell):
	Use new attribute syntax.

	* ox.el (org-export-async-start): Remove code evaluation queries
	from asynchronous export.

	* ox-latex.el (latex): Activate smart quotes by default.
	(org-latex--inline-image): Don't insert a default width when
	height is provided in a figure environment.
	(org-latex--inline-image): Do not use default width
	(resp. height) when an user height (resp. width) is provided.
	Also, default height is only used when image is not wrapped within
	a figure or wrapfigure environment, in order to preserve ratio.
	(org-latex-image-default-width, org-latex-image-default-height):
	Update docstring.

	* ox-icalendar.el (org-icalendar-create-uid): Fix error when
	`org-icalendar-store-UID' is non-nil.

	* ox-latex.el (latex): Introduce new buffer keyword.
	(org-latex-template): Use new keyword.

	* ox-beamer.el (org-beamer-template): Use new keyword.

	* org.el (org-create-formula--latex-header): Use new keyword.

	* ox-beamer.el (org-beamer-column-view-format, org-beamer-theme)
	(org-beamer-environments-extra): Add :version and
	:package-version.

	* ox-html.el (org-html-with-latex, org-html-inline-image-rules):
	Add :version and :package-version.

	* ox-latex.el (org-latex-inline-image-rules)
	(org-latex-default-table-environment)
	(org-latex-default-table-mode, org-latex-tables-booktabs)
	(org-latex-table-scientific-notation, org-latex-known-errors):
	Add :version and :package-version.

	* ox-md.el (org-md-headline-style): Add :version and
	:package-version.

	* ox-odt.el (org-odt-with-latex): Add :version
	and :package-version.

	* ox.el (org-export-with-drawers, org-export-with-latex)
	(org-export-with-inlinetasks, org-export-with-planning)
	(org-export-with-smart-quotes, org-export-with-statistics-cookies)
	(org-export-allow-bind-keywords, org-export-async-init-file):
	Add :version and :package-version.

	* ox-icalendar.el (org-icalendar-export-to-ics): Change back-end
	name from `e-ascii' to `ascii'.

	* ox.el (org-export--generate-copy-script): Call `org-mode' when
	duplicating a buffer.  It will properly set every variable, like
	`comment-start'.
	(org-export-async-start): Do not call `org-mode' since this is done
	already in the previous function.

	* ox-beamer.el (org-beamer-keyword): Remove frame arount toc when
	generated from a TOC keyword.

	* org.el (org-export-backends): Do not reset list of loaded
	back-ends to variable's value after a reload.

	* ox-latex.el (org-latex-src-block): Do not overwrite provided
	numbering options in minted and listings.
	(org-latex-headline): Don't add optional title on unnumbered
	headlines.

	* ox-html.el (html): Fix "HTML_HEAD" and "HTML_HEAD_EXTRA"
	keywords.  Allow multiple #+LATEX_HEAD and #+LATEX_HEAD_EXTRA
	again.

	* org.el (org-fill-paragraph): Small refactoring to
	`org-fill-paragraph'.  Do not look for table cells in a paragraph.

	* org-element.el (org-element-object-restrictions):
	Simplify restrictions within secondary strings and objects.

	* org-list.el (org-list-send-list): Do not rely on
	`org-list-parse-list'.
	(org-list-to-latex, org-list-to-html, org-list-to-texinfo):
	Use appropriate export back-end instead of using
	`org-list-to-generic'.

	* ox-html.el (org-html-inner-template): Remove contents div and
	title.
	(org-html-template): Add contents div and title.
	(org-html-infojs-install-script): Can't activate jsinfo script
	during a body-only export.

	* ox.el (org-export-as): Store export options in :export-options
	porperty within communication channel.

	* ox-latex.el (org-latex-item): Fix wrong behavior when a counter
	is set in an ordered list while its parent is not ordered.

	* ox.el (org-export-format-code-default): Handle empty source
	blocks more gracefully.

	* ox-ascii.el (org-ascii-src-block): Handle empty blocks more
	gracefully.

	* org.el (org-export-backends): Update variable.  `infojs' was
	merged into ox-html and `freemind' was added.

	* ox.el (org-export--selected-trees): Also mark inlinetasks with a
	select tag.
	(org-export--skip-p): Skip inlinetasks with a :noexport: tag.

	* ob-tangle.el (org-babel-spec-to-string): Use dedicated function
	for unescaping code.

	* ox-html.el (org-html-link): Silence byte-compiler.
	(html): Add infojs installation script in options filter.
	(org-html-infojs-install-script): Remove check for back-end as we
	can safely assume the function will be called from `html' back-end
	or one of its derivative.

	* ox-icalendar.el (org-agenda-collect-markers)
	(org-create-marker-find-array): Remove functions.
	(org-icalendar-export-current-agenda): Integrate previous
	functions.

	* ox-latex.el (org-latex-format-headline-default-function):
	Use declarative shape to nest makup for TODO keywords.
	Previous syntax generated errors during export.

	* ox.el (org-export-async-start): Ignore `org-mode-hook' and
	`kill-emacs-hook'.  The first one has been run in the original
	buffer.  The second is not necessary and can pollute output to a
	temporary buffer (e.g. with `org-clock-persistence-insinuate').

	* ox-html.el (org-html-inner-template): Remove title.
	(org-html-template): Add title.

	* ox.el (org-export--get-min-level): Ignore footnote section when
	computing minimal headline level.

	* org.el (org-do-latex-and-related): Fix infloop when user
	provides a wrong value for `org-highlight-latex-and-related'.
	In this case, `org-latex-and-related-regexp' is the empty string and
	generates an infloop since matching it doesn't move point.

	* org-element.el (org-element-headline-parser):
	Rename :optional-title into :alt-title.

	* ox.el (org-export-get-alt-title): Rename from
	`org-export-get-optional-title'.

	* ox-ascii.el (org-ascii--build-title):
	* ox-html.el (org-html--format-toc-headline):
	* ox-latex.el (org-latex-headline):
	* ox-texinfo.el (org-texinfo--get-node)
	(org-texinfo--generate-menu-items): Apply name change.

	* ox.el (org-export--get-inbuffer-options): Remove an optional
	argument.  Rewrite function.  Properties read from a setupfile do
	not overwrite anymore previously computed properties.
	(org-export-get-environment): Apply changes to previous function.

	* org.el (org-create-formula--latex-header): Apply arity change
	from `org-export--get-inbuffer-options'.

	* ox-latex.el (org-latex-compile): Add an optional argument for
	latex snippet previewing.

	* org.el (org-create-formula-image-with-imagemagick):
	Use `org-latex-compile' instead of rewriting it.

	* ox-html.el (org-html-fontify-code): Do not use [^\000] in
	regexps that may match large strings.

	* org.el (org-create-formula--latex-header): New function.
	(org-create-formula-image-with-dvipng)
	(org-create-formula-image-with-imagemagick): Use new function.

	* ox.el (org-export-get-previous-element): Change order of retured
	elements in `org-export-get-previous-element'.

	* org-element.el (org-element-all-successors): Add `plain-link'
	successor.
	(org-element-object-restrictions): Remove `link' within `link'.
	Allow `plain-link' instead.
	(org-element-plain-link-successor): New function.

	* org.el (org-match-substring-regexp)
	(org-match-substring-with-braces-regexp): Update regexp.
	A sub/superscript cannot start anymore at the beginning of the line
	or after a space.

	* org-element.el (org-element--get-next-object-candidates):
	Rewrite function to simplify algorithm.
	(org-element-context, org-element--parse-elements): Apply changes.

	* org.el (org-fill-paragraph): Apply changes.

	* ox-html.el (org-html-link, org-html-link--inline-image):
	Attributes specified to a paragraph only apply to first link
	within.

	* ox-latex.el (org-latex-headline): Do not add optional section
	name when section is unnumbered.

	* org.el (org-in-verbatim-emphasis): Fix false positive when point
	is just after the closing emphasis marker.
	(org-fill-paragraph): Do not move point when filling a table.

	* ox-ascii.el (ascii): Add new filter.
	(org-ascii-filter-comment-spacing): New function.
	(org-latex-keyword): Remove "figures" value.

	* ox-ascii.el (org-ascii--list-tables): Fix docstring.

	* ox-html.el (org-html--format-toc-headline): Fix function name.
	(org-html-toc, org-html--toc-text): Change to docstring.
	(org-html-list-of-listings, org-html-list-of-tables):
	New functions.
	(org-html-keyword): Use new functions.
	(org-html-src-block): Add an ID attribute when a name is given.

	* org-element.el (org-element-footnote-definition-parser):
	Require 2 blank lines to separate footnote definition.

	* org-footnote.el (org-footnote-at-definition-p): Require 2 blank
	lines to separate footnote definition.

	* ox.el (org-export-stack): Rewrite.
	(org-export-stack-refresh): Refactor.
	(org-export-stack-remove, org-export-stack-view): Apply renaming.
	(org-export-stack-mode-map): Use tabulated list map as a basis.
	(org-export-stack--generate, org-export-stack--num-predicate):
	New function.
	(org-export-get-optional-title): Return regular title when no
	optional title is found.

	* ox-ascii.el (org-ascii--build-title): Apply change to
	`org-export-get-optional-title'.

	* ox-html.el (org-html--format-toc-headline): Apply change to
	`org-export-get-optional-title'.

	* ox-latex.el (org-latex-headline): Apply change to
	`org-export-get-optional-title'.

	* ox-ascii.el (org-ascii--build-title): Add an argument.
	Use optional title when building a toc line.
	(org-ascii--build-toc): Call `org-ascii--build-title' with
	appropriate arguments.

	* ox-latex.el (org-latex-headline): Use optional title for table
	of contents.

	* ox-html.el (org-html--toc-text): Rename from
	`org-html-toc-text'.  Add docstring.
	(org-html--format-toc-headline): Rename from
	`org-html-format-toc-headline'.  Add docstring.  Use optional
	title if possible.
	(org-html-toc): Add docstring.

	* org-element.el (org-element-headline-parser): Node property
	:OPTIONAL_TITLE: in a headline will be parsed and stored under
	:optional-title property.

	* ox.el (org-export-get-optional-title): New function.

	* ox-latex.el (org-latex-format-headline-default-function):
	Make the variable a function.

	* ox-publish.el (org-publish-resolve-external-fuzzy-link):
	No error when resolving external fuzzy links outside publishing.
	Though search option for these links will not be resolved.

	* ox-latex.el (org-latex-guess-inputenc): Set inputenc option
	according to `org-export-coding-system'.

	* ox.el (org-export--generate-copy-script):
	Clone `buffer-file-coding-system' when creating a buffer copy.

	* ox-html.el (org-html-link): Resolve external links with search
	options like [[file.org::#custom-id]] or
	[[file.org::*headline-search]].

	* ox-publish.el (org-publish-collect-numbering)
	(org-publish-resolve-external-fuzzy-link): New functions.
	(org-publish-org-to): Add new collecting function to final output
	filter.  Move index collecting function to the same filter.
	(org-publish-collect-index): Called from final output filter.

	* ox-html.el (org-html-format-headline--wrap, org-html-headline):
	Use :CUSTOM_ID, not :custom-id.

	* org-element.el (org-element-latex-environment-parser): Fix wrong
	value for :post-affiliated property when parsing a latex
	environment.

	* ox-latex.el (org-latex-property-drawer): Remove function.

	* ox-ascii.el (org-ascii-filter-paragraph-spacing):
	Remove reference to now renamed `e-ascii' back-end.

	* ox-beamer.el (org-beamer-template): Allow to span documentclass
	options accross multiple lines in template.

	* ox-latex.el (org-latex-template): Allow to span documentclass
	options accross multiple lines in template.

	* ox-texinfo.el (org-texinfo--get-node): Upcase property name.
	(org-texinfo--get-node): New function.
	(org-texinfo-headline, org-texinfo-link): Use new function.

	* ox-ascii.el (org-ascii-quote-block): Do not fill quote block
	contents.  Just indent them.

	* ox-publish.el (org-publish-index-generate-theindex): Do not
	create an "* Index" headline in "theindex.inc".  Though, create an
	"Index" title in fallback "theindex.org".

	* ox-publish.el (org-publish-projects): Publish "theindex.org"
	last, so that "theindex.inc" can be completed.

	* ox-publish.el (org-publish-project-alist): Fix docstring.
	(org-publish-collect-index): Fix typo.

	* ox.el (org-export--dispatch-ui): Prevent invisible cursor from
	highlighting brackets in UI

	* org-element.el (org-element-headline-parser)
	(org-element-inlinetask-parser): Fix docstring.

	* org.el (org-export-backends): Add new back-end in customize
	interface.

	* ox-beamer.el (org-beamer--get-label, org-beamer--frame-level)
	(org-beamer--format-section, org-beamer--format-frame)
	(org-beamer--format-block, org-beamer-headline): Apply changes to
	properties.

	* ox-html.el (org-html-headline, org-html-link, org-html-section):
	Apply changes to properties.

	* ox-icalendar.el (org-icalendar-create-uid)
	(org-icalendar-blocked-headline-p, org-icalendar-entry)
	(org-icalendar--valarm): Apply changes to properties.

	* ox-odt.el (org-odt-headline): Apply changes

	* ox-publish.el (org-publish-collect-index): Apply changes to
	properties.

	* ox-texinfo.el (org-texinfo--generate-menu-list)
	(org-texinfo--generate-menu-items, org-texinfo-template)
	(org-texinfo-headline, org-texinfo-link): Apply changes to
	properties.

	* ox.el (org-export-resolve-id-link, org-export-get-category):
	Apply changes to properties.
	(org-export-get-node-property): Update docstring.

	* org-element.el (org-element-headline-parser)
	(org-element-inlinetask-parser): Upcase properties.  This is done
	to avoid confusion between properties from parser (e.g. `:end')
	and properties from the property drawer (e.g. :END:).

	* ox-publish.el (org-publish-index-generate-theindex): Preserve
	order in file.  Fix error when two index entries were identical.
	Create again theindex.inc.

	* org-element.el (org-element-map): Allow to map over any list.
	Do not restrict mapping to object types.

	* org-faces.el (org-latex-and-related): Rename from
	`org-latex-and-export-specials', which wasn't appropriate anymore.

	* org.el (org-highlight-latex-and-related)
	(org-latex-and-related-regexp): New variables.
	(org-compute-latex-and-related-regexp, org-do-latex-and-related):
	New function, revived from a previous commit.
	(org-set-regexps-and-options, org-set-font-lock-defaults): Use new
	functions.
	(org-set-regexps-and-options): Remove reference to LATEX_CLASS and
	beamer back-end.

	* ox-publish.el (org-publish-org-to): Small refactoring.

	* ox.el (org-export-install-filters): Properly install filters
	send through ext-plist mechanism.

	* ox-publish.el (org-publish-org-to): Small refactoring.

	* ox-html.el (org-html-keyword): Remove INDEX keyword handling.
	ox-publish.el takes care of it already.

	* org-macro.el: New file.

	* org.el: Remove macro code.

	* ox.el: Require new library

	* ox.el (org-export-resolve-fuzzy-link): Ignore statistics cookies
	when matching an headline.
	(org-export--dispatch-ui): Display a help message in header line
	for scrolling dispatcher's buffer
	(org-export-resolve-radio-link): Radio targets are
	case-insensitive.

	* ox-icalendar.el (org-export-icalendar): Fix docstring.

	* ox.el (org-export-dispatch): Fix docstring.
	(org-export--dispatch-action): Small improvement to line by line
	scrolling.
	(org-export-resolve-fuzzy-link): Refactor.  Whitespaces are not
	significant when matching a fuzzy link.

	* org-element.el (org-element-link-parser): Do not remove newlines
	characters in paths anymore, since this is not required.

	* ox.el (org-export--dispatch-ui): Rename from
	`org-export-dispatch-ui'.  Handle scrolling.
	(org-export--dispatch-action): Rename from
	`org-export-dispatch-action'.  Implement scrolling.
	(org-export-dispatch): Apply renaming.

	* org.el (org-ctrl-c-ctrl-c): Do nothing when at a blank line,
	but still run `org-ctrl-c-ctrl-c-final-hook'.
	(org-end-of-line): Remove `ignore-error'.

	* org-element.el (org-element-at-point): Return nil when in the
	first empty lines of the buffer.  Return headline when in empty
	lines just after the headline.

	* ox.el (org-export-output-file-name): Add a protection when
	output file name is the same as the original org.

	* ox-beamer.el (org-beamer-template): Add missing `class' argument
	for `format-string'.

	* ox-latex.el (org-latex-template): Add missing `class' argument
	for `format-string'.

	* ox.el (org-export-stack-mode): Fix docstring.

	* org-pcomplete.el (pcomplete/org-mode/file-option):
	Allow completion for ATTR_ prefixed keywords.

	* org.el (org-options-keywords): Add missing colons.

	* org-macs.el (org-default-options): Remove function.

	* org-pcomplete.el (org-command-at-point): Fix bug with some file
	options.
	(pcomplete/org-mode/file-option/x): Remove macro.
	(pcomplete/org-mode/file-option): Refactor code.
	(pcomplete/org-mode/file-option/author)
	(pcomplete/org-mode/file-option/date)
	(pcomplete/org-mode/file-option/title)
	(pcomplete/org-mode/file-option/tags)
	(pcomplete/org-mode/file-option/select_tags)
	(pcomplete/org-mode/file-option/priorities)
	(pcomplete/org-mode/file-option/language)
	(pcomplete/org-mode/file-option/filetags)
	(pcomplete/org-mode/file-option/exclude_tags)
	(pcomplete/org-mode/file-option/email): New functions.

	* ox.el (org-export--collect-headline-numbering): Remove footnote
	section from TOC.
	(org-export-collect-headlines): Do not count footnote section when
	numbering a headline.

	* ox-beamer.el (org-beamer-plain-list): Also read #+attr_latex
	attributes in order to determine list's options.

	* ox-ascii.el (org-ascii-inner-template): New function.
	(org-ascii-template): Use new function.
	(org-ascii-export-as-ascii, org-ascii-export-to-ascii):
	Update docstring.

	* org-element.el (org-element-link-parser): Take into
	consideration links filled and indented.

	* org-element.el (org-element-link-parser): Remove all newline
	characters in path property.

	* ox.el (org-export-as): Call `inner-template' function, if
	available.

	* ox-html.el (org-html-inner-template): New function.
	(org-html-template): Move all parts that should be inserted even
	in a body-only export into `org-html-inner-template'.

	* org.el (org-forward-element, org-backward-element): When no
	headline is found at the same level, still move forward or
	backward.

	* org-element.el (org-element--current-element): Add a limit
	argument.
	(org-element--collect-affiliated-keywords): Fix parsing of orphaned
	keyword at the end of an element.

	* ox-texinfo.el (org-texinfo-src-block): Remove spurious newline
	character as `org-export-format-code-default' already makes sure
	the string returned will end with a single one.

	* ox-latex.el (org-latex-headline): When a function returns a
	sectioning command, only one placeholder should be required.

	* org-element.el (org-element-nested-p): Do not inline function.

	* ox.el (org-export-copy-buffer, org-export-with-buffer-copy)
	(org-export--generate-copy-script): Move earlier in the file.

	* ox-texinfo.el (org-texinfo-link): Do not transform path part of
	internal links.

	* org.el (org-org-menu): Small refactoring.

	* ox-beamer.el (require):
	* ox-icalendar.el (require):
	* ox-jsinfo.el (require):
	* ox-md.el (require): Require cl when compiling.

	* org.el (org-export-backends):
	* ox.el (org-export-dispatch): Fix docstring.

	* ox.el (org-export-dispatch-ui): Widen UI by 2 characters.

	* ox-latex.el (org-latex-special-block): Add :options attribute to
	special blocks to specify options.

	* ox-beamer.el (org-beamer-template): Add BEAMER_HEADER keywords
	below LATEX_HEADER.

	* ox-latex.el (org-latex-format-headline-function): Fix missing
	parens in the docstring.

	* org.el (org-export-backends): Remove `:initialize' function.

	* org.el (org-reload): Also reload export back-ends in use.

	* ox-latex.el (org-latex-example-block, org-latex-src-block):
	Ignore element if it's empty.  This fixes error "apply: Wrong
	number of arguments: max, 0".

	* ox-beamer.el (org-beamer-template): Provide an error when LaTeX
	class is invalid.

	* ox-latex.el (org-latex-template): Provide an error when LaTeX
	class is invalid.

	* org.el (org-modules): Remove export back-ends from the list.
	Update docstring.
	(org-export-backends): New variable.

	* ox.el (org-export-async-start): Make sure export framework is
	required in the external process.

	* org.el (org-format-latex-header-extra, org-export-have-math):
	Remove variables.
	(org-latex-default-packages-alist): Rename from
	`org-export-latex-default-packages-alist'.
	(org-latex-packages-alist): Rename from
	`org-export-latex-packages-alist'.
	(org-try-cdlatex-tab, org-cdlatex-underscore-caret,
	org-cdlatex-math-modify): Reorder in file.
	(org-format-latex): Remove `org-format-latex-header-extra'.
	(org-create-formula-image-with-dvipng,
	org-create-formula-image-with-imagemagick): Apply variables renaming
	and removal.

	* org-entities.el (org-entities-user): Update docstring.

	* ox-latex.el (org-latex-classes, org-latex-listings):
	Update docstring.
	(org-latex-guess-inputenc): Rename from `org-latex--guess-inputenc'.
	(org-latex-guess-babel-language): Rename from
	`org-latex--guess-babel-language'.
	(org-latex-template): Apply renaming.

	* ox-beamer.el (org-beamer-template): Apply renaming.

	* ob-latex.el (org-babel-execute:latex): Apply variable renaming
	and removal.
	(org-babel-latex-tex-to-pdf): Call `org-latex-compile' instead of
	copying it.

	* org-macs.el (org-if-unprotected, org-if-unprotected-1)
	(org-if-unprotected-at): Remove macros.
	(org-re-search-forward-unprotected): Remove function.

	* org.el (org-format-latex):
	* org-list.el (org-list-struct):
	* org-footnote.el (org-footnote-at-reference-p):
	* org-capture.el (org-capture-fill-template): Remove reference to
	`org-protected'.

	* ob-exp.el (org-babel-exp-process-buffer): Rename from
	`org-export-blocks-preprocess'.

	* ox.el (org-export-execute-babel-code): Apply previous renaming.

	* org-pcomplete.el (pcomplete/org-mode/file-option): Collect valid
	keywords for completion without requiring the whole export
	framework.
	(pcomplete/org-mode/file-option/options): Rewrite using new export
	framework.  Only complete up to the colon.
	(pcomplete/org-mode/file-option/x): Remove macro.
	(pcomplete/org-mode/file-option/title)
	(pcomplete/org-mode/file-option/author)
	(pcomplete/org-mode/file-option/email)
	(pcomplete/org-mode/file-option/date): Remove functions.
	(pcomplete/org-mode/file-option/infojs_opt): New function.

	* org-clock.el (org-clocktable-defaults)
	(org-clocktable-write-default): Avoid requiring the whole export
	framework just to check one variable.

	* org-footnote.el (org-footnote-section): Update docstring.
	(org-footnote-normalize): Remove all export related part from the
	function.

	* org-inlinetask.el (org-inlinetask-export)
	(org-inlinetask-export-templates): Remove variables.
	(org-inlinetask-export-handler): Remove function.

	* org-plot.el: Remove dependency on `org-exp' library.

	* org.el (org-additional-option-like-keywords): Remove variable.
	(org-get-export-keywords): New function.
	(org-options-keywords): Update default list of keywords.
	(org-remove-flyspell-overlays-in): Apply changes to keywords
	compilation.
	(org-highlight-latex-fragments-and-specials)
	(org-latex-and-specials-regexp)
	(org-export-html-special-string-regexps): Remove variables.
	(org-compute-latex-and-specials-regexp)
	(org-do-latex-and-special-faces, org-remove-file-link-modifiers):
	Remove functions.
	(org-set-regexps-and-options, org-set-font-lock-defaults): Apply all
	removals.
	(org-use-sub-superscripts): Fix docstring.  Remove unused group.
	(org-match-sexp-depth): Make it a defconst instead of a defcustom
	in order to remove `org-export-translation' group completely.

	* ob-haskell.el (org-babel-haskell-export-to-lhs): Use new
	exporter.

	* ob-latex.el (org-babel-execute:latex): Use new exporter.

	* ob-org.el (org-babel-execute:org): Use new exporter.

	* org-agenda.el (org-agenda-menu, org-agenda-write): Use new
	iCalendar export back-end.

	* org-table.el (org-table-export, orgtbl-export):
	Remove dependency on `org-exp' library.
	(org-table-clean-before-export): New function.
	(org-table-colgroup-info): New variable.
	(orgtbl-to-html): Use to new HTML export back-end.

	* org.el (org-modules): Remove modules relative to obsolete export
	framework and add those relative to the new one.
	(org-create-formula-image-with-dvipng, org-format-latex
	org-create-formula-image-with-imagemagick): Use new exporter.
	(org-indent-line): INCLUDE keywords are indented like regular
	keywords.
	(org-mode-map): Bind C-c C-e to new export dispatcher.
	(org-menu): Install new exporter in menu.

	* org-ascii.el:
	* org-beamer.el:
	* org-docbook.el:
	* org-exp-blocks.el:
	* org-exp.el:
	* org-freemind.el:
	* org-html.el:
	* org-icalendar.el:
	* org-jsinfo.el:
	* org-latex.el:
	* org-lparse.el:
	* org-odt.el:
	* org-publish.el:
	* org-special-blocks.el:
	* org-taskjuggler.el:
	* org-xoxo.el: Remove

	* ox-ascii.el:
	* ox-beamer.el:
	* ox-html.el:
	* ox-icalendar.el:
	* ox-jsinfo.el:
	* ox-latex.el:
	* ox-man.el:
	* ox-md.el:
	* ox-odt.el:
	* ox-publish.el:
	* ox-texinfo.el:
	* ox.el: New file.

	* ob-exp.el (org-export-blocks-preprocess): Do not use
	`indent-code-rigidly' as it doesn't indent contents of strings.

	* org-element.el (org-element-map): Change to function
	indentation.  Also complete docstring.

	* org.el (org-ctrl-c-ctrl-c): Major rewrite function using
	Elements.

	* org-element.el (org-element-at-point): When point is before any
	element, in the first blank lines of the buffer, return nil.
	When point is within blank lines just after a headline, return that
	headline.
	(org-element-context): Return nil when point is within the blank at
	the beginning of the buffer.

	* org.el (org-edit-special): Fix regression.
	(org-timestamp-has-time-p, org-timestamp-format)
	(org-timestamp-split-range, org-timestamp-translate):
	New functions.

	* org-element.el (org-element-timestamp-interpreter):
	Interpret timestamps ranges with repeaters.

	* org.el (org-edit-special): Rewrite `org-edit-special' using Org
	Elements tools.  Behavior should be unchanged.

	* org-element.el (org-element-context): Add an optional argument
	so that (org-element-context) and (org-element-context
	(org-element-at-point)) are equivalent.

	* ob.el: Only use the :wrap argument up to the first space when
	creating the #+END_ directive.

	* org-element.el (org-element-object-variables): New variable.
	(org-element-parse-secondary-string): Copy some buffer-local
	variables to the temporary buffer created to parse the string so
	links can still be properly expanded.
	(org-element-link-parser): Link expansion and translation are applied
	transparently for the parser.

	* org-element.el (org-element-line-break-parser): Line break
	includes the newline character following the backslashes.
	(org-element-line-break-interpreter): Apply changes to line break
	parsing.

	* org.el (org-all-targets): Fix radio targets detection when
	object is directly followed by a non-whitespace character.

	* ob.el (org-babel-use-quick-and-dirty-noweb-expansion):
	Rename from `org-babel-use-quick-and-dirty-noweb-expansion'.
	(org-babel-expand-noweb-references): Use new variable name.

	* org-element.el (org-element-timestamp-interpreter):
	Fix timestamp interpreter when raw value isn't available.

	* ob-exp.el (org-babel-exp-non-block-elements): Make sure to parse
	inline babel call or inline src block instead of the following
	object.

	* org-element.el (org-element-timestamp-parser): Timestamp with
	time range has active/inactive-range type.
	(org-element-block-name-alist): Do not reset
	`org-element-block-name-alist' at each reload.
	(org-element-object-restrictions): Allow timestamps in parsed
	keywords (i.e. DATE).

	* org-agenda.el (org-agenda-show-clocking-issues)
	(org-agenda-format-item): Silence byte compiler.

	* org-colview.el (org-agenda-columns): Silence byte compiler.

	* org.el (org-properties-postprocess-alist): Silence byte
	compiler.

	* org-element.el (org-element-timestamp-parser): Return nil for
	unspecified :hour-end and :minute-end properties.
	(org-element-object-restrictions): Add footnote references objects
	in table cells.
	(org-element-interpret-data): Clear text properties when
	interpreting a string .

	* org-capture.el (org-capture--expand-keyword-in-embedded-elisp):
	Fix docstring.

	* org.el (org-adaptive-fill-function): Items do not have
	a :post-affiliated property.  Use :begin property instead.

	* org-element.el (org-element-headline-parser)
	(org-element-inlinetask-parser): Remove :clockedp property.

	* org.el (org-adaptive-fill-function): All elements do not have a
	:post-affiliated property.
	(org-macro-replace-all): Signal an error when a circular macro
	expansion happens.
	(org-macro-initialize-templates): Fix docstring.

	* org-element.el (org-element-map): Fix docstring.
	(org-element-contents, org-element-set-contents)
	(org-element-adopt-elements): Fix accessors and setters wrt
	secondary strings.
	(org-element-headline-parser)
	(org-element-inlinetask-parser): Fix void-function
	`org-clocking-buffer' error.
	(org-element-context): Fix org-element-context on parsed keywords.
	(org-element-context): Find objects in document and parsable
	affiliated keywords.
	(org-element-center-block-parser)
	(org-element-drawer-parser, org-element-dynamic-block-parser)
	(org-element-footnote-definition-parser)
	(org-element-plain-list-parser)
	(org-element-property-drawer-parser)
	(org-element-quote-block-parser, org-element-special-block-parser)
	(org-element-babel-call-parser, org-element-comment-parser)
	(org-element-comment-block-parser, org-element-diary-sexp-parser)
	(org-element-example-block-parser)
	(org-element-export-block-parser, org-element-fixed-width-parser)
	(org-element-horizontal-rule-parser, org-element-keyword-parser)
	(org-element-latex-environment-parser)
	(org-element-paragraph-parser, org-element-src-block-parser)
	(org-element-table-parser, org-element-verse-block-parser):
	Add `:post-affiliated' property to elements.
	(org-element-inlinetask-parser): Remove affilated keywords.

	* org.el (org-adaptive-fill-function): Use new property.

	* org-element.el (org-element--collect-affiliated-keywords):
	Allow duals keywords with only secondary value.
	(org-element-timestamp-parser): Modify timestamp objects
	properties.
	(org-element-headline-parser, org-element-inlinetask-parser): Remove
	`:timestamp' and `:clock' property.  Add `:clockedp' property.  Also,
	set `:closed', `:deadline' and `:scheduled' values to timestamp
	objects, not strings.  Small refactoring.
	(org-element-clock-parser): Rename `:time' property into `:duration'.
	Also, set `:value' value as a timestamp object, not a string.
	(org-element-planning-parser): Set `:closed', `:deadline' and
	`:scheduled' values to timestamp objects, not strings.
	(org-element-clock-interpreter, org-element-planning-interpreter)
	(org-element-timestamp-interpreter): Update interpreters.
	(org-element--current-element): Tiny refactoring.

	* ob.el (org-babel-where-is-src-block-result): Insert new results
	keyword in current narrowed part of buffer, if necessary.
	Small refactoring.
	(org-babel-insert-result): Do not widen buffer when new results have
	to be inserted.  Therefore, results inserted after the last block of
	a narrowed buffer still belong to the narrowed part of the buffer.

	* org-agenda.el (org-agenda-get-deadlines): Tiny stylistic change.

	* org-element.el (org-element-paragraph-separate): Diary-sexp
	elements can separate paragraphs.
	(org-element-all-elements): Install new `diary-sexp' type.
	(org-element--current-element): Recognize new `diary-sexp' elements.
	(org-element-diary-sexp-parser)
	(org-element-diary-sexp-interpreter): New functions.
	(org-element-horizontal-rule-parser)
	(org-element-keyword-parser, org-element--current-element):
	Small refactoring.
	(org-element-property): Access to text properties when argument is
	a string.
	(org-element-put-property): Correctly set property when target is
	a string.
	(org-element-adopt-elements): Also put :parent properties on
	strings.

	* ob-exp.el (org-babel-exp-code): Escape code when re-creating a
	src blocks.
	(org-export-blocks-preprocess): Pos can sometimes be set to a
	value greater than start, because of indentation, and lead to a
	search bound error.
	(org-babel-exp-code): Remove comma-escaping special rule for Org
	blocks.
	(org-export-blocks-preprocess): Results of an evaluated code block
	can be inserted within the blank lines after the block.  Hence, if
	the block has to be removed, delete everything down to the first
	non-blank line after the end of block closing string, instead of
	removing everything down to the very end of the block.

	* org.el (org-all-targets): Make sure the regexp really matched a
	radio target.
	(org-macro-expand, org-macro-replace-all): Change signature.
	The function now accepts an alist of templates so it doesn't have to
	rely only on `org-macro-templates'.
	(org-macro-initialize-templates): {{{date}}} is not anymore an
	alias for {{{time}}}.  During export, it will provide the value
	stored in DATE keyword instead.

	* org-element.el (org-element-object-restrictions): Allow links in
	caption.  Also allow inline-src-blocks and inline-babel-calls.
	(org-element-map): Change signature.
	(org-element-parsed-keywords): Remove document properties from the
	value.
	(org-element-dual-keywords): Fix docstring.
	(org-element-document-properties): New variable
	(org-element-all-elements): Add `node-property' as a new element
	type.
	(org-element-greater-elements): Add property-drawer element to
	greater elements since they now contain node-property elements.
	(org-element-drawer-parser): Small refactoring.
	(org-element-property-drawer-parser): Move into Greater Elements
	file section.
	(org-element-node-property-parser,
	org-element-node-property-interpreter): New functions.
	(org-element--current-element, org-element-at-point)
	(org-element--parse-elements): Handle new element type.
	(org-element--collect-affiliated-keywords): Fix return value.
	(org-element-center-block-parser)
	(org-element-drawer-parser, org-element-dynamic-block-parser)
	(org-element-footnote-definition-parser)
	(org-element-plain-list-parser, org-element-quote-block-parser)
	(org-element-special-block-parser, org-element-babel-call-parser)
	(org-element-comment-parser, org-element-comment-block-parser)
	(org-element-example-block-parser)
	(org-element-export-block-parser, org-element-fixed-width-parser)
	(org-element-horizontal-rule-parser, org-element-keyword-parser)
	(org-element-latex-environment-parser)
	(org-element-paragraph-parser, org-element-property-drawer-parser)
	(org-element-src-block-parser, org-element-table-parser)
	(org-element-verse-block-parser): Change signature.  Now use an
	additional argument: affiliated.
	(org-element--current-element): Skip affiliated keywords and pass
	them as an argument to parsers.  It prevents to walk through these
	keywords twice: the first time to get to the first line of the
	element, and a second time to collect the affiliated keywords.

	* ob-exp.el (org-babel-exp-non-block-elements): More accurate
	white space handling when evaluating inline-src-block, babel-call
	and inline-babel-call elements or objects.  Also removed use of
	`org-babel-examplize-region' since it would never be called
	anyway; return value from `org-babel-exp-do-export' is never nil.
	(org-export-blocks-preprocess): Preserve affiliated keywords when
	replacing a code block.

	* org-element.el (org-element-multiple-keywords): Allow multiple
	caption keywords.

	* ob-exp.el (org-export-blocks-preprocess): Fix block evaluation
	when results are before the block.
	(org-export-blocks-preprocess): Improve blank lines handling in
	function.  Add comments.  Remove `org-export-blocks-postblock-hook'
	since it's defined nowhere now (and doesn't need to, there's
	`org-export-before-parsing-hook' already).

	* org-exp-blocks.el: Delete.

	* ob-exp.el (org-export-blocks-preprocess):
	* ob-ditaa.el (org-ditaa-jar-path): Move from
	"org-export-blocks.el".

	* ob-exp.el (org-babel-exp-src-block): Remove unused argument.
	(org-babel-exp-non-block-elements): Rewrite function using Org
	Element.

	* org-exp-blocks.el (org-export-blocks-preprocess):
	Rewrite function using Org Element.

	* org-element.el (org-element-recursive-objects)
	(org-element-object-restrictions): Remove `macro' from recursive
	object types.

	* org.el (org-macro-initialize-templates): Small refactoring.
	(org-mode): Initialize macros templates.
	(org-macro-templates): New variable.
	(org-macro-expand, org-macro-replace-all)
	(org-macro-initialize-templates): New functions.

	* org-element.el (org-element-link-type-is-file): New variable.
	(org-element-link-parser): Extract search option and application
	in "file"-type links.

	* org.el (org-mode): Set back comment-start-skip so comment-dwin
	can tell a keyword from a comment.

2013-11-12  Nicolas Richard  <theonewiththeevillook@yahoo.fr>

	* org.el (org-time-stamp): When INACTIVE is non-nil, insert an
	inactive timestamp also with double universal argument.
	(org-set-regexps-and-options): Don't set font-lock defaults here.
	(org-mode): Set font-lock defaults here.
	(org-insert-link): Call `org-link-try-special-completion' from the
	original buffer.

2013-11-12  Oleh Krehel  <oleh.krehel@gmail.com>

	* org.el (org-open-at-point): The new code is being run in the
	same spot as `org-open-link-functions'.  In case they failed,
	check if link matches "^id:" and if so, load the id interface and
	follwo the link.

2013-11-12  Rasmus Pank Roulund  <rasmus@gmx.us>  (tiny change)

	* ox-latex.el (org-latex--inline-image): The pgf format is
	associated to an inline image and treated like tikz files.

2013-11-12  Richard Lawrence  <richard.lawrence@berkeley.edu>  (tiny change)

	* org-agenda.el (org-cmp-ts): Avoid error when trying to
	`string-match' against nil.

2013-11-12  Rick Frankel  <rick@rickster.com>

	* ox-html.el (org-html-doctype): New function.
	(org-html-template): Use `org-html-doctype' instead of inline
	code.
	(org-html-headline): Use the new
	`org-html--container' function to set container element.
	(org-html--container): Returns appropriate element for headline
	container.
	(org-html-divs): Extra character in doc string.
	(org-babel-execute:sql): Unquote cmdline argument in
	format string, dbish requires three separate arguments.  Add dbi
	to the list of engines with automatically added header separator.
	(org-html--build-pre/postamble): Add css class to wrapper div
	(defaults to `org-pre/postamble-class').  Move spec building to
	separate function (`org-html-format-spec').
	(org-html-format-spec): New function.
	(org-pre/postamble-class): New variable.
	(org-html--timestamp-format): New variable used in the metadata
	and the pre/postamble.
	(org-html-style-default): Make the preamble and postamble use the
	same style.  Make all anchors font-size %100.  Remove margin from
	the content section.
	(org-html-container-element): Fix docstring.
	(org-html-postamble-format, org-html-preamble-format):
	Update docstrings.
	(org-html-template): Use `org-html--build-pre/postamble'.
	(org-html--build-pre/postamble): New function, combining the
	pre/postamble generator.  Merge lists of formatters from the
	preamble and postamble.  Fix bug, using :time-stamp-file instead
	of :with-date for auto display of date: this brings usage in-line
	with the latex and beamer exporter.
	(org-html--build-postamble, org-html--build-postamble): Delete.
	(define-backend): Add :html-doctype and :html-container
	parameters.
	(org-html-doctype): New option for doctype declaration.
	(org-html-container-elemnt): New option for specifying the wrapper
	container element.
	(org-html-divs): Change to alist of three entries each containing
	a key ('preamble, 'content, 'postamble), an HTML element type and
	an id to allow setting container elements.
	(org-html--build-preamble, org-html--build-postamble): Modify to
	use `org-html-divs'.
	(org-html-template): Modify to use doctype and container-element
	settings.
	(org-export-define-backend): Add css url option.
	(org-export-htmlized-org-css-url): Modify docstring and options.
	(org-html--build-style): Include css-url if specified.

2013-11-12  Roberto Huelga Díaz  <rhuelga@gmail.com>  (tiny change)

	* org-timer.el (org-timer-set-timer): Use the variable
	`org-clock-sound' when calling `org-notify'.

2013-11-12  Ryo TAKAISHI  <ryo.takaishi.0@gmail.com>

	* org-capture.el (org-capture--expand-keyword-in-embedded-elisp):
	New function.
	(org-capture-expand-embedded-elisp): Use the new function.

	* ob-tangle.el (org-babel-tangle-collect-blocks): Change argument
	name collid `org-babel-map-src-blocks' variable 'lang'.

	* org-protocol.el (org-protocol-convert-query-to-plist):
	New function.
	(org-protocol-do-capture): Use new function.
	(org-protocol-data-separator): Change default separator.

2013-11-12  Rémi Vanicat  <vanicat@debian.org>  (tiny change)

	* org-table.el (orgtbl-format-line): Fix bug when formatting line.

2013-11-12  Rüdiger Sonderfeld  <ruediger@c-plusplus.de>

	* ox-latex.el (org-latex-listings): Don't quote const value.

	* ob-C.el (org-babel-C-var-to-C): Add list support
	(org-babel-C-val-to-C-list-type, org-babel-C-val-to-C-type)
	(org-babel-C-format-val): New functions.
	(org-babel-C-ensure-main-wrap, org-babel-execute:C)
	(org-babel-execute:C++, rg-babel-execute:cpp)
	(org-babel-C++-compiler, org-babel-C-compiler): Improve docstring.

	* org-entities.el (org-entities): Add support for hbar.

2013-11-12  Sacha Chua  <sacha@sachachua.com>  (tiny change)

	* org.el (org-read-date-get-relative): Handle positive and
	negative weekday specifications so that they don't return today.
	If today is Friday, "fri" should mean next Friday.  This changes
	the previous behavior, which required you to specify "+2fri" in
	order to mean next Friday if today was Friday.  If you want to
	schedule something for today, you can use ".".

2013-11-12  Samuel Loury  <konubinix@gmail.com>  (tiny change)

	* org.el (org-open-at-point): Open a plain link even if the cursor
	is before it, which is consistent with the behavior with respect
	to bracket and angle links.

2013-11-12  Sean O'Halpin  <sean.ohalpin@gmail.com>  (tiny change)

	* ob.el (org-babel-expand-noweb-references): Capture current noweb
	start and end patterns then use them to set buffer locals in a
	(with-temp-buffer ...) form.

2013-11-12  Sebastien Vauban  <xxx@public.gmane.org>

	* ox-latex.el (org-latex-listings-langs): Update custom variable.

	* ob-core.el (org-babel-parse-src-block-match): Fix order of list
	of header arguments.

	* org-clock.el (org-clock-goto-before-context): New option.
	(org-clock-goto): Use the new option.
	(org-clocktable-write-default): Insert the summary as a standard
	#+CAPTION keyword for the (clock) table.

2013-11-12  Stephen Eglen  <S.J.Eglen@damtp.cam.ac.uk>  (tiny change)

	* org-agenda.el (org-agenda-prefix-format): Small docstring
	enhancement.

2013-11-12  Suhail Shergill  <suhailshergill@gmail.com>  (tiny change)

	* ob-core.el (org-babel-temp-file): For remote hosts, modify the
	prefix and leave `temporary-file-directory' unchanged.

2013-11-12  Suvayu Ali  <fatkasuvayu+linux@gmail.com>  (tiny change)

	* org.el (org-speed-commands-default): Change default binding for
	org-mark-subtree from "." to "@" to be more consistent with "C-c
	@".

2013-11-12  Tim Burt  <tcburt@rochester.rr.com>  (tiny change)

	* org-datetree.el (org-datetree-find-year-create): Also match
	headlines with tags.

2013-11-12  Toby S. Cubitt  <tsc25@cantab.net>

	* org.el (org-time-clocksum-format)
	(org-time-clocksum-fractional-format): In addition to a single
	format string, the clocksum formats can now be plists specifying
	separate formats for different time units.
	(org-minutes-to-clocksum-string): New function to replace
	`org-minutes-to-hh:mm-string', which converts a number of minutes
	to a string according to the customization options.

	* org-colview.el (org-columns-number-to-string): Use the new
	`org-minutes-to-clocksum-string' function to format clocksum
	durations.

	* org-clock.el: Always call new `org-minutes-to-clocksum-string'
	function when formatting time durations, instead of calling
	`org-minutes-to-hh:mm-string' or passing
	`org-time-clocksum-format' directly to format.

2013-11-12  Tokuya Kameshima  <kametoku@gmail.com>

	* org-mew.el (org-mew-inbox-folder, org-mew-use-id-db)
	(org-mew-subject-alist, org-mew-capture-inbox-folders)
	(org-mew-capture-guess-alist): New options.
	(org-mew-store-link, org-mew-open): Rewrite.
	(org-mew-folder-name, org-mew-follow-link)
	(org-mew-folder-eixsts-p, org-mew-get-msgnum)
	(org-mew-open-by-message-id, org-mew-search, org-mew-capture)
	(org-mew-capture-guess-selection-keys): New functions.

2013-11-12  Trevor Murphy  <trevor.m.murphy@gmail.com>

	* org.el (org-get-compact-tod): Always pad minutes to two places.

2013-11-12  Viktor Rosenfeld  <listuser36@gmail.com>  (tiny change)

	* org.el (org-agenda-prepare-buffers): Add tags defined in
	`org-tag-persistent-alist' to `org-tag-alist-for-agenda'.

2013-11-12  Vitalie Spinu  <spinuvit@gmail.com>

	* ob-tangle.el (org-babel-find-file-noselect-refresh):
	Call `find-file-noselect' with 'nowarn argument to surpress
	`yes-or-no-p' reversion message.

	* ob-core.el (org-babel-where-is-src-block-head):
	Return `point-marker' instead of `point'.

2013-11-12  Yann Hodique  <yann.hodique@gmail.com>

	* org-publish.el (org-publish-org-to-taskjuggler): New function to
	publish taskjuggler projects.

2013-11-12  Yasushi Shoji  <yashi@atmark-techno.com>

	* org-clock.el (org-clock-x11idle-program-name): New option.
	(org-x11idle-exists-p, org-x11-idle-seconds): Use it.

2013-11-12  Yoshinari Nomura  <nom@quickhack.net>

	* ox-html.el (org-html--has-caption-p): New function.
	(org-html-link--inline-image, org-html-table): Prepend ordinal
	number to caption.
	(org-html-link): Make numbered link by counting captioned figures
	and tables.

	* ox.el (org-export-dictionary): Add Japanese translations for
	figures and tables.  Add "Figure %d:" entry in the same manner
	with "Table %d:".

2013-11-12  Nicolas Richard  <nrichard@ulb.ac.be>

	* ob.el (org-babel-edit-distance): When insertion or deletion are
	needed, make sure the distance is incremented.  In addition, the
	now obsolete mmin function was removed.

2013-11-12  Oleh Krehel  <wave@mail.ua>

	* org-capture.el (org-capture-expand-embedded-elisp): Throw error
	if result is not a string and not nil.  If the result is nil,
	treat it as if it was the empty string.

	* org-clock.el (org-clock-notify-once-if-expired):
	Honor `org-clock-sound'.

2013-11-12  Rasmus Pank Roulund  <rasmus.pank@gmail.com>

	* org.el (org-format-latex-header): Remove eucal and amsmath.
	(org-latex-default-packages-alist): Remove amstext and add
	amsmath.

	* ox-latex.el (org-latex-item): Use square as unchecked symbol.

	* org.el (org-latex-default-packages-alist): Remove latexsym.

	* org-entities.el (org-entities): Add support for ell, imath,
	jmath, varphi, varpi, aleph, gimel, beth, dalet, cdots, S (§),
	dag, ddag, colon, therefore, because, triangleq, leq, geq,
	lessgtr, lesseqgtr, ll, lll, gg, ggg, prec, preceq, preccurlyeq,
	succ, succeq, succurlyeq, setminus, nexist(s), mho, check, frown,
	diamond.  Changes loz, vert, checkmark, smile and tilde.

	* ob-C.el: Added C++ to `org-babel-load-languages' automatically
	after loading C.

	* org-src.el (org-src-lang-modes): Add association between
	language C++ and `c++-mode'.

	* ox.el (org-export-smart-quotes-alist): Add ("da" "no" "nb"
	"nn" "sv").
	(org-export-dictionary): Add some entries ("da" "no" "nb" "nn"
	"sv").
	(org-export-default-language): Mention other variables affected by
	language.

	* ox-latex.el (org-latex-babel-language-alist): Add 'nb', 'nn',
	and 'no' for Norwegian.  Removed 'no-no'.
	(org-latex-pdf-process): let `latexmk' be a preconfigured choice
	and change the wording of the docstring.
	(org-latex-guess-babel-language): Replace AUTO with language if
	AUTO is the option of the LaTeX package Babel.
	(org-latex-classes): Update documentation with respect
	to `org-latex-guess-babel-language'.

2013-11-12  Дядов Васил Стоянов  <vdyadov@elvees.com>  (tiny change)

	* org-docview.el (org-docview-export): New function to export
	docview links.

2013-04-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org-agenda.el (org-agenda-mode):
	* org-indent.el (org-indent-mode): Use the `local' arg of
	add-hook/remove-hook.

2013-03-08  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-normalize-links): Fix critical bug: do
	not rely on `org-context' to guess where to prevent links
	normalization.

2013-02-28  Achim Gratz  <Stromeko@Stromeko.DE>

	* org.el (org-org-menu): Use correct key "C-u C-c C-x !" to do
	org-reload uncompiled in the menu.

2013-02-28  Bastien Guerry  <bzg@gnu.org>

	* org-indent.el (org-indent-add-properties): Bugfix: prevent
	negative value for `added-ind-per-lvl'.

	* org.el (org-mode): Add `org-fix-ellipsis-at-bol' to
	`isearch-mode-end-hook' so that any isearch fixes the problem with
	ellipsis on the first line.
	(org-fix-ellipsis-at-bol): New defsubst.
	(org-show-context, org-isearch-end): Use it.

	* org.el (org-show-context): Remove useless catch.
	Make sure the top of the window is a visible headline.
	(org-activate-plain-links): Remove unused catch.

	* org-macs.el (org-get-alist-option): Return nil, not (nil),
	so that `org-show-context' DTRT.

	* org.el (org-imenu-get-tree): Fix bug when matching against empty
	headlines.

	* org.el (org-overview): Stay on current line.
	(org-map-entries): Fix docstring.
	(org-at-clock-log-p): Delete.
	* org-clock.el (org-at-clock-log-p): Move here.

	* org.el (org-tsr-regexp-both): Don't activate dates in links.
	(org-activate-dates): Change match boundaries according to the new
	value of `org-tsr-regexp-both'.

	* org-agenda.el (org-agenda-to-appt): Fix typos.

	* org-agenda.el (org-agenda-local-vars): Don't include
	`org-agenda-show-window' as it needs to be checked outside of the
	agenda window.

	* org.el (org-set-tags-command): Fix bug when setting tags for
	multiple headlines in an active region.

	* org-mobile.el (org-mobile-edit): DTRT when inserting a heading
	in an invisible region.

	* org.el (org-insert-heading-respect-content): Add docstring.
	New `invisible-ok' parameter.
	(org-insert-todo-heading-respect-content): Add docstring.

	* ob-tangle.el (org-babel-tangle-collect-blocks):
	Bugfix: remove code references from blocks.

	* org-agenda.el (org-agenda-schedule, org-agenda-deadline):
	Cosmetic changes.
	(org-agenda-show-new-time): Fix bug when displaying a temporary
	overlay with the scheduled/deadline information.

	* org.el (org-fill-paragraph-with-timestamp-nobreak-p): New function.
	(org-setup-filling): Use it to prevent breaking a timestamp when
	filling a paragraph.

	* org-id.el (org-id-get-with-outline-path-completion): Fix docstring.

2013-02-28  Tim Burt  <tcburt@rochester.rr.com>  (tiny change)

	* org-datetree.el (org-datetree-find-year-create):
	Match headlines with tags.

2013-02-07  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-get-deadlines)
	(org-agenda-get-scheduled): Fix bug: use text properties for the
	headline text since we rely on properties to get e.g. the effort.

	* org-exp.el (org-export-normalize-links): Don't match links
	within tags.

	* org-html.el (org-export-html-preamble-format)
	(org-export-html-postamble-format): Mention that
	org-export-html-preamble/postamble need to be `t' in order for
	these variables to have any effect.

	* org-html.el (org-html-handle-links): When the link description
	is an image and the attribute is "width", pass the attribute to
	the <img ...> tag.

	* org.el (org-mode): Always honor `org-startup-indented', even
	when `org-inhibit-startup' is non-nil.

	* org-indent.el (org-indent-mode): Don't check
	`org-inhibit-startup'.

	* org.el (org-fontify-meta-lines-and-blocks-1): Don't try to add
	text properties outside of the buffer.

	* org.el (org-agenda-inhibit-startup): Rename from
	`org-agenda-inhibit-startup-visibility-cycling'.
	(org-agenda-prepare-buffers): Bind `org-inhibit-startup' to
	`org-agenda-inhibit-startup'.

	* org.el (org-mode): Don't initialize `org-beamer-mode' when
	`org-inhibit-startup' is non-nil.

	* org-footnote.el (org-footnote-create-definition): Prevent
	`electric-indent-mode' from inserting the definition at the wrong
	place.

	* org-agenda.el (org-agenda-no-heading-message): Delete.
	(org-agenda-get-timestamps, org-agenda-get-progress)
	(org-agenda-get-deadlines, org-agenda-get-scheduled)
	(org-agenda-get-blocks): Don't use
	`org-agenda-no-heading-message', skip the entry.

	* org.el (org-agenda-inhibit-startup-visibility-cycling):
	New option.
	(org-agenda-prepare-buffers): Use it to speed up the agenda
	generation.

	* org-agenda.el (org-agenda-skip): Fix bug by correctly skipping
	commented scheduled/deadline lines.

	* org-clock.el (org-clock-in): Fix bug when fetching the effort
	value.

	* ob-python.el (org-babel-python-command): Fix docstring.
	(org-babel-python-initiate-session-by-key): Fix bug: `run-python'
	from Emacs >24.1 requires a python command as an argument.

	* org-element.el (org-element-at-point): Fix typo in docstring.

	* org-agenda.el (org-agenda-get-deadlines): Fix bug: use
	`org-agenda-show-inherited-tags'.

	* org-agenda.el (org-agenda-skip): Correctly handle commented out
	scheduled/deadline lines.  Refactor.

	* org-install.el: Do not warn users.

	* org.el (org-adaptive-fill-function): In message-mode, don't
	lines in the message header, nor table lines in the body.
	Correctly fill lines starting with `org-outline-regexp' in the
	body.

	* org-agenda.el (org-agenda-open-link): Fix bug with opening all
	links.

2013-02-07  Francesco Pizzolante  <fpz-djc/iPCCuDYQheJpep6IedvLeJWuRmrY@public.gmane.org>  (tiny change)

	* org-clock.el (org-clock-sum): Protect with `org-unmodified'.

	* org-macs.el (org-unmodified): Inhibit modification hooks.

2013-02-07  John K. Luebs  <jkluebs@luebsphoto.com>  (tiny change)

	* org.el (org-get-wdays): Handle matching a lead time specified in
	hours.

2013-02-07  Muchenxuan Tong  <demon386@gmail.com>  (tiny change)

	* org-agenda.el (org-agenda-quit): Delete indirect buffer's window
	only when it exists.

2013-02-07  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-element.el (org-element-macro-parser): Fix error when last
	argument ends with a protected comma.

	* org-element.el (org-element-parse-buffer, org-element-map)
	(org-element-at-point, org-element-context): Be more verbose in
	docstrings.  Also fix typos.

	* org-list.el (org-list-struct-fix-box): When a checkbox has to be
	resetted because of a non-nil ORDERED property value, make sure it
	had a checkbox already.

2013-02-07  Tokuya Kameshima  <kametoku@gmail.com>  (tiny change)

	* org-agenda.el (org-search-view): Fix checking
	`org-agenda-show-inherited-tags'.

2013-02-07  Matthieu Lemerre  <racin@free.fr>  (tiny change)

	* org-bibtex.el (org-bibtex-search): Don't throw an error when
	`org-bibtex-prefix' is nil.

2013-01-13  Bastien Guerry  <bzg@gnu.org>

	* org-compat.el (org-condition-case-unless-debug): Delete.

	* org-odt.el (org-odt-cleanup-xml-buffers):
	Use `condition-case' instead of `org-condition-case-unless-debug',
	which is now deleted.

	* org-capture.el (org-capture-templates-contexts):
	* org-agenda.el (org-agenda-custom-commands-contexts):
	Docstring fix.

	* org.el (org-get-tags-at): Remove duplicate inherited tags.

	* org-agenda.el (org-agenda-show-inherited-tags): Allow to be set
	to 'always or to a list of agenda types.
	(org-agenda-finalize): Rework conditions under which inherited
	tags should be made available even when not displayed.
	(org-search-view, org-agenda-get-todos)
	(org-agenda-get-timestamps, org-agenda-get-sexps)
	(org-agenda-get-progress, org-agenda-get-scheduled)
	(org-agenda-get-blocks): Use new possible values of
	`org-agenda-show-inherited-tags'.

	* org.el (org-open-at-point): Fix opening all links at point.

	* org-agenda.el (org-get-entries-from-diary): Turn off
	`diary-file-name-prefix' instead of
	`diary-file-name-prefix-function', the former is checked before
	the latter.

	* org.el (org-edit-special): Check for table.el before checking
	for Org tables.

2013-01-13  Michael Albinus  <michael.albinus@gmx.de>

	* ob-eval.el (org-babel-shell-command-on-region):
	Use `executable-find' for local `shell-file-name'.

2013-01-09  Achim Gratz  <Stromeko@Stromeko.de>

	* org-faces.el: Define face alias mode-line for XEmacs (it's
	called modeline there).

	* org-compat.el (org-no-popups): New wrapper macro which let-binds
	the correct variables to suppress popup windows depending on the
	Emacs version in use.  This is a compile-time decision when
	byte-compiling.

	* org.el (org-get-location, org-switch-to-buffer-other-window):
	Use the wrapper `org-no-popups' to let-bind the correct variables
	for suppression of popup windows.

	* org-compat.el (user-error): Defalias to `error' for Emacsen that
	don't have it.

	* org-agenda.el (org-agenda-write): Use org-called-interactively-p
	instead of called-interactively-p.

	* org.el (org-find-invisible-foreground): Do not use the value of
	variables `default-frame-alist', `initial-frame-alist' and
	`window-system-default-frame-alist' when their symbol is not bound.

2013-01-09  Bastien Guerry  <bzg@gnu.org>

	* org-src.el (org-edit-src-code): Fix bug when trying to edit a
	table.el table.

	* org-agenda.el (org-agenda-finalize): Inhibit readonly for the
	whole function.

	* org.el (org-entry-get): Speed up by let-binding some variables
	only if needed.  Also fix a bug: consider an empty drawer as no drawer.

	* org-agenda.el (org-search-view, org-agenda-get-todos)
	(org-agenda-get-timestamps, org-agenda-get-sexps)
	(org-agenda-get-progress, org-agenda-get-deadlines)
	(org-agenda-get-scheduled, org-agenda-get-blocks)
	(org-agenda-change-all-lines): Get local tags only.
	(org-agenda-use-tag-inheritance): New option.
	(org-agenda-finalize): When `org-agenda-use-tag-inheritance'
	is non-nil, possibly reset tags in the agenda buffer.
	(org-agenda-check-type): Enhance docstring.

	* org.el (org-use-tag-inheritance): Fix typo in docstring.

	* org-agenda.el (org-float): Don't alias `org-float'.

	* org.el (org-scan-tags): The skipper already checks for archived
	entries.

	* org.el (org-refresh-properties): Rename from
	`org-refresh-effort-properties' and use two new parameters.
	(org-agenda-prepare-buffers): Use `org-refresh-properties'.
	Also refresh the 'org-appt-warntime text property.

	* org-clock.el (org-clock-in): Use the renamed defun.

	* org-icalendar.el (org-icalendar-print-entries):
	Refresh the 'org-appt-warntime property.
	(org-icalendar-print-entries):
	* org-agenda.el (org-agenda-get-timestamps)
	(org-agenda-get-sexps, org-agenda-get-deadlines)
	(org-agenda-get-scheduled): Do not use `org-entry-get' to get the
	"APPT_WARNTIME" property value.

	* org.el (org-id-link-to-org-use-id): Fix compiler warning.

	* org-agenda.el (org-agenda-format-item): Do not use
	`org-get-effort' to get the effort text property.
	(org-agenda-get-sexps): Use `org-back-to-heading' when setting tags.

	* org-clock.el (org-clock-in): Refresh effort properties.

	* org.el (org-refresh-effort-properties): New defun.
	(org-get-effort): Delete.
	(org-set-effort):
	(org-property-next-allowed-value): Set the 'org-effort text property.
	(org-agenda-prepare-buffers): Refresh effort properties.

	* org.el (org-read-date): Let-bind `mouse-autoselect-window' to
	nil so that the mouse doesn't jump when the option is set to t globally.

	* org-agenda.el (org-agenda-dim-blocked-tasks): Default to nil.
	(org-agenda-dim-blocked-tasks): Make interactive and allow an
	optional parameter 'invisible to hide blocked tasks instead of
	just dimming them.
	(org-agenda-mode-map): Bind `org-agenda-dim-blocked-tasks' to "#".

	* org-agenda.el (org-agenda-finalize): Don't try to align tags
	when there are no tags.  Only try to draw the habit consistency
	graph when there is a habit in the buffer.  Only mark clocking
	task when there is one.

	* org.el (org-adaptive-fill-function): DTRT in `message-mode'.

	* org.el (org-get-priority): Save match data even when using
	`org-get-priority-function'.

	* org-mobile.el (org-mobile-create-index-file):
	Possibly normalize `org-todo-keywords'.

	* org-mobile.el (org-mobile-push): Use the correct agenda buffer names.

	* org.el (org-store-link): Use `org-id-link-to-org-use-id' instead
	of the obsolete variable name.

	* org.el (org-fontify-meta-lines-and-blocks-1):
	Fix bug when fontifying keywords with no value.

	* org.el (org-goto-auto-isearch): Enhance docstring.
	(org-goto-map): Make a defun, so that the customized value of
	org-goto-auto-isearch is correctly initialized.
	(org-goto): Initialize the keymap with `org-goto-map'.
	(org-get-location): Use *Org Help* as a temporary buffer.
	Tell whether auto-isearch is on or off.

	* org-exp.el (org-export-as-org): Remove useless argument.

	* org-docbook.el (org-export-as-docbook-batch)
	(org-export-region-as-docbook, org-export-as-docbook-pdf):
	Fix the number of arguments.
	(org-export-as-docbook): Remove useless argument.

	* org.el (org-speed-commands-default): Use ":" instead of ";" for
	`org-set-tags-command', which is consistent with ":" in agenda
	view.  Use "=" for `org-columns".

	* org.el (org-sparse-tree): Fix redundant information in prompt.

	* org-exp.el (org-export-string): Fix number of arguments passed
	to the org-export-as-* functions.

	* org-latex.el (org-export-as-latex): Fix typo in docstring.

	* org-list.el (org-cycle-include-plain-lists): Docstring enhancement.

	* org.el (org-fontify-meta-lines-and-blocks-1): Fix fontification
	bug when fontifying a keyword with no associated value.
	(org-cycle-internal-local): Don't run hooks when cycling a plain
	list before first headline.
	(org-ctrl-c-ctrl-c): Throw a user error when trying to toggle a
	blocked checkbox.
	(org-indent-line): Fix table formulas indenting.

	* org-agenda.el (org-agenda-open-link): Fix bug when no link is
	matched.  Return a message instead of an error.
	(org-agenda-priority): Remove useless parameter and fix showing
	priority in agenda buffers.

	* org-macs.el (org-with-buffer-modified-unmodified): New macro.

	* org.el (org-entry-blocked-p): Use the new macro.

	* org-src.el (org-edit-src-exit): Don't comma-escape the content
	of a fixed width region.

	* org.el (org-blocker-hook): Update the docstring to mention that
	functions in this hook should not modify the buffer.
	(org-trigger-hook): Small docstring fix.
	(org-entry-blocked-p): Use `with-buffer-modified-unmodified'
	so that the function never modifies the buffer.

	* org-agenda.el (org-agenda-open-link): Allow to open an internal
	link by using the new `org-offer-links-in-entry' function.

	* org.el (org-offer-links-in-entry): Do not open the link directly
	through `org-open-link-from-string', only offer to select a link
	and return a cons with the link (as a string) and the end of entry.
	(org-open-at-point): Use `org-offer-links-in-entry' correctly.

	* org.el (org-cycle-internal-local):
	Fix bug: allow headings with leading blank characters.

	* org-clock.el (org-clock-persist):
	Docstring fix: document the 'history value.

	* org.el (org-insert-link): Fix bug when inserting links to
	headlines containing the ">" character.

	* org-crypt.el (org-at-encrypted-entry-p): Fix search boundary.

	* org-compat.el (org-delete-directory): New compatibility function
	for Emacs 22, where `delete-directory' does not support recursive
	deletion.

	* org-odt.el (org-odt-cleanup-xml-buffers):
	Use the new compatibility function.

	* org.el (org-table-map-tables): Fix allowed blocks.

	* org.el (org-edit-special):
	* org-src.el (org-edit-src-code): Fix regression: allow editing
	HTML and LaTeX source blocks again.

	* org.el (org-nonsticky-props): Add `htmlize-link'.
	(org-nonsticky-props): Add `htmlize-link'.

	* org.el (org-edit-special):
	* org-src.el (org-edit-src-code): Don't edit in verbatim blocks.

	* org-table.el (org-table-fedit-lisp-indent)
	(orgtbl-self-insert-command): Use `org-delete-backward-char'
	instead of `backward-delete-char'.

	* org-src.el (org-edit-src-code): Fix another bug about editing
	special blocks "example" and "verbatim".

	* org.el (org-structure-template-alist): Add verbatim.
	(org-edit-special): Fix bug about editing special blocks
	"example" and "verbatim".

	* org.el (org-delete-backward-char, org-delete-char):
	Save match data, `delete-backward-char' and `delete-char' don't.

	* org.el (org-enable-table-editor, org-insert-heading)
	(org-remove-timestamp-with-keyword, org-self-insert-command):
	* org-table.el (org-table-fedit-lisp-indent)
	(orgtbl-self-insert-command):
	* org-latex.el (org-export-latex-subcontent):
	* org-clock.el (org-clocktable-write-default):
	* org-ascii.el (org-export-ascii-preprocess):
	Use `delete-backward-char' instead of `backward-delete-char'.

	* org.el (org-todo): Ignore the comment string when changing the
	TODO state of a headline.
	(org-edit-special): Fix docstring.
	(org-in-src-block-p): Small enhancement.

	* org-publish.el (org-publish-org-to): Call `org-export-as-*'
	functions with the correct list of arguments.

	* org-html.el (org-export-as-html): Delete obsolete arg `hidden'.
	(org-export-as-html-and-open, org-export-as-html-batch)
	(org-export-region-as-html): Don't use obsolete arg.

	* org-ascii.el (org-export-as-ascii): Delete obsolete arg `hidden'.
	(org-export-as-ascii-to-buffer): Don't use obsolete arg.

	* org.el (org-in-fixed-width-region-p): Save match data.
	(org-in-src-block-p): Use case-folding for searching the block
	boundaries.
	(org-activate-plain-links, org-activate-angle-links)
	(org-activate-bracket-links): Prevent link activation in
	source code blocks.

	* org-odt.el (org-odt-cleanup-xml-buffers): Fix Emacs Bug#13197 by
	setting the correct buffer before marking it unmodified to
	silently kill him.

	* org.el (org-set-font-lock-defaults): Don't activate links in
	source code blocks and fixed-width regions.

	* org-agenda.el (org-agenda-finalize): Fix links activation.

	* org.el (org-open-at-point): Throw the correct error on
	non-links.  Use `user-error' instead of `error'.

	* org.el (org-in-fixed-width-region-p): Define before use.

	* org-src.el (org-in-src-block-p): Declare function.

	* org-compat.el: Fix bug: don't use `eval-when-compile' when
	aliasing `user-error'.

	* org-agenda.el (org-agenda-skip): Only check if point is
	inside a code block, not at a code block.

	* org.el (org-in-fixed-width-region-p):
	Rewrite using org-element.el.

	* org.el (org-fill-paragraph): Fill correctly in source code block.

	* org.el (org-in-fixed-width-region-p): New function.
	(org-edit-special): Fix bug: make sure to DTRT in every
	special environment.  Also use the new function to check
	against fixed-width environment.

	* org-src.el (org-edit-src-code): Check if we are in a source code
	block with `org-in-src-block-p'.  Slightly reformat the docstring.

	* org.el (org-in-src-block-p): Return t when point is at the
	#+BEGIN_SRC/#+END_SRC lines unless the new optional parameter
	'inside is set to t.

	* ob-exp.el (obe-marker): Delete useless var.

	* org-src.el (org-edit-src-code): Fix bug triggered by the sexp
	(copy-marker nil) on Emacs <24.1.

2013-01-09  Dmitry Antipov  <dmantipov@yandex.ru>

	* org-agenda.el (org-agenda-get-restriction-and-command):
	* org-capture.el (org-capture-place-template):
	* org-colview.el (org-dblock-write:columnview):
	* org-mobile.el (org-mobile-locate-entry):
	* org-table.el (org-table-convert-region):
	* org.el (org-update-statistics-cookies): Use `point-marker'.

2013-01-09  Eric Schulte  <eric.schulte@gmx.com>

	* org-exp.el (org-export-string): Pass the dir option on through
	to any subsequent export functions.

2013-01-09  Henning Weiss  <hdweiss@gmail.com>  (tiny change)

	* org-mobile.el (org-mobile-sumo-agenda-command): Remove match
	description from block agendas when they have a title.

2013-01-09  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-export-as-odt-batch): Init `org-odt-zip-dir'.
	Fix Emacs Bug#13254.

	* org-odt.el (org-odt-format-org-link): Add check for presence of
	description in headline links.

2013-01-09  Michael Gauland  <mike_gauland@stanfordalumni.org>  (tiny change)

	* org-src.el: Create a marker to pass to copy-marker.

2013-01-09  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-setup-filling): Set `auto-fill-inhibit-regexp' to
	nil because `org-adaptive-fill-function' already determines which
	lines should be filled.

	* org.el (org-fill-paragraph): Small refactoring.

	* org-element.el (org-element--parse-elements)
	(org-element-at-point): Fix parsing of a list in a block in a list.

2013-01-09  Sebastien Vauban  <wxhgmqzgwmuf-geNee64TY+gS+FvcfC7Uqw@public.gmane.org>

	* org.el (org-copy-subtree, org-paste-subtree):
	Fix whitespace handling when copying/pasting a subtree.

2012-12-20  Michael Albinus  <michael.albinus@gmx.de>

	* ob.el (org-babel-temp-file): Fix setting of
	`temporary-file-directory' on remote hosts.

	* ob-eval.el (org-babel-shell-command-on-region):
	Use `process-file' instead of `call-process-region'.  The latter one
	does not work on remote hosts.

2012-12-13  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-links): Escape raw path when
	exporting links to files.

	* org-src.el (org-src-native-tab-command-maybe): Fix bug: the
	S-TAB key should not trigger a native TAB command.

	* org.el (org-open-at-point): Allow to open any link within
	footnotes definition, not only bracket links.

	* org.el (org-sort-entries): Bugfix: keep track of the clock
	marker when sorting entries.  Enhance the docstring.

	* org-clock.el (org-clock-out): Use `user-error' when the user
	tries to clock out while there is no running clock.

	* org-table.el (org-table-sort-lines): Ensure coordinates are
	correctly displayed when sorting.

	* org.el (org-do-sort): Enhance prompt.

	* org-agenda.el (org-agenda-finalize): Also activate plain links.

	* org-timer.el (org-timer-stop): Add message.

	* org-agenda.el (org-agenda-schedule, org-agenda-deadline):
	Fix redundant messages.

	* org-agenda.el (org-agenda-finalize): Fix clock highlighting.

	* org.el (org-additional-option-like-keywords): Add "INDEX:".

	* org-install.el: Enhance warning.

2012-12-13  Erik Hetzner  <egh@e6h.org>  (tiny change)

	* org.el (org-log-into-drawer): Honor the nil value for the
	:LOG_INTO_DRAWER: property.

2012-12-13  Le Wang  <l26wang@gmail.com>  (tiny change)

	* org-src.el (org-edit-src-exit): Fix editing source section with
	blank lines.

2012-12-13  Le Wang  <le.wang@agworld.com.au>

	* org-src.el (org-edit-src-code): Use marker with insertion type
	t to track end and remove hack requiring delete from beg to (1- end).

2012-12-13  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-element.el (org-element-context): When point is between two
	objects, be sure to return the second one.

	* org-list.el (org-list-separating-blank-lines-number):
	When computing number of blank lines separating items, also count those
	in unparsed blocks, like example blocks.

	* org.el (org-end-of-line): When visual line mode is on, really
	move by visual lines.  Small refactoring.

	* org.el (org-end-of-line): On a hidden block make sure to
	delegate motion to `end-of-line' instead of `move-end-of-line' in
	order to stay on the current line.

2012-12-13  Rafael Laboissiere  <rafael@laboissiere.net>  (tiny change)

	* org-bibtex.el: In the documentation section of the file, fix the
	broken URL to Andrew Roberts' document on BibTeX entries.

	* org-remember.el (org-remember-handler): Correctly strip the
	comment lines in the temporary buffer *Remember* when handling a
	remember note.

	* org-remember.el (org-remember-apply-template): Start the
	commented lines in the Remember temporary buffer with the
	appropriate characters.

2012-12-13  Toby S. Cubitt  <tsc25@cantab.net>

	* org.el (org-beginning-of-line): Check `visual-line-mode' instead
	of `line-visual-mode' to determine whether to move by visual lines.

	* org.el (org-kill-line): Use the `org-bound-and-true-p' macro.

2012-12-04  Chong Yidong  <cyd@gnu.org>

	* org-bibtex.el (org-bibtex-ask): Use visual-line-mode instead of
	longlines-mode.

2012-10-26  Achim Gratz  <stromeko@stromeko.de>

	* ob-ditaa.el: Needs to (require 'org-compat) for
	org-find-library-dir.

	* org.el: Remove utf-8 codepoints in docstrings, bytecode doesn't
	work when loaded from compressed files.

	* org-compat.el: Make sure that file-name-directory is getting a
	stringp.  This avoids a possible " (wrong-type-argument stringp
	nil)" error when the library in question does not exist.

	* org-odt.el: Replace arc-mode.el by arc-mode.

	* org.el: Replace org-macs.el by org-macs.

	* org-install.el: Provide an empty file that prints a warning
	about an outdated configuration.

2012-10-26  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-as-latex): Remove obsolete argument
	`hidden'.  Also fix the docstring: using 'string as the value
	for `to-buffer' outputs a string with no LaTeX header.
	(org-export-as-latex-batch)
	(org-export-as-latex-to-buffer, org-export-region-as-latex)
	(org-export-as-pdf): Don't use the obsoleted argument.

	* ob-haskell.el (org-export-as-latex): Don't use the obsoleted
	argument `hidden'.

	* org.el (org-refile): Run within `with-demoted-errors' so that a
	corrupted bookmark file does not stop the refile process.

	* org-capture.el (org-capture-bookmark-last-stored-position):
	Ditto for the capture process.

	* org-src.el (org-edit-src-exit): Fix bug when saving an empty
	source buffer.

	* org-lparse.el (org-lparse): Fix bug by returning the output
	of `org-do-lparse'.

	* org.el (org-refile-check-position): Throw an error when the
	refile target is the current buffer and is not a file.
	(org-agenda-file-to-front, org-remove-file): Throw an error
	when the current buffer is not a file.
	(org-check-agenda-file): Enhance the message.
	(org-element-type): Autoload.
	(org-element-context, org-element-paragraph-parser):
	Don't declare as these two functions are not used in org.el.

	* org-lparse.el (browse-url-file-url): Declare.

	* org.el (org-refile-check-position): Fix typo in docstring.

	* org-clock.el (org-clock-modeline-total): Make obsolete.
	(org-clock-mode-line-total): Rename from
	`org-clock-modeline-total'.
	(org-clock-get-sum-start): Fix references to
	`org-clock-modeline-total'.

	* org-faces.el (org-agenda-filter-tags)
	(org-agenda-filter-category, mode-line): Use the 'mode-line
	face instead of the obsolete 'modeline.

	* org-odt.el (org-odt-styles-dir): Try more directories.
	Don't throw an error, just send a message.

	* org-odt.el (org-odt-lib-dir, org-odt-data-dir)
	(org-odt-schema-dir-list, org-odt-styles-dir-list): Delete.
	(org-export-odt-schema-dir, org-odt-styles-dir): Infer the
	correct directories without requiring other variables.

	* org-loaddefs.el: New file.

	* org.el ("org-loaddefs.el"): Don't throw an error if the file
	cannot be fund.
	(org-version): Use org-loaddefs.el instead of org-install.el.

	* org.el: Don't dynamically autoload already autoloaded
	functions.
	(org-clock-update-time-maybe): Move to org-clock.el.

	* org-exp.el (org-insert-export-options-template):
	Remove autoload cookie.

	* org-clock.el (org-resolve-clocks, org-clock-in)
	(org-clock-out, org-clock-cancel, org-clock-goto)
	(org-clock-sum, org-clock-display, org-clock-report)
	(org-dblock-write:clocktable): Add autoload cookie.
	(org-clock-update-time-maybe): Move from org.el.

	* org-beamer.el (org-beamer-sectioning, org-beamer-mode): Ditto.

	* org-ascii.el (org-export-ascii-preprocess): Ditto.

	* org-archive.el (org-archive-subtree)
	(org-archive-to-archive-sibling, org-toggle-archive-tag):
	Add autoload cookie.

	* org-colview.el (org-columns, org-dblock-write:columnview)
	(org-insert-columns-dblock, org-agenda-columns): Ditto.

	* org-table.el (org-table-create-with-table.el)
	(org-table-create-or-convert-from-region, org-table-create)
	(org-table-convert-region, org-table-import)
	(org-table-export, org-table-align)
	(org-table-justify-field-maybe, org-table-next-field)
	(org-table-previous-field, org-table-next-row)
	(org-table-copy-down, org-table-field-info)
	(org-table-current-dline, org-table-goto-column)
	(org-table-insert-column, org-table-delete-column)
	(org-table-move-column-right, org-table-move-column-left)
	(org-table-move-column, org-table-move-row-down)
	(org-table-move-row-up, org-table-move-row)
	(org-table-insert-row, org-table-insert-hline)
	(org-table-hline-and-move, org-table-kill-row)
	(org-table-sort-lines, org-table-cut-region)
	(org-table-copy-region, org-table-paste-rectangle)
	(org-table-convert, org-table-wrap-region)
	(org-table-edit-field, org-table-sum)
	(org-table-get-stored-formulas)
	(org-table-maybe-eval-formula)
	(org-table-rotate-recalc-marks)
	(org-table-maybe-recalculate-line, org-table-eval-formula)
	(org-table-recalculate, org-table-iterate)
	(org-table-edit-formulas)
	(org-table-toggle-coordinate-overlays)
	(org-table-toggle-formula-debugger, orgtbl-to-generic)
	(orgtbl-to-tsv, orgtbl-to-csv, orgtbl-to-latex)
	(orgtbl-to-html, orgtbl-to-texinfo, orgtbl-to-orgtbl): Ditto.

	* org.el (turn-on-orgtbl): Move here from org-table.el.
	(org-clock-persistence-insinuate): Move here from org-clock.el.
	(org-update-all-dblocks, org-map-entries)
	(org-require-autoloaded-modules, org-forward-element)
	(org-backward-element, org-up-element)
	(org-element-greater-elements, org-drag-element-backward)
	(org-drag-element-forward, org-mark-element)
	(org-narrow-to-element, org-transpose-element)
	(org-unindent-buffer): Don't autoload.

	* org-clock.el (org-clock-get-clocktable): Rename from
	`org-get-clocktable'.
	(org-clock-persistence-insinuate): Move to org.el.

	* org-capture.el: Do no set `generated-autoload-file' locally.
	Minor code clean up.

	* org-agenda.el (org-agenda-list):
	Use `org-clock-get-clocktable'.  Do no set
	`generated-autoload-file' locally.

	* org-table.el (org-table-iterate-buffer-tables):
	Minor reformatting.
	(turn-on-orgtbl): Move to org.el.

	* org-html.el (org-export-htmlize-generate-css): Don't autoload.

	* org-timer.el (org-timer-pause-or-continue, org-timer-stop):
	Ditto.

	* ob-tangle.el (org-babel-tangle-lang-exts): Ditto.

	* ob-lob.el (org-babel-lob-ingest): Ditto.

	* org-id.el (org-id-copy)
	(org-id-get-with-outline-path-completion)
	(org-id-get-with-outline-drilling): Ditto.

	* org-lparse.el (org-lparse-and-open, org-lparse-batch)
	(org-lparse-to-buffer, org-replace-region-by)
	(org-lparse-region): Ditto.

	* org-mobile.el (org-mobile-create-sumo-agenda): Ditto.

	* org.el (org-cycle): Fix misplaced autoload cookie.

	* org-agenda.el (org-agenda-get-timestamps): Check if the item
	is an habit when formatting it with `org-agenda-format-item'.
	(org-agenda-get-blocks): Fix bug: don't assume the item is an
	habit when formatting with `org-agenda-format-item'.

	* org.el (org-calendar-agenda-action-key): Delete an option.
	(org-mode-map): Delete its keybinding.
	(org-agenda-action-marker, org-mark-entry-for-agenda-action):
	Delete.

	* org-agenda.el (org-agenda-diary-entry): Don't prevent from
	being used outside of Org agendas, as it can be used in
	calendar buffers too.

2012-10-26  Caio Tiago Oliveira  <asrail@gmail.com>  (tiny change)

	* ob-scala.el (org-babel-scala-wrapper-method): Use a Scala
	block enclosing the submitted code.

2012-10-26  Myles English  <mylesenglish@gmail.com>  (tiny change)

	* org-clock.el (org-clock-in): Move the call to
	org-clock-in-prepare-hook until the task's properties
	can be accessed.

2012-10-26  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-auto-fill-function): Make sure `adaptive-fill-mode'
	mode is nil when pre-computed `fill-prefix' is the empty string.
	Otherwise filling functions from fill.el think it has to be computed
	again and overwrite it.

	* org.el: Make `org-closest-date' aware of hours repeaters.

	* org.el (org-end-of-line): Do not call `end-of-visual-line' when
	moving to the end of line.  Also improve behavior on elements that
	can be hidden.

	* org.el (org-sparse-tree): Allow to call `org-show-todo-tree'
	with an argument.

	* org-element.el (org-element--get-next-object-candidates):
	Fix parsing of objects of the same type in a single paragraph.

	* org-element.el (org-element-sub/superscript-successor):
	Fix parsing of sub/superscript at beginning of item.
	(org-element-latex-or-entity-successor): Fix parsing of latex
	fragments at beginning of item.

	* org-agenda.el (org-agenda-later): Fix function when span is
	a number and an argument was provided.  Also fix typo in docstring.

	* org.el (org-read-date-analyze): Fix analyzing for dates like
	"29.03 16:40".

	* org-element.el (org-element-center-block-parser)
	(org-element-drawer-parser, org-element-footnote-definition-parser)
	(org-element-inlinetask-parser, org-element-plain-list-parser)
	(org-element-quote-block-parser, org-element-special-block-parser)
	(org-element-babel-call-parser, org-element-clock-parser)
	(org-element-comment-parser, org-element-comment-block-parser)
	(org-element-example-block-parser, org-element-export-block-parser)
	(org-element-fixed-width-parser, org-element-horizontal-rule-parser)
	(org-element-keyword-parser, org-element-latex-environment-parser)
	(org-element-paragraph-parser, org-element-planning-parser)
	(org-element-property-drawer-parser, org-element-src-block-parser)
	(org-element-table-parser)
	(org-element-verse-block-parserorg-element-dynamic-block-parser):
	Make sure element never ends at the end of a blank non-empty line.

	* org-element.el (org-element-context)
	(org-element--get-next-object-candidates): Fix `org-element-context'.
	In particular, the restrictions for an object may be different from
	those of its container (i.e. table rows and table cells).

	* org-element.el (org-element-example-block-parser)
	(org-element-src-block-parser): Store value of example-blocks and
	src-blocks unescaped.
	(org-element-example-block-interpreter)
	(org-element-src-block-interpreter): Escape value again when storing
	it.

	* org-src.el (org-escape-code-in-string)
	(org-unescape-code-in-string, org-escape-code-in-region)
	(org-unescape-code-in-region): New functions.
	(org-edit-src-code, org-edit-src-exit): Use new functions.

	* org.el (org-strip-protective-commas): Remove function.

	* org-exp.el (org-export-select-backend-specific-text): Use new
	function.

	* ob.el (org-babel-parse-src-block-match)
	(org-babel-parse-inline-src-block-match, org-babel-insert-result):
	Always escape produced blocks, independently on the language of the
	block, if any.  Use new functions.

	* org-element.el (org-element-paragraph-parser): Fix regexp
	starting a block.

	* org-element.el (org-element-center-block-parser):
	(org-element-drawer-parser, org-element-dynamic-block-parser)
	(org-element-example-block-parser, org-element-export-block-parser)
	(org-element-latex-environment-parser, org-element-paragraph-parser)
	(org-element-property-drawer-parser, org-element-src-block-parser)
	(org-element-verse-block-parser): Use stricter regexps for boundaries
	of elements.

2012-10-26  Toby S. Cubitt  <tsc25@cantab.net>

	* org-agenda.el (org-agenda-get-sexps): Reset `extra' to nil at
	beginning of re-search-forward loop, otherwise next iteration picks up
	`extra' value from previous entry.

2012-09-30  Abdó Roig-Maranges  <abdo.roig@gmail.com>

	* org-html.el (org-export-html-preprocess)
	(org-export-html-format-image):
	Use `org-latex-preview-ltxpng-directory'.

	* org-odt.el (org-export-odt-do-preprocess-latex-fragments):
	Ditto.

	* org.el (org-latex-preview-ltxpng-directory): New option.
	(org-preview-latex-fragment): Store LaTeX preview images in
	`org-latex-preview-ltxpng-directory'.

2012-09-30  Achim Gratz  <Stromeko@Stromeko.DE>

	* ob-R.el (org-babel-R-initiate-session): Protect against use of
	unbound variable `ess-ask-for-ess-directory´.  The default for this
	variable is true, so act accordingly if it is found unbound.

	* ob-R.el: Remove initialization with `nil´ from
	`ess-ask-for-ess-directory´ and `ess-local-process-name´.
	Remove second declaration for `ess-local-process-name´.

	* org-gnus.el: Add a missing require for gnus-util.

	* org-compat.el: Rename utils to make throughout.

	* org.el: Move check for outline-mode-keymap after (require
	'outline).

	* org-element.el: New file.  Do not (require 'org).

	* org-agenda.el: Remove duplicate requires.

	* org.el (org-mode-map): Add keybindings to
	`org-element-transpose' and `org-narrow-to-element'.
	(org-metaup): Fall back on `org-element-drag-backward'.
	(org-metadown): Fall back on `org-element-drag-forward'.
	Also move chunks of declarations and require statements to get rid of
	compiler warnings.

	* org-exp-blocks.el (org): Don't require org.  Add declarations.

	* org-clock.el (org): Don't require org.

	* ob-exp.el (org-list-forbidden-blocks): Add declarations.

	* ob.el (org-babel-exeext): New defconst to hold extension for
	executables or nil if none.  Should be ".exe" for both Windows and
	Cygwin.

	* ob-C.el (org-babel-C-execute): Use org-babel-exeext when
	constructing the target file name for the compiled executable.

	* ob-fortran.el (org-babel-execute:fortran): Add org-babel-exeext
	when constructing the target file name for the compiled
	executable.

	* org-version.el: New file.

	* org-compat.el (org-check-version): New macro.  Check if
	org-version.el exists and provide autoloads to that.  Otherwise
	check if org-fixup.el exists and use it to provide definitions.
	Finally if nothing worked, complain about a botched installation
	and provide fallback definitions.

	* org.el: Use org-check-version.

	* org.el: Fix a subtle error resulting in version functions
	sometimes not being defined and byte-compiling failing.
	Always compile in fallback definitions into org.elc -- org-fixup either
	provides re-definitions at compile-time or checks org-version.el
	and then the git work tree when run uncompiled.  So the fallback
	definitions will only come into effect when org-fixup is not
	available.

	* org.el (org-version): Make org-version more robust, e.g. when
	byte-compiling single files with 'make compile-dirty'.

	* org.el (org-reload): Revert an undesirable change in org-reload.
	Do not prepend org-dir to babel-files, which prevents the files
	from being found in load-path.

	* org.el (org-version): Add optional parameters 'full and 'message
	to optionally return the full version string and echo to message
	area in non-interactive calls.

	* org.el (org-submit-bug-report): Add optional parameter 'full to
	call of (org-version) so that the bug report has all version
	information.

	* org.el (org-reload): Simplify file-re (orgtbl-*.el files do not
	exist anymore).  Keep org-*.el at the end of the files list.
	Explicitly load org-version.el (since it doesn't provide feature
	'org-version) at the very end, but ignore errors when it doesn't
	exist.  Add parameters 'full and 'message to the call of
	(org-version) so that after reload the full version information is
	displayed in the message area again.

	* org-agenda.el: Replace with-no-warnings with org-no-warnings
	(defined in org-macs.el).

	* org-bbdb.el: Replace with-no-warnings with org-no-warnings
	(defined in org-macs.el).

	* org-clock.el: Replace with-no-warnings with org-no-warnings
	(defined in org-macs.el).

	* org.el: Replace with-no-warnings with org-no-warnings (defined
	in org-macs.el).

	* org.el: Add with-not-warnings around call of (org-fixup).

	* org-compat.el (org-find-library-dir):
	Rename org-find-library-name (misleading) and implement with a function
	that exists identically in Emacs/XEmacs.

	* org-exp-blocks.el: Change calls to org-find-library-dir.

	* org.el: change calls to org-find-library-dir.  Make require for
	noutline fail silently because it is missing from XEmacs.

	* org.el (org-version): Use functions instead of global variables
	to get the version strings and remove the defvaralias to
	org-version.  Warn when encountering a mixed installation (org and
	org-install.el should be found in the same directory).

	* org.el: Add with-no-warning to defvar for two unprefixed global
	variables from calendar.el (there's nothing else we can do inside
	org until it is fixed in calendar.el).

	* org.el: Require find-func and remove declare-function for
	find-library-name, otherwise autoloaded org-version doesn't show
	all info correctly.

	* org.el (org-version): Show the full path to org-install.el in
	the version string to avoid confusion if multiple installations
	exist or a previously loaded org-install.el has already defined a
	version string that is now out of date.

	* org.el (org-version): Remove determination of version
	information, show "N/A" if the information is not provided via
	org-install.el.

	* org.el (org-git-version): Placeholder for recording the Git
	version of org during install

	* org.el (org-version): Initialize local git-version with
	placeholder and fall through using it when org is not installed in
	a Git repository

2012-09-30  Adam Spiers  <orgmode@adamspiers.org>  (tiny change)

	* org-html.el: Add hyperlink to http://orgmode.org/ from export
	footer.

	* org-clock.el (org-clock-modify-effort-estimate): Display a
	message when no clock is currently active.

2012-09-30  Andrew Hyatt  <ahyatt@gmail.com>  (tiny change)

	* org-archive.el (org-archive-subtree): Allow archiving to a
	datetree.

	* org.el (org-archive-location): Ditto.

2012-09-30  Bastien Guerry  <bzg@gnu.org>

	* ob-io.el: New file.

	* ob-scala.el: New file.

	* org.el (org-url-hexify-p, org-doi-server-url)
	(org-latex-preview-ltxpng-directory, org-custom-properties)
	(org-sparse-tree-default-date-type): Add :version "24.3".

	* org-agenda.el (org-agenda-sticky)
	(org-agenda-custom-commands-contexts): Ditto.

	* org-capture.el (org-capture-bookmark)
	(org-capture-templates-contexts) (org-capture-use-agenda-date):
	Ditto.

	* org-latex.el (org-export-latex-hyperref-options-format)
	(org-export-latex-link-with-unknown-path-format): Ditto.

	* org-id.el (org-id-link-to-org-use-id): Ditto.

	* org-datetree.el (org-datetree-add-timestamp): Ditto.

	* org.el (org-make-link-description-function): Enhance docstring.
	(org-insert-link): Fall back on interactive prompt when
	`org-make-link-description-function' fails.

	* org-agenda.el (org-todo-list): Fix redoing of todo agenda when
	`org-agenda-sticky' is non-nil.

	* org-agenda.el (org-agenda-quit): Delete last indirect buffer.
	(org-agenda-pre-follow-window-conf): New variable.
	(org-agenda-tree-to-indirect-buffer): Fix bug: don't split agenda
	window when there an indirect buffer is already displayed.

	* org-agenda.el (org-agenda-manipulate-query)
	(org-agenda-goto-date, org-agenda-goto-today)
	(org-agenda-find-same-or-today-or-agenda, )
	(org-agenda-later, org-agenda-change-time-span)
	(org-agenda-change-all-lines)
	(org-agenda-execute-calendar-command)
	(org-agenda-goto-calendar, org-agenda-convert-date): Make sure to
	get a property from (1- (point-max)), not (point-max)).

	* ob-dot.el (org-babel-execute:dot): Throw an error when there is
	no :file parameter.

	* org-table.el (org-table-eval-formula): Convert time-stamps to
	inactive time-stamp so that Calc can handle them correctly.

	* org-table.el (org-table-fix-formulas): Warn with a message when
	formulas have been updated.

	* org-publish.el (org-publish-cache-ctime-of-src): Delete the
	base-dir argument and use (file-name-directory file) to get the
	file's directory.
	(org-publish-update-timestamp)
	(org-publish-cache-file-needs-publishing):
	Call `org-publish-cache-ctime-of-src' with only one argument.

	* org.el (org-follow-timestamp-link): Fix bug when using sticky
	agenda.  Add a docstring.

	* org-agenda.el (org-agenda-sticky): Don't use a function to set.
	Add a :version string.

	* org.el (org-priority): Use a new argument to show priority
	instead of setting it.
	(org-show-priority): New function to show priority both in normal
	Org buffers and in Org Agenda buffers.
	(org-speed-commands-default): Use "," as a speed command for
	setting priority.

	* org-agenda.el (org-agenda-mode-map): Bind `org-agenda-priority'
	to `C-c ,' as it was before.
	(org-agenda-show-priority): Delete.
	(org-agenda-priority): Use a new argument to show priority instead
	of setting it.

	* org.el (org-font-lock-hook, org-set-font-lock-defaults): Add a
	docstring.
	(org-display-inline-remove-overlay): Rename from
	`org-display-inline-modification-hook'.
	(org-speed-command-activate): Rename from
	`org-speed-command-default-hook'.
	(org-babel-speed-command-hook): Rename from
	`org-babel-speed-command-activate'.

	* org-agenda.el (org-agenda-update-agenda-type): Rename from
	`org-agenda-post-command-hook'.
	(org-agenda-mode): Use the new name.
	(org-agenda-post-command-hook): Define as obsolete function.

	* org-lparse.el (org-lparse): Temporarily activate the hooks
	needed for the ODT conversion.
	(org-lparse-preprocess-after-blockquote): Rename from
	`org-lparse-preprocess-after-blockquote-hook'.
	(org-lparse-strip-experimental-blocks-maybe): Rename from
	`org-lparse-strip-experimental-blocks-maybe'.
	(org-lparse-preprocess-after-blockquote-hook)
	(org-lparse-strip-experimental-blocks-maybe-hook): Define as
	obsolete functions.

	* ob.el (org-babel-insert-result): Comma-escape results inserted
	with ":results org".

	* org-src.el (org-edit-src-code, org-edit-src-exit): Fix bug about
	saving the source editing window with the default value for
	`org-src-window-setup' (i.e. 'reorganize-frame).

	* org-src.el (org-src-font-lock-fontify-block): Fix bug: don't
	fontify the last character.

	* org.el (org-open-at-point): Don't follow timestamp within
	bracket links.

	* org-capture.el (org-capture-templates): Fix typo in docstring.

	* org-agenda.el (org-agenda-skip): Skip information retrieved from
	a source block.

	* ob.el (org-babel-common-header-args-w-values)
	(org-babel-insert-result): Reintroduce ":results org" but using
	"#+BEGIN_SRC org", not "#+BEGIN_ORG".

	* ob.el (org-babel-common-header-args-w-values): Remove "org" the
	list of predefined values for the ":results" parameter.

	* ob.el (org-babel-insert-result): Remove support for ":results
	org".

	* ob.el (org-babel-common-header-args-w-values)
	(org-babel-insert-result): Deprecate ":results wrap" in favor of
	":results drawer".

	* org-crypt.el (org-at-encrypted-entry-p): Fix bug when the check
	happens before the first headline.

	* org-capture.el (org-at-encrypted-entry-p)
	(org-encrypt-entry, org-decrypt-entry): Declare.
	(org-capture-set-target-location): Check whether `org-crypt' has
	been loaded.

	* org-agenda.el (org-agenda-todo-custom-ignore-p): Fix typo in
	docstring.

	* org-capture.el (org-capture-finalize): Maybe re-encrypt the
	target headline if it was decrypted.
	(org-capture-set-target-location): Maybe decrypt the target
	headline.

	* org-crypt.el (org-at-encrypted-entry-p): New function.

	* org.el (org-options-keywords): Add "STYLE:".

	* org-agenda.el (org-agenda-ndays): Don't make an alias, as
	`org-agenda-span' is defined separately.

	* org.el (org-in-subtree-not-table-p): New utility function for
	building the menu.
	(org-org-menu): Add an item for refiling.  Check more contexts
	when activating items.
	(org-tree-to-indirect-buffer): Use `org-up-heading-safe'.

	* org-agenda.el (org-agenda-tree-to-indirect-buffer)
	(org-agenda-do-tree-to-indirect-buffer): Use argument `arg'.

	* org-capture.el (org-capture-set-target-location): Set a correct
	time value when storing a note in a datetree and prompting the
	user for a date.

	* org-capture.el (org-capture-mode): Fix bug: don't run the mode's
	hook twice.

	* org-agenda.el (org-agenda-menu-two-column)
	(org-finalize-agenda-hook, org-agenda-ndays):
	Use `define-obsolete-variable-alias' instead of
	`make-obsolete-variable'.

	* org.el (org-link-to-org-use-id): Move to org-id.el.

	* org-id.el (org-id-link-to-org-use-id): Rename from
	`org-link-to-org-use-id'.  Use `nil' as the default value.
	(org-link-to-org-use-id): Alias and define as obsolete.

	* org-agenda.el (org-search-view, org-agenda-get-todos)
	(org-agenda-get-timestamps, org-agenda-get-blocks): Use the dotime
	parameter of `org-agenda-format-item' so that 'time-up and
	'time-down agenda sorting strategies are handled correctly.

	* org-capture.el (org-capture-fill-template): Fix checking of
	protected template entries.

	* org.el (org-cycle-global-at-bob): Fix typo in docstring.

	* org.el (org-insert-drawer): Deactivate the mark before trying to
	indent the :END: of the drawer.

	* org-agenda.el (org-agenda-export-html-style): Default to nil as
	any string value will replace the htmlize style.

	* org.el (org-cycle-hook): Fix tiny typo in docstring.

	* org.el (org-time-string-to-time)
	(org-time-string-to-seconds, org-end-of-subtree): Add a dosctring.

	* org-freemind.el (org-freemind-write-node): Enhance links
	conversion in nodes.

	* org-freemind.el (org-freemind-write-node): Convert links in
	nodes.

	* org.el (org-link-to-org-use-id, org-directory)
	(org-default-notes-file, org-reverse-note-order)
	(org-extend-today-until, org-finish-function)
	(org-store-link-functions): Use "capture" instead of "remember" in
	docstrings.  Also use the `org-capture' group when it makes sense.

	* org-agenda.el (org-agenda-tree-to-indirect-buffer): Find the
	correct agenda buffer.  Don't split the agenda window when the
	indirect buffer is displayed in another frame.

	* org.el (org-mode): Try to set the org-hide face correctly.

	* org-exp.el (org-export): Set the mark correctly when exporting a
	subtree.

	* org-agenda.el (org-agenda-get-restriction-and-command): Fix the
	display of the number of commands for block agendas.

	* org-agenda.el (org-agenda-before-write-hook)
	(org-agenda-add-entry-text-maxlines): Enhance phrasing.
	(org-agenda-finalize-hook, org-agenda-mode-hook): Tell that the
	buffer is writable when the hook is called.
	(org-agenda-finalize): Allow org-agenda-finalize-hook to modify
	the buffer.

	* org-agenda.el (org-habit-show-all-today): Only use defvar to
	silent the byte-compiler.
	(org-agenda-get-scheduled): Check whether some org-habit.el
	options have been defined.

	* org-capture.el (org-capture-entry): New variable.
	(org-capture-string, org-capture): Use it to possibly skip the
	interactive prompt for a capture template.

	* org.el (org-activate-plain-links): Don't try to check if we are
	in a bracket link already.

	* org.el (org-read-date-analyze): Fix bug introduced in commit
	cc5f9f: adding a time should not prevent relative answers to be
	parsed correctly.

	* org-agenda.el (org-agenda-bulk-action): Always read the date
	through `org-read-date'.  When possible, use the date at point as
	the default date.

	* org-agenda.el (org-agenda-bulk-action): Fix bug when
	bulk-shifting timestamps.

	* org.el (org-version): New constant.

	* org-compat.el (org-random): New compatibility function.

	* org-id.el (org-id-uuid): Use it.

	* org-capture.el (org-capture-use-agenda-date): New option.
	(org-capture): Use it.

	* org-agenda.el (org-agenda-capture): New command.
	(org-agenda-mode-map): Bind it to `k'.
	(org-agenda-menu): Add it to the menu.

	* org-capture.el (org-capture): Update docstring.

	* org-capture.el (org-capture): When called from an agenda buffer,
	use the cursor date at the default date.

	* org-agenda.el (org-agenda-bulk-action): Use the let-bound
	`entries' instead the variable.

	* org-agenda.el (org-agenda-bulk-action): Fix bug: don't remove
	persistent marks too early.

	* org-agenda.el (org-agenda-bulk-action): Possibly use the day at
	point to reset the scheduled or deadline cookie.  On date headers,
	use it without prompting the user.  On an item, use the item's
	date as the default prompt for `org-read-date'.

	* org.el (org-read-date): Docstring fix.

	* org-agenda.el (org-agenda-bulk-action): Reorder possible actions
	in the message.

	* org-agenda.el (org-agenda-action, org-agenda-do-action): Delete.
	(org-agenda-mode-map): Delete related keys.

	* org-agenda.el (org-agenda-menu): Fix a keybinding.

	* org-colview.el (org-columns-goto-top-level): Correctly move the
	marker `org-columns-top-level-marker'.
	(org-agenda-columns): Don't set
	`org-agenda-overriding-columns-format' as a buffer variable, as we
	only need it dynamically.
	(org-agenda-colview-summarize): Fix a bug in returning the match
	string.

	* org-agenda.el (org-agenda-span-to-ndays): Make the second
	argument `starting-day' optional.
	(org-agenda-goto-date): Keep parameters of custom agendas.

	* org-agenda.el (org-agenda-list): Allow setting the agenda buffer
	name through a temporary variable.
	(org-agenda-buffer-tmp-name): New variable to temporary store the
	agenda buffer name.

	* org-agenda.el (org-agenda-goto-date): Fix behavior when using
	sticky agendas.

	* org-agenda.el (org-diary): Don't check whether there is an
	agenda buffer when trying to compile the prefix format.
	(org-compile-prefix-format): Check if there is an agenda buffer.
	If not, use the current buffer.

	* org-agenda.el (org-agenda-get-day-entries): Set the agenda
	buffer inconditionnally.

	* ob.el (org-babel-named-src-block-regexp-for-name): Generate a
	more general regexp.

	* ob.el (org-babel-where-is-src-block-head): Find a src block head
	correctly when #+header(s) is before #+name.

	* org-agenda.el (org-agenda-finalize-hook)
	(org-agenda-finalize, org-agenda-finalize-entries): Rename from
	org-finalize-agenda-*.
	(org-agenda-run-series, org-agenda-finalize, org-timeline)
	(org-agenda-list, org-search-view, org-todo-list)
	(org-tags-view, org-diary, org-agenda-finalize-entries)
	(org-agenda-change-all-lines): Use the new names.

	* org-agenda.el (org-agenda-local-vars):
	Remove ̀org-agenda-last-arguments' from the list of local variables.
	(org-agenda-mode-map): `g' does the same than `r' in buffers with
	only one agenda view, but its behavior differs when there are
	several views.  In manually appended agendas (with `A'), `g'
	displays only the agenda under the point.  With multiple agenda
	blocks, `g' reinitializes the view by discarding any temporary
	changes (e.g. with ̀f' or `w'), while ̀r' keeps those temporary
	changes for the agenda view under the point.
	(org-agenda-run-series, org-agenda-redo): Implement the above
	changes.
	(org-agenda-mark-header-line): Don't set useless properties.
	(org-agenda-list, org-todo-only, org-search-view)
	(org-todo-list, org-tags-view, org-agenda-list-stuck-projects)
	(org-agenda-manipulate-query, org-agenda-goto-today)
	(org-agenda-later, org-agenda-change-time-span): Use text
	properties for storing the last command and the last arguments for
	each agenda block.
	(org-unhighlight-once): Delete.

	* org-agenda.el (org-agenda-append-agenda): Fit agenda window to
	buffer.

	* org-agenda.el (org-agenda-append-agenda): Bugfix: correctly
	check whether we are in org-agenda-mode.

	* org-agenda.el (org-agenda-pre-window-conf): Rename from
	`org-pre-agenda-window-conf'.
	(org-agenda-local-vars, org-agenda-prepare-window)
	(org-agenda-Quit, org-agenda-quit): Use the new name.

	* org-agenda.el (org-keys, org-match): New variable, dynamically
	scoped in `org-agenda'.
	(org-agenda, org-agenda-list, org-search-view, org-todo-list)
	(org-tags-view): Use the new variables.
	(org-batch-store-agenda-views): Let-bind `match'.

	* org-agenda.el (org-search-view, org-todo-list)
	(org-tags-view): Do not let `org-agenda-sticky' prevent the use of
	these functions programmatically.  Also use the sticky agenda
	function correctly.

	* org-agenda.el (org-agenda): Set `org-agenda-buffer-name'
	correctly with sticky agendas and non-custom commands.

	* org-agenda.el (org-agenda-fit-window-to-buffer): Rename from
	`org-fit-agenda-window'.
	(org-agenda-run-series, org-agenda-prepare, org-agenda-list)
	(org-search-view, org-todo-list, org-tags-view): Use the new name.

	* org-agenda.el (org-agenda-prepare): Let `throw' display an
	error.

	* org-agenda.el (org-agenda-list): Fix bug: don't throw an error
	when called from programs as (org-agenda-list).

	* org-agenda.el (org-todo-list): Make arg optional.

	* org.el (org-agenda-prepare-buffers): Rename from
	`org-prepare-agenda-buffers'.
	(org-match-sparse-tree, org-map-entries): Use the new names.

	* org-agenda.el (org-agenda-prepare-window): Rename from
	`org-prepare-agenda-window'.
	(org-agenda-prepare): Rename from `org-prepare-agenda'.
	(org-agenda-run-series, org-agenda-prepare, org-timeline)
	(org-agenda-list, org-search-view, org-todo-list)
	(org-tags-view, org-agenda-list-stuck-projects, org-diary)
	(org-agenda-to-appt): Use the new names.

	* org-mobile.el (org-mobile-create-index-file): Ditto.

	* org-icalendar.el (org-export-icalendar): Ditto.

	* org-clock.el (org-dblock-write:clocktable)
	(org-dblock-write:clocktable): Ditto.

	* org-agenda.el (org-agenda): In sticky agendas, use the current
	command's match to set the buffer name.  This gives more
	information to the user and allows to distinguish various agendas
	triggered by the same key.
	(org-batch-store-agenda-views): Handle the new sticky agenda
	buffer name.

	* org-agenda.el (org-agenda)
	(org-agenda-get-restriction-and-command): Use `S' as a key for
	searching words in TODO-only entries.

	* org-agenda.el (org-prepare-agenda): Fit agenda window when
	displaying a sticky agenda.

	* org-table.el (org-table-number-regexp): Allow the user to set it
	to a new regexp, which allows commas as decimal mark.  The default
	is to not use this setting, but the one before commit 7ff8c1,
	which has ben reverted.

	* org-agenda.el (org-agenda-overriding-cmd)
	(org-agenda-multi-current-cmd)
	(org-agenda-multi-overriding-arguments): New variables.
	(org-agenda-run-series): `org-agenda-overriding-arguments'
	defaults to the last agenda block arguments, so don't use it
	globally.
	(org-agenda-mark-header-line): Add properties needed so that
	`org-agenda-overriding-arguments', `org-agenda-current-span' and
	`org-agenda-last-arguments' can be set to their correct contextual
	value.
	(org-agenda-multi-back-to-pos): New variable.
	(org-agenda-later): Retrieve `org-agenda-current-span' and
	`org-agenda-overriding-arguments' from text properties.
	Also handle numeric span.
	(org-agenda-later, org-agenda-change-time-span):
	Set `org-agenda-overriding-cmd' so that we to take overriding
	arguments into account for this command only.

	* org-agenda.el (org-agenda-kill, org-agenda-archive-with):
	Fix bug when called with a non-nil value of `org-agenda-stick'.

	* org-agenda.el (org-agenda-refile): Fix bug when refiling an
	entry from a sticky agenda.

	* org-agenda.el (org-prepare-agenda-window):
	Use `org-pre-agenda-window-conf' if already set.
	(org-agenda-Quit): Set `org-pre-agenda-window-conf' to nil when
	quitting.
	(org-agenda-quit): Ditto.

	* org-capture.el (org-capture-fill-template): Protect the text
	used for replacement from being further replaced.

	* org.el (org-contextualize-validate-key): Fix the check against a
	function.

	* org.el (org-contextualize-keys): Rename from
	`org-contextualize-agenda-or-capture'.  Fix normalization to
	handle empty key replacement string.
	(org-contextualize-validate-key): Rename from
	`org-contexts-validate'.  Allow checking against a custom
	function.

	* org-agenda.el (org-agenda-custom-commands-contexts): Update.
	(org-agenda): Use `org-contextualize-keys'.

	* org-capture.el (org-capture-templates-contexts): Ditto.

	* org.el (org-contextualize-agenda-or-capture):
	Normalize contexts.

	* org.el (org-contextualize-agenda-or-capture): Handle key
	replacement depending on the contexts.

	* org-capture.el (org-capture-templates-contexts): Allow to use
	the context as a way to replace one capture template by another
	one.

	* org-agenda.el (org-agenda-custom-commands-contexts): Allow to
	use the context as a way to replace one agenda custom command by
	another one.

	* org.el (org-contextualize-agenda-or-capture)
	(org-rule-validate): New functions, implement context filtering
	for agenda commands and capture templates.

	* org-agenda.el (org-agenda-custom-commands-contexts): New option.
	(org-agenda): Use it.

	* org-capture.el (org-capture-templates-contexts): New option.
	(org-capture-select-template): Use it.

	* org.el (org-beginning-of-defun, org-end-of-defun): Delete.
	(org-mode): Set `beginning-of-defun-function' and
	`end-of-defun-function' directly.

	* org.el (org-insert-link): Fix bug: include links abbreviations
	when completing.

	* org-icalendar.el (org-icalendar-print-entries): Fix bug: when
	`org-icalendar-use-plain-timestamp' is nil, scheduled and deadline
	items should not be ignored.

	* org.el (org-ds-keyword-length, org-make-tags-matcher):
	Docstring clean-up.

	* org-freemind.el (org-freemind-convert-links-from-org): Replace
	literally to prevent errors when replacing with string containing
	backslashes.

	* org-pcomplete.el (org-thing-at-point): Allow to match (and then
	complete) a "thing" containing dashes.

	* org-table.el (org-table-toggle-coordinate-overlays):
	Better message when interactively toggling.

	* org-table.el (org-table-number-regexp): Update the docstring to
	show an example of a decimal number using the comma as a
	separation mark.

	* org-agenda.el (org-prepare-agenda): Minor code clean-up.
	(org-agenda-filter-by-category): Filtering must be turned off only
	when a category filter has been set and this filter is not empty.

	* org-agenda.el (org-search-view, org-agenda-get-todos)
	(org-agenda-get-timestamps, org-agenda-get-sexps)
	(org-agenda-get-progress, org-agenda-get-deadlines)
	(org-agenda-get-scheduled, org-agenda-get-blocks):
	Use `category-pos' instead of `org-category-pos'.

	* ob-fortran.el (org-babel-fortran-transform-list): Rename from
	`ob-fortran-transform-list'.
	(org-babel-fortran-var-to-fortran): Use the new function's name.

	* ob-calc.el (org-babel-calc-maybe-resolve-var): Rename from
	`ob-calc-maybe-resolve-var'.
	(org-babel-execute:calc): Use the new function's name.

	* org-jsinfo.el (org-infojs-template): Add a license.
	(org-infojs-handle-options): Replace all template elements.

	* org-html.el (org-export-html-scripts): Add a license.
	(org-export-html-mathjax-config): Replace all template elements.
	(org-export-html-mathjax-template): Add a license.
	(org-export-as-html): Minor code clean-up.

	* org.el (org-options-keywords): Add "#+MATHJAX" and
	"#+INFOJS_OPT" to the list of keywords for completion.

	* org.el (org-src-prevent-auto-filling): Remove unused and useless
	option.

	* org.el (org-element-at-point): Autoload.
	(org-element-up): Remove useless declaration.
	(org-fill-context-prefix, org-fill-paragraph)
	(org-mark-element, org-narrow-to-element)
	(org-transpose-element, org-unindent-buffer): Do not require
	org-element.

	* org.el (org-fill-paragraph): Require org-element.

	* org-agenda.el (org-agenda-persistent-marks): Minor docstring
	enhancement.

	* org.el (org-create-math-formula): Use the compatibility function
	`org-region-active-p'.

	* org-odt.el (org-export-as-odf): Ditto.

	* ob.el (org-babel-demarcate-block): Ditto.

	* org.el (org-mark-subtree): Maybe call `org-mark-element'
	interactively.
	(org-mark-element): Only mark further elements when called
	interactively.

	* org.el (org-mark-element, org-narrow-to-element)
	(org-transpose-element): Require org-element.

	* org-agenda.el (org-agenda-get-timestamps)
	(org-agenda-get-sexps, org-agenda-get-deadlines)
	(org-agenda-get-scheduled): Add the 'warntime as a text property,
	getting its value from the APPT_WARNTIME property.
	(org-agenda-to-appt): Use the 'warntime text property.

	* org-capture.el (org-capture-place-table-line): Fix bug.

	* org.el (org-activate-plain-links): Don't activate a plain link
	when it is part of a bracketed link, unless bracketed links are
	not enlisted in `org-activate-links'.
	(org-open-at-point): Don't consider the text immediately after a
	bracketed link is part of a plain link.

	* org.el (org-compute-latex-and-specials-regexp)
	(org-paste-subtree, org-sort-entries, org-store-link)
	(org-open-at-point, org-file-remote-p, org-add-log-setup)
	(org-set-tags-to, org-fast-tag-selection)
	(org-diary-sexp-entry): Ditto.

	* org-agenda.el (org-agenda-get-blocks, org-cmp-priority)
	(org-cmp-effort, org-cmp-todo-state, org-cmp-alpha)
	(org-cmp-tag, org-cmp-time): Remove useless (t nil) sexps at the
	end of (cond ...) constructs.

	* org-mobile.el (org-mobile-create-index-file): Ditto.

	* org-lparse.el (org-lparse-format-table-row): Ditto.

	* org-list.el (org-sort-list): Ditto.

	* org-id.el (org-id-get): Ditto.

	* org-html.el (org-export-html-preprocess): Ditto.

	* org-exp.el (org-default-export-plist)
	(org-table-clean-before-export): Ditto.

	* org.el (org-options-keywords): Add "TODO".
	(org-make-options-regexp): Make the hashtag mandatory for options
	and don't allow whitespaces between the hashtag and the plus sign.

	* org.el (org-refresh-category-properties)
	(org-find-dblock, org-dblock-start-re, org-dblock-end-re):
	Allow lowercase "#+category" and "#+begin:" dynamic blocks.

	* org.el (org-context): Use case-folding when trying to match
	clocktables and source blocks contexts.

	* org-clock.el (org-clock-put-overlay): Put the overlay on the
	whole headline, not only on the last character.  This fixes a bug
	with overlays on headlines ending with a bracketed link.

	* org-html.el (org-export-as-html): Make sure we always process a
	string.

	* org-exp.el (org-export-cleanup-toc-line): Always return a
	string.

	* org.el (org-fontify-meta-lines-and-blocks-1): Correctly handle
	metalines with #+results[...]:.

	* org-exp.el (org-export-handle-metalines): Rename from
	`org-export-handle-table-metalines'.  Now also handle source block
	metalines.
	(org-export-res/src-name-cleanup): Delete.
	(org-export-preprocess-string): Use `org-export-handle-metalines'.
	Don't use `org-export-res/src-name-cleanup' anymore.

	* org-html.el (org-format-org-table-html): Don't include the
	caption tag for empty captions in HTML export.  Keep it in the
	DocBook export so that it produces valid DocBook XML.

	* org.el (org-read-date-analyze): Allow both "8am Wed" and "Wed
	8am" to be parsed correctly with respect to possible values of
	`org-read-date-prefer-future'.
	(org-read-date-prefer-future): Update docstring to remove the
	restriction about inserting only the time.  The user can now
	insert the time and the day.

	* org-icalendar.el (org-icalendar-print-entries): Rename from
	`org-print-icalendar-entries'.
	(org-icalendar-start-file): Rename from
	`org-start-icalendar-file'.
	(org-icalendar-finish-file): Rename from
	`org-finish-icalendar-file'.
	(org-icalendar-ts-to-string): Rename from `org-ical-ts-to-string'.
	(org-export-icalendar): Use the correct functions.

	* ob-ref.el (org-babel-ref-index-list): Fix bug introduced by
	commit e85479.

	* org.el (org-fill-context-prefix): Require org-element.
	(org-timestamp-change): Fix bug by saving excursion when adjusting
	another clock.

	* org.el (org-read-date-prefer-future): Fix docstring formatting.
	(org-read-date-analyze): Fix the interpretation of
	`org-read-date-prefer-future'.

	* org-agenda.el (org-agenda-menu-two-column): Rename to
	`org-agenda-menu-two-columns'.

	* ob.el (org-babel-sha1-hash, org-babel-noweb-p):
	Replace `org-labels' by `let*'.

	* org-bibtex.el (org-bibtex-headline): Ditto.

	* org-compat.el: Delete `org-labels'.

	* ob.el (org-babel-get-src-block-info)
	(org-babel-check-src-block, org-babel-current-result-hash)
	(org-babel-parse-src-block-match, org-babel-read-link)
	(org-babel-insert-result, org-babel-clean-text-properties):
	Use ̀org-no-properties' instead of `org-babel-clean-text-properties'.
	(org-babel-clean-text-properties): Delete redundant function
	`org-babel-clean-text-properties'.

	* ob-tangle.el (org-babel-tangle-collect-blocks)
	(org-babel-tangle-comment-links): Ditto.

	* ob-table.el (sbe): Ditto.

	* ob-lob.el (org-babel-lob-get-info)
	(org-babel-lob-execute): Ditto.

	* ob-exp.el (org-babel-exp-non-block-elements): Ditto.

	* org-macs.el (org-no-properties): Allow a new parameter
	`restricted' to restrict the properties removal to those in
	`org-rm-props'.  The default is now to remove all properties.

	* org-compat.el (org-substring-no-properties): Remove unused
	defun.

	* org-remember.el (org-remember-apply-template): Remove redundant
	removal of text properties.
	(org-remember-apply-template): Use `org-no-properties'.

	* org-capture.el (org-capture-fill-template): Remove redundant
	removal of text properties.
	(org-capture-fill-template): Use `org-no-properties'.

	* org-gnus.el (org-gnus-open, org-gnus-follow-link):
	Use `org-no-properties'.

	* org-colview.el (org-columns-display-here): Ditto.

	* org-table.el (org-table-eval-formula): Ditto.

	* org.el (org-entry-properties): Ditto.

	* org-icalendar.el (org-print-icalendar-entries): Fix bug about
	handling `alarm-time'.

	* ob-R.el (org-babel-edit-prep:R): Don't set the session.

	* org.el (org-store-log-note): Only skip comments starting with "#
	" when storing a note.

	* org.el (org-custom-properties): New option.
	(org-custom-properties-overlays): New variable.
	(org-toggle-custom-properties-visibility): New command to toggle
	the visibility of custom properties.
	(org-check-before-invisible-edit): Also prevent errors when trying
	to edit invisible properties.

	* org-datetree.el (org-datetree-add-timestamp): New option.
	(org-datetree-insert-line): Use it.

	* org.el (org-fill-template): Fix bug when filling template for a
	key associated to the nil value.

	* org-agenda.el (org-diary): Fix tiny typo.

	* org.el (message-in-body-p): Move declaration up to fix compiler
	warning.

	* org.el (org-fill-context-prefix): Fix auto-filling in
	`message-mode'.

	* org.el (org-fill-paragraph): Correctly fill paragraph in
	message-mode.
	(org-indent-line): Correctly indent according to mode when
	`orgstruct++-mode' is on.
	(orgstruct++-mode): Add `fill-prefix' to the variable temporarily
	stored in `org-fb-vars'.

	* org.el (org-fill-paragraph): Make a command.  Fix bug about
	filling message headers and citations.

	* org.el (org-redisplay-inline-images): New command.
	(org-mode-map): Bind it to C-c C-x C-M-v.

	* org-colview.el (org-columns-get-format-and-top-level): Fix bug.
	(org-columns-get-format): Fix compiler warning.

	* org-feed.el: Add declarations.

	* org-agenda.el (org-agenda-get-sexps): Use `org-get-tags-at' to
	allow tag inheritance.

	* org-capture.el (org-capture): Fix bug introduced by commit
	1737d3.

	* org-publish.el (org-publish-needed-p)
	(org-publish-update-timestamp, org-publish-file)
	(org-publish-cache-file-needs-publishing): New argument
	`base-dir'.
	(org-publish-cache-ctime-of-src): Use the new argument to make
	sure we find the file according to :base-directory.

	* org-capture.el (org-capture-string): New command to prompt for
	the interactive text interactively.  This can also be used in
	Elisp programs to use ̀org-capture' with some initial text.
	(org-capture-initial): New variable to store the initial text.
	(org-capture): Use `org-capture-initial'.

	* org.el (org-emph-re): Tiny docstring formatting fix.

	* org-compat.el (org-labels): Remove.

	* org-bibtex.el (org-bibtex-headline): Don't use `org-labels'.

	* ob.el (org-babel-sha1-hash, org-babel-noweb-p): Ditto.

	* org.el (org-emph-re): Tiny formatting fix.

	* org.el (orgstruct-setup): Require `org-element'.

	* org.el (org-store-link, org-open-at-point): New link type
	"help".

	* org-compat.el (org-flet): Remove alias.

	* ob.el (org-babel-edit-distance, org-babel-sha1-hash)
	(org-babel-get-rownames, org-babel-insert-result)
	(org-babel-merge-params)
	(org-babel-expand-noweb-references): Don't use `org-flet'.
	Also indent some functions correctly.

	* ob.el (org-babel-execute-src-block)
	(org-babel-join-splits-near-ch, org-babel-format-result)
	(org-babel-examplize-region): Don't use `org-flet'.
	(org-babel-tramp-handle-call-process-region): Fix typo.

	* ob-awk.el (org-babel-awk-var-to-awk): Don't use `org-flet'.

	* ob-sh.el (org-babel-sh-var-to-string): Ditto.

	* ob-tangle.el (org-babel-tangle, org-babel-spec-to-string):
	Don't use `org-flet'.

	* org-pcomplete.el (org-compat): Require.

	* ob-tangle.el (org-babel-load-file): Don't use `org-flet'.

	* org-bibtex.el (org-bibtex-write): Use let*.

	* org-plot.el (org-plot/gnuplot-script): Don't use `org-flet'.

	* org-bibtex.el (org-bibtex-headline, org-bibtex-fleshout)
	(org-bibtex-read, org-bibtex-write): Don't use `org-flet'.

	* org-clock.el (org-clock-cancel): Use `org-looking-back'.

	* org-pcomplete.el (org-thing-at-point): Ditto.

	* org.el (org-timestamp-change): Ditto.

	* org-mouse.el (org-mouse-timestamp-today)
	(org-mouse-set-priority, org-mouse-popup-global-menu)
	(org-mouse-context-menu): Don't use ̀org-flet'.

	* org.el (org-priority): Fix docstring.

	* org-publish.el (org-publish-write-cache-file)
	(org-publish-initialize-cache)
	(org-publish-cache-file-needs-publishing)
	(org-publish-cache-get): Small code clean-up.

	* org-publish.el (org-publish-cache-ctime-of-src): Simplify.

	* org-agenda.el (org-agenda-get-sexps): Add a 'tags property for
	agenda entries created from sexps.

	* org-capture.el (org-capture-templates): Docstring clean up.
	(org-capture-place-entry, org-capture-place-item)
	(org-capture-place-plain-text, org-capture-place-table-line):
	Ensure to always position the point according to %?.

	* org-table.el (org-table-convert-refs-to-rc): Fix bug when
	converting remote table references.

	* org-agenda.el (org-agenda-switch-to): Run hooks in
	̀org-agenda-after-show-hook'.

	* ob-ref.el (org-babel-ref-index-list): Use let* and rename the
	variable `length' to `lgth'.

	* org-plot.el (org-plot/gnuplot-to-grid-data): Don't use
	̀org-flet'.

	* org-exp.el (org-export-format-source-code-or-example): Ditto.

	* org-exp-blocks.el (org-export-blocks-preprocess): Ditto.

	* ob.el (org-babel-view-src-block-info)
	(org-babel-execute-src-block, org-babel-edit-distance)
	(org-babel-switch-to-session-with-code)
	(org-babel-balanced-split, org-babel-insert-result): Ditto.

	* ob-ref.el (org-babel-ref-index-list): Ditto.

	* ob-python.el (org-babel-python-evaluate-session): Ditto.

	* ob-lob.el (org-babel-lob-get-info): Ditto.

	* ob-gnuplot.el (org-babel-expand-body:gnuplot): Ditto.

	* ob-exp.el (org-babel-exp-do-export): Ditto.

	* org-table.el (orgtbl-to-generic): Fix docstring.

	* org-clock.el (org-clock-in): Call `org-clock-out' with the new
	argument `switch-to-state' set to nil.  Fix docstring.
	(org-clock-in-last): Prompt for a todo state to switch to when
	called with three universal prefix arguments.  Don't display a
	message when the clock is already running.  Update docstring.
	(org-clock-out): New argument `switch-to-state'.  When this
	argument is non-nil, prompt for a state to switch the clocked out
	task to, overriding `org-clock-out-switch-to-state'.

	* org.el (org-entry-get): Don't use `org-flet'.

	* org.el (org-forward-heading-same-level): Rename from
	`org-forward-same-level'.
	(org-backward-heading-same-level): Rename from
	`org-backward-same-level'.

	* org.el (org-forward-element): Rename from `org-element-forward'.
	(org-backward-element): Rename from `org-element-backward'.
	(org-up-element): Rename from `org-element-up'.
	(org-down-element): Rename from `org-element-down'.
	(org-drag-element-backward): Rename from
	`org-element-drag-backward'.
	(org-drag-element-forward): Rename from
	`org-element-drag-forward'.
	(org-mark-element): Rename from `org-element-mark-element'.
	(org-transpose-element): Rename from `org-element-transpose'.
	(org-unindent-buffer): Rename from `org-element-unindent-buffer'.
	(org-mode-map): Update the names of a commands.  Remove useless
	declarations.

	* org-element.el (org-element-forward, org-element-backward)
	(org-element-up, org-element-down)
	(org-element-drag-backward, org-element-drag-forward)
	(org-element-mark-element, org-narrow-to-element)
	(org-element-transpose, org-element-unindent-buffer): Move to
	org.el.

	* org.el (org-forward-same-level): Fix typo in docstring.

	* org-agenda.el (org-agenda-mode-map):
	Bind `org-agenda-show-priority' to `C-c,' instead of `P'.
	(org-agenda-next-item, org-agenda-previous-item): New commands to
	move by one item down/up in the agenda.
	(org-agenda-mode-map): Bind `org-agenda-next-item' and
	`org-agenda-previous-item' to `N' and `P' respectively.

	* org-rmail.el (org-rmail-store-link, org-rmail-follow-link):
	Toggle headers when necessary.

	* org-element.el (org-narrow-to-element): Autoload.

	* org.el (org-mode-map): Use `M-h' for `org-element-mark-element'.
	(org-mark-subtree): Allow a numeric prefix argument to move up
	into the hierarchy of headlines.

	* org-element.el (org-element-up, org-element-down): Autoload.

	* org.el: Declare functions and don't require org-element.

	* org-element.el (org-element-at-point, org-element-forward)
	(org-element-backward, org-element-drag-backward)
	(org-element-drag-forward, org-element-mark-element)
	(org-element-transpose, org-element-unindent-buffer): Autoload.
	Require 'org and remove all declarations.

	* org.el (org-outline-regexp-bol, org-heading-regexp):
	Use variables instead of constants.

	* org-archive.el (org-datetree-find-date-create): Declare.

	* org.el (org-open-at-point): Only set
	`clean-buffer-list-kill-buffer-names' when the feature 'midnight
	has been loaded.

	* org-icalendar.el (org-print-icalendar-entries):
	Let APPT_WARNTIME take precedence over ̀org-icalendar-alarm-time'.

	* org.el (org-special-properties): New special property
	CLOCKSUM_T.
	(org-entry-properties): Handle the new special property.

	* org-colview.el (org-columns): Handle a new special property
	CLOCKSUM_T.
	(org-agenda-colview-summarize, org-agenda-colview-compute): Ditto.

	* org-clock.el (org-clock-sum-today): New function.
	(org-clock-sum): New argument PROPNAME to set a custom text
	property instead of :org-clock-minutes.

	* org-agenda.el (org-agenda-check-type): Throw a more appropriate
	error message when no agenda is currently being displayed.

	* org.el (org-get-property-block): Find blocks before the first
	headline.
	(org-entry-properties): Minor code cleanup.
	(org-entry-get, org-entry-get-with-inheritance): Get property
	before the first headline.

	* org-mobile.el (org-mobile-create-index-file): Use `files-alist'.

	* org.el (org-make-link): Delete.
	(org-store-link, org-insert-link)
	(org-file-complete-link): Don't use `org-make-link'.

	* org-wl.el (org-wl-store-link-folder)
	(org-wl-store-link-message): Ditto.

	* org-vm.el (org-vm-store-link): Ditto.

	* org-rmail.el (org-rmail-store-link): Ditto.

	* org-mhe.el (org-mhe-store-link): Ditto.

	* org-mew.el (org-mew-store-link): Ditto.

	* org-irc.el (org-irc-erc-store-link): Ditto.

	* org-info.el (org-info-store-link): Ditto.

	* org-id.el (org-id-store-link): Ditto.

	* org-gnus.el (org-gnus-group-link, org-gnus-article-link): Ditto.

	* org-eshell.el (org-eshell-store-link): Ditto.

	* org-bbdb.el (org-bbdb-store-link): Ditto.

	* org.el (org-url-hexify-p): New option.  When non-nil (the
	default), hexify URLs when creating a link.

	* org.el (org-insert-link): Make sure point is at the beginning of
	the buffer.

	* org.el (clean-buffer-list-kill-buffer-names): Declare.
	(org-open-at-point): Allow opening multiple shell links by
	creating a new output buffer for each shell process.  The new
	buffer is added to `clean-buffer-list-kill-buffer-names'.

	* org-mobile.el (org-mobile-create-index-file):
	Use `org-global-tags-completion-table' instead of
	`org-tag-alist-for-agenda' to get the tags for the index file.

	* org.el (org-global-tags-completion-table): Fix typo in
	docstring.

	* org.el (org-link-to-org-use-id): Use `org-capture' instead of
	`org-remember' in the docstring.
	(org-link-fontify-links-to-this-file): New function to fontify
	links to the current buffer in `org-stored-links'.
	(org-store-link): Small code simplification.
	(org-link-prettify): Enclose literal links into <...> instead of
	[[...]].
	(org-insert-link): Use `org-link-fontify-links-to-this-file'.
	Also allow completion over links' descriptions, as well as links
	destinations.  When the user uses the description for completion,
	don't prompt again for a description.

	* org-capture.el (org-capture-templates): Fix docstring by adding
	Gnus to the list of mail clients.

	* org.el (org-log-repeat): Enhance docstring.

	* org.el (org-mode-map): Don't bind C-<up> and C-<down> to
	`org-element-backward/forward' as these functions stops when there
	is no element of the same type before/after point.  It is useful
	to navigate with `forward/backward-paragraph' with no stop in most
	cases.

	* org-capture.el (org-capture-templates): New template %l to
	insert the literal link pointing at the current buffer.

	* org.el (org-todo-keywords): Ditto.

	* org.el (org-fill-paragraph): Falls back on
	`message-fill-paragraph' if required in `message-mode'.

	* org-pcomplete.el (pcomplete/org-mode/file-option/x): New macro.
	(pcomplete/org-mode/file-option/options)
	(pcomplete/org-mode/file-option/title)
	(pcomplete/org-mode/file-option/author)
	(pcomplete/org-mode/file-option/email)
	(pcomplete/org-mode/file-option/date): Use the new macro to offer
	completion over default values for #+OPTIONS, #+TITLE, #+AUTHOR,
	#+EMAIL and #+DATE.

	* org-agenda.el (org-agenda-write): Fix bug when writing agenda to
	an external file while `org-agenda-sticky' is non-nil.

	* org.el (org-speed-commands-default): New speedy command to
	quickly add the :APPT_WARNTIME: property.

	* org-agenda.el (org-agenda-to-appt): Use the :APPT_WARNTIME:
	property to override `appt-message-warning-time' when adding an
	appointment from an entry.

	* org.el (org-version): Improve docstring.
	(org-self-insert-cluster-for-undo): The default value should be
	nil for Emacs >=24.1.  See bug#11774.

	* org.el (org-fontify-meta-lines-and-blocks-1): Fix previous
	commit.

	* org.el (org-options-keywords): New constant.
	(org-additional-option-like-keywords): Remove duplicates with
	keywords in the new constant.
	(org-additional-option-like-keywords-for-flyspell): Use the new
	constant.
	(org-mode-flyspell-verify): Exclude keywords from the new
	constant.

	* org-pcomplete.el (pcomplete/org-mode/file-option):
	Use `org-options-keywords'.

	* org.el (org-toggle-heading): Bugfix: use
	`org-element-mark-element' instead of `org-mark-list'.

	* org-list.el (org-mark-list): Delete.

	* org.el: Update a few keybindings.

	* org-element.el (org-element-down): Throw an error when the
	element has no content.

	* org-table.el (orgtbl-radio-table-templates): Add a template for
	org-mode.
	(orgtbl-to-orgtbl): Complete and align the table created with
	orgtbl-to-orgtbl, in case the user use the function for radio
	tables.
	(orgtbl-to-table.el): New function to export a table to another
	one using the table.el format.
	(orgtbl-to-unicode): New function to export a table using unicode
	characters.

	* org-exp.el (org-export-language-setup): Use "Sommaire" for the
	french translation of "Table of contents", to avoid a possible bug
	when exporting to ODT.

	* org.el (org-additional-option-like-keywords): Add keywords.
	(org-additional-option-like-keywords-for-flyspell): New constant
	to use with flyspell.
	(org-mode-flyspell-verify): Use the dedicated constant and don't
	check `org-startup-options'.

	* org-agenda.el (org-batch-store-agenda-views): Use the sticky
	agenda buffer name, if required.
	(org-agenda-write): New parameter `agenda-bufname' to allow
	setting the agenda buffer name.

	* org.el (org-mode-map): Add keybindings for
	`org-element-forward', `org-element-backward', `org-element-up'
	and `org-element-down'.

	* org.el (org-auto-fill-function): Don't call `do-auto-fill'
	within (org-let org-fb-vars ...) as `do-auto-fill' should do the
	right thing whether orgstruct++-mode is turned on or off.

	* org.el (org-sparse-tree-default-date-type): New option.
	(org-ts-type): New variable.
	(org-sparse-tree): New argument `type'.  Use the new option
	`org-sparse-tree-default-date-type' as the default value for
	`type'.  Fix docstring.
	(org-re-timestamp): New function.
	(org-check-before-date, org-check-after-date)
	(org-check-dates-range): Use `org-ts-type' and `org-re-timestamp'
	to tell compute the date regexp.

	* org.el (orgstruct++-mode, org-get-local-variables): Also set
	`normal-auto-fill-function' when turning on/off orgstruct++-mode.

	* org-agenda.el (org-agenda-start-with-log-mode): Add relevant
	customization types.

	* org-faces.el (org-document-title): Use the normal height.

	* org-clock.el (org-x11idle-exists-p): New variable.
	(org-user-idle-seconds): Use it.

	* org.el (org-mode-map): Rebind `org-insert-all-links' to `C-c
	C-M-l'.

	* org.el (org-insert-all-links): New command.
	(org-insert-link): `org-keep-stored-link-after-insertion' is now
	checked when the link to insert has been defined, regardless on
	how it has been defined.  Also don't read the description
	interactively when the `default-description' parameter was given.
	(org-mode-map): Bind `org-insert-all-links' to `C-c C-L'.

	* org.el (org-inc-effort): New command to increment the effort
	property.
	(org-set-effort): Use it.
	(org-mode-map): Bind it to `C-c C-x E'.
	(org-speed-commands-default): Use `E' as a speed command for it.

	* org.el (org-re-property-keyword): New function.
	(org-entry-put): Use it to fix a bug with respect to setting the
	value of a property when a property line with no value already
	exists.

	* org.el (org-timestamp-change): Adjust clock in other org files
	correctly.

	* org-clock.el (org-user-idle-seconds): Simplify.

	* org.el (org-mode-map): Bind `org-resolve-clocks' to `C-c C-x
	C-z'.

	* org.el (org-mode-map): Add keybindings to
	`org-element-transpose' and `org-narrow-to-element'.
	(org-metaup): Fall back on `org-element-drag-backward'.
	(org-metadown): Fall back on `org-element-drag-forward'.
	Also move chunks of declarations and require statements to get rid of
	compiler warnings.

	* org-exp-blocks.el (org): Don't require org.  Add declarations.

	* org-clock.el (org): Don't require org.

	* ob-exp.el (org-list-forbidden-blocks): Add declarations.

	* org.el (org-timestamp-change): Don't use the `position'.

	* org.el (org-clock-history, org-clock-adjust-closest):
	New variables.
	(org-timestamp-change): Maybe adjust the next or previous clock in
	`org-clock-history'.
	(org-shiftmetaup, org-shiftmetadown): On clock logs, update the
	timestamp at point and adjust the next or previous clock in
	`org-clock-history', when possible.

	* org-clock.el (org-clock-in): Set the marker for
	`org-clock-history' at a safer position.

	* org-timer.el (org-timer-pause-or-continue, org-timer-stop):
	Autoload.

	* org-mobile.el (org-mobile-post-pull-hook): Fix docstring.

	* org.el (org-indent-line): Fix indentation of a property line
	starting at the beginning of a line.

	* org-odt.el (org-odt-cleanup-xml-buffers): Use the new alias.

	* org-compat.el: Alias `org-condition-case-unless-debug' to
	`condition-case-unless-debug' or `condition-case-no-debug'.

	* org.el (org-todo-keywords): Ditto.

	* org.el (org-use-fast-todo-selection): Reformat docstring.

	* org.el (org-flag-drawer): Add a docstring.
	(org-mode-map): Bind ̀org-clock-cancel' to "C-cC-xC-q" and
	`org-clock-in-last' to "C-cC-xC-x".  This fixes a bug in the
	previous keybinding for `org-clock-in-last', which would override
	the one for `org-clock-in'.

	* org-clock.el (org-clock-in-last): Prevent errors when there is
	no clocking history.
	(org-clock-cancel): Fix bug when checking against a clock log in a
	folded drawer.

	* org.el (org-link-expand-abbrev): Implement "%(my-function)" as a
	new specifier.  Update the docstring.

	* org.el (org-startup-options): Fix docstring formatting.

	* org.el (org-use-sub-superscripts): Fix typo in docstring.

	* org.el (org-refile): Fix bug: prevent looping when calling
	`org-set-tags' internally.

	* org.el (org-mode-map): Add `C-c C-x C-I' as a keybinding for
	`org-clock-in-last'.

	* org-clock.el (org-clock-continuously): New option.
	(org-clock-in): Three universal prefix arguments set
	`org-clock-continuously' to `t' temporarily.
	(org-clock-in-last): Fix call to `org-clock-select-task' and
	support continuous clocking.
	(org-clock-out-time): New variable.
	(org-clock-out): Set `org-clock-out-time' when clocking out.
	Small docstring rewriting.
	(org-clock-remove-empty-clock-drawer): Fix "invalid search bound"
	bug when trying to delete empty logbook drawer.
	(org-clock-cancel): If the clock log is gone, send a warning
	instead of deleting the region that is supposed to contain it.

	* org.el (org-move-line-down, org-move-line-up): Remove.
	(org-metaup, org-metadown): When the region is active, move it
	up/down by one line, with no regard to the context.

	* org-odt.el (org-odt-cleanup-xml-buffers): Use the new alias.

	* org-compat.el: Alias `org-condition-case-unless-debug' to
	`condition-case-unless-debug' or `condition-case-no-debug'.

	* org-pcomplete.el (org-thing-at-point): Ignore trailing
	whitespaces while looking-back at properties.

	* org.el (org-mode): Set `indent-region-function'.
	(org-indent-region): New function.
	(org-fill-paragraph): When in a src block, use `indent-region' to
	indent the whole source code instead of falling back on
	`fill-paragraph', as this function messes up the code.

	* org-src.el (org-edit-src-code): Fix docstring formatting.

	* ob.el (org-babel-do-key-sequence-in-edit-buffer): Ditto.

	* org.el (org-mode, org-add-log-setup)
	(org-get-property-block, org-entry-put)
	(org-property-next-allowed-value, org-return)
	(org-indent-line): Rename `org-indent-line-function' to
	`org-indent-line'.

	* org-timer.el (org-timer-item): Ditto.

	* org-table.el (org-table-store-formulas): Ditto.

	* org-clock.el (org-clock-in, org-clock-find-position): Ditto.

	* org-src.el (org-src-font-lock-fontify-block)
	(org-src-strip-leading-and-trailing-blank-lines)
	(org-src-ask-before-returning-to-edit-buffer)
	(org-edit-src-code, org-edit-src-continue)
	(org-edit-fixed-width-region)
	(org-src-do-key-sequence-at-code-block)
	(org-src-font-lock-fontify-block, org-src-fontify-buffer):
	Fix typos in docstrings.

	* org-docbook.el (org-export-docbook-emphasis-alist): Fix typo:
	use "format string" instead of "formatting string".

	* org-latex.el (org-export-latex-emphasis-alist)
	(org-export-latex-title-command, org-export-latex-tables): Ditto.

	* org-html.el (org-export-html-postamble): Ditto.

	* org-latex.el (org-export-latex-hyperref-options-format):
	New option.
	(org-export-latex-make-header): Use it.

	* ob.el (org-babel-confirm-evaluate): Prevent errors when
	`org-current-export-file' is void.

	* org-table.el (org-table-export): Use the file name extension to
	suggest the right conversion format.  Also amend the docstring.

	* org.el (org-speed-commands-default): Two new speed commands.
	Use `:' for `org-columns' and ̀#' for `org-toggle-comment'.

	* org.el (org-time-stamp): With two universal arguments, insert an
	active timestamp with the current time without prompting the user.

	* org-clock.el (org-clock-in-last): New command.

	* org-clock.el (org-clock-in): Fix typo in docstring.

	* org-mobile.el (org-mobile-edit): Fix reference to a free
	variable.

	* org.el (org-doi-server-url): Update :group.

	* ob-lob.el (org-babel-lob-execute): Fix reference to non-existent
	variable.

	* org.el (org-doi-server-url): New option.
	(org-open-at-point): Use it.

	* org.el (org-at-comment-p): New function.
	(org-toggle-heading): Use `org-at-comment-p' to skip comments.

	* org-html.el (org-export-as-html): Add links to the Org mode and
	GNU Emacs websites When :html-postamble is set to 't.

	* org-export.el (org-export-creator-string): Add links to the Org
	mode and GNU Emacs websites.

	* org-special-blocks.el
	(org-special-blocks-convert-html-special-cookies): Prevent errors
	by first checking `org-line' is not nil.

	* org-clock.el (org-clock-string-limit)
	(org-clock-modeline-total, org-clock-task-overrun-text)
	(org-clock-mode-line-entry): Doc fix, "modeline" -> "mode line".

	* org.el (org-at-timestamp-p): Set ̀org-ts-what' to 'after when the
	point is right after the timestamp.  `org-at-timestamp-p' still
	returns `t' in this case, as this is more practical.
	(org-return): Check against ̀org-ts-what' to verify that point is
	really within the timestamp (if any).

	* org.el (org-return): Follow time-stamp links when point is an a
	time-stamp.

	* org-capture.el (org-capture-bookmark): New option.
	(org-capture-finalize): Use it.

	* org-publish.el (org-publish-cache-file-needs-publishing):
	Make the column mandatory after #+include:.

	* org-exp.el (org-export-handle-include-files): Ditto.

	* org-bibtex.el (org-bibtex-entries): Rename from
	(org-bibtex-read, org-bibtex-write): Use the new name.

	* org-exp.el (org-export-handle-include-files): Allow to use
	#+include with no column.

	* org-publish.el (org-publish-cache-file-needs-publishing):
	Make quotes mandatory around the file name and allow spaces in it.

	* org-html.el (org-export-as-html): Add link to Org's and Emacs's
	websites.

	* org-latex.el
	(org-export-latex-link-with-unknown-path-format): New option.
	(org-export-latex-links): Use it.

	* org-agenda.el (org-agenda-get-timestamps): Remove any active
	timestamp from the headline text, not only those for the current
	date.

	* org.el (org-set-tags): Allow setting tags for headlines in the
	region when `org-loop-over-headlines-in-active-region' is non-nil.

	* org.el (org-allow-promoting-top-level-subtree): New option to
	allow promoting a top-level subtree.
	(org-called-with-limited-levels): New variable, dynamically bound
	within the `org-with-limited-levels' macro.
	(org-promote): Use the new option to allow promoting a top-level
	subtree.

	* org-macs.el (org-with-limited-levels): Let-bind
	`org-called-interactively-p' to t.

	* org.el (org-create-formula-image-with-dvipng)
	(org-create-formula-image-with-imagemagick): Make sure a file
	exists before trying to delete it.

	* org.el (org-scan-tags): Correctly match TODO keywords.

	* org-agenda.el (org-agenda-bulk-action): Fix bug: use
	`org-agenda-bulk-unmark-all'.

	* org.el (orgstruct++-mode): Fix docstring.
	(org-fill-paragraph): Use the 'justify parameter when falling back
	on `fill-paragraph'.

	* org.el (org-indent-line-function): Use `org-let' instead of
	`orgstruct++-ignore-org-filling'.
	(org-fill-paragraph, org-auto-fill-function): Ditto.

	* org-macs.el (orgstruct++-ignore-org-filling): Delete.

	* org-table.el (org-table-time-string-to-seconds): Return the
	empty string if provided.
	(org-table-eval-formula): When assigning a duration string, handle
	it correctly -- i.e. don't make any computation on it, except the
	one to insert it using the correct duration format.

	* org.el (org-indent-line-function): Fix bug.

	* org-clock.el (org-frame-title-format-backup): New variable to
	store the value of `frame-title-format' before `org-clock' might
	replace it by `org-clock-frame-title-format'.
	(org-clock-frame-title-format): New option.
	(org-frame-title-string): Delete.
	(org-clock-update-mode-line): Minor code reformatting.
	(org-clock-in, org-clock-out, org-clock-cancel):
	Use `org-clock-frame-title-format'.

	* org-clock.el (org-clock-get-clock-string): Add a space.

	* org-list.el (org-mark-list): Return an error when there is no
	list at point.

	* org.el (org-toggle-heading): Allow `C-u C-c *' to mark the list
	at point before converting items to headings.  With a simple
	universal-argument, set `current-prefix-arg' to 1, otherwise keep
	the numeric value.

	* org-agenda.el (org-agenda-view-mode-dispatch): Make the message
	more readable.

	* org-agenda.el (org-agenda-mode-map): New keybinding ̀*' to mark
	all entries for bulk action.
	(org-agenda-menu): New menu item for marking all entries.
	(org-agenda-bulk-mark-all): New function to mark all entries.
	(org-agenda-bulk-mark-regexp): Minor docstring fix.
	(org-agenda-bulk-unmark): With a prefix argument, unmark all.
	Also send a better message.
	(org-agenda-bulk-remove-all-marks): Rename to
	`org-agenda-bulk-unmark-all'.  Check against
	`org-agenda-bulk-marked-entries' before trying to unmark entries.
	Minor docstring fix.
	(org-agenda-bulk-unmark-all): Rename from
	̀org-agenda-bulk-remove-all-marks'.

	* org-agenda.el (org-agenda-bulk-mark-char): New option.
	(org-agenda-bulk-mark): Use the new option.

	* org.el (org-src-prevent-auto-filling): New option to prevent
	auto-filling in src blocks.  This defaults to nil to avoid people
	being surprised that no auto-fill occurs in Org buffers where they
	use `auto-fill-mode'.
	(org-auto-fill-function): Use the new option.

	* org.el (org-properties-postprocess-alist): Better customization
	type.
	(org-set-property): Fix the check against
	`org-properties-postprocess-alist'.

	* org-macs.el (orgstruct++-ignore-org-filling):
	Set `def-edebug-spec' correctly.

	* org-colview.el (org-columns-string-to-number): When computing
	the values for the colview, match durations and convert them to
	HH:MM values.

	* org.el (org-duration-string-to-minutes): Match non-round
	numbers.  Add a new optional parameter to allow returning the
	output as a string.

	* org.el (org-auto-fill-fallback-function)
	(org-indent-line-fallback-function)
	(org-fill-paragraph-fallback-function)
	(org-auto-fill-fallback-function)
	(org-indent-line-fallback-function)
	(org-fill-paragraph-fallback-function): Remove.
	(org-fb-vars): New buffer-local variable.
	(orgstruct++-mode): Use the fallback variable `org-fb-vars' to
	store, use and restore variables if needed.
	(org-fill-paragraph): Ignore `orgstruct++-mode' filling variables
	when needed.
	(org-auto-fill-function, org-indent-line-function): Ditto.

	* org-macs.el (orgstruct++-ignore-org-filling): New macro.

	* org-exp-blocks.el: Use `org-find-library-name' instead of
	`find-library-name'.

	* org-compat.el (org-find-library-name): Convert into a macro to
	avoid compilation of a function from XEmacs in Emacs and vice
	versa.

	* org-table.el (org-table-store-formulas): Fix typo.
	(org-table-maybe-eval-formula): Fix the regexp to only match
	formulas, which never end with the `=' character.  If the field
	only contain this character, don't eval either.

	* org.el (org-set-property): Perform the correct check against
	`org-properties-postprocess-alist'.

	* org-bbdb.el (org-bbdb-anniversary-format-alist): Update the
	customization type.
	(name): Suppress (defvar 'name) as name is not eval'ed when
	setting `org-bbdb-anniversary-format-alist'.

	* org.el (org-version): When called non-interactively, insert the
	short version string, otherwise send a message with the complete
	version string.

	* org-odt.el (org-odt-update-meta-file): Use (org-version) and
	delegate checking whether `org-version' is known as a variable
	there.

	* org-html.el (org-export-as-html): Use (org-version).

	* org-docbook.el (org-export-as-docbook): Ditto.

	* org-latex.el (org-export-latex-make-header): Ditto.

	* org-clock.el (org-clocktable-write-default): Temporarily disable
	`delete-active-region' so that we don't accidently delete an
	active region when exporting a subtree/region.

	* org-clock.el (org-program-exists): Remove.
	(org-show-notification, org-clock-play-sound):
	Use `executable-find' instead of `org-program-exists'.

	* org-agenda.el (org-diary): Prevent failure from
	`org-compile-prefix-format' when there is no agenda buffer.

	* org-agenda.el (org-agenda-mode): Replace obsolete variable
	`buffer-substring-filters'.

	* org-indent.el (org-indent-mode): Ditto.

	* org-compat.el (org-find-library-name): Silent the byte-compiler
	about a warning related to XEmacs support.

	* org-special-blocks.el
	(org-special-blocks-convert-html-special-cookies): Use `org-line'
	instead of `line'.

	* org-html.el (org-html-handle-links, org-export-as-html)
	(org-format-org-table-html, org-format-table-table-html)
	(org-html-export-list-line): Use `org-line' instead of `line' as
	the free variable name.

	* org-latex.el (org-export-latex-tables): Let-bind `hfmt'.

	* org-faces.el (org-list-dt): New face.

	* org.el (org-set-font-lock-defaults): Use `org-list-dt' as the
	face for definition terms in definition lists.

	* org.el (org-fill-paragraph): Pass the `justify' argument to
	`org-fill-paragraph-fallback-function'.

	* org.el (org-eval-in-calendar): Fix docstring to mention the
	KEEPDATE parameter.

	* org.el (org-refresh-category-properties): Let-bind
	`inhibit-read-only' to t.

	* org.el (org-auto-fill-fallback-function)
	(org-indent-line-fallback-function)
	(org-fill-paragraph-fallback-function): New variables to store
	some fall-back functions when turning `orgstruct++-mode' on.
	(orgstruct++-mode): Set the new variables.
	(org-indent-line-function, org-fill-paragraph)
	(org-auto-fill-function): Use them.

	* org.el (org-read-date): Bugfix: call `org-eval-in-calendar' with
	the 'keepdate parameter set to t when setting the cursor type.

	* org-agenda.el (org-agenda-persistent-marks): New option to keep
	marks after a bulk action.  The option defaults to nil.
	(org-agenda-bulk-action): Use the new option.

	* org-capture.el (org-capture-fill-template): Use %\n instead of
	%n as a template element to be replaced with the nth prompted
	string.
	(org-capture-templates): Update docstring.

	* org.el (org-goto): Fix docstring and document what C-u does.

	* org-publish.el (org-publish-cache-file-needs-publishing):
	Use (case-fold-search t) when looking for #+INCLUDE:.

	* org.el: Use (case-fold-search t).
	(org-edit-special, org-ctrl-c-ctrl-c): Ditto.

	* org-table.el:
	(org-table-store-formulas, org-table-get-stored-formulas)
	(org-table-fix-formulas, org-table-edit-formulas)
	(org-old-auto-fill-inhibit-regexp, orgtbl-ctrl-c-ctrl-c)
	(orgtbl-toggle-comment, org-table-get-remote-range): Ditto.

	* org-footnote.el:
	(org-footnote-goto-local-insertion-point): Ditto.

	* org-exp.el: Ditto.

	* org-colview.el:
	(org-dblock-write:columnview, org-dblock-write:columnview): Ditto.

	* org-clock.el (org-clocktable-write-default): Ditto.

	* org-capture.el (org-capture-place-table-line): Ditto.

	* ob.el (org-babel-data-names, org-babel-goto-named-src-block)
	(org-babel-src-block-names)
	(org-babel-where-is-src-block-result, org-babel-result-end)
	(org-babel-where-is-src-block-head)
	(org-babel-find-named-result, org-babel-result-names): Ditto.

	* org-table.el (orgtbl-send-table): Escape special characters.
	Introduce a new parameter :no-escape to prevent escaping.

	* org-agenda.el (org-toggle-sticky-agenda): Only shout a message
	when called interactively.
	(org-agenda-get-restriction-and-command):
	Call `org-toggle-sticky-agenda' interactively.

	* org-agenda.el (org-agenda-top-category-filter): New variable for
	storing the current top-category filter.
	(org-agenda-redo): Apply a top-category filter, if any.
	(org-agenda-filter-by-top-category)
	(org-agenda-filter-top-category-apply):
	Set `org-agenda-top-category-filter' to the right value.

	* org-clock.el (org-clock-out, org-clock-cancel)
	(org-clock-in): Don't modify `frame-title-format' if it is a
	string.

	* org-latex.el (org-export-latex-special-chars): Fix bug when
	escaping special characters in a table.

	* org.el (org-read-date): Set cursor-type to nil in the calendar.

	* org-faces.el (org-date-selected): Use inverse video.
	Don't explicitly set bold to nil as it causes `customize-face' to show
	the weight property and thus encourage the user to change it.
	Warn in the docstring that using bold might cause problems when
	displaying the calendar.

	* org-id.el (org-id-update-id-locations): New parameter to silent
	`org-id-find'.
	(org-id-find): Use the new parameter.

	* org.el (org-show-hierarchy-above, org-cycle)
	(org-global-cycle, org-files-list, org-store-link)
	(org-link-search, org-open-file, org-display-outline-path)
	(org-refile-get-location, org-update-all-dblocks)
	(org-change-tag-in-region, org-entry-properties)
	(org-save-all-org-buffers, org-revert-all-org-buffers)
	(org-buffer-list, org-cdlatex-mode)
	(org-install-agenda-files-menu, org-end-of-subtree)
	(org-speedbar-set-agenda-restriction): Use (derived-mode-p
	'org-mode) instead of (eq major-mode 'org-mode).

	* org-timer.el (org-timer-set-timer): Ditto.

	* org-table.el (orgtbl-mode, org-table-align, orgtbl-mode): Ditto.

	* org-src.el (org-edit-src-exit, org-edit-src-code)
	(org-edit-fixed-width-region, org-edit-src-exit): Ditto.

	* org-remember.el (org-remember-handler): Ditto.

	* org-mouse.el (dnd-open-file, org-mouse-insert-item): Ditto.

	* org-macs.el (org-get-limited-outline-regexp): Ditto.

	* org-lparse.el (org-replace-region-by): Ditto.

	* org-latex.el (org-latex-to-pdf-process)
	(org-replace-region-by-latex): Ditto.

	* org-indent.el (org-indent-indent-buffer): Ditto.

	* org-id.el (org-id-store-link, org-id-update-id-locations)
	(org-id-store-link): Ditto.

	* org-html.el (org-export-html-preprocess)
	(org-replace-region-by-html): Ditto.

	* org-footnote.el (org-footnote-normalize)
	(org-footnote-goto-definition)
	(org-footnote-create-definition, org-footnote-normalize): Ditto.

	* org-docbook.el (org-replace-region-by-docbook): Ditto.

	* org-ctags.el (find-tag): Ditto.

	* org-colview.el (org-columns-redo)
	(org-columns-display-here, org-columns-edit-value)
	(org-columns-redo): Ditto.

	* org-capture.el (org-capture-insert-template-here)
	(org-capture, org-capture-finalize)
	(org-capture-set-target-location)
	(org-capture-insert-template-here): Ditto.

	* org-ascii.el (org-replace-region-by-ascii): Ditto.

	* org-archive.el (org-archive-subtree): Ditto.

	* org-agenda.el (org-agenda)
	(org-agenda-get-restriction-and-command)
	(org-agenda-get-some-entry-text, org-search-view)
	(org-tags-view, org-agenda-get-day-entries)
	(org-agenda-format-item, org-agenda-goto, org-agenda-kill)
	(org-agenda-archive-with, org-agenda-switch-to): Ditto.

	* org.el (org-repeat-re)
	(org-clone-subtree-with-time-shift, org-auto-repeat-maybe)
	(org-deadline, org-schedule, org-matcher-time)
	(org-time-stamp, org-read-date, org-read-date-get-relative)
	(org-display-custom-time, org-get-wdays)
	(org-time-string-to-absolute, org-closest-date)
	(org-timestamp-change): Allow to set hourly repeat cookie.
	Send an error when an hourly repeat cookie is set and no hour is
	specified in the timestamp.

	* org-icalendar.el (org-print-icalendar-entries): Handle hourly
	repeat cookies.

	* org-clock.el (org-program-exists): Fix docstring.

	* org-clock.el (org-clock-file-time-cell-format): New option.
	(org-clocktable-write-default): Use it.

	* org-faces.el (org-date-selected): New face.

	* org.el (org-date-ovl): Use `org-date-selected'.

	* org.el (org-mode): Don't use `buffer-face-mode' by default.

	* org-agenda.el (org-agenda-mode-map): Bind `^' to
	`org-agenda-filter-by-top-category'.

	* org-ascii.el (org-export-ascii-underline): Change the default
	underlining characters for headlines of level 1 and 2.
	Also introduce \. as the underline character for headlines of level 5.

	* org-table.el (org-table-recalculate-buffer-tables)
	(org-table-iterate-buffer-tables): Add autoload cookie.

	* org.el (org-table-map-tables): Exclude tables in src and example
	blocks.

	* org.el (org-fill-paragraph): Leave scheduled/deadline lines
	untouched when filling an adjacent paragraph.

	* org-html.el (org-export-html-preamble-format)
	(org-export-html-postamble-format): Improve the docstring.

	* org.el (org-todo): Fix regression: rename `state' to
	`org-state'.

	* org-clock.el (org-show-notification): Use `fboundp' instead of
	`featurep' and the additional `require'.

	* org-clock.el (org-clock-in-prepare-hook): New option to format
	the total time cells.
	(org-clocktable-write-default): Use the new option.

	* org.el (org-open-at-point): Allow to open the agenda from an
	active or inactive timestamp in a headline.

	* org-html.el (org-export-html-date-format-string): Make a
	defcustom.

	* org-latex.el (org-export-as-latex): Fix TeX-master declaration.

2012-09-30  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-expand-lhs-ranges): Allow hline
	references to be expanded correctly in LHS of formulas.

	* org-beamer.el (org-beamer-inherited-properties): New option.
	(org-beamer-after-initial-vars): Use new option to look for
	inherited properties.

	* org.el (org-ts-regexp0): Allow time stamps without name of day.

	* org-agenda.el (org-toggle-sticky-agenda):
	(org-agenda-sticky): Improve :set property.

	* org-agenda.el (org-agenda-local-vars): Clean up the variable
	list.
	(org-agenda-get-restriction-and-command): Add a key for toggling
	sticky agenda views.

	* org-agenda.el (org-agenda-local-vars): Final decisions about
	global/local

	* org-agenda.el (org-agenda-force-single-file): Variable removed.
	(org-prepare-agenda-window): Store pre-agenda window config
	locally.
	(org-timeline): Introduce a scoped version of
	`org-agenda-show-log'.
	(org-agenda-list): Introduce a scoped version of
	`org-agenda-show-log'.
	(org-agenda-get-progress): Use the scoped version of
	`org-agenda-show-log'.
	(org-agenda-local-vars): Write the analysis result as a comment -
	to be cleaned up in the next iteration.

	* org-agenda.el (org-toggle-sticky-agenda): Kill all agenda
	buffers when toggling sticky-agendas.
	(org-agenda-get-restriction-and-command): Add `C-c a C-k' as a key
	to explicitly kill all agenda buffers.
	(org-agenda-run-series): Remove any old agenda markers in the
	buffer that is going to take the new block agenda.
	(org-prepare-agenda): Reset markers before erasing the buffer anc
	running `org-agenda-mode', because after that the local variable
	`org-agenda-markers' will have gone away.
	(org-agenda-Quit):
	(org-finalize-agenda): Install the marker resetter into the
	`kill-buffer-hook'.
	(org-agenda-save-markers-for-cut-and-paste): Look for markers in
	all agenda buffers.
	(org-agenda-kill-all-agenda-buffers): New function.

2012-09-30  Chris Gray  <chrismgray@gmail.com>

	* org-html.el (org-export-as-html): Remove the check for body-only
	in the code for generating tables of contents.

2012-09-30  Christoph Dittmann  <github@christoph-d.de>  (tiny change)

	* org-beamer.el (org-beamer-auto-fragile-frames):
	Make [fragile] work with overlay specifications.

2012-09-30  Christophe Junke  <christophe.junke@inria.fr>  (tiny change)

	* org-agenda.el (org-agenda-list): Ensures that the list returned
	by `org-agenda-add-time-grid-maybe' is appended to ̀rtnall' before
	checking if the latter is empty.

2012-09-30  Christophe Rhodes  <csr21@cantab.net>  (tiny change)

	* org-latex.el (org-export-latex-tables): Support setting the
	:hfmt parameter from #+ATTR_LaTeX.

2012-09-30  Daniel Dehennin  <daniel.dehennin@baby-gnu.org>  (tiny change)

	* org-exp.el (org-export-handle-include-files)
	(org-get-file-contents): Handle new parameter :addlevel.

2012-09-30  Dave Abrahams  <dave@boostpro.com>  (tiny change)

	* org.el (org-link-prettify): New function to prettify links while
	displaying them with `org-insert-link'.
	(org-insert-link): Use the new function.

2012-09-30  David Maus  <dmaus@ictsoc.de>

	* org-exp.el (org-export-language-setup): Use numeric character
	entities for proper rendering of non-UTF8 documents.

	* org-exp.el (org-export-language-setup): Add japanese
	translation.

2012-09-30  Eric Schulte  <eric.schulte@gmx.com>

	* ob-sh.el (org-babel-sh-evaluate): Don't could 0-length shebangs.

	* ob.el (org-babel-insert-result): Replace key sequence with
	function call.  Use a more informative flag to the local function.
	(org-add-protective-commas): Declare a new external function.

	* org-src.el (org-add-protective-commas): This should be its own
	function.
	(org-edit-src-exit): Use the new function.

	* org-compat.el (org-labels): Remove.

	* org-bibtex.el (org-bibtex-headline): Don't use `org-labels'.

	* ob.el (org-babel-sha1-hash, org-babel-noweb-p): Ditto.

	* ob.el (org-babel-string-read): Don't automatically evaluate code
	block results which look like elisp.
	(org-babel-import-elisp-from-file): Raise a warning message when
	the process of reading code block results raises an error.

	* ob-tangle.el (org-babel-with-temp-filebuffer): Don't execute
	macro argument multiple times.

	* org.el (org-compat): Require org-compat before we first use one
	of its functions (a macro actually).

	* ob-comint.el (org-babel-comint-with-output): Don't name the
	filter function, but rather pass through the anonymous lambda
	directly.

	* org.el (org-babel-load-languages): Common lisp should be
	mentioned as a supported babel language.

	* org-clock.el (org-clock-special-range): "concat 'string" ->
	"concat"
	(org-clocktable-shift): "concat 'string" -> "concat"

	* org-bibtex.el (org-bibtex-headline): Replacing org-flet with
	org-labels.

	* ob-calc.el (org-babel-execute:calc): Strip single quotes from
	calc internal representations.

	* org-clock.el (org-clock-special-range): Replacing cl concatenate
	with concat.
	(org-clocktable-shift): Replacing cl concatenate with concat.

	* ob.el (org-babel-edit-distance): Remove use of map at runtime.

	* org-compat.el (org-flet): Compatibility function now that flet
	has been removed from cl-macs.
	(org-labels): Compatibility function now that labels has been
	removed from cl-macs.

	* ob-R.el (org-compat): Require org-compat.

	* ob-comint.el: Require org-compat.

	* ob-exp.el (org-babel-exp-do-export): Switch to compatibility
	function.

	* ob-gnuplot.el (org-babel-expand-body:gnuplot): Switch to
	compatibility function.

	* ob-lob.el (org-babel-lob-get-info): Switch to compatibility
	function.
	(org-babel-lob-execute): Switch to compatibility function.

	* ob-python.el (org-babel-python-evaluate-session): Switch to
	compatibility function.

	* ob-ref.el (org-babel-ref-index-list): Switch to compatibility
	function.

	* ob-sh.el (org-babel-sh-var-to-string): Switch to compatibility
	function.

	* ob-tangle.el (org-babel-load-file): Switch to compatibility
	function.
	(org-babel-tangle): Switch to compatibility function.
	(org-babel-spec-to-string): Switch to compatibility function.

	* ob.el (org-babel-view-src-block-info): Switch to compatibility
	function.
	(org-babel-execute-src-block): Switch to compatibility function.
	(org-babel-edit-distance): Switch to compatibility function.
	(org-babel-switch-to-session-with-code): Switch to compatibility
	function.
	(org-babel-sha1-hash): Switch to compatibility function.
	(org-babel-balanced-split): Switch to compatibility function.
	(org-babel-join-splits-near-ch): Switch to compatibility function.
	(org-babel-get-rownames): Switch to compatibility function.
	(org-babel-format-result): Switch to compatibility function.
	(org-babel-insert-result): Switch to compatibility function.
	(org-babel-examplize-region): Switch to compatibility function.
	(org-babel-merge-params): Switch to compatibility function.
	(org-babel-noweb-p): Switch to compatibility function.
	(org-babel-expand-noweb-references): Switch to compatibility
	function.

	* org-bibtex.el (org-bibtex-headline): Switch to compatibility
	function.
	(org-bibtex-fleshout): Switch to compatibility function.
	(org-bibtex-read): Switch to compatibility function.
	(org-bibtex-write): Switch to compatibility function.

	* org-exp-blocks.el (org-export-blocks-preprocess): Switch to
	compatibility function.

	* org-exp.el (org-export-format-source-code-or-example): Switch to
	compatibility function.

	* org-macs.el (org-called-interactively-p): Indentation fix.

	* org-mouse.el (org-mouse-timestamp-today): Switch to
	compatibility function.
	(org-mouse-set-priority): Switch to compatibility function.
	(org-mouse-popup-global-menu): Switch to compatibility function.
	(org-mouse-context-menu): Switch to compatibility function.

	* org-plot.el (org-plot/gnuplot-to-grid-data): Switch to
	compatibility function.
	(org-plot/gnuplot-script): Switch to compatibility function.

	* org.el (org-entry-get): Switch to compatibility function.
	(org-fill-paragraph): Switch to compatibility function.
	(org-auto-fill-function): Switch to compatibility function.

	* ob-lob.el (org-babel-lob-execute): Only try to insert extant
	hashes.

	* ob-R.el (org-babel-R-command): From a defvar to a defcustom.

	* ob.el (org-babel-set-current-result-hash): Change the hash of
	the results for the current code block.
	(org-babel-current-result-hash): Fix documentation.

	* ob-lob.el (org-babel-lob-execute): Don't re-execute the called
	function if the current call line hash matches that in its
	results.

	* ob-R.el (org-babel-R-assign-elisp): Can't assume every entry in
	a table is a sequence.

	* ob-R.el (org-babel-R-assign-elisp): Clean up the code
	implementing reads of irregular data into R.

	* ob.el (org-babel-header-arg-expand): In new buffers
	(char-before) may return nil so use equal rather than =.

	* ob-R.el (org-babel-header-args:R): Adding values.

	* ob-clojure.el (org-babel-header-args:clojure): Adding values.

	* ob-lisp.el (org-babel-header-args:lisp): Adding values.

	* ob-sql.el (org-babel-header-args:sql): Adding values.

	* ob-sqlite.el (org-babel-header-args:sqlite): Adding values.

	* ob.el (org-babel-combine-header-arg-lists): Combine lists of
	arguments and values.
	(org-babel-insert-header-arg): Use new combined header argument
	lists.
	(org-babel-header-arg-expand): Add support for completing-read
	insertion of header arguments after ":"
	(org-babel-enter-header-arg-w-completion): Completing read
	insertion of header arguments
	(org-tab-first-hook): Adding header argument completion.
	(org-babel-params-from-properties): Combining header argument
	lists.

	* ob-exp.el (org-babel-exp-results): Ensure noweb expanded body is
	used on export.

	* ob.el (org-babel-result-to-file): New optional description
	argument.
	(org-babel-insert-result): Move description logic to another
	function.

	* ob.el (org-babel-insert-result): Change name of filelinkdescr to
	file-desc.
	(org-babel-common-header-args-w-values): Change name of
	filelinkdescr to file-desc.

	* ob-C.el (org-babel-C-execute): Add .exe to the end of compiled C
	files on windows.

	* ob-exp.el (org-babel-exp-code): Escape all lines when exporting
	Org-mode blocks.

	* ob.el (org-babel-parse-src-block-match): Make use of the new
	language argument to org-babel-strip-protective-commas.
	(org-babel-parse-inline-src-block-match): Make use of the new
	language argument to org-babel-strip-protective-commas.
	(org-babel-strip-protective-commas): Now accepts a language
	argument.

2012-09-30  Fabrice Niessen  <fniessen-TA4HMoP+1wHrZ44/DZwexQ@public.gmane.org>  (tiny change)

	* org-agenda.el (org-agenda-write-buffer-name): Remove the test
	for the presence of <style> tag.

2012-09-30  Feng Shu  <tumashu@gmail.com>

	* org.el (org-create-formula-image-with-imagemagick):
	Use 'call-process to launch latex so that no shell output buffer will
	be shown when previewing formulas.

	* org.el (org-create-formula-image-with-imagemagick): Fix typo.

	* org.el (org-latex-create-formula-image-program): New option to
	use either dvipng or imagemagick to convert and preview LaTeX
	fragments.
	(org-preview-latex-fragment, org-format-latex): Handle the new
	option.
	(org-create-formula-image-with-dvipng): Rename from
	`org-create-formula-image'.
	(org-create-formula-image-with-imagemagick): New defun to handle
	LaTeX preview with imagemagick.
	(org-latex-color, org-latex-color-format): New defuns to handle
	color conversions.

	* org-latex.el (org-latex-to-pdf-process, org-export-as-pdf):
	Allow to use imagemagick to convert LaTeX fragments.

	* org-html.el (org-export-html-preprocess): Ditto.

	* org-exp.el (org-export-with-LaTeX-fragments): Ditto.

2012-09-30  George Kettleborough  <g.kettleborough@member.fsf.org>

	* org-clock.el: New option `org-clock-clocked-in-display' to
	control whether the current clock is displayed in the mode line
	and/or frame title.

	* org-timer.el: New option `org-timer-display' to control whether
	the current timer is displayed in the mode line and/or frame
	title.

2012-09-30  Hans-Peter Deifel  <hpdeifel@gmx.de>  (tiny change)

	* ob.el (org-babel-execute-src-block): Allow the :dir header
	argument to take relative file names.

2012-09-30  Harri Kiiskinen  <harri@pp-kaitue.(none)>  (tiny change)

	* org-protocol.el: New option.
	(org-protocol-store-link, org-protocol-do-capture): Use it.

2012-09-30  Henning Weiss  <hdweiss@gmail.com>

	* org-mobile.el (org-mobile-edit): Add handling of addheading,
	refile, archive, archive-sibling and delete edit nodes.
	(org-mobile-locate-entry): Olp links containing only a file are
	now be located correctly.
	(org-mobile-apply): Instead of finding the location of all target
	headings for edit nodes in a separate loop, they will be found
	immediately before applying edits.

	* org-mobile.el (org-mobile-sumo-agenda-command): Use a shorter
	title.

2012-09-30  Ilya Shlyakhter  <ilya_shl@alum.mit.edu>  (tiny change)

	* org.el (org-parse-time-string): Allow strings supported by
	tags/properties matcher (eg <now>, <yesterday>, <-7d>) if the time
	starts with < and ends with >.  This means that e.g. in the
	clocktable parameters you can specify :tstart "<-1w>" :tend
	"<now>".

2012-09-30  Ippei FURUHASHI  <top.tuna+orgmode@gmail.com>  (tiny change)

	* org-colview.el (org-columns): New argument `columns-fmt-string'.

	* org-colview.el (org-columns-get-format-end-top-level):
	Split into `org-columns-get-format' and `org-columns-goto-top-level'.

	* org-colview.el (org-dblock-write:columnview): Add a new
	parameter :format which specifies the column view format for the
	output of the columnview dynamic block.

2012-09-30  Jambunathan K  <kjambunathan@gmail.com>

	* org-lparse.el (org-lparse-and-open)
	(org-lparse-do-convert): Open exported files with system-specific
	application.

	* org-odt.el: Don't meddle with `org-file-apps'.

	* org-compat.el (org-condition-case-unless-debug): Alias to
	`condition-case' when both `condition-case-no-debug' and
	`condition-case-unless-debug' is unavailable.

	* org-odt.el (org-odt-do-image-size): Replace `flet' with
	equivalent construct.

	* org-odt.el (org-odt-cleanup-xml-buffers):
	Use `condition-case-no-debug' instead of
	`condition-case-unless-debug'.  This ensures backward
	compatibility with Emacs versions < 24.1.

	* org-odt.el (org-odt-zip-dir)
	(org-odt-cleanup-xml-buffers): New.
	(org-export-as-odt-and-open, org-export-as-odt)
	(org-odt-init-outfile, org-odt-save-as-outfile)
	(org-export-as-odf, org-export-as-odf-and-open):
	Use `org-odt-cleanup-xml-buffers'.

	* org-odt.el (org-export-odt-default-org-styles-alist):
	Add default character style.

	* org-odt.el (org-export-odt-default-org-styles-alist):
	Add default character style.

	* org-lparse.el (org-do-lparse): Remove stray call to
	`org-export-html-after-blockquotes-hook'.

	* org-bbdb.el (org-bbdb-export): Add support for ODT format.

	* org-odt.el (org-odt-update-meta-file): Check for `org-version'
	is bound before accessing it.

	* org-odt.el (org-odt-schema-dir-list): OD Schema files have been
	moved away from $(git-root)/contrib/odt/etc/schema/ to
	$(git-root)/etc/schema/.

	* org-odt.el (org-odt-format-org-link): Pay no heed to whether the
	internal links destined for headlines provide a description or
	not.  In fact, the `org-store-link' and `org-insert-link' create
	internal links which do have a description.

	* org-lparse.el (org-lparse-insert-org-table): Consider short
	caption as plain text and not as org text.

	* org-odt.el (org-export-odt-format-formula)
	(org-export-odt-format-image): Ditto.

	* org-odt.el (org-odt-begin-table)
	(org-export-odt-format-formula, org-export-odt-format-image)
	(org-odt-format-entity): Handle short caption.

	* org-lparse.el (org-lparse-insert-org-table)
	(org-lparse-insert-list-table, org-lparse-insert-table-table):
	Ditto.

2012-09-30  Jay McCarthy  <jay.mccarthy@gmail.com>  (tiny change)

	* org-colview.el (org-columns-new-overlay): Make sure to add a
	face to a string that has no face.

2012-09-30  Jérémie Courrèges-Anglas  <jca@wxcvbn.org>  (tiny change)

	* org-latex.el: Ensure a final newline is appended to the export
	buffer.

2012-09-30  Levin Du  <zslevin@gmail.com>  (tiny change)

	* org-clock.el (org-clock-in): Fix bug in setting the clock
	heading.

2012-09-30  Madan Ramakrishnan  <madanr79@gmail.com>  (tiny change)

	* org-agenda.el (org-agenda-bulk-mark): Truly make arg optional as
	advertised by the function.

2012-09-30  Mark E. Shoulson  <mark@kli.org>  (tiny change)

	* org.el (org-fontify-entities): Hide {} when prettifying
	entities.

2012-09-30  Mark Shoulson  <mark@kli.org>  (tiny change)

	* org-entities.el (org-entities): Add new entities for characters
	which could cause formatting changes if typed directly.

	* org-entities.el (org-entities): Add \asciicirc entity for ^;
	also fixed \circ expansion in latex.

	* org.el (org-fontify-entities): Fix bug: The entities \sup[123]
	and \there4 were not "prettified" when org-pretty-entities was
	enabled.

2012-09-30  Mats Lidell  <matsl@xemacs.org>  (tiny change)

	* org-element.el (org-element-paragraph-separate):
	Remove redundant and misplaced t clause in case.

2012-09-30  Matt Lundin  <mdl@imapmail.org>

	* org-datetree.el: Fix regexp to allow datetree to find headings
	with trailing whitespace.  This fixes a bug in which an existing
	datetree heading (e.g., "* 2012 ") would not be found by
	org-datetree-find-year-create if it had trailing whitespace.
	This can cause problems, for instance, if one is using column view on
	the date tree, since editing subheadings with column view adds
	whitespace at the end of the top heading.

	* org-footnote.el (org-footnote-new): Don't call
	org-footnote-unique-label if org-footnote-auto-label is set to
	random.

	* org-gnus.el (org-gnus-follow-link): Fix argument to
	gnus-group-read-group so that following a link does not result in
	unread article being selected.

	* org-bbdb.el (org-bbdb-anniv-extract-date)
	(org-bbdb-make-anniv-hash): Fix org-bbdb anniversary functionality
	to accommodate BBDB 3.x.  There are two major changes in BBDB 3.x
	that need to be taken into account.  The first is that
	`bbdb-split' reverses the order of its parameters in 3.x.
	The second is that `bbdb-record-getprop' is replaced by
	bbdb-record-note in 3.x.

2012-09-30  Max Mikhanosha  <max@openchat.com>

	* org-agenda.el (org-agenda-change-all-lines): Speedup refresh of
	a single line of agenda by narrowing the agenda buffer to just
	that line before calling `org-agenda-finalize'.

	* org.el (org-mode): Don't set org-hide's foreground to
	"invisible-bg".
	(org-find-invisible-foreground): New function.

	* org-agenda.el (defvar org-habit-show-all-today): New variable
	(org-agenda-get-scheduled): Show all habits if user wants it

	* org-habit.el (defcustom org-habit-show-all-today): New variable

	* org-agenda.el (org-agenda-quit): Copy the code for optionally
	restoring window configuration after burying the sticky agenda
	buffer.

	* org-agenda.el (org-agenda-new-marker): Check for NIL
	org-agenda-buffer
	(org-agenda-to-appt): Bind org-agenda-buffer to NIL

	* org-agenda.el (org-agenda-change-all-lines): Move accessing of
	'extra text property outside of with-current-buffer for original
	buffer

	* org-agenda.el (defvar org-habit-show-habits-only-for-today):
	initialize to nil

2012-09-30  Michael Brand  <michael.ch.brand@gmail.com>

	* org-id.el (org-id-link-to-org-use-id): Align the doc string to
	the changed default.

	* ob-tangle.el (org-babel-tangle-collect-blocks): Use dummy string
	when heading has no text.

	* org-capture.el (org-capture-inside-embedded-elisp-p):
	Improve parsing.

	* org-feed.el (org-feed-format-entry): Require `org-capture'.
	Expand Elisp %(...) templates.
	(org-feed-default-template): Update docstring.

	* org-capture.el (org-capture-expand-embedded-elisp):
	New function.
	(org-capture-fill-template): Use it.
	(org-capture-inside-embedded-elisp-p): New function to tell if we
	are within an Elisp %(...) template.

	* org-list.el (org-at-item-description-p)
	(org-list-item-body-column): Make the inline regexp more
	consistent with `org-list-full-item-re', the inline regexp
	"Description list items" from `org-set-font-lock-defaults and
	others'.

2012-09-30  Mike Sperber  <sperber@deinprogramm.de>

	* org.el (org-fill-paragraph): Pass optional argument to
	`fill-paragraph' to fix compatibility with XEmacs.

	* org.el (org-self-insert-cluster-for-undo):
	Default `org-self-insert-cluster-for-undo' also on XEmacs.

	* org.el (org-kill-line): Access `visual-line-mode' only if it's
	bound.

2012-09-30  Muchenxuan Tong  <demon386@gmail.com>  (tiny change)

	* org-timer.el (org-timer-set-mode-line):
	Check `org-timer-display' when value is 'off.

2012-09-30  Nicolas Calderon Asselin  <nicolas.calderon.asselin@gmail.com>  (tiny change)

	* org-clock.el (org-clock-idle-time): Org-mode assumed that
	x11idle was an available command, and returned an idle time of 0
	if it was not
	(never idle): Add checks so that org-idle-time will come from
	emacs' own current-idle-time if x11idle cannot be found or if it
	cannot retrieve the idle time from X11

2012-09-30  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-element.el: Properly remove COMMENT and QUOTE keywords from
	title in parser.

	* org-element.el (org-element-headline-parser): Fix parsing for
	headlines with a single COMMENT or QUOTE keyword.

	* ob-org.el (org-babel-default-header-args:org): By default,
	export code from Org src blocks.

	* org-element.el (org-element-inline-src-block-successor):
	Fix inline-src-block parsing at the beginning of an item.

	* org-element.el (org-element--collect-affiliated-keywords):
	Fix caption parsing.

	* org-element.el (org-element--current-element): At the very
	beginning of a footnote definition or an item, next element is
	always a paragraph.

	* org-element.el (org-element-headline-parser): Handle nil titles.
	(org-element-inlinetask-parser): Add :raw-value property.
	Also handle nil titles.

	* org.el (org-set-regexps-and-options): Don't consider tags as a
	replacement for a missing title in an headline.

	* org.el (org-setup-filling): Remove duplicate code.

	* org.el (org-adaptive-fill-function): Make sure fill prefix is
	computed from beginning of line.

	* org-element.el (org-element-section-parser): Make sure section
	cannot contain an headline.
	(org-element--current-element): Fix bug requiring to parse a quote
	section even when point is at an headline.

	* org.el (org-adaptive-fill-function): Remove occasional spurious
	space character when auto-filling.

	* org.el (org-mode): Call external initalizers.  Now both filling
	code and comments code have their own independant part in org.el.
	(org-setup-filling): Rename from `org-set-autofill-regexps'.
	(org-setup-comments-handling): New function.

	* org.el (org-fill-paragraph): Refine filling in comments and in
	paragraphs.  Allow commented blank lines.  Take into consideration
	the indentation of the second line of the paragraph being filled.
	(org-comment-or-uncomment-region): Rewrite function.  Now comment
	region at a fixed column: the minimal indentation of the region.
	(org-fill-context-prefix): Rename function into
	`org-adaptive-fill-function'.  Also, In a paragraph, choose the
	same prefix as the current line.

	* org-exp.el (org-export-handle-comments): Also remove comments at
	column 0.

	* org-exp.el (org-export-handle-comments): Handle inline comments
	with new syntax.

	* org.el (org-structure-template-alist): Add missing colon to
	#+INCLUDE.

	* org.el (org-backward-element): When called at the beginning of
	first element in section, the function shouldn't return an error
	but move point to headline or point-min instead.

	* org-element.el (org-element-paragraph-parser): Tiny refactoring.

	* org-element.el (org-element-paragraph-parser): Remove trailing
	code comments.

	* org.el (org-fill-context-prefix): Fix incorrect output when
	called at the beginning of a plain list with an affiliated
	keyword.
	(org-fill-paragraph): Remove useless variable.

	* org-element.el (org-element-paragraph-parser): Fix parsing of
	paragraph at the beginning of an item.

	* org.el (org-mode): Set back comment-start-skip so comment-dwim
	can tell a keyword from a comment.

	* org.el (org-set-autofill-regexps): Install new comment line
	break function.
	(org-comment-line-break-function): New function.
	(org-mode): Remove unnecessary line.

	* org.el (org-fill-context-prefix, org-fill-paragraph): Do not
	fill verse blocks contents.  Verse blocks can be used to format
	free-form poetry, so filling has to be done manually.

	* org.el (org-fill-paragraph-separate-nobreak-p): New function.
	(org-set-autofill-regexps): Introduce new predicate.
	(org-fill-item-nobreak-p): Remove function.

	* org-element.el (org-element-paragraph-separate): Since this
	variable is meant to be searched forward, \end{...} shouldn't
	trigger the end of a paragraph before checking if it is the end of
	a complete environment.
	(org-element-latex-environment-parser): Slight change to the
	regexp matching the beginning of a latex environment.
	(org-element-paragraph-parser): Paragraphs don't end at incomplete
	latex environments.
	(org-element-latex-or-entity-successor): Remove paragraph
	environments from latex fragment search.

	* org-table.el (org-table-number-regexp): By default, accept comma
	as a decimal mark to represent numbers.

	* org-element.el (org-element-map): Fix comment typo.

	* org.el (org-fill-paragraph): Add a `save-excursion' to avoid
	returning funny results.

	* org.el (org-fill-paragraph): Try not to include message header
	and citation lines in a paragraph when filling it.

	* org.el (org-fill-paragraph): Fix filling in a narrowed buffer.
	(org-fill-context-prefix): Fill prefix doesn't depend on current
	narrowing.

	* org.el (org-mode): Line with a single hash sign on it is a
	comment.

	* org.el (org-set-font-lock-defaults): Fix comment fontification.

	* org-element.el (org-element-item-parser): Do not remove tag from
	body if list isn't descriptive.

	* org-list.el (org-insert-item): Only ask about a term for
	descriptive lists.
	(org-list-struct, org-list-insert-item): Do not recognize a tag in
	an ordered list.

	* org-element.el (org-element-set-element): Rewrite function.
	(org-element-adopt-elements): New function.
	(org-element-adopt-element): Remove function.
	(org-element--parse-elements, org-element--parse-objects): Use new
	function.

	* org-list.el (org-list-automatic-rules): Remove `bullet' rule,
	which is now hard-coded.
	(org-cycle-list-bullet): Hard code `bullet' rule.
	(org-list-get-list-type): Make sure a list with numbered bullets
	cannot have `descriptive' type.

	* org-element.el (org-element-paragraph-parser): Fix previous
	patch.

	* org.el (org-fill-paragraph): No need to use
	`org-element-paragraph-separate' in a verse block since blank
	lines only can end a "paragraph".

	* org-element.el (org-element-paragraph-separate): Apply changes
	to comments.
	(org-element-paragraph-parser): Correctly find end of paragraphs.
	(org-element--current-element): Require colons for Babel calls.
	(org-element-center-block-parser)
	(org-element-dynamic-block-parser, org-element-quote-block-parser)
	(org-element-special-block-parser)
	(org-element-comment-block-parser)
	(org-element-example-block-parser)
	(org-element-export-block-parser, org-element-src-block-parser)
	(org-element-verse-block-parser): Fall-back to paragraph parsing
	when incomplete or ill-formed.

	* org-element.el (org-element-swap-A-B): Small refactoring.

	* org-element.el (org-element-text-markup-successor): Fix typo in
	docstring.

	* org-element.el (org-element-at-point): Return consistent value
	when function is called on a blank line within a plain list.

	* org-element.el (org-element-paragraph-separate): Fix comments in
	paragraph separator regexp.  Optimize it.

	* org-element.el: Update code commets.

	* org.el (org-mark-subtree): Fix bug when marking subtree with
	point on an inlinetask.  Refactor code.

	* org.el (org-mark-subtree): Do not make a special case for
	inlinetasks when marking a subtree.  These are handled by
	`org-element-mark-element'.

	* org-element.el (org-element-comment-parser): Consider first "+"
	as a comment when parsing an ill-defined keyword.

	* org-element.el (org-element-item-interpreter): Simplify bullet
	creation.
	(org-element-plain-list-interpreter): Fix wrong bullets, if
	needed.

	* org-element.el (org-element-comment-parser): Fix parsing when a
	keyword follows the commented line.

	* org.el (org-fill-context-prefix): Auto-fill first paragraph in
	footnote definitions.

	* org.el (org-mode): Define new comment syntax.
	(org-fontify-meta-lines-and-blocks-1, org-strip-protective-commas)
	(org-fill-context-prefix, org-insert-comment)
	(org-comment-or-uncomment-region): Use new comment syntax.

	* org-element.el (org-element-comment-parser)
	(org-element-comment-interpreter, org-element--current-element):
	Use new comment syntax.

	* org.el (org-fill-paragraph): When at an item or a footnote
	definition, fill first paragraph instead.

	* org.el (org-fill-paragraph): Fix filling when point is at the
	very end of a paragraph.

	* org.el (org-mode): Set comments related variables.
	(org-insert-comment, org-comment-or-uncomment-region):
	New functions.

	* org.el (org-fill-context-prefix): Small refactoring.
	(org-fill-paragraph): Add code comments.

	* org-element.el (org-element-at-point): Add :parent property to
	output.
	(org-element-context): Add :parent property to output.
	Also return a single element or object instead of a list of parents.
	(org-element-forward, org-element-up): Apply changes.

	* org.el (org-fill-context-prefix): New function.
	(org-fill-paragraph, org-auto-fill-function): Use new function.
	Also handle comments.
	(org-adaptive-fill-function): Remove function.
	(org-get-local-variables, orgstruct++-mode): Don't store now
	unused adaptive-fill* functions.

	* org-element.el (org-element-at-point): Fix function when buffer
	starts with an inlinetask.  Also fix it when called on the last
	element in a greater element or the buffer.

	* org-element.el (org-element-center-block-parser)
	(org-element-dynamic-block-parser)
	(org-element-footnote-definition-parser)
	(org-element-headline-parser, org-element-inlinetask-parser)
	(org-element-quote-block-parser, org-element-special-block-parser)
	(org-element-plain-list-parser): Refactor code.
	(org-element-drawer-parser): Fall-back to paragraph parser when
	drawer is incomplete.

	* org-macs.el (org-with-limited-levels): Fix typo.

	* org-element.el (org-element-paragraph-separate): Refactor.
	(org-element-paragraph-parser): Fix paragraph parsing.

	* org.el (org-fill-paragraph): Rewrite function using
	`org-element-at-point'.

	* org-element.el (org-element-fill-paragraph): Remove function.

	* org.el (org-planning-or-clock-line-re): Make it a defconst.
	It's no use to make it a buffer-local variable since variables on
	which it depends are not buffer-local anyway.

	* org.el (org-drawer-regexp): Provide default value for
	`org-drawer-regexp' in non-Org buffers.

	* org-entities.el (org-entities-create-table): Function chokes
	when CAR of `org-entities' is a string.

	* org-list.el (org-list-automatic-rules): Allow check-boxes in
	description lists.
	(org-list-struct-apply-struct, org-insert-item): Remove rule
	check.

	* org-footnote.el (org-footnote-normalize): Fix positionning in
	HTML export without a footnote section.

	* org-list.el (org-list-struct-indent):
	Follow `org-list-demote-modify-bullet' specifications for ordered
	bullets.
	(org-list-indent-item-generic, org-indent-item-tree)
	(org-outdent-item-tree): Fix bug when operating on a region.
	(org-outdent-item, org-indent-item): Allow to operate on a region.

	* org.el (org-shiftmetaleft, org-shiftmetaright): Allow to operate
	on a region.

	* org-footnote.el (org-footnote-delete-definitions): Remove blank
	lines before the footnote definition instead of removing those
	after it.

	* org-footnote.el (org-footnote-at-definition-p): Don't grab
	trailing blank lines in a footnote definition.
	(org-footnote-delete-definitions): Remove both footnote definition
	and trailing blank lines.

2012-09-30  Rick Frankel  <rick@rickster.com>

	* ob-sql.el: Add dbi engine type and pre/post processing.

2012-09-30  Sean O'Halpin  <sean.ohalpin@gmail.com>  (tiny change)

	* ob.el (org-babel-expand-noweb-references): Capture current noweb
	start and end patterns then use to set buffer locals in
	(with-temp-buffer) form.

2012-09-30  Sebastien Vauban  <sva@mygooglest.com>  (tiny change)

	* org.el (org-update-all-dblocks): Autoload function.

2012-09-30  Simon Thum  <simon.thum@gmx.de>  (tiny change)

	* ob-maxima.el (org-babel-execute:maxima): Let cmdline always
	return a string.

2012-09-30  Stephen Eglen  <S.J.Eglen@damtp.cam.ac.uk>  (tiny change)

	* org-icalendar.el (org-icalendar-timezone): Fix typo and clarify
	meaning.

2012-09-30  Stuart Hickinbottom  <stuart@hickinbottom.com>  (tiny change)

	* org-clock.el (org-x11idle-exists-p): Only shell out when running
	on X.

2012-09-30  Suhail Shergill  <suhailshergill@gmail.com>  (tiny change)

	* org-html.el (org-export-as-html): If possible, use the
	:CUSTOM_ID: property to assign unique ids to footnotes.

2012-09-30  T.F. Torrey  <tftorrey@tftorrey.com>  (tiny change)

	* org-exp.el (org-export-remember-html-container-classes):
	Allow exporting a single subtree with HTML_CONTAINER_CLASS property.

	* org-rmail.el (org-rmail-follow-link): Use `rmail-widen' instead
	of `widen' and don't toggle header as `rmail-widen' already takes
	care of this.

2012-09-30  Tim Howe  <vsync@quadium.net>  (tiny change)

	* org-clock.el (org-clocktable-defaults): Revert extra layer of
	quoting.

2012-09-30  Toby S. Cubitt  <tsc25@cantab.net>

	* org-capture.el (org-capture-fill-template): Expand %<num> escape
	sequences into text entered for <num>'th %^{PROMPT} escape.

	* org-capture.el (org-capture-fill-template): Fix regexp for
	%<n> expandos to match any positive integer.
	(org-capture-templates): Update docstring accordingly.

	* org-agenda.el (org-agenda-skip-timestamp-if-deadline-is-shown):
	Skip timestamp items in agenda view if item is already shown as a
	deadline item.
	(org-agenda-skip-deadline-if-done): Pass deadline results to
	org-agenda-get-timestamps.
	(org-agenda-get-timestamps): Optionally take list of deadline
	results, so that timestamp results can be skipped if already
	included in deadline results.

	* org-agenda.el (org-agenda-diary-sexp-prefix): Regexp matching
	deadline/scheduling information to be displayed in diary sexp
	agenda items.
	(org-agenda-get-sexps): Extract deadline/scheduling information
	from diary sexp entries.

	* org-capture.el (org-capture-place-entry): Place captured entry
	immediately after last subheading of target, instead of just
	before next heading at same level as target.

	* org-capture.el (org-capture-templates): Document new capture
	template properties.

	* org-capture.el (org-capture-place-entry)
	(org-capture-empty-lines-before): Make new :empty-lines-before
	property override :empty-lines when inserting empty lines before
	captured captured entry.

	* org-capture.el (org-capture-finalize)
	(org-capture-empty-lines-after): Make new :empty-lines-after
	property override :empty-lines when inserting empty lines after
	captured captured entry.

	* org-agenda.el (org-agenda-skip-if, org-agenda-skip-if-todo):
	Add new todo-unblocked and nottodo-unblocked skip conditions.
	These match as for todo and nottodo, but only for unblocked todo items.

2012-09-30  Zachary Kanfer  <zkanfer@gmail.com>  (tiny change)

	* org.el (org-read-date-display): Fix bug when displaying the
	overlay.

2012-09-30  Niels Giesen  <niels.giesen@gmail.com>

	* org-table.el (orgtbl-to-generic): Add check for :skipheadrule.
	When present, the :hline following the head will be skipped.
	This is necessary to avoid doubling of horizontal rules in LaTeX
	longtable environments and consequent width problems.

	* org-latex.el (org-export-latex-tables-tstart)
	(org-export-latex-tables-hline)
	(org-export-latex-tables-tend): New options.
	(org-export-latex-tables): Use the new options.

2012-09-30  Feng Shu  <tumashu@gmail.com>  (tiny change)

	* org-exp.el (org-export-language-setup): Add simplified chinese
	translation.

2012-09-01  Paul Eggert  <eggert@cs.ucla.edu>

	Better seed support for (random).
	* org-id.el (org-id-uuid):
	Change (random t) to (random), now that the latter is more random.

2012-07-29  Paul Eggert  <eggert@cs.ucla.edu>

	Don't use the abbreviation "win" to refer to Windows (Bug#10421).
	* ob-lilypond.el (ly-w32-ly-path): Rename from ly-win32-ly-path.
	(ly-w32-pdf-path): Rename from ly-win32-pdf-path.
	(ly-w32-midi-path): Rename from ly-win32-midi-path.
	(ly-determine-ly-path, ly-determine-pdf-path, ly-determine-midi-path):
	Check for "windows-nt", not "win32", in system-type.

2012-06-02  Chong Yidong  <cyd@gnu.org>

	* org-clock.el (org-clock-string-limit)
	(org-clock-modeline-total, org-clock-task-overrun-text)
	(org-clock-mode-line-entry): Doc fix, "modeline" -> "mode line".

2012-05-27  Mark Shoulson  <mark@kli.org>  (tiny change)

	* org.el (org-fontify-entities): Fix bug: The entities \sup[123] and
	\there4 were not "prettified" when org-pretty-entities was enabled.

2012-05-27  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-font-lock-add-priority-faces):
	Restrict priorities fontification to headlines and inlinetasks.

2012-05-27  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-init-outfile)
	(org-odt-write-manifest-file):
	Disable `nxml-auto-insert-xml-declaration-flag'.

	* org-lparse.el (org-do-lparse): Don't trigger auto-mode processing.

2012-05-27  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-scan-tags): Fix bug when building the scanner regexp.

2012-05-27  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-capitalize-examplize-region-markers):
	Controls the capitalization of begin and end example blocks.
	(org-babel-examplize-region):
	Optionally capitalize example block delimiters.

	* ob-plantuml.el (org-babel-execute:plantuml):
	Add a :java header argument to plantuml.

	* org-exp-blocks.el (org-export-blocks-preprocess):
	Even when the body of a block is not indented the boundary markers
	should be indented to their original positions so things like list
	indentation still work.

	* ob.el (org-babel-parse-src-block-match):
	Save match data during indentation check.

2012-05-27  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-scan-tags): Correctly match TODO keywords.

2012-05-27  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct): Fix white spaces.
	(org-list-swap-items, org-list-send-item): Fix visibility preservation.

	* org-list.el (org-list-swap-items, org-list-send-item):
	Preserve visibility when moving items.

2012-05-27  Mark E. Shoulson  <mark@kli.org>  (tiny change)

	* org.el (org-fontify-entities): Hide {} when prettifying entities.

2012-05-27  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-cycle-internal-global): Prevent the display of
	messages when cycling from with a Gnus article buffer.

	* org-table.el (org-table-time-seconds-to-string):
	Fix bug about handling a negative duration value.

2012-05-27  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-link-expand-abbrev): Fix docstring.

	* org.el (org-translate-link): Fix bug.

2012-05-27  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-bulk-mark-regexp):
	Fix bug when setting the number of marked entries.

	* org-table.el (org-tbl-calc-modes): Rename from `org-table-modes'.
	(org-set-calc-mode, org-table-eval-formula): Use it.

2012-05-27  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-find-named-result):
	Fix bug finding empty named results.

2012-05-27  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-set-regexps-and-options):
	Fix `org-planning-or-clock-line-re' regexp.  Indeed "\\>" will never
	match since time keywords must end with colons, which are not word
	constituents.

2012-05-27  Bastien Guerry  <bzg@gnu.org>

	* org-ctags.el (org-ctags-new-topic-template):
	Fix the option default value back again.

2012-05-27  Eric Schulte  <eric.schulte@gmx.com>

	* org-bibtex.el (org-bibtex-export-to-kill-ring):
	Don't rely on kill-new to return a string.

	* org-bibtex.el (org-bibtex-headline):
	Remove call to bibtex-reformat which often hangs.

2012-04-27  Glenn Morris  <rgm@gnu.org>

	* org-ctags.el (org-ctags-new-topic-template):
	Revert 2012-04-09 removal of * from defcustom value, not doc.

2012-04-27  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-table.el (org-table-number-fraction): Fix typo.

2012-04-27  Eric Schulte  <eric.schulte@gmx.com>

	* ob-python.el (org-babel-execute:python): Ensure newline precedes
	automatically-added returns.

2012-04-27  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-mouse.el (org-mode-hook): Do not move point when clicking on
	a footnote reference.

2012-04-27  Bastien Guerry  <bzg@gnu.org>

	* org-faces.el (org-date-selected): Fix docstring.

2012-04-27  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct-indent):
	Follow `org-list-demote-modify-bullet' specifications for ordered
	bullets.
	(org-list-indent-item-generic, org-indent-item-tree)
	(org-outdent-item-tree): Fix bug when operating on a region.
	(org-outdent-item, org-indent-item): Allow to operate on a region.

	* org.el (org-shiftmetaleft, org-shiftmetaright): Allow to operate
	on a region.

2012-04-27  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Fix positioning in
	HTML export without a footnote section.

2012-04-27  Madan Ramakrishnan  <madanr79@gmail.com>  (tiny change)

	* org-agenda.el (org-agenda-bulk-mark): Truly make arg optional as
	advertised by the function.

2012-04-27  Zachary Kanfer  <zkanfer@gmail.com>  (tiny change)

	* org.el (org-read-date-display): Fix bug when displaying the
	overlay.

2012-04-27  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-mode): Don't use `buffer-face-mode' by default.

2012-04-27  Bastien Guerry  <bzg@gnu.org>

	* org-faces.el (org-date-selected): New face.

2012-04-27  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-format-org-link): Pay no heed to whether the
	internal links destined for headlines provide a description or
	not.  In fact, the `org-store-link' and `org-insert-link' create
	internal links which do have a description.

2012-04-27  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-program-exists): Fix docstring.

2012-04-14  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-point-at-end-of-empty-headline): Only try to match
	`org-todo-line-regexp' when the value is non-nil, e.g. in non-org
	modes.
	(org-fontify-meta-lines-and-blocks-1): Prevent errors when trying
	to fontify beyond (point-max).

	* org-clock.el (org-clock-task-overrun-text)
	(org-task-overrun, org-clock-get-clock-string)
	(org-clock-update-mode-line)
	(org-clock-notify-once-if-expired): Rename `org-task-overrun'
	and `org-task-overrun-text' to `org-clock-task-overrun' and
	`org-clock-task-overrun-text' respectively.
	(org-task-overrun-text): New alias.

	* org-table.el (org-table-eval-formula): Fix bug about handling
	remote references as durations.
	(org-table-get-range): Fix bug: make sure references to $0 are
	correctly handled.

	* org-pcomplete.el (pcomplete/org-mode/file-option):
	Fix bug in `pcomplete/org-mode/file-option'.
	(org-thing-at-point): Also match line options like LATEX_CLASS
	when pcompleting from LATEX_.

	* org-agenda.el (org-agenda-filter-make-matcher)
	(org-agenda-filter-apply): Allow filtering entries out by
	category.  Using `C-u <' from the agenda view will redisplay
	the agenda without entries from categories of the current line.

2012-04-14  Eric Schulte  <eric.schulte@gmx.com>

	* ob-C.el (org-babel-C-ensure-main-wrap):
	Add an explicit return to automatically generated main methods.

2012-04-14  Matt Lundin  <mdl@imapmail.org>

	* org.el (org-after-todo-state-change-hook):
	Fix docstring to reflect name change of state to `org-state'.

2012-04-14  Mike Sperber  <sperber@deinprogramm.de>  (tiny change)

	* org-footnote.el (org-footnote-normalize):
	Correctly pass keyword arguments to `org-export-preprocess-string'.

2012-04-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-todo): Fix regression: rename `state' to
	`org-state'.
	(org-use-effective-time): Fix group and type.

2012-04-02  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-clock-out-if-current): Fix regression: rename
	`org-clock-state' to `org-state' to match the name of the
	dynamically-scoped variable in `org-todo'.

	* org-agenda.el (entry, org-diary, org-class): Fix regression:
	rename `org-entry' to `entry'.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-todo): Fix regression in `org-todo'.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-C.el (org-babel-C-execute): Add .exe to the end of compiled
	C files on windows.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-code): Escape all lines when exporting
	Org-mode blocks.

	* ob.el (org-babel-parse-src-block-match): Make use of the new
	language argument to org-babel-strip-protective-commas.
	(org-babel-parse-inline-src-block-match): Make use of the new
	language argument to org-babel-strip-protective-commas.
	(org-babel-strip-protective-commas): Now accepts a language
	argument.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-fast-tag-selection): Fix an bug when listing tags
	for completion.

2012-04-01  Ilya Shlyakhter  <ilya_shl@alum.mit.edu>  (tiny change)

	* org.el (org-delete-property-globally): Fix a bug that left
	blank line in place of the property, instead of removing the line.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* ob-maxima.el (org-babel-maxima-command): Add group information
	to the defcustom.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-mode): Use `buffer-face-mode' to remap the 'default
	face to 'org-default.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-ascii.el (org-export-as-ascii): Fix escaping of underscores
	in links.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el: Prevent a bug while defining the menu by requiring
	`org-beamer' when necessary.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (orgtbl-self-insert-command):
	Use `backward-delete-char' instead of `delete-backward-char' as this
	last command gets caught by the compiler which says to not use it
	in programs.  `backward-delete-char' is just an alias for
	`delete-backward-char' which is internally remapped to
	`org-delete-backward-char' for optimization purpose.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-subcontent): Bugfix: when
	`org-export-latex-low-levels' is nil, do not export low levels.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-insert-result): Fix bug in indented wrapped
	results insertion.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-set-tags): Include `org-tag-alist' in the list of
	possible completions, even when there are tags defined in the
	buffer.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-set-tags): Don't add a column when there is only one
	tag offered for completion.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-fast-tag-selection): Include tags from
	`org-tag-alist' when completing with the TAB key.

2012-04-01  Shoji Nishimura  <nishimura.shoji@gmail.com>  (tiny change)

	* org.el (org-display-inline-images): Honor the ̀beg' parameter.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-subcontent): Don't insert a
	linebreak when itemizing a subtree that is just a headline.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-lob.el (org-babel-lob-get-info): Remove extra []s when
	parsing inline call_foo lines.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-maxima.el (org-babel-maxima-command): The maxima command used
	should be configurable (defaults to maxima-command if defined).
	(org-babel-execute:maxima): The maxima command used should be
	configurable (defaults to maxima-command if defined).

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-C.el (org-babel-C-execute): Add the local directory to the
	library search path for C/C++ block compilation.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-where-is-src-block-result): Don't truncate
	results name on call line execution.

2012-04-01  Ilya Shlyakhter  <ilya_shl@alum.mit.edu>  (tiny change)

	* org-colview.el (org-columns-cleanup-item): Handle case of empty
	headline.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-delete-definitions): Fix LaTeX
	export error when a src block produces fake footnotes.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-read-date): Don't mention `parse-time-weekdays' and
	`parse-time-months' in the docstring.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-filter-apply): Bugfix: Add let
	binding.

2012-04-01  Bastien Guerry  <bzg@gnu.org>  (tiny change)

	* org-colview.el (org-columns-compute): Also consider inline tasks
	when computing the sum.

2012-04-01  Thomas Morgan  <tlm@ziiuu.com>  (tiny change)

	* org-habit.el (org-habit-insert-consistency-graphs):
	Fix alignment of consistency graph in filtered agenda view.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-as-latex): Fix bug in setting the
	export directory according to the LaTeX options.

2012-04-01  K. Nagashima  <uni.naga@gmail.com>  (tiny change)

	* org.el (org-show-subtree): Make interactive.

2012-04-01  Ilya Shlyakhter  <ilya_shl@alum.mit.edu>

	* org-clock.el (org-clock-get-table-data): Make sure todo-only
	does not leak when it is set by make-org-tags-macher.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-cycle-internal-local): Don't try to hide drawers
	within subtrees in this function, it slows cycling down.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-custom-commands-local-options):
	Fix incorrect custom option definition.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-colview.el (org-columns-display-here): Bugfix: use the date
	as the value for the ITEM column when displaying a summary.

2012-04-01  Martyn Jago  <martyn.jago@btinternet.com>

	* ob-lilypond.el: Re-direct homepage to Worg.

2012-04-01  Martyn Jago  <martyn.jago@btinternet.com>

	* ob-lilypond.el: Leave versioning to Org.

2012-04-01  Martyn Jago  <martyn.jago@btinternet.com>

	* ob-lilypond.el: Fix compiler warning.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-format-entity-caption): Enumerate entities
	that have either a caption or a label.
	(org-odt-label-styles, org-odt-category-map-alist): Add a
	separator between sequence number and caption.  Introduced two
	new label styles for handling of math formula and math label.
	(org-odt-format-label-definition)
	(org-export-odt-format-formula): Propagate above changes.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-enforce-todo-dependencies): Fix docstring.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-export-odt-category-strings): New custom
	variable.
	(org-odt-category-map-alist): Modify interpretation.
	Don't use the same field to double up as both a OpenDocument
	variable and a category string.  Entries in this list now
	specify only the OpenDocument variable.  Category strings are
	obtained through an indirect lookup of
	`org-export-odt-category-strings'.  Use same OpenDocument
	variables as what LibreOffice uses for various entities.
	Fix docstring.
	(org-odt-add-label-definition)
	(org-odt-format-label-definition)
	(org-odt-format-label-reference): Propagate above changes.

2012-04-01  Bastien Guerry  <bzg@gnu.org>  (tiny change)

	* org-latex.el (org-export-as-latex): Check TeX-master correctly.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-category-map-alist): Update docstring.
	(org-export-odt-user-categories)
	(org-export-odt-get-category-from-label)
	(org-odt-get-label-category-and-style): Remove.
	(org-odt-add-label-definition): Propagate above changes.

2012-04-01  Bastien Guerry  <bzg@gnu.org>  (tiny change)

	* org.el (org-refile): Don't allow creation of parents when using
	the refile command to go to a headline.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-format-org-link): Resolve links to headlines
	as section numbers only if section numbering is on.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (format-spec): Require 'format-spec.

2012-04-01  Bastien Guerry  <bzg@gnu.org>  (tiny change)

	* org-latex.el (org-export-as-latex): Fix TeX-master declaration.

2012-04-01  Ilya Shlyakhter  <ilya_shl@alum.mit.edu>  (tiny change)

	* org.el (org-imenu-get-tree): Check that looking-at succeeds
	before using match results.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-exp-blocks.el (org-ditaa-jar-path): Make a defcustom.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-lparse.el (org-do-lparse): Make effective setting of
	`org-export-headline-levels' available to the ODT exporter.
	Also remove some stale comments.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-begin-toc): Handle named HTML entities in
	per-language string for "Table Of Contents".

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-exp-blocks.el (org-ditaa-jar-path): Fix merge conflict.

2012-04-01  Shaun Johnson  <shaun@slugfest.demon.co.uk>  (tiny change)

	* org-exp-blocks.el (org-ditaa-jar-path): Better heuristic to find
	the libary name.

2012-04-01  Suvayu Ali  <fatkasuvayu+linux@gmail.com>

	* org-src.el (org-edit-src-code): Change let bind to let*, e.g. if
	case-fold-search is bound to nil globally, the
	(case-fold-search t) doesn't work until we get to the body.

2012-04-01  Bastien Guerry  <bzg@gnu.org>  (tiny change)

	* org-latex.el (org-export-latex-tables): Allow to use
	sidewaystable.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-expand-noweb-references): Fix bug in src name
	regexp when using *org-babel-use-quick-and-dirty-noweb-expansion*.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org.el (org-scan-tags): Require one or more spaces (+) between
	keyword and headline.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-prepare-agenda): Don't reset
	`org-done-keywords-for-agenda' when `org-agenda-multi'.

2012-04-01  Thomas Morgan  <tlm@ziiuu.com>  (tiny change)

	* org-habit.el (org-habit-insert-consistency-graphs): Fix bug
	while inserting habit graph in the agenda buffer.

2012-04-01  Bastien Guerry  <bzg@gnu.org>  (tiny change)

	* org-src.el (org-src-edit-buffer-p): New function.

2012-04-01  Bastien Guerry  <bzg@gnu.org>  (tiny change)

	* org-agenda.el (org-agenda-skip-if): Fix the order conditions are
	being checked.  Also enhance the docstring a bit.

2012-04-01  Bastien Guerry  <bzg@gnu.org>  (tiny change)

	* org-agenda.el (org-agenda-tree-to-indirect-buffer): Fix the
	display of indirect agenda window.

2012-04-01  Bastien Guerry  <bzg@gnu.org>  (tiny change)

	* org.el (org-create-formula-image, org-dvipng-color): Fix XEmacs
	compatibility bug.

2012-04-01  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org-clock.el (org-clock-get-table-data): Bind org-scanner-tags
	to tags-list and org-trust-scanner-tags to t while evaluating the
	matcher, since the matcher is always evaluated at the current
	entry.

2012-04-01  Ilya Shlyakhter  <ilya_shl@alum.mit.edu>  (tiny change)

	* org.el (org-scan-tags): Bind org-trust-scanner-tags to t while
	evaluating the matcher, since the matcher is always evaluated at
	the current entry.

2012-04-01  Ilya Shlyakhter  <ilya_shl@alum.mit.edu>  (tiny change)

	* ob-lilypond.el (ly-compile-lilyfile): Fix misplaced comma in a
	quoting expression.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-merge-params): Add "eval" as acceptable noweb
	argument.
	(org-babel-noweb-p): The "eval" argument only expands during
	evaluation.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-strip-protective-commas): Declared.

	* org-agenda.el (org-agenda-filtered-by-category): Declared.
	(org-agenda-filter-apply): Capture free variable.

	* org-footnote.el (org-skip-whitespace): Declared.

	* org-mobile.el (org-agenda-filter): Declared.

	* org-src.el (org-strip-protective-commas): Declared.

2012-04-01  Sebastien Vauban  <sva@mygooglest.com>  (tiny change)

	* org.el (org-version): Add autoload cookie.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-attach.el (org-attach-store-link-p): Remove spurious quote
	in customization form choice.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-sh.el (org-babel-execute:sh): Pass all params to subroutine.
	(org-babel-sh-evaluate): Apply :shebang and :padline to shell script
	execution.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-insert-result): Ensure correct order for empty
	result wrapping blocks.

2012-04-01  Martyn Jago  <martyn.jago@btinternet.com>

	* ob-lilypond.el: Make auditioning of midi and pdf asynchronous,
	and add easy pdf generation in the form of `ly-gen-pdf' variable.

2012-04-01  Deech  <deech@deech-ThinkPad-X200.none>  (tiny change)

	* ob-tangle.el (org-babel-spec-to-string): The link generated by
	org-store-link is escaped twice when tangling with ":comments yes"
	flag.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Remove another useless space
	before tag.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Remove another useless space
	before tag.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Remove useless space before
	tag.

2012-04-01  Sebastien Vauban  <sva@mygooglest.com>  (tiny change)

	* org.el (org-version): Add autoload cookie.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-get-category): Save match data.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-tangle.el (org-babel-tangle): Don't prompt for a file name if
	:tangle is specified.

	* ob.el (org-babel-expand-noweb-references): Widen buffer when
	expanding noweb references.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-table.el (sbe): Don't accidentally leave a `t' value when
	variables are force interpreted as strings.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-bbdb.el (org-bbdb-open, org-bbdb-open-old)
	(org-bbdb-open-new): Pass record name to avoid dynamic scoping.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-bbdb.el (bbdb-record-get-field, bbdb-search-name)
	(bbdb-search-organization): Declare functions to silence byte
	compiler.

2012-04-01  Bernt Hansen  <bernt@norang.ca>

	* org.el (org-clone-subtree-with-time-shift): Fix task cloning for
	repeating tasks using .+n and ++n syntax.

2012-04-01  Karl Fogel  <kfogel@red-bean.com>  (tiny change)

	* org-agenda.el (org-agenda-highlight-todo): Handle the case of a
	heading that has a date but no todo keyword.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-find-named-result): Fix code block replacement
	with results.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Do not normalize
	labels when sort-only is non-nil.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Remove an useless part
	of the function.
	(org-insert-footnote-reference-near-definition): Remove function.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Fix normalization of
	inline footnotes with no footnote section.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-bbdb.el (org-bbdb-old): Replace `defvar' after loading 'bbdb
	to check for old or new version by a check for the required
	function in `org-bbdb-open' and `org-bbdb-store-link'.
	(org-bbdb-store-link, org-bbdb-open): Check which version of bbdb is
	to be used.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-find-named-result): Don't miss a code block
	when there are confounding spaces after the result name.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-lob.el (org-babel-block-lob-one-liner-regexp): Less greedy
	regular expressions.
	(org-babel-inline-lob-one-liner-regexp): Less greedy regular
	expressions.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-examplize-region): Fix bug in examplization.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-link-search): Search for #+name affiliated keywords
	and invisible targets.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-lparse.el (org-lparse-end-footnote-definition): Cleanup
	newlines in a transcoded footnote definition.  This ensures that
	the line that is currently being processed by `org-do-lparse' loop
	doesn't get broken up into multiple lines.  Fix for the following
	bug -

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-footnote.el (org-footnote-normalize): Force a paragraph
	break after the last footnote definition.  This is an an implicit
	assumption made by the org-lparse.el library.  With this change,
	footnote definitions can reliably be exported with ODT backend.
	See https://lists.gnu.org/r/emacs-orgmode/2012-02/msg01013.html.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-ditaa.el (org-ditaa-jar-path): Fix a recursive load error.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct): Fix small bug introduced by
	commit 8b7a3f249803aba612f9ad3ae50c2fc986247da4 in Org's git repo.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-ditaa.el (org-ditaa-jar-path): Already defined in
	org-exp-blocks.el.

	* org-exp-blocks.el (org-ditaa-jar-path): Declare appropriately
	for the fact that this is really now a Babel thing -- even if it
	is used here and the definition should remain here for reasons of
	load dependencies.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-bbdb.el (org-bbdb-old): Wrap `defvar' so the variable gets
	defined after bbdb was loaded.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org-latex.el (org-export-latex-tables): Don't add spurious
	preceding newline if caption is not above a longtable.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-insert-toc): Remove this stray,
	dysfunctional routine.  This possibly has crept in because of the
	broken merges between "maint" and "origin" branches.
	(org-odt-begin-table): Don't emit an empty paragraph when a table is
	neither labeled nor captioned.
	(org-odt-init-outfile): Remove reference to an unused variable.

2012-04-01  Viktor Rosenfeld  <listuser36@googlemail.com>

	* ob-sql.el (org-babel-execute:sql): Add support for MonetDB to
	SQL code blocks.

2012-04-01  Andreas Leha  <andreas.leha@med.uni-goettingen.de>

	* ob.el (org-babel-goto-named-src-block): Pushing the point to the
	org-mark-ring and guessing at the code block name to jump to.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-agenda-tree-to-indirect-buffer): Fix handling
	of indirect buffer and window.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-forbidden-blocks): Allow footnotes
	in verse blocks.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-forbidden-blocks): Allow footnotes
	in verse blocks.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-table-clean-before-export): Ignore table rows
	defining parameters for formulas during export.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-get-item-number): New function.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-ending-method, org-list-end-regexp):
	Remove variables.
	(org-in-item-p, org-list-separating-blank-lines-number)
	(org-list-parse-list, org-list-struct): Apply changes.

	* org-exp.el (org-export-mark-list-end)
	(org-export-mark-list-properties): Apply changes.

	* org-latex.el (org-export-latex-lists): Apply changes.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-cycle-internal-local): Correctly unfold headlines
	containing an inlinetask.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-structure-template-alist): Fix missing angle
	brackets for muse export style.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org.el (org-recenter-calendar): Use `with-selected-window' to
	select calendar window and save currently selected window and
	current buffer.

2012-04-01  Toby S. Cubitt  <tsc25@cantab.net>  (tiny change)

	* org.el (org-goto): Call org-refile-get-location with NO-EXCLUDE
	argument set, otherwise not only are headlines in the current
	subtree excluded, but it throws an error if point happens not to
	be within a subtree (e.g. at start of buffer).

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org.el (org-scan-tags): Fix highlighting in sparse-tree.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-clock.el (org-in-clocktable-p): Move to org.el.

	* org.el (org-in-clocktable-p): New function.  Moved from
	org-clock.el.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-exp.el (org-export-get-title-from-subtree): Don't format
	tags in title if title headline does not have tags.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-cycle-internal-local): Fix bug: hide drawers in
	inline tasks too.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-format-preamble): Don't insert TOC here.
	Delay it till the end of export.
	(org-odt-begin-document-body): Make a note of the default
	position of TOC in `org-lparse-dyn-first-heading-pos'.
	(org-odt-insert-toc): Insert TOC as directed by
	[TABLE-OF-CONTENTS] line or at the default position.
	(org-odt-end-export): Call `org-odt-insert-toc'.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-preview-latex-fragment): Throw an error when called
	from a non-file buffer.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-capture.el (org-capture-place-item): Don't search for
	position in existing list if :exact-position was supplied.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-set-font-lock-defaults): Fix bug in done headline
	fontification.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-format-textbox): Honor user-specified width
	in captioned images.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org.el (org-update-property-plist): Fix bug in property list
	updates.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-balanced-split): Explicit checking if list
	before calling member.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-sqlite.el (org-babel-execute:sqlite): Specify the use of ","
	as the separator to `org-table-convert-region'.  Fixes errors when
	only one result per line of output.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-strip-protective-commas):
	Use `org-strip-protective-commas'.

	* org-exp.el (org-export-select-backend-specific-text):
	Use `org-strip-protective-commas'.

	* org-src.el (org-edit-src-code):
	Use `org-strip-protective-commas'.

	* org.el (org-strip-protective-commas): Single definition for this
	functionality.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-sql.el: Mention ob-sqlite in the comments of ob-sql.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-capture.el (org-capture-prepare-finalize-hook): New hook.
	Run before the finalization process starts.
	(org-capture-finalize): Run new hook.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org.el (org-entry-get): Generalize to multiple "prop+"
	properties.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org-src.el (org-src-mode-map): Rebinding `org-edit-src-save' in
	the `org-src-mode-map'.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org.el (org-recenter-calendar): Use `with-selected-window' to
	select calendar window and save currently selected window and
	current buffer.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-ending-method, org-list-end-regexp):
	Remove variables.
	(org-in-item-p, org-list-separating-blank-lines-number)
	(org-list-parse-list, org-list-struct): Apply changes.

	* org-exp.el (org-export-mark-list-end)
	(org-export-mark-list-properties): Apply changes.

	* org-latex.el (org-export-latex-lists): Apply changes.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org.el (org-entry-get): Accumulate properties from subtree
	property drawers.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org.el (org-entry-get): Accumulate properties from subtree
	property drawers.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-export-odt-image-size-probe-method)
	(org-odt-do-image-size): Use imagemagick preferentially to
	determine image sizes.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-export-as-odt-to-buffer)
	(org-replace-region-by-odt, org-export-region-as-odt):
	Remove these interactive functions.  They are of questionable value.

2012-04-01  Toby S. Cubitt  <tsc25@cantab.net>  (tiny change)

	* org.el (org-goto): Call org-refile-get-location with NO-EXCLUDE
	argument set, otherwise not only are headlines in the current
	subtree excluded, but it throws an error if point happens not to
	be within a subtree (e.g. at start of buffer).

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-kill-product-buffer-when-displayed)
	(org-export-initial-scope, org-export-date-timestamp-format)
	(org-export-with-tasks, org-export-email-info)
	(org-export-table-remove-empty-lines): Add version tag.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-cycle-internal-local): Correctly unfold headlines
	containing an inlinetask.

2012-04-01  Bernt Hansen  <bernt@norang.ca>

	* org-clock.el (org-clock-out): Do not delete the current clocking
	task when org-clock-out-hook clocks in another task.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org.el (org-scan-tags): Fix highlighting in sparse-tree.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-export-odt-convert-processes): Re-define
	(org-export-odt-convert-capabilities): Fix an accidental
	regression.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-export-odt-convert-capabilities): Change the
	default value.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-clock.el (org-in-clocktable-p): Move to org.el.

	* org.el (org-in-clocktable-p): New function.  Moved from org-clock.el.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-exp.el (org-export-get-title-from-subtree): Don't format
	tags in title if title headline does not have tags.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-blank-before-new-entry)
	(org-export-footnotes-seen, org-export-footnotes-data): Fix bogus
	declarations.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-beginning-of-line, org-end-of-line): Fix special C-a
	and C-e behavior with visual lines.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org-exp-blocks.el (org-export-blocks): Change the name of
	exporting comment blocks given that it seems regular comment
	blocks no longer export.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-get-export-buffer): Access current
	export buffer.
	(org-babel-exp-in-export-file): Access current export buffer.
	(org-babel-exp-src-block): Access current export buffer.
	(org-babel-exp-inline-src-blocks): Access current export buffer.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ob-exp.el (org-babel-exp-in-export-file)
	(org-babel-exp-src-block, org-babel-exp-inline-src-blocks):
	Allow org-current-export-file to contain a buffer.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-lparse.el (org-lparse-do-convert): Replace `call-process'
	with `shell-command-to-string'.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-create-definition): Fix space
	insertion when creating a new footnote.  This fixes newline
	munching when `org-footnote-section' is nil and blank lines
	stacking when it isn't nil.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Make sure that
	footnotes are moved to a single place during export.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Ensure footnote
	definition will be inserted at the end of the section
	corresponding to to its first reference.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-at-definition-p): Make sure to
	move point at the beginning of the separator before skiping white
	spaces.  Refactor code.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-src-block): Strip noweb references on
	export when "strip-export".

	* ob.el (org-babel-common-header-args-w-values): New noweb
	header value.
	(org-babel-merge-params): New noweb header value.
	(org-babel-noweb-p): New noweb header value.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-tangle.el (org-babel-tangle-clean): Just use default value.

	* ob.el (org-babel-noweb-wrap): Add default value.
	(org-babel-expand-noweb-references): Just use default value.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-select-backend-specific-text): Always
	preserve original indentation as a text property so that lists do
	not get broken by indentation at column 0.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-expand-noweb-references): Don't allow newlines
	in source names in noweb references.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-fill-line-break-nobreak-p): New function.
	(org-set-autofill-regexps): Add previous function to
	`fill-nobreak-predicate'.

2012-04-01  Vitalie Spinu  <spinuvit@gmail.com>  (tiny change)

	* ob-R.el (org-babel-R-evaluate-session): Inhibit R evaluation
	visibility regardless of local user customization.

2012-04-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-inlinetask.el (org-inlinetask-show-first-star): New option.
	(org-inlinetask-fontify): Honor `org-inlinetask-show-first-star'.

	* org-indent.el (org-indent-set-line-properties):
	Honor `org-inlinetask-show-first-star'.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-set-regexps-and-options): Ensure `org-drawers'
	doesn't contain duplicates.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-at-drawer-p): Normalize the docstring to match other
	`org-at-*-p' docstrings.
	(org-indent-block, org-indent-drawer, org-at-block-p):
	New functions.
	(org-metaright): Use the new functions to indent a drawer or a
	block depending on the context.  Also update the docstring.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-set-regexps-and-options): Set the value of
	`org-drawers' by adding the value of the infile #+DRAWERS option
	to that of the existing `org-drawers'.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-cycle-internal-local): Fix bug: hide drawers in
	inline tasks too.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-inlinetask.el (org-inlinetask-toggle-visibility):
	Use `org-show-entry' instead of `outline-flag-region' to keep the
	drawers folded when unfolding an inline task.

2012-04-01  Torsten Anders  <torsten.anders@beds.ac.uk>  (tiny change)

	* org-beamer.el (org-beamer-environments-default): Add support and
	keybinding for the `exampleblock' environment.

2012-04-01  Michael Brand  <michael.ch.brand@gmail.com>

	* org.el (org-open-link-from-string): Regard `reference-buffer'
	when setting `org-inhibit-startup'.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-non-block-elements): Don't insert extra
	space between inline src block and results on export.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-get-inline-src-block-matches): Allow *any*
	punctuation to proceed an inline src block.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-get-inline-src-block-matches): Add ( to the
	list of characters allowed to proceed an inline src block.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-tangle.el (org-babel-tangle-clean): Use the customizable
	noweb wrappers.

	* ob.el (org-babel-noweb-wrap-start): Begin a noweb reference.
	(org-babel-noweb-wrap-end): End a noweb reference.
	(org-babel-noweb-wrap): Apply the customizable noweb wrappers.
	(org-babel-expand-noweb-references): Use the customizable noweb
	wrappers.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-beginning-of-line): Handle case when there's no
	character after box.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-format-preamble): Don't insert TOC here.
	Delay it till the end of export.
	(org-odt-begin-document-body): Make a note of the default
	position of TOC in `org-lparse-dyn-first-heading-pos'.
	(org-odt-insert-toc): Insert TOC as directed by
	[TABLE-OF-CONTENTS] line or at the default position.
	(org-odt-end-export): Call `org-odt-insert-toc'.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-preview-latex-fragment): Throw an error when called
	from a non-file buffer.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-insert-property-drawer): Not an interactive
	command anymore.
	(org-insert-drawer): With a prefix argument, insert a property
	drawer.  Check for headline within the region before inserting the
	drawer.  Don't include special drawers in the completion table.
	(org-mode-map): New keybinding `C-c C-x d' for
	`org-insert-drawer'.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-insert-drawer): Support completion over known drawer
	names and inserting a drawer around the current region.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-insert-drawer): New function.
	(org-insert-property-drawer): Use it.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-list.el (org-mark-list): New function.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-pcomplete.el (pcomplete/org-mode/drawer): New function to
	complete drawer at point.
	(org-thing-at-point): Use it.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-meta-return): Use `newline-and-indent' when in a
	property drawer.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-structure-template-alist): Fix docstring: the
	feature is not experimental anymore.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-show-and-scroll-up): Allow `C-u' to
	display the item without unfolding drawers and logbooks.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-src.el (org-edit-src-code): Make sure `buffer-file-name' is
	always nil.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-structure-template-alist): Fix missing angle
	brackets for muse export style.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-read-date): New parameter `inactive' when reading
	for insertion of inactive timestamps.
	(org-time-stamp, org-read-date-display): Use the new
	parameter.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-expand-noweb-references): Only allow
	reference names which start and end with non-whitespace characters.
	Also, raise errors as appropriate given org-babel-noweb-error-langs.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-src.el (org-src-in-org-buffer): Save and restore
	`buffer-undo-list' after editing.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-common-header-args-w-values): Add new header
	argument.
	(org-babel-expand-noweb-references): Use header argument rather than
	customization variable.

2012-04-01  David Maus  <dmaus@ictsoc.de>

	* org-capture.el (org-capture-place-item): Don't search for
	position in existing list if :exact-position was supplied.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-noweb-separator): Custom variable for
	accumulated noweb references.
	(org-babel-expand-noweb-references): Allow separator for noweb
	references.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-beginning-of-line): In an item, special position
	for C-a is after check-box, if any.
	(org-special-ctrl-a/e): Modify doc-string accordingly.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-export-odt-format-formula): Use :style
	property to specify custom table styles.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-call-line-template): Control export of
	additional call line information.
	(org-babel-exp-non-block-elements): Fancier call line export.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-entity-frame-styles): Add frame params
	for images that are anchored as character.
	(org-export-odt-format-image): Handle new anchor type
	"as-char".
	(org-export-odt-default-image-sizes-alist): Misc. change.
	(org-export-odt-format-formula): Misc. change.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-check-src-block): Don't report valid header
	arguments as suspicious.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-non-block-elements): Map over both
	inline src blocks and call lines on export.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-label-styles): Add a new style.
	(org-odt-category-map-alist): Use it.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-table-style-format): New.  Template for
	auto-generated table styles.
	(org-odt-automatic-styles, org-odt-object-counters):
	New variables.
	(org-odt-add-automatic-style): New function.
	(org-odt-write-automatic-styles): New function.
	Create automatic styles for tables that have custom :rel-width.
	(org-odt-begin-table): Parse attributes specified with
	"#+ATTR_ODT: " option and use it to create an automatic table
	style.
	(org-odt-save-as-outfile):
	Call `org-odt-add-write-automatic-styles'.
	(org-odt-init-outfile): Init newly add variables.
	(org-odt-section-count): Remove it.
	(org-odt-begin-section): Use `org-odt-add-automatic-style' to
	generate an automatic section name.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-map-executables): Correctly position point when
	mapping hits an inline code block.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-execute-src-block): Ensure params are
	incorporated *before* checking if evaluation is legal.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-lob-one-liners): Ensure `end' is a
	marker so it is updated as required during export.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org-src.el (org-src-in-org-buffer): Run commands in the parent
	buffer.
	(org-edit-src-save): Use new macro.
	(org-src-tangle): Tangle the parent buffer.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-set-font-lock-defaults): Fix bug in done
	headline fontification.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-set-font-lock-defaults): Fix bug in done
	headline fontification.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-return): Act normally when in code blocks.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-in-src-block-p): New function.
	(org-context): Return new contexts :clocktable and :src-block.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-set-tags-command, org-set-tags): Make ̀C-u C-c
	C-q' do the right thing even when point is before the first
	heading.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-noweb-p): Disambiguate intersection name.

2012-04-01  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-format-textbox): Honor user-specified
	width in captioned images.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-map-src-blocks): Replace gensym with make-symbol.
	(org-babel-map-inline-src-blocks): Replace gensym with make-symbol.
	(org-babel-map-call-lines): Replace gensym with make-symbol.
	(org-babel-map-executables): Replace gensym with make-symbol.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-results): Alter a copy of info.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html):
	Initialize `html-pre-real-contents' correctly.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html):
	Initialize `html-pre-real-contents' correctly.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-code): Ensure code block name is a
	string on export.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-code-template): Customizable code
	block export format string.
	(org-babel-exp-code): Customizable code block export.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-clojure.el (org-babel-execute:clojure): Remove dependency
	on deprecated swank-clojure.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-map-src-blocks): Don't pollute symbol space.
	(org-babel-map-inline-src-blocks): Don't pollute symbol space.
	(org-babel-map-call-lines): Don't pollute symbol space.
	(org-babel-map-executables): Map over *all* executable Org-mode
	elements.
	(org-babel-execute-buffer): Execute elements in buffer order instead
	of arbitrarily.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-ctrl-c-ctrl-c): Fix a naive structure backup.
	Those must be done with `copy-tree'.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org-src.el (org-edit-src-code): Referenced code block should
	not be evaluated on code block edit.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-structure-template-alist): Use uppercase for
	keywords.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-insert-result): Capitalize RESULTS in :wrap'd
	code block results.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-results-keyword): New user-configurable
	results keyword.
	(org-babel-where-is-src-block-result): Use new user-configurable
	results keyword.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-refresh-maybe): Check for new
	headlines from the beginning of the line to be sure to catch
	any newly inserted headline there.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-exp.el (org-babel-exp-src-block): Use `org-babel-noweb-p'.
	(org-babel-exp-inline-src-blocks): Use `org-babel-noweb-p'.

	* ob-tangle.el (org-babel-tangle-collect-blocks):
	Use `org-babel-noweb-p'.

	* ob.el (org-babel-execute-src-block): Use `org-babel-noweb-p'.
	(org-babel-expand-src-block): Use `org-babel-noweb-p'.
	(org-babel-load-in-session): Use `org-babel-noweb-p'.
	(org-babel-merge-params): Use `org-babel-noweb-p'.
	(org-babel-noweb-p): New function used to determine if noweb
	expansion should be carried out in a given context.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org.el (org-update-property-plist): Fix bug in property list
	updates.

2012-04-01  François Pinard  <pinard@iro.umontreal.ca>  (tiny change)

	* org.el (org-kill-line): Use `kill-visual-line' in
	`visual-line-mode'.

2012-04-01  Bernt Hansen  <bernt@norang.ca>

	* org-agenda.el (org-agenda-switch-to): Widen org buffer only if point
	is outside the current restriction.

2012-04-01  Bernt Hansen  <bernt@norang.ca>

	* org-agenda.el (org-agenda-clock-in): Save restriction when clocking
	in from the agenda.

2012-04-01  Bernt Hansen  <bernt@norang.ca>

	* org.el: Honor existing restrictions when regenerating the agenda.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el: New alias for `list-diary-entries-hook'.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-common-header-args-w-values): Add the new
	header argument name.
	(org-babel-insert-result): Respect the value of the :wrap header
	argument when inserting results.
	(org-babel-result-end): Find the end of arbitrarily named result
	blocks.

2012-04-01  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-refresh-maybe): Check for new
	headlines from the beginning of the line to be sure to catch
	any newly inserted headline there.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* org.el (org-update-property-plist): Remove old instances of
	property when adding a new value for property.

2012-04-01  Martyn Jago  <martyn.jago@btinternet.com>

	* ob-emacs-lisp.el: A comment on the last line of an emacs-lisp
	code block would cause an error when the block is was executed.
	This fix cures this behavior.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-expand-noweb-references): Resurrect dropped
	pieces of a previous patch.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-maxima.el (org-babel-execute:maxima): Fix compiler warning.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-expand-noweb-references): Resurrect dropped
	pieces of a previous patch.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob-maxima.el (org-babel-execute:maxima): Fix compiler warning.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-eshell.el (org-eshell-open): Use (goto-char (point-max))
	instead of (end-of-buffer).

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-bbdb.el (name): Declare variable.
	(bbdb-record-get-field, bbdb-search-name)
	(bbdb-search-organization): Declare as part of ext:bbdb.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-mobile.el (org-mobile-push): Use `org-agenda-tag-filter'
	instead of the obsolete `org-agenda-filter'.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el: Add an alias for `org-agenda-filter'.
	(diary-list-entries-hook): Use the non-obsolete hook.
	(org-agenda-filter-apply): Silent compiler warning.

2012-04-01  Bastien Guerry  <bzg@gnu.org>

	* ob-ditaa.el (org-ditaa-jar-path): Make a defcustom.
	(org-ditaa-jar-option): New option.
	(org-babel-execute:ditaa): Use it.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-balanced-split): Explicit checking if list
	before calling member.

2012-04-01  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-balanced-split): Explicit checking if list
	before calling member.

2012-02-14  Chong Yidong  <cyd@gnu.org>

	* org-footnote.el: Remove bogus defvar values (Bug#10745).

2012-01-05  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-expand-noweb-references): Resurrect dropped
	pieces of a previous patch.

	* ob-maxima.el (org-babel-execute:maxima): Fix compiler warning.

2012-01-05  Bastien Guerry  <bzg@gnu.org>

	* org-eshell.el (org-eshell-open): Use (goto-char (point-max))
	instead of (end-of-buffer).

	* org-bbdb.el (name): Declare variable.
	(bbdb-record-get-field, bbdb-search-name)
	(bbdb-search-organization): Declare as part of ext:bbdb.

	* org-agenda.el: Add an alias for `org-agenda-filter'.
	(diary-list-entries-hook): Use the non-obsolete hook.
	(org-agenda-filter-apply): Silent compiler warnings.

	* org-mobile.el (org-mobile-push): Use `org-agenda-tag-filter'
	instead of the obsolete `org-agenda-filter'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-ctrl-c-ctrl-c): Preserve symmetry when adding
	and removing checkboxes with `C-u C-c C-c' on the first item
	of a list.  Also, don't reinitialize checkboxes that are
	already ticked.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-ts-regexp0, org-ts-regexp1): Also match a time
	value with only one digit for the hours.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-batch-agenda, org-batch-agenda-csv):
	Remove deleted function `org-encode-for-stdout'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-show-context): Complete docstring.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-filter-by-tag):
	Use `read-char-exclusive' instead of `read-char'.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org-clock.el (org-clock-in, org-clock-find-position):
	Remove erraneous space in regexp.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-expand-noweb-references): Rather than using
	a pure regexp solution to resolve noweb references, actually
	check the information of every code block in the buffer.
	This will cause a slowdown in noweb reference expansion, but is
	necessary for correct behavior.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-map-continue-from): Fix typo in docstring.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-property-re): Also match cumulating properties
	like ":prop+:".

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-exp-blocks.el (org-export-blocks-preprocess): Fix regexp for
	matching the end of a block.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-open-at-point): Escape link path for http:,
	https:, ftp:, news:, and doi: links only if the path contains
	space or non-ascii character.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-refile-get-targets): Ignore headlines without a
	true headline.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-map-call-lines): Move this file from
	ob-lob.el into ob.el to ease dependency pains.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-publish.el (org-publish-index-generate-theindex):
	Use theindex.inc for storing index entries, and theindex.org for
	including theindex.inc.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-publish.el (org-publish-index-generate-theindex):
	Create proper file target for index entries in subdirectories.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-protocol.el (org-protocol-check-filename-for-protocol):
	Fix spelling mistake.

2012-01-03  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-export-odt-default-org-styles-alist): Add styles
	for title and subtitle.
	(org-odt-format-toc): New.
	(org-odt-format-preamble): New.  Users can redefine this to
	customize what goes before the document body.  Currently it
	outputs title, author and email, date and toc.
	(org-odt-begin-document-body): Use `org-odt-format-preamble'.
	(org-odt-format-date): Rename from
	`org-odt-iso-date-from-org-timestamp'.  Also added an
	additional param for format string.
	(org-odt-begin-annotation, org-odt-update-meta-file):
	Use `org-odt-format-date'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-at-drawer-p): New function.
	(org-end-of-line): Use it.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (*org-babel-use-quick-and-dirty-noweb-expansion*):
	Controls the method in which noweb references are expanded.
	(org-babel-expand-noweb-references): Bring back the option for
	regexp-based noweb expansion.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-ts-regexp0, org-ts-regexp1): Also match a time value
	with only one digit for the hours.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-ctrl-c-ctrl-c): Don't make `C-c C-c' special
	when ticking the checkbox of the first item.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-write-struct): Add an optional
	argument for structure changes happening outside the function.

	* org.el (org-ctrl-c-ctrl-c): Now, `C-u C-c C-c' on the first
	item of a sub-list should toggle check-box presence of every
	item in the same sub-list.  Also fix check-box insertion on a
	single item.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-filter-preset): New alias.
	(org-agenda-filter-by-category): New command.
	(org-agenda-mode-map): Add the new command.
	(org-agenda-custom-commands-local-options): Add category
	filter preset.
	(org-agenda-mark-filtered-text): Mark both tag and filter
	overlays.
	(org-agenda-category-filter-preset): New variable.
	(org-finalize-agenda, org-agenda-redo)
	(org-agenda-filter-make-matcher, org-agenda-filter-apply):
	Handle both category and tag filters.
	(org-agenda-filter-show-all-tag): Rename from
	`org-agenda-filter-by-tag-show-all'.
	(org-agenda-filter-show-all-cat): New function.
	(org-agenda-set-mode-name): Show the category filter in the
	modeline.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-bbdb.el (org-bbdb-old): New variable.
	(org-bbdb-store-link, org-bbdb-open): Check for
	`org-bbdb-old'.
	(org-bbdb-open-old, org-bbdb-open-new): New functions.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-batch-agenda, org-batch-agenda-csv):
	Remove deleted function `org-encode-for-stdout'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-check-dates-range): New command.
	(org-sparse-tree): Use it.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-write): Rename from
	`org-write-agenda'.
	(org-agenda-mode-map, org-agenda-menu)
	(org-batch-store-agenda-views): Use new name
	`org-agenda-write'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-loop-over-headlines-in-active-region):
	Fix docstring.
	(org-todo, org-deadline, org-schedule): Honor the 'start-level
	value of `org-loop-over-headlines-in-active-region'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-archive.el (org-archive-subtree)
	(org-archive-to-archive-sibling, org-toggle-archive-tag):
	Bugfix: use 'region-start-level.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-show-context): Complete docstring.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-filter-by-tag):
	Use `read-char-exclusive' instead of `read-char'.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-scan-tags): Make sure `org-map-continue-from' is
	nil at each match.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org-clock.el (org-clock-in, org-clock-find-position):
	Remove erraneous space in regexp.

2012-01-03  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-lib-dir): Add docstring.
	(org-odt-data-dir): New variable.  Use this variable to
	control the locations from which the ODT exporter picks the
	OpenDocument styles and schema files from.  Set this variable
	explicitly only if the in-built heuristics for locating the
	above files fails.
	(org-odt-styles-dir-list, org-odt-schema-dir-list):
	New variables.  Pay specific attention to (eval-when-compile ...)
	form through which Makefile's $(datadir) - contained in
	`org-odt-data-dir' - gets compiled in as a "hard coded"
	constant.
	(org-odt-styles-dir, org-export-odt-schema-dir): Add messages to
	aid debugging.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-archive.el (org-archive-subtree)
	(org-archive-to-archive-sibling, org-toggle-archive-tag)
	(org-archive-set-tag): Handle the 'start-level value for
	`org-loop-over-headlines-in-active-region'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-scan-tags): New parameter `start-level' to scan only
	through headlines of that level.
	(org-map-entries): New allowed value `region-start-level' for
	the `scope' parameter, to allow scanning through headlines of
	the same level than the first headline in the region.
	(org-loop-over-headlines-in-active-region): New allowed value
	'start-level.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-archive.el (org-archive-subtree)
	(org-archive-to-archive-sibling, org-archive-set-tag)
	(org-toggle-archive-tag): Allow to loop over the active region by
	using `org-loop-over-headlines-in-active-region'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-todo): Allow to loop over the active region by
	using `org-loop-over-headlines-in-active-region'.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-expand-noweb-references): Rather than using
	a pure regexp solution to resolve noweb references, actually
	check the information of every code block in the buffer.
	This will cause a slowdown in noweb reference expansion, but is
	necessary for correct behavior.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-map-continue-from): Fix typo in docstring.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-write-buffer-name): New variable.
	(org-write-agenda): Use it.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-date-timestamp-format): New option to
	define the way a timestamp in #+DATE will be exported.
	(org-infile-export-plist): Use the new option.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-property-re): Also match cumulating properties
	like ":prop+:".

2012-01-03  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-styles-dir): Assume that the styles
	files are located under `data-directory' of Emacs distribution
	as etc/org/OrgOdtStyles.xml and
	etc/org/OrgOdtContentTemplate.xml.  Also update docstring.
	(org-export-odt-schema-dir): Update docstring.

2012-01-03  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-format-preamble): Honor following user
	options: author, timestamp and email.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-exp-blocks.el (org-export-blocks-preprocess): Fix regexp
	for matching the end of a block.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-eshell.el: New file.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-open-at-point): Escape link path for http:,
	https:, ftp:, news:, and doi: links only if the path contains
	space or non-ascii character.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-beamer.el (org-beamer-fragile-re): Also recognize
	\lstinline and \verb as commands that make a frame fragile.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-refile-get-targets): Ignore headlines without a
	true headline.

2012-01-03  Litvinov Sergey  <slitvinov@gmail.com>

	* ob-octave.el: Add graphical output to png file.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-map-call-lines): Move this file from
	ob-lob.el into ob.el to ease dependency pains.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-publish.el (org-publish-index-generate-theindex):
	Use theindex.inc for storing index entries, and theindex.org for
	including theindex.inc.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-publish.el (org-publish-index-generate-theindex):
	Create proper file target for index entries in subdirectories.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-protocol.el (org-protocol-check-filename-for-protocol):
	Fix spelling mistake.

2012-01-03  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-export-odt-default-org-styles-alist):
	Add styles for title and subtitle.
	(org-odt-format-toc): New.
	(org-odt-format-preamble): New.  Users can redefine this to
	customize what goes before the document body.  Currently it
	outputs title, author and email, date and toc.
	(org-odt-begin-document-body): Use `org-odt-format-preamble'.
	(org-odt-format-date): Rename from
	`org-odt-iso-date-from-org-timestamp'.  Also added an
	additional param for format string.
	(org-odt-begin-annotation, org-odt-update-meta-file):
	Use `org-odt-format-date'.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob-ref.el (org-babel-ref-split-args): Now uses
	`org-babel-balanced-split'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-preamble)
	(org-export-html-postamble): Fix docstrings.
	(org-export-as-html): Insert the string used by a custom
	function for `org-export-html-pre/postamble'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-block-regexp)
	(org-heading-keyword-regexp-format)
	(org-heading-keyword-maybe-regexp-format): Move up to keep the
	byte-compiler happy.

2012-01-03  Dave Abrahams  <dave@boostpro.com>  (tiny change)

	* org-agenda.el (org-agenda-do-tree-to-indirect-buffer):
	New function.
	(org-agenda-tree-to-indirect-buffer): Use the new function.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Fix bug when inserting the
	output of a custom function for the pre/postamble.

2012-01-03  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-format-source-code-or-example):
	Try loading htmlfontify safely.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-odt.el (require): Require htmlfontify.el only if
	emacs-version is greater than 23.2.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-faces.el (org-agenda-calendar-event)
	(org-agenda-calendar-sexp): Use the default face.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-expand-noweb-references): Fix regexp.

2012-01-03  Michael Brand  <michael.ch.brand@gmail.com>

	* org.el (Key bindings): Remap the Outline functions from
	`outline-mode-prefix-map' where possible.

2012-01-03  Christian Moe  <mail@christianmoe.com>  (tiny change)

	* org-html.el (org-export-as-html):
	Apply `org-export-html-get-todo-kwd-class-name' to the class
	attribute of the todo-keyword span tag, not to its text
	content.

2012-01-03  Sebastien Vauban  <sva@mygooglest.com>

	* org-agenda.el (org-agenda-get-timestamps)
	(org-agenda-get-sexps): Use face for highlighting "calendar"
	events.

2012-01-03  Peter Münster  <pmlists@free.fr>  (tiny change)

	* org.el (org-add-planning-info): Treat absolute time too.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-transpose-table-at-point): Don't use
	̀remove-if-not'.

2012-01-03  Dave Abrahams  <dave@boostpro.com>  (tiny change)

	* org-clock.el (org-clock-out-if-current): Check the clock
	buffer is existing.

2012-01-03  Bernt Hansen  <bernt@norang.ca>

	* org-clock.el (org-clock-out-if-current): Fix marker in no
	buffer error for task state change in an indirect buffer.

2012-01-03  Michael Brand  <michael.ch.brand@gmail.com>

	* org.el (org-offer-links-in-entry): Make list when assigning
	a single link.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-expand-noweb-references): Rather than
	collect the info from *every* block in the current buffer,
	simply regexp search for those blocks which appear to match
	the continued source name.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob.el (org-babel-insert-result): Do not examplize wrapped
	scalar results, simply wrap them.
	(org-babel-result-end): Find the end of results wrapped in a
	RESULTS drawer.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-todo-yesterday): When called from the agenda,
	use `org-agenda-todo-yesterday' instead.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-transpose-table-at-point): New command.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-headline-anchor-format):
	New option.
	(org-html-level-start): Use the new option.

2012-01-03  Rob Giardina  <rob@giardina.us>  (tiny change)

	* org-agenda.el (org-agenda-with-point-at-orig-entry):
	Small bugfix.

2012-01-03  Christian Moe  <mail@christianmoe.com>  (tiny change)

	* org-special-blocks.el
	(org-special-blocks-convert-html-special-cookies):
	Close paragraph before opening or closing the <div>, and open
	paragraph after.  Also changed newline placement to be the same
	as for other blocks.

2012-01-03  Roberto Huelga  <rhuelga@gmail.com>

	* org-clock.el (org-program-exists): Make the function
	compatible with darwin systems.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-exp.el (org-export-normalize-links): Mark bracket links
	before normalization to avoid erroneous normalization of
	bracket link parts.

2012-01-03  Jambunathan K  <kjambunathan@gmail.com>

	* org-odt.el (org-odt-data-dir): Remove.
	(org-odt-styles-dir, org-export-odt-schema-dir):
	New variables.

	* org-odt.el, org-lparse.el: New files.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-set-target-location): Set the
	capture default time also to the prompt time.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-res/src-name-cleanup): Remove #+name
	and #+results lines during preprocess.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob-picolisp.el (ob-comint): Required.
	(comint): Required.
	(cl): Required.
	(run-picolisp): Declared.
	(org-babel-execute:picolisp): Capture free variable, and replace
	function from cl-extra with core function.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* ob-picolisp.el: New file.

	* org.el (org-babel-load-languages): Add Pico Lisp to the list
	of supported code block languages.

2012-01-03  Eric Schulte  <eric.schulte@gmx.com>

	* org-bibtex.el (org-bibtex): Now catches bibtex errors and
	directs the user to the location of the error.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-dim-blocked-tasks): Fix typo.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* ob.el (org-babel-execute-src-block): Fix typo.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-freemind.el (org-freemind-write-mm-buffer): Fix typo.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-link-unescape, org-link-unescape-compound):
	Fix two typos in docstrings.

2012-01-03  Thomas Dye  <dk@poto.local>

	* ob-R.el: Added tikzDevice support.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-clone-subtree-with-time-shift): Remove clocking
	information and empty drawers when preparing a clone.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el: Don't add `org-exp-res/src-name-cleanup' to
	`org-export-blocks-postblock-hook'.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-hide-result-toggle): Skip over header
	argument lines when toggling named code block visibility.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-grab-title-from-buffer):
	Don't license to kill text inside blocks when getting a title.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-confirm-evaluate): Adding support for new
	range of :eval header arguments.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-confirm-evaluate): Inhibit evaluation
	during export when eval is set to "non-export".

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-update-intermediate): New custom
	variable.
	(org-babel-ref-resolve): Optionally update the in-buffer results
	of code blocks which are evaluated to resolve references.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-join-splits-near-ch): Rejoins a list of a
	split string when a character appears on either side of the
	split.
	(org-babel-parse-multiple-vars): Rejoin splits around "=" signs.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* org.el (org-reduce): Add a less functional Org-mode copy of
	the cl reduce function.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-fontify-meta-lines-and-blocks-1):
	Recognize "name" as a valid keyword that can precede a block.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-lob-one-liners): Don't limit
	in-verbatim check to inline code blocks, do lob code blocks as
	well.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-todo): Interpret 0 prefix arg as note inhibitor.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-named-src-block-regexp-for-name):
	Ensure that partial names are not matched.
	(org-babel-named-data-regexp-for-name): Ensure that partial names
	are not matched.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-resolve): Search for named code
	blocks before named data.

	* ob.el (org-babel-named-data-regexp-for-name): New function for
	finding named data.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): Gracefully handle results
	which are neither lists nor strings.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-resolve): Don't change location when
	looking at the contents.

2012-01-03  Milan Zamazal  <pdm@zamazal.org>

	* org.el (org-set-outline-overlay-data):
	Use outline-flag-region to make a region invisible.  This ensures
	all necessary actions, especially adding
	isearch-open-invisible property, are applied.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-in-example-or-verbatim):
	Fix compilation warning.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-find-named-result): Downcase "name" before
	comparison.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lisp.el (org-babel-execute:lisp): Fix typo.
	(org-babel-lisp-vector-to-list): Fix typo.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-in-example-or-verbatim): Some valid
	execution contexts (e.g., call lines) look like commented
	lines.

	* ob.el (org-babel-get-src-block-info): Empty match string doesn't
	count.
	(org-babel-process-params): Always process parameters, even if
	you don't to table splitting.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-exp-res/src-name-cleanup): Update Documentation.

	* ob-lob.el (org-babel-block-lob-one-liner-regexp):
	Update regular expression.
	(org-babel-inline-lob-one-liner-regexp): Update regular
	expression.

	* ob-ref.el (org-babel-ref-resolve): Notice when something that
	looks like a data results may actually be a code block.

	* ob-table.el: Updated documentation.

	* ob.el (org-babel-src-name-regexp): Simplify regexp.
	(org-babel-get-src-block-info): Update match strings.
	(org-babel-data-names): Simplify acceptable names.
	(org-babel-find-named-block): Indentation.
	(org-babel-find-named-result): Update to not return a code block
	as a result.

	* org.el (org-fontify-meta-lines-and-blocks-1):
	Removing references to old syntactic elements.
	(org-additional-option-like-keywords): Removing references to
	old syntactic elements.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-get-todos): Swap calls to `org-trim'
	and `buffer-substring'.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-agenda.el (org-agenda-get-todos): Prevent an error when
	encountering tasks with only the TODO keyword.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-try-cdlatex-tab): Don't try to expand a LaTeX
	environment when at an item or an headline, but allow LaTeX
	fragments.
	(org-cycle): Try to call `cdlatex-tab' before cycling item's or
	headline's visibility, in order to catch LaTeX fragments within.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-export-blocks-preprocess): Require a
	newline and spaces before a code block.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-map-call-lines): Allow mapping of code
	over all call lines in a buffer.

	* ob.el (org-babel-execute-buffer): Execute call lines when
	executing an entire buffer.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-process-params): Don't disassemble tables
	twice.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-in, org-clock-find-position): Make space
	after date optional.

	* org.el (org-set-regexps-and-options)
	(org-ts-regexp, org-ts-regexp-both, org-ts-regexp1)
	(org-ctrl-c-ctrl-c): Make `C-c C-c' on date fix the time stamp.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-lob-execute-maybe): Don't execute a call
	inside a verbatim block.

	* ob-exp.el (org-babel-in-example-or-verbatim): Check for example
	blocks.

2012-01-03  Litvinov Sergey  <slitvinov@gmail.com>

	* ob-maxima.el (org-babel-tangle-lang-exts): Maxima extension.
	(org-babel-maxima-expand): Add input variables and graphic output.
	(org-babel-execute:maxima): Add input variables and graphic output.
	(org-babel-maxima-var-to-maxima): Add input variables and graphic
	output.
	(org-babel-maxima-graphical-output-file): Add input variables and
	graphic output.
	(org-babel-maxima-elisp-to-maxima): Add input variables and graphic
	output.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-fortran.el: New file.  Adding support for Fortran code blocks.
	* org.el (org-babel-load-languages): Adding fortran to this list.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-new): Cannot insert an inline
	footnote at beginning of line anymore.
	(org-footnote-at-reference-p): Don't recognize inline footnotes at
	beginning of line.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-set-font-lock-defaults): Fix small error in matching
	group that prevented fontification of keywords like
	org-comment-string and stars in headlines.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-catch-invisible-edits): New option.
	(org-self-insert-command, org-delete-backward-char)
	(org-delete-char): Call `org-check-before-invisible-edit'.
	(org-check-before-invisible-edit): New function.

2012-01-03  Suvayu Ali  <fatkasuvayu+linux@gmail.com>

	* org-exp.el (org-solidify-link-text): Respect
	org-export-with-tags when forming the export title during subtree
	export.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-heading-regexp, org-heading-keyword-regexp-format)
	(org-heading-keyword-maybe-regexp-format): Globalize variables so
	they are accessible even in buffers not in Org mode.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-insert-link): Don't use default-description if a
	`org-make-link-description-function' is defined.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* org.el (org-set-regexps-and-options): Use property blocks for
	multi-line properties.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-self-insert-command): Don't throw an error when
	editing takes place at the first point of the buffer.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-self-insert-command): Unfold invisible region at
	point or right before point when editing.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-faces.el (org-agenda-filter-tags): Use the 'modeline face as
	default.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-html-expand): Prevent a nil value for STRING to
	return an error, just return nil.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-set-initial-vars): Allow "/"
	character in the #+LaTeX_CLASS option.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-at-reference-p)
	(org-footnote-at-definition-p): Don't store text-properties of
	footnote definitions.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Convert special characters in
	meta tag "author", "date", "keyword" and "description".

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el (org-capture-before-finalize-hook): Docstring
	improvement: mention that the buffer is widened when this hook is
	run.

2012-01-03  Sebastien Vauban  <sva@mygooglest.com>

	* org-html.el (org-export-as-html): Make sure the div for preamble
	is not inserted when the preamble is empty.

2012-01-03  Sebastien Vauban  <sva@mygooglest.com>

	* org-agenda.el (org-agenda-set-mode-name): Highlight tags used
	for filtering (shown in the mode-line).

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-parse-multiple-vars): Trimming excess white
	space from split variables.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-link-search): Add an optional argument preventing
	function from revealing context around match.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (calendar-check-holidays): Declare function.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-return): Fix bug when matching the face property
	before following a link.

2012-01-03  Matt Lundin  <mdl@imapmail.org>

	* org-agenda.el (org-class): Fix holidays symbol in org-class.
	This was resulting in an "Bad sexp..." warning.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-scan-tags): Also remember
	`org-complex-heading-regexp' in a property.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-as-latex): Turn off auto-insert and set
	TeX-master to t when creating new TeX buffers.

	* org-docbook.el (org-export-as-docbook): Turn off auto-insert
	when creating new buffers.

	* org-html.el (org-export-as-html): Turn off auto-insert
	when creating new buffers.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-formula-handle-first/last-rc): Do not
	expand pointers to first/last row/column that are inside a call to
	`remote'.
	(org-table-get-remote-range): Expand pointers to first/last
	row/column.

2012-01-03  Michael Sperber  <sperber@deinprogramm.de>  (tiny change)

	* org-capture.el (org-capture-get-indirect-buffer): Fix XEmacs
	compatibility issue when creating an indirect buffer.

2012-01-03  Christophe Rhodes  <csr21@cantab.net>

	* org-exp.el (org-infile-export-plist): Handle LATEX_CLASS_OPTIONS
	the same way than LATEX_CLASS.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-return): Check the presence of the 'org-link face
	even in contexts where there is more than one face.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sql.el (org-babel-header-arg-names:sql): SQL specific header
	argument names which should be inherited.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-in-block-p): Return matched name of block, if any.
	It can be useful when a list of block names is provided as
	an argument.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-docbook.el (org-export-as-docbook): Fix regexp.

	* org-html.el (org-export-as-html): Fix regexp.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-class): Allow holidays to be skipped.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-shen.el (org-babel-execute:shen): Fix two compilation errors.

2012-01-03  Peter Münster  <pmrb@free.fr>  (tiny change)

	* org-agenda.el (org-agenda-to-appt): Make sure filter-items are
	strings before calling `string-match'.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-at-reference-p)
	(org-footnote-at-definition-p): Remove text-properties from label.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Add a "title" meta tag.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-to-appt): Allow to refine the scope of
	entries to pass to `org-agenda-get-day-entries' and allow to
	filter out entries using a function.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-agenda.el: Fix small display bug.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-set-regexps-and-options): Fix small bug introduced
	by commit dfcb6faef11a2439b56b18a6289803361d402130.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-agenda.el (org-search-view): Simplify regexp.
	(org-agenda-get-todos): Use new format string.

	* org-archive.el (org-archive-all-done): Simplify regexp.

	* org-ascii.el (org-export-as-ascii): More accurate regexp.

	* org-colview.el (org-columns-capture-view): Use new format string
	and new string.

	* org-docbook.el (org-export-as-docbook): More accurate
	regexp.  Also use new regexp to match generic headlines.

	* org-exp.el (org-export-protect-quoted-subtrees): More accurate
	regexp.  Also use new regexp to match generic headlines.

	* org-html.el (org-export-as-html): More accurate regexp.
	Also use new regexp to match generic headlines.

	* org-mouse.el (org-mouse-match-todo-keyword): Remove unused
	and now erroneous function.

	* org.el (org-heading-regexp, org-heading-keyword-regexp-format):
	New variables.
	(org-set-regexps-and-options): Create regexps according to the
	following rule: use spaces only to separate elements from an headline,
	while allowing mixed tabs and spaces for any indentation job.
	(org-nl-done-regexp, org-looking-at-done-regexp): Remove variables.
	(org-set-font-lock-defaults): Fontify again headlines with a keyword
	and no other text.  Use new format strings.
	(org-get-heading, org-toggle-comment, org-prepare-agenda-buffers)
	(org-toggle-fixed-width-section): Use new format string.
	(org-todo): More accurate regexps.
	(org-point-at-end-of-empty-headline): Simplify regexp.
	(org-insert-heading): Headline can sometimes be nil.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-agenda-bulk-action): Bind
	`org-loop-over-headlines-in-active-region' to nil to avoid conflict
	with bulk command.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-deadline, org-schedule): Skip invisible headlines when
	mapping over headlines in active region.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-loop-over-headlines-in-active-region):
	New customization variable.  Loop over headlines in active region.
	(org-schedule, org-deadline): Apply to headlines in region depending
	on new customization variable.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-map-entries): Immediately return if scope is 'region
	but no region is active.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-map-entries): Extend scope 'region to include entire
	body of last headline in active region.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-src.el (org-edit-src-code): Fix typo-bug.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-format-agenda-item, org-scan-tags):
	Rename `org-format-agenda-item' to `org-agenda-format-item'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el: Replace `category-pos' by `org-category-pos' to
	silent byte-compiler.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el: Declare external function `cdlatex-compute-tables'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-set-initial-vars): Fix problem
	when matching #+LaTeX_CLASS.

2012-01-03  Rafael Laboissiere  <rafael@laboissiere.net>  (tiny change)

	* org.el (org-link-search-must-match-exact-headline): Fix typos.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-make-header): Add some hyperref
	options.

2012-01-03  Kai Tetzlaff  <kai.tetzlaff@web.de>  (tiny change)

	* org-publish.el (org-publish-file): Add 'eval'ing the value of
	the :publishing-directory property before using it as destination
	of the publishing project.  This allows to construct the publish
	destination directory dynamically at run-time using the return
	value of a function.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-list-stuck-projects): Fix tiny bug.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-move-date-from-past-immediately-to-today):
	New option.
	(org-agenda-date-later): Improve the logical structure.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* ob-calc.el (featurep): Require calc-store.

	* org-agenda.el (org-agenda-list-stuck-projects): Fix regexp
	special handling.

	* org-compat.el (fboundp): Support for XEmacs.

	* org-exp.el (org-export): Protect XEmacs from `(redisplay)' call.

	* org-footnote.el (org-footnote-re): Optimize macro processing.

	* org.el (org-set-autofill-regexps): Xemacs compatibility.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-balanced-split): Balance both [] and ()
	groupings.
	(org-babel-parse-header-arguments): Be sure to replace removed ":"
	characters.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-parse-header-arguments): Quick fix for a
	tiny bug.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-params-from-properties): Now splits
	multiple var arguments behind a single ":var".
	(org-babel-balanced-split): Separate balanced splitting of
	strings out into a new function.
	(org-babel-parse-multiple-vars): Splits multiple var arguments
	behind a single ":var".

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el: Remap `outline-promote' and `outline-demote' keys to
	`org-promote-subtree' and `org-demote-subtree'.

2012-01-03  Leo Liu  <sdl.web@gmail.com>

	* org-agenda.el (org-agenda-do-context-action): Check if marker is
	valid before use.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org-agenda.el (org-agenda-date-later): Fix shifting of date
	ranges.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el: Removing `org-babel-params-from-buffer' and
	#+PROPERTIES: entirely.

	* ob-exp.el (org-babel-exp-src-block):
	Removing `org-babel-params-from-buffer' and #+PROPERTIES: entirely.

	* ob-lob.el (org-babel-lob-execute):
	Removing `org-babel-params-from-buffer' and #+PROPERTIES: entirely.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-params-from-buffer): Removing #+BABEL:
	lines in favor of general #+PROPERTIES: lines.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sql.el (org-babel-execute:sql): Insert into a temporary
	buffer.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-cdlatex-mode): Run `cdlatex-mode-hook' and
	update the internal cdlatex tables.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sql.el (org-babel-execute:sql): Respect literal-results
	options.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-disassemble-tables): Fix multi-table bug in
	code block colname and rowname handling.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-cache-file-needs-publishing):
	Fix regexp to not inlcude newlines.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-ctrl-c-ctrl-c): Remove table overlays before
	restart.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-fontify-entities): Match entities before
	numbers, as in `\sim2'.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-date-later): Make pushing forward
	a past date to jump immedialtely to today.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-store-forced-table-alignment): Parse the
	column cookie for both alignment and width
	specification.  Store the resulting value in `org-col-cookies'
	property.  Retire the previously used `org-forced-aligns'
	property for consistency.  Renamed local variable `aligns' to
	`cookies'.

	* org-html.el (org-format-org-table-html):
	Use `org-col-cookies'.  Renamed local variable forced-aligns to
	col-cookies.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-latex-to-mathml-jar-file)
	(org-latex-to-mathml-convert-command): New user-customizable
	variables.
	(org-format-latex-mathml-available-p, org-create-math-formula)
	(org-format-latex-as-mathml): New functions.
	(org-format-latex): Add a new local variable block-type that notes
	the nature of the equation - inline or display.  Associate it's
	value to `org-latex-src-embed-type' property of dvipng links.
	Add mathml as new processing type.

2012-01-03  Sébastien Vauban  <wxhgmqzgwmuf@spammotel.com>

	* org.el (org-refile): Add tree name to prompt.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-tables):
	Honor `org-export-latex-table-caption-above'
	(org-export-latex-table-caption-above): New option.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-header-arg): Now including language
	specific header arg values in insertion options.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-header-arg): Fix typo.

2012-01-03  Jambunathan K  <kjambunathan@gmail.com>

	* org-exp.el (org-export-number-lines): Modify.  Add a new
	parameter `preprocess' and use this for backend-agnostic
	handling of literal examples.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-match-substring-regexp)
	(org-match-substring-with-braces-regexp): Allow subscripts and
	superscripts to start at beginning of line.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-common-header-args-w-values): New variable to
	hold common header arguments and their default values.
	(org-babel-header-arg-names): Redefined using the new common
	header arg variable.
	(org-babel-insert-header-arg): New function to help when inserting
	header arguments.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-html.el (org-html-handle-links): Remove unnecessary
	protection markers when publishing link in default format.

2012-01-03  Pieter Praet  <pieter@praet.org>  (tiny change)

	* org-crypt.el (org-crypt-check-auto-save): New function, see
	next change.

	* org-crypt.el (org-decrypt-entry): Break the auto-save-mode
	check out into a separate function, and call it at a later
	point, to assure it only runs when visiting an encrypted
	entry.

2012-01-03  John J Foerch  <jjfoerch@earthlink.net>  (tiny change)

	* org.el (org-log-note-headings): Document new %d and %D
	escapes.
	(org-store-log-note): Implement new %d and %D escapes.

2012-01-03  Dave Abrahams  <dave@boostpro.com>

	* org-agenda.el (org-agenda-follow-indirect): New option.
	(org-agenda-follow-mode): Call `org-agenda-do-context-action' fro
	follow mode.
	(org-agenda-do-context-action): Also do indirect follow mode
	action.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-table.el (sbe): Fix typo in new sbe specification.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-table.el (sbe): If first variable is a string and not a
	cons cell, then interpret it as a string of header arguments
	to be passed to the code block.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-shen.el (shen-eval-defun): Declare external function.
	(org-babel-execute:shen): Move requirement of inf-shen into
	the function in which it is used to fix build error.

	* ob-shen.el: New file.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org.el (org-open-at-point): Make `org-open-at-point' only
	ask once about creating a new headline.

2012-01-03  Nick Dokos  <nicholas.dokos@hp.com>  (tiny change)

	* org.el (org-refile-targets): Elaborated the documentation of
	the variable as suggested by Dave Abrahams.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org.el (org-align-tags-here): Allow tags to be placed right
	after heading.
	(org-tags-column): Document the meaning of tags column 0.

2012-01-03  Niels Giesen  <niels.giesen@gmail.com>

	* org-agenda.el (org-agenda-get-blocks): Show timestamp ranges
	in agenda if start day is same as end day.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-refile-get-location): Ignore errors when
	collection heading to be excluded.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-special-blocks.el
	(org-special-blocks-convert-html-special-cookies): Avoid XHTML
	strict problems by not enclosing special blocks in paragraph tags.

2012-01-03  Bernt Hansen  <bernt@norang.ca>

	* org-html.el (org-export-as-html): Check string-match
	argument.
	(org-html-handle-time-stamps): Check string-match argument.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el
	(org-agenda-skip-additional-timestamps-same-entry):
	Change default value.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-time-string-to-time):
	(org-time-string-to-absolute): Add optional arguments BUFFER and
	POS for error reporting.

	* org-agenda.el (org-get-all-dates):
	(org-agenda-get-timestamps, org-agenda-get-deadlines)
	(org-agenda-get-scheduled, org-agenda-get-blocks): Call time
	stamp parsing functions with information on where the
	timestamp was taken from.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-tree-to-indirect-buffer): Run `org-cycle-hook'
	after `show-all' in indirect buffer.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-parents-alist): When no parent is found
	for an item, set it as the closest less indented item above.
	If none is found, make it a top level item.
	(org-list-write-struct): Externalize code.
	(org-list-struct-fix-item-end): New function.
	(org-list-struct): Remove a now useless fix.

	* org.el (org-ctrl-c-ctrl-c): Use new function.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-end-of-line): When on an item, move point at the
	end of the line, but before any hidden text.  Thus, it's still
	possible to use commands, like `C-c C-c', acting at
	items.  This is still disabled if `org-special-ctrl-a/e'
	ignores `C-e'.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-renumber-fn:N): Small refactoring.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-renumber-fn:N): Fix an
	infloop.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-at-definition-p):
	Remove useless `org-re'.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-renumber-fn:N): Verify point
	is at a real footnote reference or definition before
	renumbering it.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-goto-definition): This patch
	makes sure the function says when a definition has been
	found.  Thus, moving from the reference to the definition
	doesn't offer to create the latter again.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-create-definition):
	Explicitly move point after tag, if it has just been
	inserted.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-gnuplot.el (org-babel-execute:gnuplot): Don't quote file
	names on Windows systems.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-create-definition): When the
	tag is missing, it is created before any existing footnote, or
	at end of buffer.  In the latter case, the marker pointing at
	the position where the new footnote is going to be inserted
	(at end of buffer) stays before the tag.  This patch makes
	sure that the marker will be kept after the tag.

2012-01-03  Eli Zaretskii  <eliz@gnu.org>

	* org.el (org-mode): Force left-to-right paragraphs in Org
	buffers.  For a related discussions, see
	https://lists.gnu.org/r/emacs-devel/2011-09/msg00349.html.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ob-asymptote.el (org-babel-asymptote-define-type):
	Silence byte-compiler.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-R.el (org-babel-R-evaluate): Fix bug in R session
	evaluation.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* org-bibtex.el (org-bibtex-type-property-name):
	Configurable property name for bibtex entry types.
	(org-bibtex-headline): Use new configurable property name.
	(org-bibtex-check): Use new configurable property name.
	(org-bibtex-create): Use new configurable property name.
	(org-bibtex-write): Use new configurable property name.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-paste-subtree): Remove unnecessary `concat'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-paste-subtree): Remove useless (concat ...).

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-C.el (org-babel-C-var-to-C): Replacing usage of
	characterp with integerp (which should work w/Emacs22).

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-at-definition-p): Context must
	be valid at the beginning of line, not at point.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-collect-blocks):
	Better delimiting of Org-mode text preceding a code block.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-get-src-block-info): Fixing bug,
	accidentally deleted variable values.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-process-comment-text):
	Customizable function to process comment text.
	(org-babel-tangle-collect-blocks): Make use of new
	customizable processing function.
	(org-babel-spec-to-string): Call customizable function rather than
	`org-babel-trim'.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-R.el (org-babel-execute:R): Collect and pass along the
	result-params.
	(org-babel-R-evaluate): Accept result-params and if "scalar" or
	"verbatim" don't process output.
	(org-babel-R-evaluate-session): Accept result-params and if
	"scalar" or "verbatim" don't process output.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-merge-params): Differentiate between result
	types and wrappers.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-get-src-block-info): Check that
	functional-syntax variables are initialized.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-check-src-block): Adding a note for a
	future enhancement.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export): Restore point when exporting a subtree.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-parse-src-block-match): More robust to code
	blocks with empty bodies.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-parse-src-block-match): Don't error on empty
	code block body.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-open-at-point): Unescape plain link.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-html.el (org-html-handle-links): Remove unnecessary link
	unescape.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-merge-params): Better error message for
	unassigned variables.

2012-01-03  Christian Egli  <christian.egli@alumni.ethz.ch>

	* org-taskjuggler.el (org-export-as-taskjuggler): Clone the
	buffer local variables to the temporary buffer before
	exporting.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-select-backend-specific-text):
	Only remove commas on the front line of a code block.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-demarcate-block): Copy headers and indent to
	column of point when a block is split.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): Corrected file insertion
	for inline results.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-in-valid-context-p):
	No footnote in latex fragments.

2012-01-03  Martin Rudalics  <rudalics@gmx.at>

	* org-compat.el (org-pop-to-buffer-same-window): Remove LABEL
	argument from `pop-to-buffer-same-window' call.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-R.el (org-babel-R-evaluate-session): Improve prompt
	detection regexp.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-goto-end):
	Small refactoring.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ob-asymptote.el (org-babel-asymptote-var-to-asymptote):
	refactor code.
	(org-babel-asymptote-table-to-array): Remove function.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ob-asymptote.el (org-babel-asymptote-var-to-asymptote):
	recognize non-nested lists as uni-dimensional arrays.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-params-from-properties): Don't check for
	header arguments in properties with leading ":"s.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-goto-end):
	Correctly detect the end of an inlinetask when the next one starts
	immediately after the current one.  Also, return position of
	point.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ob.el (org-babel-inline-src-block-regexp): Allow regexp to
	start at bol.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ob-asymptote.el (org-babel-asymptote-define-type):
	Elisp floats are asymptote reals.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ob-asymptote.el (org-babel-asymptote-table-to-array):
	Require a new argument TYPE specifying the detected type of
	array.  If it's a string array, make sure every element is
	returned as a string.  Also improve doc-string.
	(org-babel-asymptote-var-to-asymptote): Fill new argument.
	Small refactoring.
	(org-babel-asymptote-define-type): Rewrite to avoid stopping
	search at first float found, as strings have precedence over
	floats.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Be sure to separate
	the last footnote definition from the rest of the buffer.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-awk.el (org-babel-expand-body:awk): Allow for symbolic
	variable names.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-latex-regexps): Allow matching latex fragments
	of type "$" and "$1" at beginning of line.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-search-view, org-agenda-get-todos)
	(org-agenda-get-deadlines, org-agenda-get-scheduled):
	Add `category-pos' in let construct.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-get-definition): The function has
	to widen buffer if definition has not been found in the current
	narrowed part.  Be sure to restore that restriction once the
	definition is found.

2012-01-03  Michal Sojka  <sojka@os.inf.tu-dresden.de>  (tiny change)

	* org-icalendar.el (org-print-icalendar-entries): Make alarm
	duration RFC5545 compliant.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-get-timestamps)
	(org-agenda-get-sexps, org-agenda-get-progress): Correctly set
	the `org-category-pos' property.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-divs): Improve docstring.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-fix-formulas): Throw error when
	changing formula leads to an invalid formula.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-archive-location): Minor docstring fix.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-block-todo-from-checkboxes):
	`org-list-search-forward' should be used when looking for an
	item, as it filters out contexts where match couldn't be in a
	list.  Also use a correct item regexp, taking into account
	alphabetical ordered lists and counters.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-html-make-link): Minor fix to the
	docstring.

2012-01-03  Suvayu Ali  <fatkasuvayu+linux@gmail.com>  (tiny change)

	* org-inlinetask.el (org-inlinetask): New customizable face
	for inlinetasks.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-get-todos): Properly set
	`category-pos'.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct-apply-struct): Don't use
	(copy-marker (point)) instead of (point-marker).

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-where-is-src-block-result): Don't try to
	resolve variables when simply checking if we're inside of a
	code block.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-refresh-category-properties): New text property
	'org-category-position to point at the beginning of the
	headline from which the category is set.

2012-01-03  Matt Lundin  <mdl@imapmail.org>

	* org.el (org-refile): Don't call `org-back-to-heading' with
	goto argument.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-link-display-descriptive): Remove this option and
	rely on the existing `org-descriptive-links' instead.
	(org-toggle-link-display): Use `org-descriptive-links'.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-resolve): Allow matching of results
	with tags after the result name.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-get-specials): Allow the use of the
	underscore character in column names.
	(org-table-get-specials): Allow the use of the underscore
	character in field names.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-export-blocks-preprocess):
	Explicitly cleaning up markers.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-inline-src-blocks): Save match data
	around `org-babel-exp-do-export' which now searches in this case.
	(org-babel-exp-results): Position the point in the inline source
	block during export evaluation.

	* ob.el (org-babel-insert-result): More readable code.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-export-blocks-preprocess): Use the built
	in function rather than the superfluous (and now removed)
	org-specific function.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-inline-src-blocks): Don't examplize
	inline code blocks which are already escaped.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-marker-from-point): Helper function to
	create markers at specific points in source buffers.
	(org-export-blocks-preprocess): Use markers instead of points
	to delimit code blocks.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-separating-blank-lines-number):
	The behavior of `org-back-over-empty-lines' depends on the
	associated value of `headline' in
	`org-blank-before-new-entry', which is out of context in a
	list.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-initialize-agent): When the current
	buffer isn't being watched, resume initialization of other watched
	buffers.  In that case, give hand to others idle timers or
	processes more frequently.
	(org-indent-agent-active-delay): Rename from
	`org-indent-agent-process-duration'.
	(org-indent-agent-passive-delay): New variable.
	(org-indent-agent-resume-delay): Change value.
	(org-indent-initialize-buffer): Change argument name.
	(org-indent-add-properties): Change argument name and type
	expected.  It must be a time value now.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-set-property): Bugfix.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-remove-result): Idempotent code block
	evaluation and result removal.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ruby.el (org-babel-ruby-initiate-session): No longer
	require inf-ruby when no session evaluation takes place.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-prefix-format): Mention "%e" in
	the docstring.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-custom-commands): Set a default
	value for this command.

2012-01-03  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-include-all-todo): Declare this option
	as no longer working.
	(org-timeline): Rename the include-all argument to dotodo.
	(org-arg-loc): Rename from` org-include-all-loc'.
	(org-agenda-list): Rename the INCLUDE-ALL argument to ARG,
	because its function has changed.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-fixup-indentation): Fix various small bugs.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-agent-timer)
	(org-indent-agentized-buffers, org-indent-agent-resume-timer)
	(org-indent-agent-process-duration)
	(org-indent-agent-resume-delay): New variables.
	(org-indent-initial-marker): More accurate doc-string.
	(org-indent-initial-timer, org-indent-initial-resume-timer)
	(org-indent-initial-process-duration)
	(org-indent-initial-resume-delay)
	(org-indent-initial-lock): Remove variables.
	(org-indent-mode): Set up an agent to watch current buffer, or
	add it to the list of already watched buffers.
	(org-indent-initialize-agent): New function.
	(org-indent-initialize-buffer): Now requires a mandatory
	buffer argument.
	(org-indent-add-properties): Reflect changes to variables.
	The resume timer is now global.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Refactor, and fix
	some blank lines deletion.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-mode):
	`org-indent-initial-resume-timer ' needs to be local.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-fixup-indentation): Correctly indent meta lines.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-set-line-properties): Add text
	properties down to the beginning of the next line.
	(org-indent-add-properties): When last position to add
	properties to is at the beginning of a line, all that line
	will have properties.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-initial-resume-timer): New variable.
	(org-indent-initialize-buffer): Also resume after a small break.
	(org-indent-add-properties): When in asynchronous mode,
	proceed for 2 seconds, then take a break.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-set-line-properties): New function.
	(org-indent-add-properties): Externalize worker function.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-indent-buffer): Take into account
	narrowing.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-modified-headline-flag): Rename from
	`org-indent-deleted-headline-flag'
	(org-indent-notify-modified-headline): Rename from
	`org-indent-notify-deleted-headline'.  Handle situations when
	the stars of an headline are modified.
	(org-indent-refresh-maybe): Remove case now handled by
	previous function.
	(org-indent-mode): Apply renames.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-inlinetask-first-star):
	New variable.
	(org-indent-add-properties): Set the first star of inline-tasks'
	virtual indentation in `org-warning' face.

	* org-inlinetask.el (org-inlinetask-insert-task): Create a new
	inline-task slightly differently, so virtual indentation can
	be applied normally.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-initial-marker)
	(org-indent-initial-timer, org-indent-initial-lock):
	New variables.
	(org-indent-mode): At initialization, start an idle timer to indent
	the whole buffer.  When the user is asking for control, interrupt the
	process, and resume at the same point when idle again.
	(org-indent-initialize-buffer): New function.
	(org-indent-add-properties): Throw an interrupt when indentation of
	buffer is stopped during initialization.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-indent-buffer): Send more
	appropriate messages.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-notify-deleted-headline)
	(org-indent-refresh-maybe): Replace `org-indent-outline-re'
	with `org-outline-regexp-bol'.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-max-levels): Modify default value and
	add comment.
	(org-indent-add-properties): Pay attention to `org-indent-max'
	and `org-indent-max-levels' values.
	(org-indent-refresh-maybe): Refactor code to avoid an unnecessary
	save excursion.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-table.el (org-table-align): Remove now useless hack.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-fix-section-after-idle-time):
	Remove variable.
	(org-indent-initialize): Remove timer.
	(org-indent-add-properties): Refactor code.
	(org-indent-refresh-subtree, org-indent-refresh-section)
	(org-indent-refresh-buffer, org-indent-set-initial-properties):
	Remove functions.
	(org-indent-deleted-headline): New variable.
	(org-indent-notify-deleted-headline, org-indent-refresh-maybe):
	New functions.
	(org-indent-mode): Insert new functions into a hook.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-indent.el (org-indent-mode): Completely refresh buffer
	before starting org-indent-mode.  Also set idle timer to refresh
	only visible portion of buffer, and refresh the subtree instead of
	section when promoting or demoting it.
	(org-indent-add-properties): Rewrite function to proceed line by
	line, as required by `wrap-prefix' specificity.
	(org-indent-refresh-section, org-indent-refresh-subtree): Refactor.
	(org-indent-refresh-view): New function.
	(org-indent-refresh-to, org-indent-refresh-section):
	Remove functions.

	* org.el (org-unfontify-region): Do not remove prefix
	properties when unfontifying a region.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-colview.el (org-columns-cleanup-item): Correctly remove
	leading stars in items displayed in the agenda column view.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-colview.el (org-columns-display-here): Clean up items in
	`org-agenda-mode' too.
	(org-columns-cleanup-item): Take a new argument CPHR to allow
	passing a complex heading regexp.  Rewrite to cleanup ITEM
	correctly in `org-agenda-mode'.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-duration-string-to-minutes)
	(org-minutes-to-hh:mm-string, org-hh:mm-string-to-minutes):
	Move from org.el.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-refile-active-region-within-subtree): New option to
	allow refiling a region that is part of a subtree without
	containing a subtree itself.  This default to `nil'.
	(org-refile): Use the new option.  Put point at the beginning
	of the region/subtree to be refiled, so that users understand
	what will be refiled.  Also improve the prompt to tell whether
	the user is refiling a region or a headline.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-properties-postprocess-alist): New option to allow
	postprocessing the values of properties set through
	`org-set-property'.
	(org-set-property): Use this option.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-outline-regexp, org-outline-regexp-bol): Add a
	docstring.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-archive.el (org-archive-to-archive-sibling):
	Use `org-outline-regexp' instead of `outline-regexp'.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-between-regexps-p): Searching up to pos may
	match again beginning regexp.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-goto-definition): Don't send
	erroneous message: suggested bindings might not be set outside
	Org.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Effectively remove
	any footnote tag in non Org buffers, as detailled in the
	docstring of `org-footnote-tag-for-non-org-mode-files'.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-tag-for-non-org-mode-files):
	notify the opportunity to set the variable to the empty string.
	(org-footnote-normalize, org-footnote-create-definition):
	Carefully check for inserted newlines and presence of the
	footnote tag.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-at-definition-p): Re-use
	`org-footnote-definition-re'.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-definition-re): Remove an
	useless group.
	(org-footnote-at-definition-p): Reflect removal of the group.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-set-regexps-and-options): Enforce white space
	after todo keyword, as word boundary isn't sufficient (i.e. in
	matches * TODO/this).

2012-01-03  Jambunathan K  <kjambunathan@gmail.com>

	* org-inlinetask.el (org-inlinetask-export-templates):
	Fix template for html so that the exported file is valid
	xhtml.  Added template for odt.
	(org-inlinetask-export-handler): Fix typo in the regexp that
	trims content.  Make sure that the content is flanked by
	paragraph boundaries on either side.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-add-planning-info): Don't insert superfluous
	space when updating timestamps.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-cmp-effort): Fix docstring.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-full-item-re): When an item has only a
	bullet and no space after it, list structure would not be
	recognized correctly.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-overview): Use `outline-regexp' instead of
	`org-outline-regexp' so that global cycling using
	`orgstruct-mode' works outside of Org buffers.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-eval-formula): Fix missing variable
	in let construct.
	(org-table-time-string-to-seconds): Fix missing variable in
	let construct.

2012-01-03  Michael Brand  <michael.ch.brand@gmail.com>

	* org-agenda.el (org-agenda-get-deadlines): Fix dfrac for the
	case of wdays being 0.  Don't pass wdays to
	org-agenda-deadline-face, like before the old fix.
	(org-agenda-deadline-face): Revert to old state that was without
	wdays.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-fixed-width): Only add one
	line break after exporting verbatim environments.

2012-01-03  Bastien Guerry  <bzg@gnu.org>

	* org-list.el (org-list-item-trim-br): New function.
	(org-list-to-generic): New parameter :nobr to use the new
	function.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-paste-subtree): Fix wrong order of lines to move
	before pasting.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-paste-subtree): Paste subtree above target
	headline if point is at bol.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-toggle-checkbox): Don't clear lim-down
	while used in the while loop.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-toggle-checkbox): Lim-down must be a
	marker.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-activate-code): Correct regexp so ":.*" isn't
	matched.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-macs.el (org-with-gensyms, org-called-interactively-p)
	(with-silent-modifications, org-bound-and-true-p)
	(org-unmodified, org-re, org-preserve-lc)
	(org-without-partial-completion, org-with-point-at)
	(org-no-warnings, org-if-unprotected, org-if-unprotected-1)
	(org-if-unprotected-at, org-with-remote-undo)
	(org-no-read-only, org-save-outline-visibility)
	(org-with-wide-buffer, org-with-limited-levels)
	(org-eval-in-environment): Provide edebug specifications.

	* org-src.el (org-src-do-at-code-block): Dto.

	* org-publish.el (org-publish-with-aux-preprocess-maybe): Dto.

	* org-compat.el (org-xemacs-without-invisibility): Dto.

	* org-clock.el (org-with-clock-position, org-with-clock): Dto.

	* org-agenda.el (org-agenda-with-point-at-orig-entry)
	(org-batch-agenda, org-batch-agenda-csv)
	(org-batch-store-agenda-views): Dto.

	* ob.el (org-babel-do-in-edit-buffer)
	(org-babel-map-src-blocks, org-babel-map-inline-src-blocks): Dto.

	* ob-tangle.el (org-babel-with-temp-filebuffer): Dto.

	* ob-table.el (sbe): Dto.

	* ob-exp.el (org-babel-exp-in-export-file): Dto.

	* ob-comint.el (org-babel-comint-in-buffer)
	(org-babel-comint-with-output): Dto.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-export-templates):
	Fix docstring.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-insert-task): Error when
	trying to nest inline tasks.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-activate-code, org-toggle-fixed-width-section)
	(org-indent-line-function): Allow "[ \t]*:$" as a special case of
	fixed-width section.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-paste-subtree): Don't eat headline when called
	with point at existing headline.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-paste-subtree): Fix typo in variable name.

2012-01-03  Jambunathan K  <kjambunathan@gmail.com>

	* org-inlinetask.el (org-inlinetask-export-handler):
	Don't export inline tasks if the current backend has provided no
	entries in `org-inlinetask-export-templates'.

2012-01-03  Valentin Wüstholz  <wuestholz@gmail.com>  (tiny change)

	* org.el (org-indent-line-function): Made the way in which
	example blocks are indented more flexible.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-batch-agenda-csv): Fix argument to append
	when creating final parameter alist.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-batch-store-agenda-views): Use macro
	`org-eval-in-environment'.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-batch-agenda, org-batch-agenda-csv):
	Use `org-eval-in-environment.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-macs.el (org-make-parameter-alist): New function.
	Turn flat list of alternating symbol names and values into an alist
	with symbol name in car and value in cdr.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-agenda-with-point-at-orig-entry):
	Use macro `org-with-gensyms'.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-macs.el (org-substitute-posix-classes):
	New function.  Substitute posix classes in regular expression.
	(org-re): Use new function.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-macs.el (org-eval-in-environment): New macro.  Evaluate FORM
	in ENVIRONMENT.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-macs.el (org-preserve-lc, org-with-point-at)
	(org-with-remote-undo, org-save-outline-visibility): Use new
	macro `org-with-gensyms'.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org-macs.el (org-with-gensyms): New macro.  Wrap let-binding
	of SYMBOLS to new uninterned symbols around BODY.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-export-handler): Make sure
	the task starts a paragraph or the HTML exporter will produce
	an incorrect output.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-return): When filling happens, `newline' can
	change match data, hence modifying the indent column.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-new): Only forbid non-inlined
	footnotes at column 0, as only them can be confused with a
	footnote definition.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-new): Use `ido' or `iswitchb'
	when available when prompted for a label.  Also rename a local
	variable to avoid confusion with an existing function.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-label-history):
	Remove variable
	(org-footnote-new): Remove call to that variable.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-insert-heading): With `force-heading' non-nil,
	inserting an heading before any headline, and just after a
	list would return an error.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-sha1-hash): Remove use of `copy-seq'.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* org-bibtex.el (org-bibtex-get): Make the "FILE" property
	non-special when resolving bibtex values.

2012-01-03  David Maus  <dmaus@ictsoc.de>

	* org.el (org-back-over-empty-lines): Don't move line upward
	if point is at eob.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-in-valid-context-p):
	Check `org-protected' property before allowing to match a footnote.
	(org-footnote-at-reference-p): Remove an obsolete test.  It is now
	done in the previous function.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-between-regexps-p): Previous name implied the
	function was related to blocks, which isn't mandatory.
	(org-narrow-to-block, org-in-block-p)
	(org-indent-line-function): Applied the rename.

	* ob-exp.el (org-babel-in-example-or-verbatim):
	Applied rename.  Also removed a white space.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-in-regexps-block-p): Return an useful value when
	point is between START-RE and END-RE.  No incomplete block is
	allowed anymore.  Add another optional argument to bound the
	bottom part of the search.
	(org-narrow-to-block, org-in-block-p): Apply modifications.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-src-block-regexp): If a code block has a
	body, its last character must be a newline.

2012-01-03  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-next-reference-or-definition):
	If no more footnote is found, be sure to go back to the
	original position.  Otherwise, point might be left on a
	footnote-like element that has been dished out.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-inline-src-block-regexp): Declare this
	variable.

	* ob.el (defvar): Wrap variable declaration in
	`eval-when-compile'.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-keys.el (org-babel-key-bindings): Bound to `C-c C-v k'.

2012-01-03  Eric Schulte  <schulte.eric@gmail.com>

	* ob-java.el (org-babel-execute:java): Allow cmdline flags
	during compilation and evaluation.

2011-12-06  Juanma Barranquero  <lekktu@gmail.com>

	* ob.el (org-babel-expand-body:generic, org-babel-number-p):
	* ob-ref.el (org-babel-ref-parse): Fix typos.

2011-11-24  Juanma Barranquero  <lekktu@gmail.com>

	* ob.el (org-babel-execute-src-block): Fix typo.

2011-11-20  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-link-unescape, org-link-unescape-compound): Fix typos.

2011-11-20  Andreas Schwab  <schwab@linux-m68k.org>

	* org-list.el (org-list-send-item): Use sort instead of sort*.

2011-11-20  Juanma Barranquero  <lekktu@gmail.com>

	* org-table.el (org-table-line-to-dline): Fix typo.

2011-11-16  Juanma Barranquero  <lekktu@gmail.com>

	* org-agenda.el (org-agenda-add-entry-text-descriptive-links)
	(org-agenda-custom-commands, org-write-agenda, org-check-for-org-mode)
	(org-search-syntax-table, org-modify-diary-entry-string)
	(org-write-agenda):
	* org-bbdb.el (org-bbdb-anniv-export-ical):
	* org-bibtex.el (org-bibtex-fields):
	* org-icalendar.el (org-icalendar-date-time-format):
	* org-latex.el (org-export-latex-inline-image-extensions):
	* org-list.el (org-list-insert-item): Fix typos.

2011-11-11  Juanma Barranquero  <lekktu@gmail.com>

	* org-plot.el (org-plot/gnuplot-to-grid-data): Fix typo in docstring.

2011-09-27  Eli Zaretskii  <eliz@gnu.org>

	* org.el (org-mode): Force left-to-right paragraphs in Org
	buffers.  For a related discussions, see
	https://lists.gnu.org/r/emacs-devel/2011-09/msg00349.html.

2011-09-17  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-toggle-pretty-entities): Fix typo in message.

2011-09-02  Chong Yidong  <cyd@stupidchicken.com>

	* org-compat.el (org-pop-to-buffer-same-window): Delete.

	* ob-ref.el (org-babel-ref-goto-headline-id):
	* org.el (org-get-location, org-tree-to-indirect-buffer)
	(org-mark-ring-goto, org-refile, org-add-log-note)
	(org-revert-all-org-buffers, org-switchb)
	(org-cycle-agenda-files, org-submit-bug-report)
	(org-goto-marker-or-bmk):
	* org-agenda.el (org-prepare-agenda, org-agenda-switch-to):
	* org-capture.el (org-capture-goto-target)
	(org-capture-fill-template):
	* org-clock.el (org-clock-goto):
	* org-ctags.el (org-ctags-visit-buffer-or-file):
	* org-exp.el (org-export-as-org):
	* org-feed.el (org-feed-show-raw-feed):
	* org-html.el (org-export-htmlize-generate-css):
	* org-id.el (org-id-goto):
	* org-irc.el (org-irc-visit-erc):
	* org-mobile.el (org-mobile-apply):
	* org-publish.el (org-publish-org-to, org-publish-find-date):
	* org-remember.el (org-go-to-remember-target):
	* org-src.el (org-src-switch-to-buffer)
	(org-edit-fixed-width-region): Use switch-to-buffer.

2011-08-31  Martin Rudalics  <rudalics@gmx.at>

	* org-compat.el (org-pop-to-buffer-same-window): Remove LABEL
	argument from pop-to-buffer-same-window call.

2011-07-30  Carsten Dominik  <carsten.dominik@gmail.com>

	* ob.el (org-babel-src-block-regexp): If a code block has a body,
	its last character must be a newline.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-pcomplete.el: New file.  Rename from org-complete.el.
	* org-complete.el: Delete file.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-publish.el (org-publish-index-generate-theindex):
	Rename from `org-publish-index-generate-theindex.inc'.  Use the file
	theindex.org directly instead of including theindex.inc.
	(org-publish-projects): Don't delete .orgx files.
	(org-publish-aux-preprocess): Use .file.orgx.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-preamble-format): New default for
	the HTML preamble: don't include the title.  Also improve the
	docstring.
	(org-export-html-postamble-format): Improve the docstring.
	(org-export-as-html): Add the title within the "content" div.
	This is necessary for interaction with the org-info.js script.

2011-07-28  Michael Brand  <michael.ch.brand@gmail.com>

	* org-table.el (org-table-edit-field): Display field coordinates.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-publish.el (org-publish-find-title): Bugfix: kill buffers
	unless they were already visited.
	(org-sitemap-sort-files, org-sitemap-sort-folders)
	(org-sitemap-ignore-case, org-sitemap-requested)
	(org-sitemap-date-format, org-sitemap-file-entry-format):
	Use a correct prefix.
	(org-publish-projects): Make sure to delete .orgx files.
	(org-publish-index-generate-theindex.inc): Small docstring fix.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-duration-custom-format): New defcustom
	to select output format of durations computations.
	(org-table-time-seconds-to-string): Use the new variable.
	(org-table-eval-formula): Allow `t' as a flag, on top of `T'.  `t'
	will use the custom output format defined in
	`org-table-duration-custom-format'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el: Search blank lines down to the end of the item
	instead of stopping at the item, in order to possibly match such
	lines within the item.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-href-format): Docstring fix to
	reflect the fact that you can use only one "%s".
	(org-export-latex-links): Allow `org-export-latex-href-format' to
	have only one "%s".

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-org-menu): Add `org-copy-visible' to the menu.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-copy-visible): New command.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el (org-capture-templates): Docstring fix.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-view-src-block-info): New function to inspect
	code blocks.

	* ob-keys.el (org-babel-key-bindings): Key bindings for
	`org-babel-view-src-block-info'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-infile-export-plist): Handle recursively
	included setup files.  The value of the last included file always
	takes precedence over previous values.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-timestamp-change): Keep point in the same category
	when updating a time-stamp.  This requires to be careful, as,
	depending on the locale, name of day might change of length during
	the process.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-create-definition): When skipping
	already written footnotes definition, the algorithme would assume
	each one was only one-line long.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-eval-formula): Fix bug when a formula
	"range" is just one cell.
	(org-table-time-string-to-seconds): Don't check whether we
	manipulate a string.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-mark-list-end)
	(org-export-mark-list-properties): Don't remove the ending regexp
	when it consists in blank lines.

	* org-list.el (org-list-parse-list): Ditto, but remove it
	completely when it isn't made of blank lines (i.e. during export
	process).

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-time-string-to-seconds): Match either
	HH:MM:SS or HH:MM (instead of MM:SS).

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-ctrl-c-ctrl-c-final-hook): New hook to be run when
	`org-ctrl-c-ctrl-c' cannot do anything useful in the given
	context.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-with-timestamp)
	(org-export-html-html-helper-timestamp): These are obsolete
	variables as of Org version 7.7 as you can already export the
	timestamp from the preamble or the postamble.
	(org-export-html-before-content-div): Delete variable.
	(org-export-html-content-div): Obsolete variable as of 7.7.
	(org-export-html-divs): New variable to define divs used in
	HTML export.
	(org-export-as-html): Now the preamble and the postamble are
	surrounded by a <div ...>.  The name of the div is defined through
	`org-export-html-divs'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-eval-formula): Throw an error when
	trying to replace complex range with invalid references.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-macs.el (org-with-limited-levels): Some functions, like
	`org-back-to-heading', being deeply based on outline-mode, still
	refer to `outline-regexp' instead of `org-outline-regexp'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-refile-get-targets): New optional argument
	`excluded-entries' to exclude entries from the targets.
	(org-refile-get-location): From an org-mode buffer, exclude
	current heading and subheadings from the list of targets when
	`org-refile-use-cache' is nil.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-imenu-get-tree): Headlines start at bol.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-maxima.el: New file.  Fixed self-proclaimed file name.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-sha1-hash): Only call `copy-seq' on proper
	lists.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-kill-is-subtree-p): Matched string needs to start at
	bol.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-paste-subtree, org-kill-is-subtree-p)
	(org-yank-folding-would-swallow-text, org-yank-generic):
	Use `org-with-limited-levels' macro.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-macs.el (org-with-limited-levels): Also modify, when
	appropriate, `org-outline-regexp-at-bol'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-timestamp-change): Some locales don't use the same
	length for date abbreviations.  Set a marker at origin in case
	length of new timestamp is different.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-imenu-get-tree): Browse only true headlines.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-archive.el (org-archive-subtree): While it might be possible
	to archive an headline of a temporary buffer (i.e. not visiting a
	file), it wouldn't be really sensible.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-archive.el (org-extract-archive-file)
	(org-extract-archive-heading, org-archive-subtree):
	`buffer-file-name' is nil in an indirect buffer.  Thus, use
	`(buffer-file-name (buffer-base-buffer))', which will, in any
	case, return the file name.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-capture.el (org-capture): If dired isn't loaded,
	`dired-buffers' isn't defined, and %F will fail.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-java.el (org-babel-execute:java): Don't create empty package
	directories.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-java.el: New file.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-execute-src-block): Replace call to defunct
	function `org-babel-result-hash'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-in-valid-context-p): Avoid cited
	lines and headers in `message-mode'.
	(org-footnote-at-reference-p): Remove check for cited lines, this
	is now handled by the previous function.  Refactor.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-capture.el (org-capture): If no file is associated to
	current buffer, check dired buffer and try to retrieve a possibly
	directory associated.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-results): Resolve hashes in the current
	(not original) file buffer.

	* ob.el (org-babel-current-result-hash): More informative name,
	and remove useless optional argument.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-refile-get-location): Exclude current heading from
	the refile table.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-at-reference-p): Test if match is
	in cited text, when replying to a message.
	(org-footnote-new): Do not create a new footnote at bol, as it
	might be seen as a definition.
	(org-footnote-at-definition-p): Ignore definitions in forbidden
	blocks, as it is already the case for references.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-bibtex.el (org-bibtex-create, org-bibtex-write):
	Change argument of `org-toggle-tag' to 'on.  (Other arguments, e.g., t,
	have no effect).

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-bibtex.el (org-bibtex-get): Don't let trimming turn nils
	into empty strings.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-insert-item): Actualize code comments.
	(org-insert-item): For consistency, point cannot be moved at a
	surprising place when the user is being asked to choose a new
	description term to insert in the list.  Point should stay where
	the user called the command.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-outline-regexp-bol): New defconst.
	(org-outline-level, org-set-font-lock-defaults, org-cycle)
	(org-overview, org-content, org-flag-drawer)
	(org-first-headline-recenter, org-insert-todo-heading)
	(org-map-region, org-move-subtree-down, org-paste-subtree)
	(org-kill-is-subtree-p, org-context-p, org-refile)
	(org-refile-new-child, org-toggle-comment, org-todo)
	(org-add-planning-info, org-add-log-setup, org-scan-tags)
	(org-set-tags, org-insert-property-drawer)
	(org-prepare-agenda-buffers, org-preview-latex-fragment)
	(org-speed-command-default-hook, org-check-for-hidden)
	(org-toggle-item, org-toggle-heading)
	(org-indent-line-function, org-set-autofill-regexps)
	(org-fill-paragraph, org-toggle-fixed-width-section)
	(org-yank-generic, org-yank-folding-would-swallow-text)
	(org-first-sibling-p, org-goto-sibling)
	(org-goto-first-child, org-show-entry):
	Use `org-outline-regexp' and `org-outline-regexp-bol'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-update-parent-todo-statistics): COOKIE_DATA should
	be checked for parent, not current headline.  Also, this function
	doesn't need to be interactive.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-send-item, org-list-struct-apply-struct)
	(org-apply-on-list, org-toggle-checkbox): Make markers point
	nowhere when they have become useless.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-insert-item): When insertion point is in
	some white line after the end of the list, remove all unnecessary
	white lines there before proceeding.  Also refactor a snippet of
	code.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-image-default-option):
	Change default value.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-fontify-meta-lines-and-blocks-1): Blocks cannot be
	correctly fontified when the buffer is missing a final newline.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* ob.el (org-babel-strip-protective-commas): Return `nil' instead
	of an error if no argument is given.
	(org-babel-parse-src-block-match): Make sure body is defined in
	the let construct.

2011-07-28  Jon Anders Skorpen  <jonas@ifi.uio.no>  (tiny change)

	* org-publish.el (org-publish-cache-file-needs-publishing):
	Regexp did not find includes with double quoted file names.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Footnote section
	should be inserted only if there are footnotes to insert.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-at-definition-p)
	(org-footnote-normalize): Do not grab signature in the definition
	of the last footnote.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-bibtex.el (org-babel-trim): Declare this function to the
	compiler.
	(org-bibtex-get): Trimming whitespace off of bibtex fields read from
	properties.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-preprocess-string): Add the possibility
	to call recursively the function.  Also change order of some
	function calls.  Comment export process for footnotes.

	* org-footnote.el (org-footnote-normalize): Change the export
	specific parameter to hold properties of export.  Thus, the
	function can send every footnote definition in the buffer through
	`org-export-process-string'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-preprocess): First insert
	footnotes in the temporary buffer so their contents can properly
	be protected from further transformations if required.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-indent-offset): New variable.
	(org-list-struct-fix-ind): Make use of the new variable.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-list-parameters):
	Complete default value with cbtrans option.

	* org-list.el (org-list-to-latex): Set a more consistent default
	value.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-swap-items): Move it to a meaningful
	position in source code (i.e. before any function using it), and
	rename it to an easier name.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-separating-blank-lines-number): If there
	are blank lines already in the whole list, add a blank line.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-use-circular-move): New variable.
	(org-previous-item, org-next-item): Make use of the new variable.
	(org-move-item-down, org-move-item-up): Make use of the new
	variable.  Simplify code.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-delete-item, org-list-send-item):
	New functions.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-bulk-custom-functions): New variable
	for custom bulk action functions.
	(org-agenda-bulk-action): Use it.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-quotes): New defcustom.
	(org-export-latex-quotation-marks): Use it.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el (org-capture-finalize): Bugfix about inserted
	blank line when killing the capture buffer and
	`org-blank-before-new-entry' tells to not insert anything before a
	heading.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-content-div): Rename from
	`org-export-content-div'.
	(org-export-as-html): Use new name.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-header-defs-re): Delete.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-last-set-property): New variable.
	(org-read-property-name): Use the new variable: the prompt
	defaults to the last property set, unless there is a property in
	the line at point.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-capture.el (org-capture-before-finalize-hook)
	(org-capture-after-finalize-hook, org-capture-mode-map)
	(org-capture-mode, org-capture-goto-last-stored): Fix docstring,
	consistently refer to capture, not remember.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-execute:clojure): Respects "scalar" and
	"verbatim" results params.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-awk.el (org-babel-execute:awk): Use "verbatim" as synonym for
	"scalar".

	* ob-sh.el (org-babel-sh-evaluate): Use "verbatim" as synonym for
	"scalar".

	* ob-sqlite.el (org-babel-execute:sqlite): Use "verbatim" as
	synonym for "scalar".

	* ob.el (org-babel-merge-params): Use "verbatim" as synonym for
	"scalar".

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-script-escape): Parse odd parens when nested
	isnide lists.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-execute:clojure): No longer force
	results into elisp if they don't naturally fit.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-execute:clojure): Stop re-reading
	already parsed lisp results.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-plain-list-ordered-item-terminator):
	Remove incorrect assumption.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-forbidden-blocks): Add missing
	exporter specific blocks.

	* org-list.el (org-list-forbidden-blocks): Ditto.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-tables): Bugfix: remove
	properties from fields.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-shiftcontrolup, org-shiftcontroldown): New commands
	to use `org-clock-timestamps-change'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-timestamp-up, org-timestamp-down): Mention time
	changes in the docstring.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-clock-remove-empty-clock-drawer): New function
	to remove empty clock drawer.
	(org-clock-out-hook): Add the new function as a hook.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-in-valid-context-p): Use `org-in-block-p'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-in-block-p): New function.

	* org-footnote.el (org-footnote-forbidden-blocks): New variable.
	(org-footnote-in-valid-context-p): New function.
	(org-footnote-at-reference-p): Use new function.  Allow inline
	footnotes to start at bol.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-lparse.el (org-lparse-use-flashy-warning): New defcustom.
	(org-lparse-warn): Use it.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-ascii.el (org-export-as-utf8): Fix call to
	`org-called-interactively-p': it requires an argument.  Also fix
	the docstring.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lilypond.el (show-all): Declaring function from outline.el.
	(org-babel-default-header-args:lilypond): Declared.
	(ly-process-basic): Use the appropriate prefix for the temporary
	file, and don't call a function from ob-dot.el.
	(ly-version): Let-bind a free variable.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lilypond.el: New file.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-publish.el
	(org-publish-cache-file-needs-publishing): Only check against .org
	files.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-mode): Use `org-default' as the default face in
	org-mode.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-publish.el
	(org-publish-cache-file-needs-publishing): Takes care of more
	recently included files, returning `t' in case the file including
	them needs to be republished.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-preprocess-string): If the last subtree
	is a task, footnotes may be removed along with the subtree.
	This patch ensures footnotes are put at the end of the buffer after the
	subtree has been removed.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-at-reference-p): Verify that what
	looks like a footnote doesn't belong to a link.
	(org-footnote-next-reference-or-definition): Check more strictly
	footnote definitions.

2011-07-28  Deech  <deech@deech-ThinkPad-X200.(none)>  (tiny change)

	* ob-tangle.el (org-babel-tangle): Ignore errors thrown by
	language modes.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-babel-python-evaluate-session): Inhibit return
	of the eoe string during session evaluation.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-babel-python-evaluate-session):
	Enough newlines to ensure a return when ":results output :session".

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-babel-python-evaluate-session): Introduced a
	new local function for sending input with a slight delay to allow
	pythong to re-draw the prompt.  No longer removing newlines inside
	code block bodies (was due to a defective regexp).

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-time-seconds-to-string):
	Use `org-format-seconds' instead of `format-seconds'.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-publish.el (org-publish-cache-ctime-of-src): Properly handle
	relative symlinks.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-latex.el (org-export-latex-preprocess): Use function
	argument instead of dynamically scoped symbol.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-freemind.el (org-freemind-convert-links-helper)
	(org-freemind-convert-text-p, org-freemind-write-mm-buffer)
	(org-freemind-get-node-style): Use org-string-match-p for backward
	compatibility with Emacs 22.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-html.el (org-export-html-protect-char-alist): Add missing
	:group keyword in defcustom.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* ob-haskell.el (org-babel-haskell-export-to-lhs):
	Call `kill-buffer' with argument indiciating to kill current
	buffer.  Emacs 22 compatibility.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-macs.el (org-without-partial-completion):
	Toggle partial-completion-mode only if it is turned on.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-add-planning-info): Fix issues with timestamps not
	being inserted at the same position.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-time-string-to-seconds)
	(org-table-time-seconds-to-string): New functions.
	(org-table-eval-formula): Implement the "T" (time) flag for
	computing durations.

2011-07-28  Jambunathan K  <kjambunathan@gmail.com>

	* org.el (org-modules): Add org-lparse and org-odt as contrib
	modules.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org.el (org-fontify-meta-lines-and-blocks-1): Include header
	lines.
	(org-additional-option-like-keywords): Include data as a synonym
	for results.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-sha1-hash): Improving code layout and removing
	export-variable headers in cache sha1.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-goto-headline-id): Don't let `org-id'
	rescan all IDs when trying to resolve a reference.

2011-07-28  Julien Barnier  <julien@nozav.org>

	* org.el (org-fontify-meta-lines-and-blocks-1): Fix test for src
	blocks lang attribute.

2011-07-28  Eric S Fraga  <e.fraga@ucl.ac.uk>

	* org-latex.el (org-export-latex-timestamp-inactive-markup):
	New option to allow different markup for inactive timestamps.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-org.el (org-babel-expand-body:org): Implemented this
	function, only action is to expand variables.
	(org-babel-execute:org): Uses the new body-expansion function.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-full-item-re): Allow counter and check-box
	to be separated by white spaces.
	(org-list-struct-apply-struct): Reflect changes made to
	`org-list-full-item-re'.

	* org-html.el (org-html-export-list-line): Recognize spaces
	between counter and check-boxes as valid.

	* org-docbook.el (org-export-docbook-list-line): Ditto.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-insert-item): Make sure point is moved to
	the specified POS before starting the function.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-activate-footnote-links): Properly fontify inline
	footnotes.
	(org-set-font-lock-defaults): Apply changes to previous function.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-at-reference-p): First check if
	point is at the beginning of a footnote.  Indeed `org-in-regexp'
	first checks backwards and might find an incorrect footnote if
	they are side-by-side.

2011-07-28  Michael Brand  <michael.ch.brand@gmail.com>

	* org-agenda.el (org-agenda-compact-blocks): Improve docstring.
	(org-agenda-block-separator): Add nil to docstring and customization.
	(org-prepare-agenda): Skip agenda block separator additionally if
	`org-agenda-block-separator' is nil.
	(org-agenda-overriding-header): Improve docstring.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-set-tags): Remove useless
	`org-without-partial-completion'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-footnote.el (org-fill-paragraph): Declare function for the
	compiler.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-narrow-to-subtree): Declare unknown function.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-inline-lob-one-liner-regexp): Declare variable
	to appease compiler.

2011-07-28  Michael Markert  <markert.michael@googlemail.com>

	* ob.el (org-babel-sha1-hash): Adding optional argument KIND to
	all `org-called-interactively-p' function invocations.

	* org-agenda.el (org-agenda-redo): Adding optional argument KIND
	to all `org-called-interactively-p' function invocations.
	(org-agenda-show-1): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-agenda-set-tags): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.

	* org-ascii.el (org-export-as-latin1): Adding optional argument
	KIND to all `org-called-interactively-p' function invocations.
	(org-export-as-latin1-to-buffer): Adding optional argument KIND to
	all `org-called-interactively-p' function invocations.
	(org-export-as-utf8-to-buffer): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-export-region-as-ascii): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.

	* org-docbook.el (org-export-region-as-docbook): Adding optional
	argument KIND to all `org-called-interactively-p' function
	invocations.

	* org-html.el (org-export-region-as-html): Adding optional
	argument KIND to all `org-called-interactively-p' function
	invocations.

	* org-latex.el (org-export-region-as-latex): Adding optional
	argument KIND to all `org-called-interactively-p' function
	invocations.

	* org-table.el (org-table-blank-field): Adding optional argument
	KIND to all `org-called-interactively-p' function invocations.
	(org-table-current-column): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-table-current-dline): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-table-sort-lines): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-table-sum): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-table-rotate-recalc-marks): Adding optional argument KIND to
	all `org-called-interactively-p' function invocations.
	(org-table-eval-formula): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(orgtbl-send-table): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.

	* org.el (org-mode): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-copy-subtree): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-paste-subtree): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-store-link): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-todo): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.
	(org-occur): Adding optional argument KIND to all
	`org-called-interactively-p' function invocations.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-action): Offer to create
	definition when none is found.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-re): Avoid matching inactive
	time-stamps or check-box cookies.
	(org-footnote-next-reference-or-definition): Adapt to the new regexp.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-preprocess-string): If the last subtree
	is commented, footnotes inserted during normalizing at the end of
	the buffer may get deleted.  This patch ensures deletion comes
	first, normalization second.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-footnotes-data): Change docstring.
	(org-export-footnotes-seen): Rename from
	org-export-footnotes-markers.

	* org-ascii.el (org-export-as-ascii): Apply change.

	* org-docbook.el (org-export-as-docbook): Apply change.

	* org-footnote.el (org-footnote-normalize): Apply change.

	* org-html.el (org-export-as-html): Apply change.

	* org-latex.el (org-export-as-latex): Apply change.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Rely on
	`org-export-footnotes-markers' to retrieve definition of the
	current footnote during export.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Remember footnotes
	seen so far by the exporter when choosing the new marker.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Make use of
	`org-footnote-insert-pos-for-preprocessor'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Add `org-footnote'
	property to footnote markers when preparing for exportation.

	* org-html.el (org-export-as-html): Read new property to decide
	when to export a footnote.

	* org-docbook.el (org-export-as-docbook): Read new property to
	decide when to export a footnote.

	* org-latex.el (org-export-latex-preprocess): Ensure footnote at
	column 0 cannot end a list containing it by adding
	`original-indentation' property to it.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-preprocess-string): Normalize footnotes
	before marking lists ending.

	* org-latex.el (org-export-latex-preprocess): Work with labels as
	strings and not as numbers.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-docbook.el (org-export-docbook-footnote-separator):
	New variable.
	(org-export-as-docbook): Add a separator between footnotes.

	* org-html.el (org-export-html-footnote-separator): New variable.
	(org-export-as-html): Add a separator between footnotes.

	* org-latex.el (org-export-latex-footnote-separator):
	New variable.
	(org-export-latex-preprocess): Add a separator between footnotes.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-footnotes-markers)
	(org-export-footnotes-data): New variables.
	(org-export-preprocess-string): Use a more explicit argument.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-goto-definition): Now, determining
	if point is at a footnote reference is entirely determined by
	`org-footnote-at-reference-p'.  No need to check if pattern isn't
	at beginning of the line elsewhere.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-next-reference-or-definition):
	New function.

	* org.el (org-activate-footnote-links): Activate the whole
	footnote, but only fontify its label.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-normalize): Make use of changes to
	`org-footnote-at-reference-p' and creation of various functions..
	Also comment code.
	(org-footnote-get-next-reference, org-footnote-delete-references)
	(org-footnote-delete-definitions): New functions.
	(org-footnote-goto-previous-reference, org-footnote-all-labels)
	(org-insert-footnote-reference-near-definition, org-footnote-delete):
	Rewrite to use org-footnote-get-next-reference.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-footnote.el (org-footnote-re): Don't end an inline footnote
	at unrelated closing square brackets.
	(org-footnote-at-reference-p): Improve accuracy of the function to
	determine if point is at a reference and to extract definition of an
	inline footnote.
	(org-footnote-all-labels, org-footnote-action, org-footnote-delete)
	(org-footnote-auto-adjust-maybe): Make use of previous function.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-deadline, org-schedule):
	keep warning cookie when rescheduling/redeadlining.
	(org-time-stamp): Fix problem with warning cookie.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-execute:clojure): Force escaping of
	clojure source into elisp source.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-script-escape): Treats {} in the same manner as
	[] and allows for forcing string conversion.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-select-backend-specific-text):
	Strip protective commas from literal code blocks.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-goto-headline-id): Fix bug.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-goto-headline-id): Split out into its
	own function.
	(org-babel-ref-headline-body): Split out into its own function.
	(org-babel-ref-resolve): Using new functions, and alignment.

	* ob.el (org-babel-ref-goto-headline-id): Declare function.
	(org-babel-ref-headline-body): Declare function.
	(org-babel-expand-noweb-references): Now expands noweb references to
	headlines during expansion.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-resolve): Now resolves references to
	headlines by either global or custom id, in which case the
	contents of the headline are returned literally.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-in-example-or-verbatim): Also check for in
	verbatim emphasis.
	(org-babel-exp-lob-one-liners): Cleaner checking for escaped call
	lines.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-item-indentation): Cycling back to
	original position deleted any additional information in the item,
	like a counter or a tag.

2011-07-28  Pieter Praet  <pieter@praet.org>

	* org-crypt.el (org-crypt-disable-auto-save): New defcustom.
	(org-decrypt-entry): Before decrypting, check whether
	`auto-save-mode' is enabled for the current buffer, and act on it
	according to how `org-crypt-disable-auto-save' is set.  Remove
	comment re "encrypt[ing] Org auto-saved buffers".  Remove on-init
	check for `auto-save-default'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-merge-params): Ensure variable parameters are
	not reversed.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): Fix results insertion for
	inline blocks which happen to start a line.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-lob-one-liners): Fix the logic checking
	if a call line is commented.

2011-07-28  Vincent Belaïche  <vincentb1@users.sourceforge.net>

	* org.el (org-read-property-name): Propose default property name.

2011-07-28  Achim Gratz  <stromeko@nexgo.de>

	* org.el (org-log-into-drawer): Correct typo.

	* org-clock.el (org-clock-into-drawer): New function to change the
	location of clock events based on properties CLOCK_INTO_DRAWER or,
	as fallback, LOG_INTO_DRAWER, like it is already possible for
	state change logs.

	* org-clock.el (org-clock-jump-to-current-clock): Add statement to
	let clause to bind `org-clock-into-drawer' to result of function
	eval.

	* org-clock.el (org-clock-find-position): Add statement to let
	clause to bind `org-clock-into-drawer' to result of function eval,
	change let to let* since the binding is used later in the same
	clause.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (require): Ensure 'cl is loaded during compilation so
	we can use flet.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-lob-get-info): Correctly indent results of
	non-inline call lines.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-lob-one-liners): Don't export inline
	call_ blocks which aren't whitespace padded.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-merge-params): Do not reverse variable order,
	and be sure to increment variable index as appropriate.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-inline-lob-one-liner-regexp): Update to
	successfully match optional trailing header arguments in square
	brackets.
	(org-babel-lob-get-info): Update to match the new regexp.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-lob-get-info): If the arguments are empty,
	then allow them to be so.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-merge-params): If variables are not named they
	are assigned in order.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el: Remove code comment about online documentation.

	* ob-exp.el: Remove code comment about online documentation.

	* ob-lob.el: Remove code comment about online documentation.

2011-07-28  Jambunathan K  <kjambunathan@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Fix signature of org-<backend>-format-source-code-or-example function.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-sha1-hash): Replace call to
	called-interactively-p with backwards-compatible interactive-p.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-lob-one-liners):
	Appropriate replacement of inline call blocks with their results.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-inline-lob-one-liner-regexp): Removing this
	trailing space ensures that the insertion of the results looks
	nice.

	* ob.el (org-babel-insert-result): Insert inline lob line results
	as inline results.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-lob-one-liners): Calculate length
	appropriately given the style (block or inline) of the lob line.

	* ob-lob.el (org-babel-block-lob-one-liner-regexp): New regexp
	specific for block lob lines.
	(org-babel-inline-lob-one-liner-regexp): New regexp specific for
	inline lob lines.
	(org-babel-lob-one-liner-regexp): Combination of two lob regexps.
	(org-babel-lob-get-info): Return info from *either* the block or
	inline lob lines.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-lob-one-liners): Corrected the
	structure of the resulting info list.

	* ob-lob.el (org-babel-default-lob-header-args): Export the
	results of call lines by default.

2011-07-28  Niels Giesen  <niels.giesen@gmail.com>  (tiny change)

	* org-icalendar.el (org-print-icalendar-entries): Add 'uid text
	property based on the ID property of the org entry to the first
	character of the diary entry.

2011-07-28  Jambunathan K  <kjambunathan@gmail.com>

	* org-footnote.el
	(org-footnote-insert-pos-for-preprocessor): New variable.
	(org-footnote-normalize): Use it.

2011-07-28  Jambunathan K  <kjambunathan@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Simplify.  Also add `org-native-text' as a text property to the
	formatted text and throw error for unknown backends.

2011-07-28  Jambunathan K  <kjambunathan@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Add support for: - custom formatters for existing backends - seamless
	plugging in of new backends.

2011-07-28  Jambunathan K  <kjambunathan@gmail.com>

	* org-exp.el (org-export-backends): New variable.
	(org-export-select-backend-specific-text): Use above
	variable.  Also mark text between #+BACKEND and
	#+BEGIN_BACKEND...#+END_BACKEND with org-native-text property.
	This text property is currently used only by the new line-oriented
	generic exporter (which is not yet part of the repo).

2011-07-28  Jambunathan K  <kjambunathan@gmail.com>

	* org-exp.el (org-export): Reserve keys 'o' and 'O' for
	OpenDocumentText export and bind them to `org-export-as-odt' and
	`org-export-as-odt-and-open'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-src-block): Less verbose when in batch
	mode.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-execute:clojure): Convert vectors to
	lists before reading into emacs-lisp.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-C.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-asymptote.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-awk.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-clojure.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-haskell.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-latex.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-lisp.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-ocaml.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-perl.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-python.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-ruby.el (ob-tangle): Initialize variable from `ob-tangle'.

	* ob-tangle.el (ob-tangle): Initialize variable from `ob-tangle'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-awk.el: New file.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-emacs-lisp.el (org-babel-execute:emacs-lisp):
	Respects ":results verbatim".

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-float): Aliases for `diary-float'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-babel-python-evaluate-session):
	Send comint-send-input after every line when interacting with an
	interactive python process.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-reset-checkbox-state-subtree): Make the command
	more robust, and correctly update check-boxes in the whole
	sub-tree.
	(org-update-checkbox-count): Fix bug accumulating count of checkboxes
	when walking a subtree.
	(org-update-checkbox-count-maybe): Add an optional argument passed to
	org-update-checkbox-count.

2011-07-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* org.el (org-fontify-meta-lines-and-blocks): Ignore errors.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-emacs-lisp.el (org-babel-execute:emacs-lisp): Respect the
	":results scalar" header argument combination.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org-src.el: Append a space character to copied text so that the
	final text property change is picked up correctly.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-file): Use the new argument list
	to org-babel-tangle.
	(org-babel-tangle): Now when called with a prefix argument, only the
	current code block is tangled.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-parse-list): Replace transitional
	check-boxes with "[CBTRANS]" string during parsing.
	(org-list-to-generic): Use the new property `:cbtrans' to configure
	export string for transitional check-boxes.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-add-entry-to-org-agenda-diary-file):
	Use stable internal `org-anniversary' instead of
	diary-anniversary.
	(org-class): New function.
	(org-diary-class): Use `org-class'.
	(org-anniversary, org-cyclic, org-date, org-block): New functions.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-header-arg-names): Adding noweb-ref to the list
	of header argument names.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-expand-noweb-references): Concatenating all
	bodies with the appropriate name or :noweb-ref header argument.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org.el (org-find-dblock, org-clocktable-try-shift): Make regexp
	work also when #+begin line is indentex.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-src-block-regexp): Babel: code block may have
	empty bodies.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-macs.el (org-without-partial-completion): Avoid calling by
	name a function unknown to the compiler but explicitly checked by
	program logic.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-mouse.el (org-agenda-earlier): Declaring previously unknown
	function.
	(org-agenda-later): Declaring previously unknown function.
	(org-agenda-mode-map): Declaring previously unknown variable.

	* org.el (org-read-date-analyze): Explicitly ignore the return
	value of a function.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-agenda.el (org-agenda-mode): Globally replace
	buffer-substring-filters with filter-buffer-substring-functions.

	* org-indent.el (org-indent-mode): Globally replace
	buffer-substring-filters with filter-buffer-substring-functions.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-ascii.el (org-export-as-ascii): Replacing '(λ...) with
	#'(λ...).

	* org-attach.el: Replacing '(λ...) with #'(λ...).
	(org-attach-commit): Replacing '(λ...) with #'(λ...).

	* org-exp.el: Replacing '(λ...) with #'(λ...).
	(org-export-handle-include-files): Replacing '(λ...) with #'(λ...).

	* org-html.el: Replacing '(λ...) with #'(λ...).
	(org-export-as-html): Replacing '(λ...) with #'(λ...).

	* org-mouse.el: Replacing '(λ...) with #'(λ...).
	(org-mouse-popup-global-menu): Replacing '(λ...) with
	(org-mode-hook): Replacing '(λ...) with #'(λ...).
	(org-agenda-mode-hook): Replacing '(λ...) with #'(λ...).

	* org-src.el: Replacing '(λ...) with #'(λ...).
	(org-src-mode-configure-edit-buffer): Replacing '(λ...) with #'(λ...).

	* org-table.el: Replacing '(λ...) with #'(λ...).
	(org-table-fix-formulas-confirm): Replacing '(λ...) with #'(λ...).

	* org.el: Replacing '(λ...) with #'(λ...).
	(org-confirm-shell-link-function): Replacing '(λ...) with
	(org-category): Replacing '(λ...) with #'(λ...).

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org.el (mailcap-parse-mailcaps): Declaring functions used by
	`org-open-file'.
	(mailcap-extension-to-mime): Declaring functions used by
	`org-open-file'.
	(mailcap-mime-info): Declaring functions used by `org-open-file'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-agenda.el (org-agenda-redo): Replacing call to now-defunct
	function `interactive-p'.
	(org-agenda-show-1): Replacing call to now-defunct function
	`interactive-p'.
	(org-agenda-set-tags): Replacing call to now-defunct function `interactive-p'.

	* org-ascii.el: Replacing call to now-defunct function
	`interactive-p'.
	(org-export-as-latin1): Replacing call to now-defunct function
	`interactive-p'.
	(org-export-as-latin1-to-buffer): Replacing call to now-defunct
	function `interactive-p'.
	(org-export-as-utf8): Replacing call to now-defunct function
	`interactive-p'.
	(org-export-as-utf8-to-buffer): Replacing call to now-defunct function
	`interactive-p'.
	(org-export-region-as-ascii): Replacing call to now-defunct
	function `interactive-p'.Replacing call to now-defunct function
	`interactive-p'.

	* org-docbook.el: Replacing call to now-defunct function
	`interactive-p'.
	(org-export-region-as-docbook): Replacing call to now-defunct
	function `interactive-p'.Replacing call to now-defunct function
	`interactive-p'.

	* org-html.el: Replacing call to now-defunct function
	`interactive-p'.
	(org-export-region-as-html): Replacing call to now-defunct
	function `interactive-p'.Replacing call to now-defunct function
	`interactive-p'.

	* org-latex.el: Replacing call to now-defunct function
	`interactive-p'.
	(org-export-region-as-latex): Replacing call to now-defunct
	function `interactive-p'.Replacing call to now-defunct function
	`interactive-p'.

	* org-macs.el: Replacing call to now-defunct function
	`interactive-p'.
	(org-called-interactively-p): Replacing call to now-defunct
	function `interactive-p'.Replacing call to now-defunct function
	`interactive-p'.

	* org-table.el: Replacing call to now-defunct function
	`interactive-p'.
	(org-table-blank-field): Replacing call to now-defunct function
	`interactive-p'.
	(org-table-current-column): Replacing call to now-defunct function
	`interactive-p'.Replacing call to now-defunct function
	`interactive-p'.
	(org-table-current-dline): Replacing call to now-defunct function
	`interactive-p'.Replacing call to now-defunct function
	`interactive-p'.
	(org-table-sort-lines): Replacing call to now-defunct function
	`interactive-p'.
	(org-table-sum): Replacing call to now-defunct function
	`interactive-p'.
	(org-table-rotate-recalc-marks): Replacing call to now-defunct
	function `interactive-p'.
	(org-table-eval-formula): Replacing call to now-defunct function
	`interactive-p'.
	(orgtbl-send-table): Replacing call to now-defunct function `interactive-p'.

	* org.el: Replacing call to now-defunct function `interactive-p'.
	(org-mode): Replacing call to now-defunct function
	`interactive-p'.
	(org-copy-subtree): Replacing call to now-defunct function
	`interactive-p'.
	(org-paste-subtree): Replacing call to now-defunct function
	`interactive-p'.
	(org-store-link): Replacing call to now-defunct function
	`interactive-p'.
	(org-todo): Replacing call to now-defunct function `interactive-p'.
	(org-occur): Replacing call to now-defunct function `interactive-p'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-R.el (ess-local-process-name): This variable wasn't known to
	be defined.

	* ob-lisp.el (org-babel-lisp-dir-fmt): This defcustom now has a
	group specified.

	* ob-tangle.el (org-bracket-link-regexp): This variable wasn't
	known to be defined.
	(org-babel-tangle-combine-named-blocks): Roll my own version of a
	forbidden common lisp function.

	* ob.el (org-babel-sha1-hash): Using a non-deprecated version of
	called-interactively.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-latex.el (org-export-latex-tables): Check for the
	"multiline" option and set the `floatp' option to true when
	multicolumn tables are requested.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-export-as-html, org-html-level-start):
	Only convert section number underscores to dashes.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-bulk-action): Fix bug caused by
	`days-to-time, converting relative to 1 BC, while the code assumed
	it would return a time relative to 1970.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-combine-named-blocks): No longer
	inserting newlines between appended code blocks.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el: We may no longer need to export names along with code
	blocks.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-export-blocks-preprocess):
	Ensure balanced nested begin/end blocks in block bodies.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org-latex.el: Add -shell-escape to pdflatex commands.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-named-block-combination):
	Block combination can now take a number of values.
	(org-babel-tangle-combine-named-blocks): More sophisticated block
	combination behavior.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-do-combine-named-blocks):
	Switch to turn on the combination of code blocks of the same name.
	(org-babel-tangle-combine-named-blocks): Combine blocks of the same
	name.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ruby.el (xmp): Declaring this function to appease the
	compiler.
	(org-babel-execute:ruby): "xmp" result option for outputting
	annotated source code.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>  (tiny change)

	* org-list.el (org-list-to-latex): The enumerate environment in
	latex increments the counter before using it.  Therefore, org-mode
	should set the enumeration counter to the desired value minus one.

2011-07-28  Michael Brand  <michael.ch.brand@gmail.com>  (tiny change)

	* org.el (org-toggle-heading): More comments and fix number of
	stars when toggling from list items.

2011-07-28  Christian Egli  <christian.egli@sbszh.ch>

	* org-taskjuggler.el (org-taskjuggler-clean-effort): Handle any
	effort that is accepted by `org-duration-string-to-minutes´.

2011-07-28  Julien Barnier  <julien@nozav.org>

	* ob-sh.el (org-babel-sh-evaluate): When sending input to comint,
	wait until previous line execution is finished.

	* ob-comint.el (org-babel-comint-with-output): When looking for
	end-of-evaluation indicator, search forward for the indicator
	before searching forward for the prompt.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-entities.el (org-entities): Fix HTML entity for degree.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-auto-align-tags): Change docstring.
	(org-update-parent-todo-statistics): Keep tags aligned even when
	statistics cookies are shifting them.

	* org-list.el (org-update-checkbox-count): Keep tags aligned even
	when statistics cookies are shifting them.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* ob.el (org-babel-sha1-hash): Don't modify info argument by
	side-effect when sorting result-params list.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* ob.el (org-babel-result-regexp): Use non-shy group around
	`org-babel-data-names'.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-insert-link): Set truncate-line in the *Org Link*
	buffer and make sure that it really is set there.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lisp.el (org-babel-lisp-dir-fmt): Defcustom for use in
	changing how/if the current directory is represented to lisp code.
	(org-babel-execute:lisp): More general handling of the default
	directory value.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lisp.el (org-babel-execute:lisp): Setting the value of
	*default-pathname-defaults* to either the value of the :dir header
	argument or the directory of the containing Org-mode file.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lisp.el (org-babel-execute:lisp): No real functional change,
	just aesthetic.

2011-07-28  Sébastien Delafond  <sdelafond@gmail.com>  (tiny change)

	* org.el (org-mode-flyspell-verify): This is useful when using
	flyspell with a non-English dictionary, or if some of your
	keywords are in another language.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-exp.el (org-export): Use new compatibility function
	`org-activate-mark'.

	* org-compat.el (org-activate-mark): New function.
	Provide `activate-mark' if not present (e.g. Emacs 22).

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-table.el (org-table-follow-field-mode): Declare variable to
	keep byte compiler happy.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-footnote.el (org-id-uuid): Declare function, silence byte
	compiler.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-bibtex.el (org-bibtex-headline): Don't use equalp at
	run-time, compare downcased strings.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-bibtex.el (org-id-locations): Declare variable to silence
	byte compiler.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-id.el (org-id-locations): Fix docstring, remove reference to
	non-existent option.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-self-insert-command): Use `delete-char' instead of
	`delete-backward-char'.

	* org-table.el (orgtbl-self-insert-command): Ditto.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-special-chars): Save match data
	when checking for table.el table.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-re-property): Move before its first use.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-preprocess):
	Add `original-indentation' property to footnotes so they cannot
	possibly end a list by being less indented than the item they
	belong to.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lisp.el (org-babel-expand-body:lisp): No longer wraps biddies
	in `progn'.
	(org-babel-execute:lisp): Wraps bodies in `progn' as they are passed
	to swank.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clocktable-write-default): Implement adding
	property columns to the clock table.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-toggle-item): Move parenthesis to correct location.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-default-priority):
	(org-priority-start-cycle-with-default): Improve docstring.
	(org-priority): Throw error when priority is out of range.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-self-insert-command): Catch the case of
	`buffer-undo-list' eq t.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-toggle-heading): Region should be considered as made
	of full lines, without the last one if region-end is at bol.
	Removed unused variables.  Refactored and commented code.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-toggle-item): When region includes an headline less
	indented than first one, set it as the new reference.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-to-subtree): If the list is before first
	heading and `org-odd-levels-only' is non-nil, the first item gets
	two stars instead of one.

	* org.el (org-reduced-level): A level of 0 was reduced to 1 with
	`org-odd-levels-only' non-nil.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-toggle-item): Converting an heading to an item would
	sometimes insert unnecessary spaces before it, and unwanted space
	with `org-indent-mode' on.  Changing some text into an item
	wouldn't always preserve indentation.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-current-plist): Improve docstring.
	(org-capture-put): Add docstring.
	(org-capture-get): Add docstring.
	(org-capture-member): Add LOCAL argument.  Add docstring.
	(org-capture-set-target-location): Store the time received from a
	date prompt into the :prompt-time property.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-mark-list-properties): Even if context is
	invalid, mark list item with `list-context' property.

	* org-list.el (org-list-forbidden-blocks): Add exporters specific
	blocks to the list of forbidden blocks.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-sort-list): Function tries to intern
	getkey-func before it is defined, so it's always nil.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org.el (org-babel-load-languages): Adding ob-awk to the list of
	executable languages.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-get-field): Make sure the new field
	content is at least one space character.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-crypt.el: Check for `daemonp' before using it.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sh.el (ob-ref): Uses `ob-ref' to resolve the value of the
	:stdin header argument.
	(org-babel-execute:sh): Use the :stdin header argument.
	(org-babel-sh-var-to-sh): Split the bulk of this function off into a
	new sub-function.
	(org-babel-sh-var-to-string): New function for converting elisp
	values to strings that make sense for parsing with sh.
	(org-babel-sh-evaluate): Adding "stdin" option to session and
	external evaluation options.

2011-07-28  Roland Kaufmann  <rlndkfmn+orgmode@gmail.com>  (tiny change)

	* org-exp.el (org-remove-formatting-on-newlines-in-region):
	New function.
	(org-export-format-source-code-or-example):
	Call `org-remove-formatting-on-newlines-in-region'.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-entry-put): Prevent adding of extra space to value
	if property already exists.

2011-07-28  Jambunathan K  <kjambunathan@gmail.com>

	* org-html.el (org-export-as-html): Don't expand non-data lines of
	table.el tables.
	(org-html-expand): Remove the (buggy) test for non-data lines
	in table.el tables.  The test is now done as part of
	org-export-as-html.
	(org-format-table-table-html-using-table-generate-source):
	Add test for spanning of cells in table.el tables using
	table.el's own library routine.  Optionally suppress export of
	simple table.el tables.
	(org-format-table-html): Remove the (buggy) test for spanned
	table.el tables.  The test is now done as part of
	org-format-table-table-html-using-table-generate-source.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-special-chars): Do nothing in
	table.el tables.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture): Ignore errors when creating a
	link.

2011-07-28  Nick Dokos  <nick@dokosmarshall.org>  (tiny change)

	* org-exp.el (org-export-define-heading-targets): Use dash instead
	of underscore to make labels valid.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-R.el (org-babel-R-write-object-command): Ensure that all data
	is written to the results file before Emacs notices that the file
	exists.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-code): Remove usage of a macro which is
	defined locally on my system, but not globally in Emacs.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-do-export): Use `org-babel-exp-code' to
	generate code block output.
	(org-babel-exp-code): Re-create the code block body for exporting
	source code.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org.el (org-read-date): Bury Calendar buffer after using it for
	selecting a date.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-separating-blank-lines-number):
	Fix confusion between point and item beginning.  Now, if no
	information is available, truly follow user preference when it
	inserts blank lines manually.
	(org-list-insert-item): Send correct argument to the preceding
	function.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-src-block-regexp): Keep the now-mandatory
	newline inside of the code block body.

2011-07-28  Sean O'Halpin  <sean.ohalpin@gmail.com>  (tiny change)

	* ob.el: Avoid spurious matches to literal.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-indent-line-function): Don't include #+include
	lines.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-keys.el (org-babel-key-bindings): Adding key sequence for
	org-babel-check-src-block.

	* ob.el (org-babel-expand-src-block): Fit within 80 cols.
	(org-babel-edit-distance): Returns the edit distance of two
	strings.
	(org-babel-check-src-block): Check a code block for errors.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org-capture.el (org-capture-templates): Fix bug in customization
	setup.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el
	(org-table-exit-follow-field-mode-when-leaving-table): New option.
	(org-table-check-inside-data-field): New optional argument
	`noerror'.  When set, the function will only return nil instead of
	throwing an error.
	(org-table-edit-field): Interpret double prefix argument, and improve
	the properties of the editing window.
	(org-table-follow-field-mode): New minor mode.
	(org-table-follow-fields-with-editor): New function.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-get-todos): Call `org-agenda-skip'
	first, then check if timestamps cause exclusion.

	* org.el (org-scan-tags): Call `org-agenda-skip' first, then check
	if timestamps cause exclusion.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-full-item-re): Allow description term to
	have a newline character after the colons.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-sort-list): No longer ignore with-case
	argument: the function sorted case-sensitively, regardless of
	argument.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-resolve): Using the new result regexp.

	* ob.el (org-babel-data-names): Configurable list of names of
	data.
	(org-babel-result-regexp): Using new results regexp.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-special-properties): Add CLOCKSUM to the special
	properties.

2011-07-28  Robert P. Goldman  <rpgoldman@real-time.com>  (tiny change)

	* ob-exp.el (org-babel-exp-in-export-file):
	Bind `org-link-search-inhibit-query' to t to inhibit prompts.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-add-options-to-plist): Use the right
	match group.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Protect index string.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Pipe index entries
	through `org-export-latex-fontify-headline'.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-add-options-to-plist): Fix the option
	parser.

2011-07-28  Robert P. Goldman  <rpgoldman@real-time.com>  (tiny change)

	* org-latex.el (org-export-latex-preprocess): Replace index
	entries.

2011-07-28  Robert P. Goldman  <rpgoldman@real-time.com>  (tiny change)

	* org.el (org-structure-template-alist): Add an easy template for
	index (i), and move include file to I from i.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-agenda.el (org-agenda-open-link): Pass entire text of agenda
	line to `org-offer-links-in-entry'.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-bibtex.el (org-bibtex-search): New function.
	(org-bibtex-export-to-kill-ring): New function.  Export to kill
	ring.
	(org-bibtex-create-in-current-entry): New function
	(org-bibtex-create): Make it easier to add bib fields to an
	existing headline.
	(org-bibtex-export-arbitrary-fields)
	(org-bibtex-treat-headline-as-title): Fix typos
	(org-bibtex-fleshout): Don't upcase optional field; remove ":"
	from type completion.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-bibtex.el (org-bibtex-treat-headline-as-title):
	New defcustom.
	(org-bibtex-headline): Only use headline text (not TODO or other
	metadata) to generate title field and auto key.
	(org-bibtex-fleshout): Allow user to choose whether to treat
	headline as title.

2011-07-28  Tom Dye  <tsd@tsdye.com>

	* org-bibtex.el: Added crossref field to other fields.

2011-07-28  Tom Dye  <tsd@tsdye.com>

	* org-bibtex.el: Add crossref option to incollection.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-bibtex.el (org-bibtex-headline): Don't export TYPE property
	as field.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-bibtex.el (org-bibtex-key-property): When storing key in ID,
	warn if a duplicate ID is generated.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-bibtex.el (org-bibtex-tags): New variable.
	(org-bibtex-tags-are-keywords): New variable.
	(org-bibtex-no-export-tags): New variable.
	(org-bibtex-headline): Export tags as comma-separated bibtex
	keywords.
	(org-bibtex-read): Import bibtex keywords field as tags.

2011-07-28  Manuel Giraud  <manuel.giraud@univ-nantes.fr>

	* org-publish.el (org-publish-find-date): Optimization.

2011-07-28  Tassilo Horn  <tassilo@member.fsf.org>

	* org-gnus.el (org-gnus-follow-link): Don't request scan of group
	when following link.

2011-07-28  Manuel Giraud  <manuel.giraud@univ-nantes.fr>

	* org-publish.el (org-publish-project-alist): Document new
	:sitemap-sans-extension property.
	(org-publish-org-sitemap): Use new `sitemap-sans-extension'
	setting.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-remove-uninherited-tags): Rename from
	`org-remove-iniherited-tags'.
	(org-scan-tags): Fix typo in function call.
	(org-get-tags-at): Fix typo in function call.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org.el (org-get-tags-at): Don't include filetags if local is t.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-expand-body:clojure): Qualify pp
	dispatch functions, wrap body in `(do )'.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-fontify-meta-lines-and-blocks): Fix bug which
	resulted in the creation of multiple overlays in src blocks.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-execute:clojure): If results are not
	readable by lisp, then return them as a string.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-bibtex.el (org-bibtex): Now prompts for a file name.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-bibtex.el (org-bibtex-create): Adding prefix argument which
	will result in prompting for optional fields.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-bibtex.el (org-bibtex-headline): Rename flet function `get'
	which was causing compile problems.
	(org-bibtex-fleshout): Rename flet function `get' which was causing
	compile problems.
	(org-bibtex-write): Rename flet function `get' which was causing
	compile problems.

2011-07-28  Christian Egli  <christian.egli@sbszh.ch>

	* org-taskjuggler.el (org-taskjuggler-clean-id): Make sure an id
	never starts with a number.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-bibtex.el (org-bibtex-export-arbitrary-fields): New option.
	(org-bibtex-key-property): New option.
	(org-bibtex-put): Make use of new `org-bibtex-key-property'
	variable.
	(org-bibtex-headline): Make use of new
	`org-bibtex-export-arbitrary-fields' and `org-bibtex-key-property'
	variables.
	(org-bibtex-autokey): Make use of new `org-bibtex-key-property'
	variable.
	(org-bibtex-fleshout): Make use of new `org-bibtex-key-property'
	variable.
	(org-bibtex-write): Make use of new `org-bibtex-key-property'
	variable.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-bibtex.el: Updating Copyright dates, author information,
	commentary and history notes.
	(org-bibtex-types): List of bibtex types with descriptions and
	required and optional fields.
	(org-bibtex-fields): List of bibtex fields with descriptions.
	(*org-bibtex-entries*): Special variable to hold parsed bibtex
	entries.
	(org-bibtex-autogen-keys): Custom variable controlling whether
	bibtex keys are automatically generated
	(org-bibtex-prefix): Custom variable allowing use of optional prefix
	for bibtex properties in Org-mode headlines.
	(org-bibtex-get): Helper function for accessing bibtex elements of a
	property list.
	(org-bibtex-put): Helper function for inserting bibtex element into
	a property list.
	(org-bibtex-headline): Return a bibtex entry of the given headline
	as a string.
	(org-bibtex-ask): Prompt the user to fill in the value of a bibtex
	field.
	(org-bibtex-autokey): Generate a bibtex key for the current
	headline.
	(org-bibtex-fleshout): Fill in missing bibtex properties of the
	current headline.
	(org-bibtex): Export the current Org-mode buffer to a bibtex buffer.
	(org-bibtex-check): Check that all bibtex properties are present in
	the current headline.
	(org-bibtex-check-all): Check all headlines in the current buffer.
	(org-bibtex-create): Create a new bibtex headline at the current
	level.
	(org-bibtex-read): Read the current bibtex entry from a bibtex file.
	(org-bibtex-write): Write the most recently read bibtex entry into
	an Org-mode file.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-clock-consistency-checks): Allow to
	set properties.
	(org-agenda-show-clocking-issues): Handle faces.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ditaa.el (org-babel-default-header-args:ditaa): Specify utf8
	content by default with "-Dfile.encoding=UTF-8".

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ditaa.el (org-babel-execute:ditaa): New ":java" header
	argument.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-preprocess-string): Mark list end before
	expanding macros.  Thus, a macro inside a list and containing
	blank lines cannot break the list structure.
	(org-export-preprocess-apply-macros): Multi-lines macros get
	indented with the same indentation as the first line.  Thus, we
	are sure that every line belongs to the same list as the first
	line, if such list exists.  Also add comments in code.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-clock-consistency-checks): New option.
	(org-agenda-list): Handle display change to clock check.
	(org-agenda-get-progress): Show only clock entries if we are doing
	the consistency check.
	(org-agenda-show-clocking-issues): New function.
	(org-agenda-check-clock-gap): New function.
	(org-agenda-view-mode-dispatch): Offer consistency check.
	(org-agenda-log-mode): Handle switch to clock only display.
	(org-agenda-set-mode-name): Show lighter for Clockcheck.

	* org.el (org-hh:mm-string-to-minutes): Accept an integer argument
	and return it unchanged.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct): When walking down the list, the
	function would not pay attention to drawers or blocks indentation.
	Thus, such constructs couldn't consistently end an item or a list.
	This patch ensures line indentation is stored (if applicable)
	before skipping them.  Also fixed doc-string and comments.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export): Add EXPORT_FILE_NAME to the enclosing
	tree properties.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export): Define a bound for finding enclosing
	tree with class/title definition.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export): Go to next heading before searching
	backward, so make this also work if we are on the headline of the
	entry with the property.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-promote):
	(org-demote): Soften the previous change, by only removing the
	flyspell function from after-change functions, because that was
	the one causing the slowdown - at least much of it.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org.el (org-promote, org-demote): Turn off
	after-change-functions to speed up the reindentation of text.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ocaml.el (org-babel-ocaml-read-list):
	Use `org-babel-script-escape'.
	(org-babel-ocaml-read-array): Use `org-babel-script-escape'.

2011-07-28  Manuel Giraud  <manuel.giraud@univ-nantes.fr>

	* org-html.el (org-html-handle-links): Add an alternate for inline
	images.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-bulk-action): Do not use the entries
	variable before it is defined.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-src.el (org-src-lang-modes): Add a language alias of "C"
	to "c".

2011-07-28  Shaun Johnson  <shaun@slugfest.demon.co.uk>  (tiny change)

	* ob-tangle.el (org-babel-tangle): Make it work in an indirect
	buffer.

2011-07-28  Manuel Giraud  <manuel.giraud@univ-nantes.fr>

	* org-html.el (org-html-make-link): Correct a bug in coderef link.

2011-07-28  Bernt Hansen  <bernt@norang.ca>

	* org-agenda.el (org-agenda-filter-by-tag): Fix variable name
	typo.

2011-07-28  Bernt Hansen  <bernt@norang.ca>

	* org-agenda.el (org-agenda-get-timestamps): Fix agenda display
	when headlines are missing.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-mobile.el (org-mobile-push): Move call to hook, make it the
	first thing of the push operation.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-params-from-buffer): Now looking for header
	arguments in #+Properties: as well as #+Babel:.  Also, we're no
	longer caching these results into a file local variable.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-babel-python-evaluate-external-process):
	Allow parsing as a table in the case of ":results output table".
	(org-babel-python-evaluate-session): Allow parsing as a table in
	the case of ":results output table".

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-bulk-action): Allow bulk scatter in
	all possible agenda views.  Use `org-agenda-schedule' instead of
	`org-agenda-date-later'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-emacs-lisp.el (org-babel-execute:emacs-lisp): Now supports
	":results output".

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org.el (org-entry-get, org-entry-delete, org-entry-put)
	(org-property-values, org-delete-property-globally):
	Use `org-re-property'.
	(org-re-property): New function allowing to build a regexp to
	match a property.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org.el (org-property-values): Enhance docstring.

2011-07-28  Ethan Ligon  <ligon@are.berkeley.edu>  (tiny change)

	* org-html.el (org-html-export-list-line): Fix regexp for
	detecting description lists to allow "::" marker to be last
	visible element at end of line.
	* org-docbook.el (org-docbook-export-list-line): Fix regexp for
	detecting description lists to allow "::" marker to be last
	visible element at end of line.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-table.el (org-table-cleanup-narrow-column-properties):
	Use point-min rather than 1 when moving in the buffer.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-in-valid-context-p): Rename from
	`org-list-in-valid-block-p'.
	(org-at-item-p, org-list-search-generic): Use renamed function.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-set-font-lock-defaults): Be more strict when
	recognizing description items, and do not fontify wrong cases
	like: "- term ::description" or "1. term :: description".

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el: Pay attention to end of footnote.  Before closing
	the command, ensure that list is properly closed or that last link
	is separated from the curly brace.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-indent-line-function): Footnote definition must stay
	at column 0 to be recognized as such.  Body below can have normal
	indentation, so it should ignore its definition when computing
	indentation.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-protocol.el (org-protocol-remember, org-protocol-capture):
	More appropriate message.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el (org-capture-clock-keep): New local variable.
	(org-capture, org-capture-finalize): Use it and fix a bug when
	:clock-keep is set to `t'.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org-exp.el (org-export-preprocess-string): Handle include files
	before processing macros.

2011-07-28  Bernt Hansen  <bernt@norang.ca>

	* org-agenda.el: Remove obsolete code for adding todo list in
	front of the agenda.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-latex.el (org-export-latex-convert-table.el-table):
	Fix format-string for insertion of captions.

2011-07-28  Nick Dokos  <nicholas.dokos@hp.com>  (tiny change)

	* org-exp.el (org-export-remove-comment-blocks-and-subtrees):
	Fix regexp.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org.el (org-read-date-analyze): Help matching dotted European
	dates, like 31. 12. 2007

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lisp.el (org-babel-execute:lisp): Fix typo.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lisp.el (org-babel-execute:lisp): Turn vectors into lists
	before reading by elisp.
	(org-bable-lisp-vector-to-list): Stub of a vector->list function,
	should be replaced with a cl-vector->el-vector function.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lisp.el (org-babel-execute:lisp): Now using
	`org-babel-reassemble-table' to apply the appropriate header
	arguments to results.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-end-of-meta-data-and-drawers): New function.

	* org-capture.el (org-capture-place-plain-text): Implement adding
	plain text templates to Org nodes.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-beamer.el (org-beamer-environments-extra): Fix docstring.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-exp.el (org-export-handle-comments): Add the org-protected
	property to the replacement string.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-html.el (org-export-as-html, org-html-level-start):
	Fix logic for section number printing when NUM is an integer.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-latex.el (org-export-latex-special-chars): Fix regexp for
	`single' special characters and ellipsis.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org.el (org-point-at-end-of-empty-headline):
	Bind `case-fold-search' to nil.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-fill-template): Resolve new %<...>
	template escape.
	(org-capture-templates): Document new %<...> template escape.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-process-params): Make this function idempotent,
	as it will sometimes be called multiple times.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-ts-regexp-both): Add "]" to class of characters that
	should not be matched.
	(org-ts-regexp0, org-ts-regexp1): Do not start a class with
	"^]-+", because that tries to (not) match characters between "]"
	and "+".  Instead, move the "-" to the end of the class where it
	causes no harm.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-R.el (org-babel-edit-prep:R): Associate the appropriate R
	process with the edit buffer when :session is specified.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-collect-blocks): Brought the link
	extraction code into line with a newer version of the
	`org-store-link' function.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lisp.el (org-babel-expand-body:lisp): New body expansion
	wrapping the expression in either a let or progn, and possibly a
	pretty-print function invocation.
	(org-babel-execute:lisp): Greatly simplified method of executing
	lisp code blocks.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el: Move `org-update-checkbox-count-maybe' call outside
	of ̀save-excursion' to get back to original position.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-numbered-action-format): New option.
	(org-new-numbered-action): New command.
	(org-collect-todos-in-subtree): New command.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-with-tasks): New option.
	(org-export-plist-vars): Add :tasks property.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-ascii.el (org-export-as-ascii): Pass the :done-tasks
	property to the export preprocessor.

	* org-docbook.el (org-export-as-docbook): Pass the :done-tasks
	property to the export preprocessor.

	* org-html.el (org-export-as-html): Pass the :done-tasks property
	to the export preprocessor.

	* org-latex.el (org-export-as-latex): Pass the :done-tasks
	property to the export preprocessor.

	* org-exp.el (org-export-with-done-tasks): New option.
	(org-export-plist-vars): Add entry for :done-tasks.
	(org-export-preprocess-string): Call `org-export-remove-done-tasks'.
	(org-export-remove-done-tasks): New function.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-keywords-maybe): Protect # in
	tags.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-find-olp): Use the level of the correct match to
	continue search.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-toggle-checkbox): Build value of
	org-keyword-time-regexp instead of using it directly, as it's
	buffer-local, and function might be called outside Org.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct, org-in-item-p): Don't assume end of
	blocks or drawers necessarily start somewhere.  It it isn't the
	case, treat them as normal text.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-results): Use code block name when
	finding cached results.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-latex.el (org-export-latex-date-format): Change default date
	format to \today.  This has the same result but respects the
	language set in the document by default.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-checkbox): When called from an headline,
	function would normally skip drawers, but not if a SCHEDULED or
	DEADLINE keyword is standing before the drawer.  Also avoid
	problems if function is called in buffers not is Org mode.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-clock-report): Change the scope of the
	inserted clock report depending on whether the point is within a
	subtree (:scope subtree) or not (:scope file).

2011-07-28  Puneeth Chaganti  <punchagan@gmail.com>

	* org-html.el (org-export-as-html): Fix export of footnotes
	containing lists, tables, quotes, etc.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-latex.el (org-export-latex-preprocess): Correctly match
	starred command names.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-html.el (org-export-as-html): Get local value of
	org-export-with-section-numbers from the buffer's plist.
	Deal specially with the case the resulting value is an integer.
	(org-html-level-start): New optional argument of the option plist used
	instead of `org-export-with-section-numbers'.  Also deal specially
	with the case that the value is an integer.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-latex.el (org-export-latex-subcontent): Deal specially with
	the case that NUM is an integer.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-protocol.el (org-protocol-do-capture): Allow template keys
	of two characters.
	(org-protocol-default-template-key): Update the docstring to
	reflect the change in `org-protocol-do-capture'.

2011-07-28  Christian Egli  <christian.egli@sbszh.ch>

	* org-taskjuggler.el: Fix a typo in the commentary.

2011-07-28  Christian Egli  <christian.egli@sbszh.ch>

	* org-taskjuggler.el (org-taskjuggler-open-task): Only emit a
	"purge allocations" statement if we are not targeting tj3.

2011-07-28  Christian Egli  <christian.egli@sbszh.ch>

	* org-taskjuggler.el (org-taskjuggler-assign-resource-ids):
	Replace recursive implementation with an iterative one.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sh.el (org-babel-sh-var-to-sh): Fix insertion of tabular
	data into shell variables.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-html.el (org-html-handle-time-stamps): Protected linebreak
	element after timestamp markup.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-html.el (org-html-handle-links): Don't protect img tag in
	link description.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-formula-handle-first/last-rc):
	Bind `char'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-in-item-p): Re-build `org-drawer-regexp',
	whatever the major mode is.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-export-templates): Fix default
	templates.
	(org-inlinetask-export-handler): Ensure contents of inline task,
	if any, starts and ends with a newline character.  Refactor and
	comment code.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-datetree-find-date-create): Lower-case for
	variable names in `define-function' form.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-convert-region): Throw error when
	SEPARATOR is smaller than 1.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-colview.el (org-columns-display-here): Fix heading retrieval
	in Org buffers.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Last brace shouldn't
	be on the same line as a list end marker.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org.el (org-icompleting-read): Do not use useless lambda.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-format-agenda-item): Fix length computing.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-format-agenda-item): Fix comment and use
	`add-text-properties'.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-highlight-todo): Remove useless
	`concat'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-to-generic): Set a default term for
	ill-formed description lists.  Do not insert newline characters
	unless told to.
	(org-list-to-texinfo, org-list-to-html): Apply changes to
	`org-list-parse-liste'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-clock-clocktable-language-setup): Add a
	string.
	(org-clocktable-write-default): Use the new localized string
	in `org-clock-clocktable-language-setup'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-taskjuggler.el (org-taskjuggler-compute-task-leafiness):
	(org-taskjuggler-assign-resource-ids): Replace recursive
	implementation with an iterative one.

2011-07-28  Christian Egli  <christian.egli@alumni.ethz.ch>

	* org-taskjuggler.el (org-taskjuggler-components): Escape quotes
	in headlines.

2011-07-28  Christian Egli  <christian.egli@alumni.ethz.ch>

	* org-taskjuggler.el (org-taskjuggler-compute-task-leafiness):
	Compute the leafiness of a node.
	(org-taskjuggler-open-task, org-export-as-taskjuggler): Mark a
	node as a milestone if it is a leaf and has no effort.

2011-07-28  Christian Egli  <christian.egli@alumni.ethz.ch>

	* org-taskjuggler.el (org-export-taskjuggler-target-version):
	(org-taskjuggler-targeting-tj3-p): Add some minimal infrastructure
	to handle export to both tj2 and tj3.
	(org-taskjuggler-open-task): Use a different way to purge
	allocations for tj2 and tj3.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-footnote.el (org-footnote-auto-label): New random option.

	* org-footnote.el (org-footnote-new): Create random footnote
	labels with unique ids.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-footnote.el (org-footnote-create-definition): Allow for
	footnote sections above the current footnote insertion point.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-footnote.el (org-footnote-create-definition): Don't search
	for last footnote when in org-mode file.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Handle links with
	`org-html-handle-links' after we handle special characters
	conversions.
	(org-html-make-link, org-export-html-format-image):
	Don't protect html with @ anymore, as links are now handled after
	special characters conversions.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-get-timestamps):
	(org-agenda-get-scheduled): Fix call to `org-format-agenda-item'.
	(org-format-agenda-item): Remove no-prefix argument.
	(org-agenda-change-all-lines): Call org-format-agenda-item without the
	no-prefix argument.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-highlight-todo): Stop using
	prefix-length.
	(org-cmp-alpha): Stop using prefix-length.
	(org-agenda-open-link): Stop using prefix-length.
	(org-agenda-change-all-lines): Stop using prefix-length.

	* org-colview.el (org-columns-display-here): Stop using
	prefix-length.  Always return claned items.

	* org-mobile.el (org-mobile-write-agenda-for-mobile): Stop using
	prefix-length.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-collect-blocks): Don't call
	`org-store-link' interactively as it can confuse the setting of
	`org-link-to-org-use-id' and cause undue edits to the org-mode
	buffer during tangling.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-html.el (org-export-html-format-image): Protect <p> element
	of image caption.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-read-date-force-compatible-dates): New option.
	(org-read-date, org-read-date-analyze): Check representable date range.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Fix export of email.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-spec-to-string): Check value of padline
	on tangling, no longer use the now-removed variable
	`org-babel-tangle-pad-newline'.

	* ob.el (org-babel-header-arg-names): Add padline to the list of
	header argument names.
	(org-babel-default-header-args): Set the default value of padline to
	"yes".
	(org-babel-merge-params): Cleaned up the merge logic, added padline.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-header-arg-names): Adding "shebang" to known
	code block header argument names.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-crypt.el: Remove useless TODO in comments.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): The default postamble now only
	export a date paragraph if `org-export-time-stamp-file' is
	non-nil.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-xml): Remove the defgroup of
	org-export-xml.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-insert-plist-item): Remove.
	(org-export-html-preamble): Default to `t'.  Accept functions.
	(org-export-html-postamble): Default to `auto'.
	Accept functions and distinguish between 'auto (no formatting string)
	and `t' (default formatting string).
	(org-export-as-html): Handle org-export-html-preamble and
	org-export-html-postamble new defaults/allowed values.
	Define email and creator-info before using them.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-protect-char-alist): Fix typo in
	custom type definition.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-do-export): Now runs for empty :session
	arguments.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-parse-list): Fix regexp.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-html.el (org-export-html-format-image): Protect image
	elements.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-body-hook): Hook for changing the
	contents of a code block body on export.
	(org-babel-tangle-collect-blocks): Apply
	`org-babel-tangle-body-hook' to the collected bodies of code blocks.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-html.el (org-html-make-link, org-html-handle-links):
	Protect generated XHTML elements.
	(org-export-as-html): Expand character entities after creating markup
	for links and timestamps.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Bugfix: insert email
	correctly.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el: Bugfix: prevent infinite matching of the `&'
	character.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-fill-paragraph): `fill-forward-paragraph' function
	has been introduced with emacs 23.1.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-attach.el: Allow to store a link to the attach-dir location.

2011-07-28  Puneeth Chaganti  <punchagan@gmail.com>

	* org-agenda.el (org-agenda-bulk-action): Allow the user to run a
	function.

2011-07-28  Bernt Hansen  <bernt@norang.ca>

	* org-clock.el (org-clock-in): Allow clocking in new tasks
	inserted before the current clocking task.

2011-07-28  Bernt Hansen  <bernt@norang.ca>

	* org-clock.el (org-clock-in): Set default clocking task when
	already clocking the task.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-adaptive-fill-function): When a region is specified
	first line of paragraph isn't skipped, so fill-paragraph have to
	be computed even if point is at an item.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-in-valid-block-p): New function.
	(org-at-item-p, org-list-search-generic): Use new function.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-indent-line-function): Text in both a list and a
	valid block is indented with regards to current item, not to block
	boundaries.

2011-07-28  Manuel Giraud  <manuel.giraud@univ-nantes.fr>

	* org-html.el (org-format-org-table-html): Fix anchors in HTML
	export (thanks to <aankhen@gmail.com>)
	(org-html-protect): Fix a  bug that prevents some target to be
	rendered correctly.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-default-properties): Add EXPORT_TEXT.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-footnote.el (org-footnote-create-definition)
	(org-insert-footnote-reference-near-definition): Fix sorting
	of footnotes.

2011-07-28  Manuel Giraud  <manuel.giraud@univ-nantes.fr>

	* org-html.el (org-export-as-html): Bugfix: don't insert closing
	HTML tags when exporting body only.

2011-07-28  Jason Dunsmore  <emacs-orgmode@deathroller.dunsmor.com>  (tiny change)

	* org.el (org-back-over-empty-lines): Bugfix.
	Honor `org-blank-before-new-entry' correctly in various contexts.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-macs.el (org-with-wide-buffer): Bugfix: use `save-excursion'
	and `save-restriction'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-timer.el (org-timer-item): `save-excursion' prevents
	`org-list-struct' to get the list structure when point isn't on
	the first line of the item.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el (org-capture-templates): New option
	:no-clock-out.
	(org-capture): Use the new option.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-update-checkbox-count): Ensure cookies on an
	heading are correctly updated when checkboxes are hidden.
	It allows, for example, to use C-c C-x C-b on a collapsed tree and
	still get the update.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-exp.el (org-export-visible): Accept keys for
	`org-export-as-html-to-buffer' and `org-export-region-as-html'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-duration-string-to-minutes): Don't use
	`rx-to-string'.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org.el (org-effort-durations): New variable.

	* org.el (org-duration-string-to-minutes): New function.

	* org-agenda.el (org-agenda-filter-effort-form)
	(org-format-agenda-item): Use it.

	* org-clock.el (org-clock-notify-once-if-expired)
	(org-clock-modify-effort-estimate, org-clock-get-clock-string): Use it.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-run-series): Rename from
	`org-run-agenda-series'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el: Don't allow currentfile anymore.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-list): Fix bug: don't rely on
	`org-agenda-current-span' when calling `org-agenda-list'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el (org-capture-put-target-region-and-position):
	New function to store information about the target buffer.
	(org-capture-set-target-location): Use it.
	(org-capture-finalize): Restore the target buffer in its
	possibly narrowed state.  Also restore the cursor position.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-crypt.el (auto-save-default): Make sure entries are
	encrypted before auto-saving.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-promote)
	(org-inlinetask-demote): New functions.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-demote-subtree, org-promote-subtree):
	Wrap `org-map-tree' into `org-with-limited-levels' macro, so it avoids
	operating on inline tasks.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-narrow-to-subtree): Ensure `org-back-to-heading'
	will move point to a real heading and not an inline task by
	wraping function into a `org-with-limited-levels' macro.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el (org-capture-finalize): New argument clock-out,
	to tell whether finalizing the capture process should clock out
	the running clock.
	(org-capture): Use the new argument.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-refile-get-targets): Rename from
	`org-get-refile-targets'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-table-remove-empty-lines): New custom
	variable.
	(org-export-remove-special-table-lines): Use it.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-fix-formulas-confirm): New custom
	variable.
	(org-table-insert-column, org-table-delete-column)
	(org-table-move-column, org-table-move-row)
	(org-table-insert-row, org-table-kill-row): Use it.

2011-07-28  Tassilo Horn  <tassilo@member.fsf.org>

	* org.el (org-refile-get-location): Set and show default value.
	(org-goto, org-refile): Adapt calls.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-mobile.el (org-mobile-files-exclude-regexp): New custom
	variable.
	(org-mobile-files-alist): Use it.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-todo): Bugfix: use `org-with-wide-buffer' to check
	against headings outside of a narrowed buffer.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-confirm-shell-link-not-regexp)
	(org-confirm-elisp-link-not-regexp): New custom variables.
	(org-open-at-point): Use the new custom variables.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-latex.el: Place \title \author \date before
	\begin{document}.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-preamble)
	(org-export-html-postamble): Now default to `nil'.
	(org-export-as-html): When :html-pre/postamble is nil, fall
	back on the default pre/postamble, which depends on the
	:author-info, :email-info, :creator-info options.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-results): Don't use cached results if
	there is no hash.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-eval-formula): Treat relative column
	refs.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-use-standard-references): Change default
	to `from'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-move-subtree-down): Leave the cursor at the same
	column we were at.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-attach.el (org-attach-store-link-p): New variable.
	(org-attach-store-link): New function.
	(org-attach-attach): When `org-attach-store-link-p' is
	non-nil, store a link in `org-stored-links' to a newly
	attached file.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-remove-headline-metadata): Bugfix: don't
	case-fold-search to avoid mixing TODO keywords with real headline
	words.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-fedit-finish): Read more general LHS of
	formulas.
	(org-table-formula-handle-@L): New function to hanle @L references.
	(org-table-current-ncol): New variable.
	(org-table-line-to-dline): New function.
	(org-table-get-stored-formulas): Accept range formulas as matches.
	(org-table-get-specials): Compute and store the number of columns.
	(org-table-get-range): New optional argument CORNERS-ONLY, to retrieve
	only the region marked by the range, not the content.
	(org-table-recalculate): Call `org-table-expand-lhs-ranges' to expand
	range targets.  Also check for duplicate access to fields.
	(org-table-expand-lhs-ranges): New funktion.
	(org-table-get-remote-range): Bind `org-table-current-ncol' to protect
	the caller's value.
	(org-table-edit-formulas): Support highlighting of range targets.
	(org-table-field-info): Handle renge formulas.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-postamble-format)
	(org-export-html-preamble-format): Explain how to escape the
	`%' character.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-read): Read string variable values wrapped in
	double quotes, removing the quotes.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-results): Ensure that processed params
	are send to org-babel-execute-src-block.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-special-blocks.el
	(org-special-blocks-make-special-cookies):
	Use `org-export-current-backend'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-in-export-file): Now takes the language
	as an argument.
	(org-babel-exp-src-block): Explicitly pass language to
	`org-babel-exp-in-export-file'.
	(org-babel-exp-inline-src-blocks): Remove unused code.
	(org-babel-exp-results): Explicitly pass language to
	`org-babel-exp-in-export-file'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-calc.el (org-babel-execute:calc): Unquote quoted vectors
	returned from calc-eval.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-read): Pass elisp vectors through to code
	blocks.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* ob.el (org-src-lang-modes): Defvar.
	(org-at-item-p): Declare function.

	* ob-calc.el (calc-store): Require.
	(var-syms): Defvar.

	* ob-python.el (py-default-interpreter): Defvar.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp-blocks.el (backend): defvar.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-get-scheduled):
	(org-agenda-get-timestamps): Bind local variable `show-all'.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* ob-ref.el (org-at-item-p): Declare function.

	* org-agenda.el (diary-time-regexp): defvar.

	* org-archive.el (org-archive-subtree): Bind local variable
	`infile-p'.

	* org-capture.el (org-capture-insert-template-here): Get template
	text from property list, to avoid byte compiler message.

	* org-latex.el (org-export-latex-tables): Bind local variable
	`width'.

	* org-special-blocks.el (org-compat): Add require statement.

	* org-table.el (orgtbl-ctrl-c-ctrl-c): Bind local variable
	`const-str'.

	* org.el (org-eval): Move function here from org-agenda.el.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-read-table): Inhibit lisp evaluation of values
	when reading from tables.
	(org-babel-read-list): Inhibit lisp evaluation of values when
	reading from lists.
	(org-babel-read): Add optional argument which can be used to inhibit
	lisp evaluation of value.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-table.el (sbe): Ensure that ob-trim is only called on
	strings.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-results): On export, ensure that the
	result hash is resolved in the original org-mode file.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-mark-list-end): Change end marker.

	* org-docbook.el (org-export-docbook-list-line): Use new marker.

	* org-html.el (org-html-export-list-line): Use new marker.

	* org-latex.el (org-export-latex-lists): Use new marker.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-lists): Make sure markers used
	for export are taken into account by temporarily setting an
	appropriate value for `org-list-ending-method'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-exp-blocks-block-regexp): Wrapping block
	regexp into its own variable, also allowing match of empty bodies.
	(org-export-blocks-preprocess): Using new regexp variable.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-src-block-regexp): Code block regexp now
	matches blocks with empty bodies.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-script-escape): If script escaped value doesn't
	parse cleanly, then return it literally.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-src-block): When block will eventually
	be evaluated, pre-calculate the hash before noweb expansion, and
	expand the parameters before hash calculation.
	(org-babel-exp-do-export): Pass pre-calculated hash through to
	`org-babel-exp-results'.
	(org-babel-exp-results): Compare pre-calculated hash to results hash.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-sha1-hash): Sort list values to header
	arguments, and sort the words in strings.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-index-list): Special handling of hline
	rows.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-macs.el (org-with-point-at): Store evaluated version of
	pom.  This fixes a potential bug when using (org-with-point-at
	(func) …), where (func) would be evaluated multiple times,
	therefore might return different results if a marker was returned
	and different each time.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-open-at-point): If a link to a radio target is the
	first, (resp. the last), element of a buffer, function cannot find
	the property change required to get its boundaries, and
	`buffer-substring' is called with an invalid nil argument.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-table.el (org-table-copy-down): Fix docstring.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-latex.el (org-babel-execute:latex): Add imagemagick options,
	and for file types other than png and PDF it uses imagemagick to
	convert a compiled PDF file to the desired file type.
	(convert-pdf): Convert a PDF file to a new file type using
	imagemagick.

2011-07-28  Puneeth Chaganti  <punchagan@gmail.com>

	* org-capture.el (org-capture-fill-template): Fix bug with the
	display of interactive prompt in templates expansion.

2011-07-28  Reiner Steib  <reiner.steib@gmx.de>

	* org-clock.el (org-clock-display): Document how to remove subtree
	times.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-export-blocks-format-comment):
	Explicitly append a newline to the body.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-insert-item): When computing size of item
	being inserted, function has to take into account that indentation
	may not only be made of spaces.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-clock.el (org-clock-find-position): If a list was adjacent
	to some clocks and a drawer was going to be created, only the
	first element of the list would make it into the drawer.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-toggle-checkbox): Fix bug where top item in
	list was omitted when checking boxes.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-R.el: Don't print result to echo area after evaluation.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el (org-capture-refile): Fix typo in docstring.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-calc.el (org-babel-execute:calc): Call out to new function
	for variables resolution.
	(ob-calc-maybe-resolve-var): Resolve (possibly recursively)
	variables in calc expressions.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-C.el (org-babel-tangle-lang-exts): Replace "c++" with "C++".
	(org-babel-C++-compiler): Replace "c++" with "C++".
	(org-babel-execute:cpp): Replace "c" with "C++".
	(org-babel-execute:C++): Replace "c" with "C++".
	(org-babel-expand-body:C++): Replace "c" with "C++".
	(org-babel-C-execute): Replace "c" with "C++".

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-at-ref-p): Only try to read results as
	a list if at the *beginning* of a list item.

	* ob.el (org-babel-read-result): Only try to read results as a
	list if at the *beginning* of a list item.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-item-indentation): Do not break an
	indentation cycle because visibility cycling is requested.
	This happens when an item becomes a parent, due to indentation change.
	Not considered empty anymore, the function cannot change its
	indentation again.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-clocktable-write-default): Bugfix: falls back
	on `org-export-default-language' when no :lang parameter is set.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-expand-file): New function.
	(org-capture-target-buffer):
	(org-capture-set-target-location): Use `org-capture-expand-file'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-read-list): Reading the value of a list has
	been updated to reflect the new structure of org-mode lists in
	elisp.
	(org-babel-insert-result): Writing code block results to lists has
	been updated to reflect the new list structure.
	(org-babel-result-end): Remove a previous change to end-of-list
	marker detection.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-item-indentation): Each time the function
	moves item back to child position, a white space is added to the
	line.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-process-params): Allow elisp code in
	specification of results header arguments.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-append-agenda): New command.
	(org-agenda-mode-map): New keybinding to this new command.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-ctrl-c-ctrl-c): Call `org-list-send-list' only when
	cursor it at very first item of the list, as specified in the
	manual.  Also refactored the list part of the function a bit.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda): Set the 'last-args property to nil
	when calling `org-agenda'.  Don't kill the local variable
	`org-agenda-current-span'.
	(org-run-agenda-series): Use the new property 'last-args.
	(org-agenda-change-time-span): Use the dynamically set
	`org-agenda-overriding-arguments' variable when non-nil.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-result-end): Adjust marker of list end to
	changes in the list format.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-toggle-checkbox, org-update-checkbox-count):
	No need to wrap `org-entry-get' in `ignore-errors'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-toggle-item, org-toggle-heading): Make sure every
	sub-item in a list is changed into a sub-heading and sub-headings
	are translated into sub-items.  Also ignore inline tasks in the
	process.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-select-backend-specific-text):
	Add `original-indentation' property when replacing #+begin_backend and
	#+backend blocks with their content.  This is needed for lists, as
	they must know if the block belonged to them.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-html.el (org-html-export-list-line): Insert a newline
	character before ending an item, as anchor could be on a line
	going to be deleted, like a drawer ending string.

	* org-list.el (org-list-to-html): Same.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-set-autofill-regexps): Use `org-item-re' in
	`paragraph-start' to recognize alphabetical lists.
	(org-fill-paragraph): Enforce a pre-computed fill-prefix before
	calling `fill-paragraph' when point is in an item.  Also prevent
	paragraphs getting merged into an adjacent list upon filling.
	(org-adaptive-fill-function): Make sure to determine real
	fill-prefix for auto-fill.
	(org-auto-fill-function): Use a pre-computed fill-prefix before
	calling `do-auto-fill'.

	* org-list.el (org-list-item-body-column): New function.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-at-task-p)
	(org-inlinetask-toggle-visibility): New functions.

	* org-list.el (org-list-set-item-visibility): New function.

	* org.el (org-cycle, org-cycle-internal-local): Separate lists and
	inline tasks from headlines.
	(org-outline-level): Do not consider lists as headlines.
	Cycling visibility is using different tools.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct): Mark items less indented than top
	item of the list, so that they will be modified.
	(org-list-struct-apply-struct): Compare struct's indentation with
	line's indentation instead of old-struct's.  This is needed
	because `org-list-struct' automatically fixes indentation so
	changes might not be seen otherwise.

	* org.el (org-ctrl-c-ctrl-c): Small refactoring.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-update-checkbox-count): When a part of the
	buffer is processed to count checkboxes, lists are read from top
	to bottom, but inside lists (in drawers, blocks, or inline tasks)
	are skipped.  Thus, cookies cannot be updated.  This patch
	enforces reading of such lists if counter is itself in a special
	context.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct-apply-struct): Inline tasks along
	with their content must stay at column 0 even if the item is
	gaining indentation.  Moreover, fix indentation of text in an
	inline task, now it can be in such a task within a list.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-at-item-p): Also verify context is valid.
	Otherwise it would recognize valid items where `org-in-item-p'
	wouldn't.
	(org-in-item-p, org-list-struct-apply-struct): Use shorter version
	of org-at-item-p.
	(org-cycle-list-bullet): Fix typo.
	(org-list-parse-list): Avoid calling `org-at-item-p' two times by
	using an appropriate regexp.

	* org.el (org-indent-line-function): Use an appropriate regexp
	instead of calling `org-at-item-p' two times.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-in-item-p): When point was just after
	org-list-end-re, check wouldn't be done for starting line.  So, if
	the first line was an item, it wouln't be noticed and function
	would return nil.  Simplify and comment code.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-toggle-item): When used on normal text, ensure every
	line in region is included in the new item, regardless of its
	original indentation.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct-apply-struct): If end of list was
	at eol, for example, with list inside a block, the last list
	wouldn't be shifted.  Thus, the patch ensures no blank lines is
	skipped.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-toggle-item): Now accepts a prefix argument.
	When used without argument on normal text, it will make the whole
	region one item.  With an argument, it defaults to old behavior:
	change each line in region into an item.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-return): When called from inside an item with the
	indent flag, function should keep text moved inside the item.
	This allows to use C-j to separate lines in an item: cursor won't
	go back to column 0.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct): When a line has org-example
	property, skip the entire block.  This is needed during export,
	for example when src blocks in org markup contain lists, and are
	returned verbatim because org isn't in the list of interpreted
	languages.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-in-item-p): Handle special cases when function
	is called with cursor amidst `org-list-end-re' or at an inline
	task.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ob.el (org-babel-result-end): Apply renaming.

	* org-exp.el (org-export-mark-list-properties): Apply renaming.

	* org-list.el (org-list-prevs-alist): Rename from
	`org-list-struct-prev-alist'.
	(org-list-parents-alist): Rename from `org-list-struct-parent-alist'.
	(org-list-write-struct): Rename from `org-list-struct-fix-struct'.
	(org-list-parse-list, org-sort-list, org-list-indent-item-generic)
	(org-toggle-checkbox, org-update-checkbox-count)
	(org-cycle-list-bullet, org-list-repair, org-insert-item)
	(org-move-item-up, org-move-item-up, org-move-item-down)
	(org-next-item, org-previous-item, org-end-of-item-list)
	(org-beginning-of-item-list, org-apply-on-list): Apply renaming.
	(org-get-bullet): Remove function, as it is not needed anymore.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-insert-item-generic): Change arguments.
	The function now accepts structure and previous items alist.
	This allows to insert an item programmatically more easily.
	(org-insert-item): Apply changes to
	`org-list-insert-item-generic'.  The function now takes care about
	repairing structure and updating checkboxes.

	* org-timer.el (org-timer-item): Apply changes to
	`org-list-insert-item-generic'.  The function now takes care about
	repairing structure.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-make-subtree): Function now uses
	`org-list-parse-list mechanism'.
	(org-list-make-subtrees): Remove function.
	(org-list-to-generic): Add a parameter and every parameter can
	be a sexp returning a string, for finer control.
	(org-list-to-html, org-list-to-latex, org-list-to-texinfo):
	Slight modifications to apply changes to `org-list-to-generic'.
	(org-list-to-subtree): New function.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-beginning-of-line): Apply changes to
	`org-item-beginning-re' to correct sub-expression reference.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-docbook.el (org-export-docbook-list-line): Even with
	alphabetical lists, Org shouldn't enforce a particular list type
	to exporters.  This is a job for style files.

	* org-html.el (org-html-export-list-line): Ib idem.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-at-item-counter-p): New function.
	(org-list-parse-list): Handle counters and list depth.
	(org-list-to-generic): A special string is used when an item has a
	counter.
	(org-list-to-latex): Use new special string for counters.
	This fixes the counter bug in LaTeX export, as the enumi counter was
	the only one modified.

	* org-latex.el (org-export-latex-lists): Use new
	`org-list-parse-list' output.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-get-list-type): New function.
	(org-list-parse-list): Use new function.

	* org-html.el (org-html-export-list-line): Use new function.

	* org-docbook.el (org-export-docbook-list-line): Use new function.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-alphabetical-lists): New variable
	(org-item-re, org-list-full-item, org-cycle-list-bullet)
	(org-list-struct-fix-bul, org-list-inc-bullet-maybe):
	Reflect introduction of the new variable.
	(org-item-beginning-re): Change into a function, so any
	modification of `org-alphabetical-lists' will not require
	reloading Org.
	(org-at-item-p, org-toggle-checkbox, org-update-checkbox-count)
	(org-list-parse-list, org-list-send-list): Reflect changes to
	`org-item-beginning-re'.
	(org-list-use-alpha-bul-p): New function.

	* org.el (org-check-for-hidden): Reflect changes to
	`org-item-beginning-re'.

	* org-capture.el (org-capture-place-item): Reflect changes to
	`org-item-beginning-re'.

	* org-docbook.el (org-export-docbook-list-line): Handle New type
	of items.

	* org-exp.el (org-export-mark-list-end)
	(org-export-mark-list-properties): Reflect changes to
	`org-item-beginning-re'.

	* org-html.el (org-html-export-list-line): Handle new type of
	items.

	* org-latex.el (org-export-latex-lists): Handle new type of items
	and reflect changes to `org-item-beginning-re'.

	* org-ascii.el (org-export-ascii-preprocess): Handle new counters.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-end-re): Remove function and made it a
	variable.  There's no need for the overhead of calling the
	function every at every line in a list.  User will have to reload
	Org if he change value of either `org-list-end-regexp' or
	`org-empty-line-terminates-plain-lists'.
	(org-in-item-p, org-list-struct, org-list-parse-list): Apply change.

	* org-exp.el (org-export-mark-list-end)
	(org-export-mark-list-properties): Apply change.

	* org-latex.el (org-export-latex-lists): Apply change.
	Also prevent items with org-example property to be considered as real
	items.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-export-templates): Slightly
	modify templates so environment boundaries don't interfere with
	content of task.  Unprotect content of task so it might benefit
	from further transformations.  Set original-indentation property to
	a high value to ensure that task is always in the last item of the
	list.  Also, apply templates later in export process.

	* org-list.el (org-list-struct): Fix inline task skipping.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-lists): Search for unprotected
	items only, and redefine `org-at-item'.  This change is required
	when verbatim lists are inserted during export, usually by Babel.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* ob.el (org-babel-result-end): End position is end of current
	sublist instead of bottom point, as results might be inserted in a
	list themselves.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-automatic-rules): Remove insert rule.
	(org-list-insert-item-generic): Remove code preventing user to
	insert another item in a block within a list.  It is because new
	list context make it impossible to see if a point in a block is
	also in a list.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-preprocess-string): Mark list endings
	before babel blocks preprocessing starts, so blank lines that may
	be inserted do not break list's structure.  Then, mark list with
	special properties required by exporters.  Thus output from babel
	can easily be included in lists.
	(org-export-mark-list-end): New function.
	(org-export-mark-list-properties): New function.
	(org-export-mark-lists): Remove function.  It was split into the
	two preceding functions.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-update-checkbox-count): Do not recompute every
	list before next heading when there are more than one cookie in an
	headline.  Moreover, ignore the case where cookie is inserted
	neither at an heading nor at an item.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-sort-list): Fix number of arguments to
	`org-list-repair', plus make `end-record' go to end of item before
	any blank line to keep them from being swallowed in the sorting.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-forbidden-blocks): Rename from
	`org-list-blocks'.
	(org-list-export-context): New variable.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-search-generic): Rename form
	`org-search-unenclosed-generic' to reflect the new behavior.  Now,
	match can only be in a valid context for lists, as determined by
	`org-list-context'.
	(org-list-search-backward): Rename from
	`org-search-backward-unenclosed'.
	(org-list-search-forward): Rename from
	`org-search-forward-unenclosed'.
	(org-toggle-checkbox, org-update-checkbox-count): Use new
	functions.
	(org-sort-list): Using default regexp search functions as context
	is not required in this case.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-mark-lists): New function, replacing
	org-export-mark-list-ending.  It adds information as text
	properties to every list, before changes done by exporter destruct
	them.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-get-first-item): New alias for
	`org-list-get-list-begin'.
	(org-list-get-last-item): New function.
	(org-list-get-list-end): Use `org-list-get-last-item'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-get-string-indentation): Move in generally useful
	functions section, as it wasn't specific to plain lists and that
	no code was using it in org-list.el.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-skip-over-state-notes, org-store-log-note): Use new
	accessors.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-indent-item-generic): Remove error
	messages happening before process.  This belongs to interactive
	functions.
	(org-indent-item, org-indent-item-tree)
	(org-outdent-item, org-outdent-item-tree): Ensure point or region
	is correct before computing list structure.  Return an error
	message otherwise.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-apply-on-list): Use new structures.
	Function is now applied in reverse order so modifications do not change
	positions of items in buffer.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-parse-list): Rewrite of function to allow
	text following a sub-list in the same item.  See docstring for an
	example of output.
	(org-list-to-generic): Use new parsing function.
	(org-list-to-latex, org-list-to-html): Minor change for clearer
	export.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-has-child-p): Rename from
	`org-list-get-child'.  Returning first child is only useful as a
	predicate, as we are allowing an item to have more than one
	sub-list.
	(org-list-indent-item-generic): Use `org-list-has-child-p' instead
	of org-list-get-child.
	(org-in-item-p): Also return item beginning when list starts at
	context beginning.
	(org-list-get-parent): Use of `org-list-struct-parent-alist'
	helper function is not optional anymore.
	(org-list-get-all-items): Shorten code with the help of cl.el.
	(org-list-get-children): Now returns all children of item, even if
	they do not belong to the same list.  Renamed from
	`org-list-get-all-children'.
	(org-list-get-list-begin): Function wasn't return value when item
	was already the first item of the list at point.
	(org-list-get-list-end): Function wasn't return value when item
	was already the last item of the list at point.
	(org-list-struct-fix-box, org-update-checkbox-count): Now uses
	`org-list-get-children'.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-indent-line-function): Indentation of item's body
	starts just after the bullet, not after a checkbox.  Moreover, As
	`org-in-item-p' also returns item beginning position when point is
	in a list, do not compute it a second time.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-ctrl-c-ctrl-c): When called at a list item, replace
	usage `org-repair-list', forcing another reading of the list, with
	only needed subroutines.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-separating-blank-lines-number): Use new
	accessors.
	(org-list-insert-item-generic): Use list structures to insert a
	new item.
	(org-list-exchange-items): Refactor and comment code.  Now return
	new struct instead of modifying it, as list sorting would
	sometimes eat first item.
	(org-move-item-down, org-move-item-up): Reflect changes to
	`org-list-exchange-items'.
	(org-insert-item): As `org-in-item-p' also computes item beginning
	when applicable, reuse the result.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-in-item-p): Unify methods for this
	predicate.
	(org-list-in-item-p-with-indent): Remove function.
	(org-list-ending-between): Remove function.
	(org-list-maybe-skip-block): Remove function.
	(org-list-in-item-p-with-regexp): Remove function.
	(org-list-top-point-with-regexp): Remove function.
	(org-list-top-point-with-indent): Remove function.
	(org-list-bottom-point-with-indent): Remove function.
	(org-list-bottom-point-with-regexp): Remove function.
	(org-list-get-item-same-level): Remove function.
	(org-list-top-point): Remove function.
	(org-list-bottom-point): Remove function.
	(org-get-item-beginning): Rename to `org-list-get-item-begin' to
	be consistent with naming policy of non-interactive functions.
	(org-get-beginning-of-list): Remove function.
	(org-beginning-of-item-list): Use new accessors.
	(org-get-end-of-list): Remove function.
	(org-end-of-list): Use new accessors.
	(org-get-end-of-item): Remove function.
	(org-end-of-item): Use new accessors.
	(org-get-previous-item): Remove function.
	(org-previous-item): Use new accessors.
	(org-get-next-item): Remove function.
	(org-next-item): Use new accessors.
	(org-list-get-item-end-before-blank): Use new accessors.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-repair): Remove optional argument
	FORCE-BULLET.  The job of this interactive function is to
	completely fix a list at point.  Changing bullets is a separate
	task.  Also removed others optional arguments TOP and BOTTOM to
	follow the new structures.
	(org-list-indent-item-generic): Remove need for TOP and BOTTOM.
	STRUCT is a new required argument.  This avoids computing a list
	structure many times when function is called more than once in a
	row, for example in `org-cycle-item-indentation'.  Use new
	accessors.  Now, also call `org-update-checkbox-count-maybe'.
	(org-outdent-item, org-indent-item, org-outdent-item-tree)
	(org-indent-item-tree): Remove need for TOP and BOTTOM.
	(org-list-insert-item-generic): Reflect changes to `org-list-repair'.
	(org-list-exchange-items): Use new accessors.  Now modify struct
	to avoid re-reading it later.
	(org-move-item-down): Reflect changes to `org-list-repair'.
	Use new accessors.
	(org-move-item-up): Reflect changes to `org-list-repair'.  Use new
	accessors.
	(org-cycle-list-bullet): Use new structures.  Also use a shortcut
	to `org-list-struct-fix-struct' in order to avoid unnecessary
	fixes, like `org-list-struct-fix-box'
	(org-sort-list): Use of new structures.  Renamed an internal
	function for a little more clarity.
	(org-cycle-item-indentation): Remove dependency on
	`org-list-repair'.  Use new accessors.
	(org-list-get-child): Correct bug when asking for the child of the
	last item.
	(org-list-exchange-items): Use new accessors.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-blocks): New variable.
	(org-list-context): New function.
	(org-list-full-item-re): New variable.
	(org-list-struct-assoc-at-point): Use new variable.
	(org-list-struct): Rewrite of function.  Now, list data is
	collected by looking at the list line after line.  It reads the
	whole list each time because reading only a subtree was not enough
	for some operations, like fixing checkboxes.  It also removes the
	need to get `org-list-top-point' and `org-list-bottom-point'
	first.  An added data is the position of item ending.  This aims
	to be able to have list followed by text inside an item.
	(org-list-struct-assoc-end): New function.
	(org-list-struct-parent-alist): New function.
	(org-list-get-parent): New function.
	(org-list-get-child): New function.
	(org-list-get-next-item): New function.
	(org-list-get-prev-item): New function.
	(org-list-get-subtree): Use helper function `org-list-struct-prev-alist'.
	(org-list-get-all-items): New function.
	(org-list-get-all-children): New function.
	(org-list-get-top-point): New function.
	(org-list-get-bottom-point): New function.
	(org-list-get-counter): New function.
	(org-list-get-item-end): New function.
	(org-list-struct-fix-bul): Rewrite for cleaner code.  Make use of
	new accessors.
	(org-list-struct-fix-ind): Make use of new accessors.
	(org-list-struct-fix-box): New function.
	(org-list-struct-fix-checkboxes): Remove function.
	(org-list-struct-outdent): Use new accessors.  Use the fact that
	there is no longer a virtual item at beginning of structure.
	(org-list-struct-indent): Use helper functions
	`org-list-struct-prev-alist' and `org-list-struct-parent-alist'.
	Also use new accessors.
	(org-list-struct-fix-struct): Comment function.  Call directly
	`org-list-struct-apply-struct', without removing unchanged items
	first.
	(org-list-struct-apply-struct): Comment function.  Rewrite using
	new accessors.  Use new variable `org-list-full-item-re'.
	(org-list-shift-item-indentation): Remove function, now included
	in `org-list-struct-apply-struct' because it is too specific.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-toggle-checkbox): Use structures to fix
	checkboxes of a list.
	(org-update-checkbox-count): Use structures to update cookies.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct-fix-checkboxes): New function.
	(org-checkbox-blocked-p): Remove function.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-get-all-items): New function.
	(org-list-get-all-children): New function.
	(org-list-get-nth): New function.
	(org-list-set-nth): New function.
	(org-list-get-ind): New function.
	(org-list-set-ind): New function.
	(org-list-get-bullet): New function.
	(org-list-set-bullet): New function.
	(org-list-get-checkbox): New function.
	(org-list-set-checkbox): New function.
	(org-list-struct-fix-bul): Use new accessors.
	(org-list-repair): Use new accessors.
	(org-list-indent-item-generic): Make use of accessors.
	(org-list-get-parent): Rename from `org-list-struct-get-parent'.
	(org-list-get-child): Rename from `org-list-struct-get-child'.
	(org-list-struct-fix-ind): Make use of accessors.
	(org-list-get-next-item): New function.
	(org-list-get-subtree): New function.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct-assoc-at-point): Add checkbox to
	list structure.

	* org-list.el (org-list-struct-assoc-at-point): Add checkbox as
	value in structure.

	* org-list.el (org-list-struct-apply-struct): Also apply
	checkboxes.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-content): Bind local variables
	for export in the temporary export buffer.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-protocol.el (org-protocol-unhex-single-byte-sequence)
	(org-protocol-unhex-string, org-protocol-unhex-compound):
	Change date of obsolete declaration to 2011-02-17.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-escape): Throw error if encoding character in
	utf8 fails.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-protocol.el (org-protocol-split-data)
	(org-protocol-open-source): Use `org-link-unescape' instead of
	obsolete unhex string function.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-escape, org-link-escape-chars-browser)
	(org-link-escape-chars): Always percent escape the percent sign.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-unescape): Simpler algorithm for replacing
	percent escapes.
	(org-link-unescape-compound): Use cond statements instead of nested
	if, convert hex string with string-to-number, save match data.
	(org-link-unescape-single-byte-sequence): Use mapconcat and
	string-to-number for unescaping single byte sequence.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-escape): Rename lambda argument.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-escape-chars-browser, org-link-escape-chars):
	Add percent sign to list of escape chars.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-mobile.el (org-mobile-escape-olp): Use new percent escape
	character table format.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-mobile.el (org-mobile-locate-entry): Remove obsolete
	argument in call to org-link-unescape.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-protocol.el (org-protocol-unhex-string)
	(org-protocol-unhex-compound)
	(org-protocol-unhex-single-byte-sequence): Declare obsolete and
	alias to respective org-link-unescape-* functions.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-unescape, org-link-unescape-compound)
	(org-link-unescape-single-byte-sequence): Functions moved and renamed
	from org-protocol.el.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-macs.el (org-char-to-string): Inline function to properly
	decode utf8 characters in Emacs 22.  Moved and renamed from
	org-protocol.el.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-escape): New optional argument.  Merge user
	table with default table.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-escape): Fixup doc string.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-escape-chars, org-link-escape-chars-browser):
	New format of percent escape table.
	(org-link-escape): Use new table format.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-escape): New Unicode aware percent encoding
	algorithm.

2011-07-28  Sebastian Rose  <sebastian_rose@gmx.de>

	* org-protocol.el (org-protocol-unhex-single-byte-sequence):
	New function.  Decode hex-encoded singly byte sequences.
	(org-protocol-unhex-compound): Use new function if decoding sequence
	as Unicode character failed.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Expand the HTML title.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-publish.el (org-publish-cache-ctime-of-src):
	Improve docstring.
	(org-publish-find-title): New option to explicitly reset the title
	in the cache.
	(org-publish-format-file-entry): Use this new option.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org-exp.el (org-export-preprocess-string): Set the source buffer
	and use `org-clone-local-variables' to get local variables from
	it.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Allow empty string as second element in minted/listings options.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Support new user-customizable options.
	(org-export-latex-custom-lang-environments): Ensure new variable
	is defined.
	(org-export-latex-listings-options): Ensure new variable is defined.
	(org-export-latex-minted-options): Ensure new variable is defined.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-as-html): Handle the case when
	`org-export-html-validation-link' is nil to keep backward
	compatible with the old default value of this variable.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): Don't choke if indent is not a
	number.

2011-07-28  Christian Moe  <mail@christianmoe.com>  (tiny change)

	* org-bbdb.el (org-bbdb-export): When a link description has been
	added by `org-export-normalize-links', use path instead (remove
	the `bbdb:' prefix).

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-ascii.el (org-export-ascii-underline): Put the level's
	characters in the right order, as documented by the docstring.
	(org-ascii-level-start): Select the right char for underlining
	headlines.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-src.el (org-edit-src-code): Allow to edit source code from
	modes derived from Org.

2011-07-28  Niels Giesen  <niels.giesen@gmail.com>

	* org-clock.el (org-clock-clocktable-language-setup): Add list of
	dutch strings.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org-beamer.el: Mark frame as fragile when it is using minted for
	src block export.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-date-later)
	(org-agenda-date-earlier): Enhance docstrings.
	(org-agenda-bulk-mark-regexp): Only match against headlines.
	Send a message when no entry is marked.
	(org-agenda-bulk-action): Fix bug about scattering deadlines.
	Send an error when trying to scatter outside an agenda or a
	timeline view.  Silently fail when trying to scatter sexp entries.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-clock-clocktable-language-setup): New custom
	variable.
	(org-clocktable-defaults): Set the default language.
	(org-clocktable-write-default): Use the new variable.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-src-block-names): Don't strip text properties
	from search hits.
	(org-babel-result-names): Don't strip text properties from search
	hits.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-python.el (org-babel-python-evaluate-session): Pass nil as
	remove-echo part of META argument to
	`org-babel-comint-with-output'.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-script-escape): Use `substring' comparison
	instead of regexp matching.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org-src.el (org-edit-src-code): When generating the code edit
	buffer, it is necessary for several variables to inherit their
	values from the parent org buffer.  These changes collect all such
	variables together into a single association list of
	`(variable-name value)' pairs.  In addition, a new variable is
	added to the list: `org-edit-src-content-indentation'.  This has
	the effect that a buffer local value can be used for that
	variable.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-table.el (sbe): Don't truncate sbe results.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-exp.el (org-export-add-options-to-plist): Require match to
	start at a word-boundary.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-hyperref-format):
	Update docstring.

2011-07-28  Tom Dye  <tsd@tsdye.com>

	* org.el: Update documentation of `org-add-link-type'.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org.el (org-open-at-point): Fix bug when using prefix arg to
	construct `org-link-search' call.  Rename prefix arg with a more
	generic name, to reflect its diverse uses in this function.

2011-07-28  Rémi Vanicat  <vanicat@debian.org>

	* org-icalendar.el (org-icalendar-use-UTC-date-time): Remove.
	(org-icalendar-date-time-format): New custom variable.
	(org-icalendar-use-UTC-date-timep): New function.
	(org-ical-ts-to-string): Use the new variable.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-vm.el (org-vm-store-link): Make sure the buffer is
	associated with a file when trying to store an Org link.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-params-from-properties): Test for
	"header-arg-name" and ":header-arg-name", in that order.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el (org-capture-templates): Document "currentfile"
	for capture template.
	(org-capture-templates): Allow to use currentfile for capture
	templates.
	(org-capture-set-target-location): Handle currentfile as a way to
	setting the capture buffer.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* ob.el (org-babel-params-from-properties): Don't wrap
	`org-entry-get' into `condition-case'.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org.el (org-entry-get): Don't look for a property drawer if we
	are before the first heading in the file.
	(org-entry-get-with-inheritance): Don't attempt to move up the
	tree if we are before the first heading in the file.  Also,
	enclose less of the function in the `save-excursion'.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-params-from-buffer): Return desired value
	rather than nil from failed re search.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-get-entries-from-diary): Put multiline diary
	entries on a single line when lines don't start with a diary time.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-protect-char-alist): New custom
	variable to define characters to be HTML protected.
	(org-html-protect): Use the new variable.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-info.el (org-info-store-link): Use "#" to separate the info
	file and the node.
	(org-info-follow-link): Use both "#" to separate the info file and
	the node.  Continue to use ":" for backward compatibility.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-icalendar.el (org-icalendar-honor-noexport-tag): New custom
	variable.
	(org-print-icalendar-entries): Use this new variable to prevent
	export of entries with a :noexport: tag.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-initial-scope): New custom variable.
	(org-export): Use this new variable.  If there is an active
	region, tell it when prompting the user for an export command.
	Also change the way the function handles selection of buffer and
	subtree export.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-auto-preamble)
	(org-export-html-auto-postamble): Remove.
	(org-export-html-preamble, org-export-html-postamble): Turn into
	custom variables.  Update the docstrings.
	(org-export-html-preamble-format)
	(org-export-html-postamble-format): New custom variables.
	(org-export-as-html): Use `org-export-html-postamble-format' and
	`org-export-html-preamble-format'.
	(org-export-html-title-format): Delete.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-export-blocks-format-ditaa):
	This function is begin deprecated in favor of begin_src blocks.
	(org-export-blocks-format-dot): This function is begin deprecated in
	favor of begin_src blocks.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-header-arg-names): no-expand is now part of the
	default header argument names list.

2011-07-28  Manuel Giraud  <manuel.giraud@univ-nantes.fr>

	* org-publish.el (org-publish-sitemap-date-format)
	(org-publish-sitemap-file-entry-format): New custom variables.
	(org-publish-projects): Use these variables to format the sitemap
	entries.

2011-07-28  Ulf Stegemann  <ulf-news@zeitform.de>

	* org-gnus.el (org-gnus-store-link): Allow `org-link' creation
	from `message-mode'.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-filter-by-tag): Refresh agenda when
	updating the filter while the clock report is following the
	filter.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda): Kill all local variables.
	This assures we are not keeping buffer variable from an old agenda view
	when switching to a new custom agenda.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-crypt.el (org-encrypt-string): New function.
	(org-encrypt-entry): Use org-encrypt-string to encrypt, so we use
	cached crypted values.
	(org-decrypt-entry): Store crypted text in decrypted text.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-exp.el (org-babel-exp-lob-one-liners): Only replace the match
	if a non-nil result is returned.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-get-day-entries): Compare DATE with
	modified today.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-update-parent-todo-statistics): Fix bug when
	updating statistics from the column view.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-bulk-mark-regexp): New command.
	(org-agenda-menu): Add the new command to the menu.
	(org-agenda-mode-map): Add % as the keybinding for the new
	command.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-target-internal-links): Locally turn on
	`org-link-search-must-match-exact-headline' to match exact
	internal links.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-faces.el (org-special-keyword): Make it inherited from
	`font-lock-keyword-face'.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-faces.el (org-link): Make `org-link' inherits from `link'
	face.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-narrow-to-block): New function to narrow to block.
	Bound this function to `C-x n b'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-schedule, org-deadline): Fix bug: take care of
	repeating timestamps like ".+1d/3d" or "+1d 10d".

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-repeating-timestamp-show-all):
	Allow to use a list of TODO keywords as the value of this variable.
	The agenda will show repeating stamps for entries matching these TODO
	keywords.
	(org-agenda-get-timestamps, org-agenda-get-deadlines)
	(org-agenda-get-scheduled): Allow the use of a list of keywords in
	`org-agenda-repeating-timestamp-show-all'.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-emph-format): Don't use
	`org-export-latex-use-verb'.  Remove this variable.

2011-07-28  Jason Dunsmore  <emacs-orgmode@dunsmor.com>  (tiny change)

	* org-html.el (org-html-handle-time-stamps): Fix bug when
	exporting inactive timestamps.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-archive.el (org-archive-save-context-info): Fix docstring
	typo.
	(org-archive-subtree-add-inherited-tags): New variable to control
	whether inherited tags should be appended to local tags when
	archiving subtrees.
	(org-archive-subtree): Use the new variable.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-archive.el (org-archive-save-context-info): Fix docstring.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-crypt.el (org-decrypt-entry): Delete \n on top level
	heading.  This avoids a display bug showing the heading outlined
	where the text is not since it does not have the outline property.
	Restore subtree visibility state after decryption.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-list): Use `org-agenda-current-span'
	as a possible default span if it is set.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org-src.el (org-edit-src-persistent-message): Change docstring.
	(org-edit-src-code): Get rid of help message in echo area.

	* ob.el (org-babel-do-in-edit-buffer): Do not pass 'quietly
	argument to org-edit-src-code as this has been removed.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-emphasis-alist):
	Use \protectedtexttt for the =...= emphasis and \verb for the ~...~
	emphasis.
	(org-export-latex-use-verb): Now defaults to t.
	(org-export-latex-emph-format): Distinguish between =...= and
	~...~ emphasis.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org.el (org-link-expand-abbrev): Allow any type of character in
	link expand.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-lob.el (org-babel-lob-ingest): Add prefix to file prompt.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-ref.el (org-babel-ref-resolve): `save-window-excursion' when
	resolving references.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org-html.el (org-export-html-html-helper-timestamp): Use <hr/>
	instead of <hr> to keep w3c validator happy.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-where-is-src-block-head): Detect src block if
	point is on a #+header line.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-where-is-src-block-head): Skip over intervening
	#+header lines when searching for block associated with block name
	line.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-result-end): Replace call to `org-in-item-p' to
	the more specific `org-at-item-p'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-latex.el (org-latex-default-figure-position): New defcustom
	for default placement of latex figures.
	(org-export-latex-tables): Positioning tables using the new
	defcustom variable.
	(org-export-latex-format-image): Positioning images using the new
	defcustom variable.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ditaa.el (org-babel-execute:ditaa): Throw error when
	evaluated and :file header argument is missing.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-do-export): Simplify, no longer need
	to do anything to export code.
	(org-babel-exp-results): No longer returns a replacement for the
	code block.
	(org-babel-exp-inline-src-blocks): Simplify.
	(org-babel-exp-src-block): Remove unnecessary pluralization from
	function name.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-inline-src-blocks):
	Simplify exportation of inline code blocks using normal code block
	execution mechanism to insert results.
	(org-babel-exp-results): Results exportation mechanism is unified
	for both inline and regular code blocks.

	* ob.el (org-babel-where-is-src-block-result): Returns the point
	after an inline code block for inline code blocks.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): Special handling of the
	position of results of inline code blocks.
	(org-babel-examplize-region): Now able to comment inline regions.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-exp.el (org-export-with-LaTeX-fragments): Fix docstring so
	that \\[ a = b \\] is not interpreted as a keybinding by
	`substitute-command-keys'.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org-latex.el (org-export-as-latex): Process export property list
	with `org-export-process-option-filters' early in latex export.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org.el: Remove `org-invisible-p': `outline-invisible-p' is
	available in Emacs 22 and in recent XEmacs 21.  Replace in various
	files.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-get-progress): Fix regexp for statep:
	it must has \\ at the end of the line.  This avoid matching the
	following heading when there's no newline between the logged state
	and the next heading.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-format-agenda-item): Simplify time comuting.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-current-level, org-store-link, org-mark-subtree):
	Use `org-with-limited-levels'.

2011-07-28  Jan Seeger  <jan.seeger@thenybble.de>  (tiny change)

	* org-publish.el (org-publish-get-base-files): Add sitemap file.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-agenda.el (org-agenda-todo-ignore-deadlines): New option.
	(org-agenda-todo-ignore-scheduled): New option.
	(org-agenda-todo-ignore-timestamp): New option.
	(org-agenda-check-for-timestamp-as-reason-to-ignore-todo-item):
	Allow user to specify custom distance to ignore (future or past).
	(org-agenda-todo-custom-ignore-p): New function.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-habit.el (org-habit-parse-todo) Don't parse more days than
	needed.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-map-inline-src-blocks): Macro for executing
	code in each inline code block.
	(org-babel-execute-buffer): Executes inline code blocks as well as
	regular code blocks.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-result-end): Now recognizes "#+begin_org"
	blocks for removal.

2011-07-28  Benjamin Drieu  <bdrieu@april.org>  (tiny change)

	* org-clock.el (org-clock-before-select-task-hook): New hook.
	(org-clock-select-task): Run new hook.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-get-blocks): Fix time of start/end of
	events with range.  This display things like: <2011-01-22 Sat
	14:00>--<2011-01-23 Sun 20:00> correctly, with the event starting
	at 14:00 and ending at 20:00.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-inline-src-block-regexp): Character preceding
	"src_" can now be anything as long as it is neither alphanumeric
	nor '-'.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-merge-params): Docstring typo.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-params-from-buffer): Process all #+babel: lines
	in the buffer.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-get-src-block-info): Alter order of merge
	arguments.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-python.el: Test whether non-nil buffer is #<killed buffer>.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): Ensure all parts of result
	wrappers end in newlines.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle): New :mkdirp header argument
	optionally creates parent directories of tangle targets.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-ascii.el (org-ascii-level-start): Catch the case of levels
	which do not have an equivalent in the list of underline
	characters.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sh.el (org-babel-sh-var-quote-fmt): Now possible to customize
	the format string used to escape arguments to shell code blocks.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-reset-view): New function.
	(org-agenda-view-mode-dispatch): Bind space to org-agenda-reset-view.

2011-07-28  Puneeth Chaganti  <punchagan@gmail.com>

	* org-exp.el (org-export-handle-include-files): Support :lines
	property.
	(org-get-file-contents): New argument lines to include specify a
	range of lines to include.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-fast-tag-selection): Fix bug when assigning keys.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org-latex.el (org-export-latex-make-header): Export email in
	author line if `org-export-email-info' is non-nil.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-goto-today): Respect current span.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-complete.el (pcomplete/org-mode/link)
	(pcomplete/org-mode/todo, pcomplete/org-mode/prop): Copy list
	before uniquifying.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-spec-to-string): Adding "noweb" as a
	linking comment type
	(org-babel-tangle-comment-links): Returns comment links for the
	source code block at point.

2011-07-28  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-refile-check-position): Send a more explicit message
	on how to clear the cache before refiling again.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-skip-function-global): New option.
	(org-agenda-skip-eval): New function.
	(org-agenda-skip): Use `org-agenda-skip-eval' and also check for
	the global skipping condition.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-html.el (org-export-as-html): Handle timestamps after
	handling links.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-jump-to-org): Ever wider searches
	until either a matching block is found, or the limits of the file
	are reached.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-update-block-body): Literal argument to
	`replace-match' to allow insertion of text containing '\'.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-parse): Allow passing empty strings
	into code blocks.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-sort-entries): Fix sorting with a bold emphasis at bol.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-open-src-block-result): Must collect result
	*before* jumping to the result buffer.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-src-block-names): Fix bug, wrong match-string
	used after update to regexp.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-temp-file): Ensure that
	`org-babel-temporary-directory' is bound before using.
	(org-babel-remove-temporary-directory): Safer error throwing.

2011-07-28  niels giesen  <niels.giesen@gmail.com>

	* org-docbook.el (org-export-docbook-finalize-table): Do literal
	replacements.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-execute-src-block): Uses org-src-lang-modes to
	resolve language names for evaluation.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-templates): Add %f and %F escapes
	(org-capture): Add more information to capture property list
	(org-capture-fill-template): Handle %f and %F escapes.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-publish.el (org-publish-cache-ctime-of-src): Use mtime of
	symlink target.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-occur-next-match): New function.
	(org-mode): Set the variable `next-error-function'.
	(org-highlight-new-match): Add an `org-type' property to the
	overlays.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-calc.el: No longer require `calc-trail' on XEmacs.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-modules): Add `org-eshell'.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-special-blocks.el (htmlp, latexp, line): Add defvars for
	dynamically scoped variables.

	* org.el (org-modules): Move `org-special-blocks' into the core
	modules section.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-special-blocks.el: New file.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-plist-delete): Remove duplicate definition.

2011-07-28  Bernt Hansen  <bernt@norang.ca>

	* org-agenda.el (org-agenda-goto): Display invisible entry text.

	* org-agenda.el (org-agenda-switch-to): Display invisible entry
	text.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-get-category): New optional argument FORCE-REFRESH.
	Automatically refresh if the property is not there.
	(org-entry-properties): Remove refresh - this is now done in
	org-get-category.

	* org-clock.el (org-clock-insert-selection-line):
	Let `org-get-category' do the property refresh.

	* org-archive.el (org-archive-subtree): Force a refresh of
	category properties.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-icalendar.el (org-print-icalendar-entries): Do not manually
	refresh categories.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org.el (org-display-inline-images): Check for clear-image-cache
	before using it.

2011-07-28  Bernt Hansen  <bernt@norang.ca>

	* org.el: Document missing value for org-link-frame-setup.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-R.el (org-babel-R-write-object-command): Force evaluation of
	user code prior to the R exception-handling, so that errors in
	user code are unhandled.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* org-src.el (org-src-font-lock-fontify-block): Test, early on,
	that a major-mode function corresponding to the language string
	exists.

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-mark-list-ending): Insert additional
	newline characters if end-list-marker is at a wrong position.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-script-escape): Replace commas with spaces for
	better list reading when list items are packed with commas,
	e.g. Haskell list output.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sass.el (org-babel-execute:sass): Uses ob-eval for better
	error reporting.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-confirm-evaluate): Fix for the case when
	org-confirm-babel-evaluate is a function (used to always ask no
	matter what the function returns).

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-R.el: Delete duplicated function.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-execute-src-block): Remove unused flet
	function.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-asymptote.el (org-babel-execute:asymptote): Return nil to
	signal that the intended content has been written to file.

	* ob-ditaa.el (org-babel-execute:ditaa): Return nil to signal that
	the intended content has been written to file.

	* ob-dot.el (org-babel-execute:dot): Return nil to signal that the
	intended content has been written to file.

	* ob-gnuplot.el (org-babel-execute:gnuplot): Return nil to signal
	that the intended content has been written to file.

	* ob-latex.el (org-babel-execute:latex): Return nil to signal that
	the intended content has been written to file.

	* ob-mscgen.el (org-babel-execute:mscgen): Return nil to signal
	that the intended content has been written to file.

	* ob-octave.el (org-babel-execute:octave): Return result; not name
	of output file.

	* ob-plantuml.el (org-babel-execute:plantuml): Return nil to
	signal that the intended content has been written to file.

	* ob-python.el (org-babel-execute:python): Return result; not name
	of output file.

	* ob-ruby.el (org-babel-execute:ruby): Return result; not name of
	output file.

	* ob-sass.el (org-babel-execute:sass): Return nil if result has
	been written to file.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob-R.el (org-babel-R-graphical-output-file): New function
	returns the name of the output file iff R has been instructed to
	send graphical output to file by means of the ":results graphics"
	directive.
	(org-babel-expand-body:R): Use `org-babel-R-graphical-output-file'
	when constructing the R code to evaluate, which may be augmented
	with code implementing the writing of graohical output to file.
	(org-babel-execute:R): Use `org-babel-R-graphical-output-file' to
	determine whether R is taking responsibility for writing output to
	file; if so, this is signaled to ob.el by returning a nil result.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-format-result): New function to format results
	of src block execution.
	(org-babel-execute-src-block): Use `org-babel-format-result' when
	writing to file.
	(org-babel-open-src-block-result): Use `org-babel-format-result'
	when displaying results in a buffer.  Name results buffer
	differently.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-execute-src-block): Avoid calling
	`orgtbl-to-generic' on number results.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-execute-src-block): Allow specification of
	table separator with :sep header argument.
	(org-babel-open-src-block-result): Allow specification of table
	separator with :sep header argument.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-execute-buffer): Wipe error buffer at outset of
	executing buffer (note that this handles execute subtree also).

2011-07-28  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-in-task-p): Small refactoring,
	do not modify match data either.
	(org-inlinetask-goto-end): Small refactoring, remove
	case-sensitivity.
	(org-inlinetask-goto-beginning): Small refactoring, remove
	case-sensitivity.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-set-target-location):
	Use `current-time'.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-set-target-location):
	Use `current-time'.

2011-07-28  Bernt Hansen  <bernt@norang.ca>

	* org.el (org-before-first-heading-p): If point is on an org-mode
	heading line then we are not before the first heading.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org-timer.el (org-timer-continue-hook): Define the variable
	(org-timer-pause-or-continue): Run hook after relative timer is
	continued.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-compile-prefix-format): Allow %() expression.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-capture.el (org-capture-fill-template): Use org-eval.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-eval): New function.

2011-07-28  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-execute-src-block): With :results file, when
	:file is not supplied, interpret result as a file link as long as
	it is a string.

2011-07-28  David Maus  <dmaus@ictsoc.de>

	* org-latex.el (org-export-latex-preprocess): Don't convert link
	description parts that look like numeric footnote.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-latex.el (org-export-latex-tables): Allowing specification
	of tabular[xy] inner environments through the ATTR_LaTeX line.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-capture.el (org-capture-fill-template):
	Use `org-set-property' directly.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-prefix-format): Add missing `search'
	item in docstring.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-string): Use `format' to construct
	function call to allow symbolic or string arguments.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-place-entry):
	(org-capture-insert-template-here): Check tree for validity before
	pasting it.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org-gnus.el (org-gnus-store-link): Trim date.

2011-07-28  Julien Danjou  <julien@danjou.info>

	* org.el (org-email-link-description): Allow to retrieve email
	link date.

2011-07-28  Lawrence Mitchell  <wence@gmx.li>

	* org.el (org-make-target-link-regexp): `regexp-quote' target
	before replacing whitespace.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-expand-noweb-references): Noweb references can
	now be resolved from the library of babel.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-result-end): No longer leaving trailing new
	line after block removal.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-first-lines): Anchor outline
	regexp during LaTeX tree export.

2011-07-28  Konrad Hinsen  <konrad.hinsen@fastmail.net>

	* ob-python.el (org-babel-python-initiate-session-by-key):
	Make sure that py-which-bufname is initialized, as otherwise it will be
	overwritten the first time a Python buffer is created.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sh.el (org-babel-sh-var-to-sh): Better escaping of variables
	with spaces.

2011-07-28  Eric Schulte  <schulte.eric@gmail.com>

	* ob-org.el (org-babel-execute:org): Padding code block with an
	empty title on LaTeX export.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org.el (org-entry-properties): Stop scanning for timestamps if a
	specific timestamp property (e.g., DEADLINE, SCHEDULED, etc.) is
	requested and a match is found.  Also, if a specific timestamp
	property is requested, do not push non-relevant timestamps onto
	property list.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-add-time-grid-maybe): Show time only
	when grid is being made for today.

2011-07-28  Matt Lundin  <mdl@imapmail.org>

	* org-agenda.el (org-agenda-get-scheduled): Don't call
	`org-is-habit-p' until after checking for
	`org-agenda-skip-scheduled-if-done'.

2011-07-28  Achim Gratz  <Stromeko@nexgo.de>

	* org.el: Remove spurious linebreak introduced by earlier patch.

	* ob.el, ob-ref.el: Remove double fix of the same problem.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (orgtbl-ctrl-c-ctrl-c): Parse buffer for constants.

2011-07-28  Łukasz Stelmach  <lukasz.stelmach@iem.pw.edu.pl>

	* org-html.el (org-export-html-mathjax-template):
	Displaymath environment and MathJax.

2011-07-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-faces.el (org-agenda-current-time): New face.

	* org-agenda.el (org-agenda-show-current-time-in-grid):
	(org-agenda-current-time-string): New options.
	(org-agenda-add-time-grid-maybe): Add current time to time grid.

2011-05-10  Jim Meyering  <meyering@redhat.com>

	Fix doubled-word typos.
	* org-agenda.el (org-agenda-entry-types): the the -> the
	* org-table.el (org-table-get-remote-range): or or -> or
	* org-wl.el (org-wl-folder-type): the the -> the
	* org.el (org-goto, org-inside-LaTeX-fragment-p): Likewise.

2011-03-15  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org-src.el (org-src-switch-to-buffer):
	* org-plot.el (org-plot/gnuplot-script, org-plot/gnuplot):
	* org-mouse.el (org-mouse-agenda-type):
	* org-freemind.el (org-freemind-node-to-org):
	* ob-sql.el (org-babel-execute:sql):
	* ob-exp.el (org-babel-exp-do-export, org-babel-exp-code):
	* ob-ref.el (org-babel-ref-resolve): Fix use of case.

2011-03-07  Chong Yidong  <cyd@stupidchicken.com>

	* Version 23.3 released.

2011-03-06  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-blank-before-new-entry, org-context-in-file-links)
	(org-refile-targets, org-log-repeat, org-insert-link)
	(org-speed-command-default-hook, org-speed-command-hook)
	(org-in-regexps-block-p, org-yank-generic, org-goto-first-child):
	Fix typos in docstrings.
	(org-toggle-pretty-entities): Fix typo in message.

2011-03-06  Juanma Barranquero  <lekktu@gmail.com>

	* org-id.el: Don't set `kill-emacs-hook' on noninteractive sessions.

2011-02-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org-remember.el (org-remember-mode-map):
	* org-src.el (org-src-mode-map): Move initialization into declaration.

2011-01-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org-remember.el (org-remember-mode):
	* org-capture.el (org-capture-mode): Don't run hook redundantly.

2011-01-09  Chong Yidong  <cyd@stupidchicken.com>

	* org-faces.el (org-link): Inherit from link face.
	Suggested by Joakim Verona.

2010-12-11  Tassilo Horn  <tassilo@member.fsf.org>

	* org-footnote.el (org-footnote-create-definition): Place
	Footnotes section before message-signature-separator also in modes
	derived from message-mode.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org.el (org-make-tags-matcher): Remove useless cat-p value.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org.el (org-entry-properties): Enhance docstring.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-top-point-with-indent)
	(org-list-bottom-point-with-indent): Pay also attention to
	'original-indentation property of text, as blocks are put to
	column 0 upon exporting.

2010-12-11  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-remove-temporary-directory): Handle exception
	with message informing of failure to remove directory.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-header-arg-names:clojure): Add
	`package' to the list of Clojure header arguments which will be read
	from heading properties.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-export-templates): Add
	Sébastien Vauban's suggestion for LaTeX export in docstring.  This is
	not default as it requires an additional LaTeX package: "todonotes".

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-export-templates): New variable.

	* org-inlinetask.el (org-inlinetask-export-handler): Make use of
	templates to export inline tasks.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-current-level): Ignore inline tasks when getting current
	level of entry.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-indent-line-function): Ignore drawers inside inline
	tasks  if the line to indent isn't inside an inline task itself.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-get-task-level): New function.

	* org-indent.el (org-indent-add-properties): Find true level of
	indentation wrt inline tasks.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-outline-regexp): New function.

	* org-inlinetask.el (org-inlinetask-goto-beginning): New function.

	* org-inlinetask.el (org-inlinetask-goto-end): New function.

	* org.el (org-mark-subtree): New command.

	* org.el (org-speed-commands-default, org-mode-map): Make use of
	new command.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-inlinetask.el (org-inlinetask-export-handler): Remove protection
	from @<span class...> so it can be removed during LaTeX export.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): More informative code block
	evaluation messages.

2010-12-11  Matt Lundin  <mdl@imapmail.org>

	* org.el (org-make-heading-search-string): Optionally limit number
	of lines stored in file link search strings.
	(org-context-in-file-links): Add option to set to integer specifying
	number of lines.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-finalize): New prefix argument
	STAY-WITH-CAPTURE.
	(org-capture-refile): Improve docstring.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sql.el (org-babel-execute:sql): Add msosql as optional sql
	interaction engine.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-list):
	(org-agenda-goto-today): Use `org-today'.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-make-header): Swap \begin{document}
	and the title/author definitions.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-macs.el: Better backup definition for
	`with-silent-modifications'.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-babel-execute:python): Rename "prefix" to
	"preamble".
	(org-babel-python-evaluate): Rename "prefix" to "preamble".
	(org-babel-python-evaluate-external-process): Rename "prefix" to
	"preamble".

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-examplize-region): Check if `end' is a marker
	or a point and handle appropriately.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sql.el (org-babel-execute:sql): Explicitly set field
	separator to \t when importing tabular data.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-custom-commands-local-options):
	Allow org-agenda-span to be a symbol.
	(org-agenda-ndays): Make obsolete.
	(org-agenda-span): New variable superseding org-agenda-ndays.
	(org-agenda-menu): Use org-agenda-current-span.
	(org-agenda-current-span): New local variable storing current
	span.
	(org-agenda-list): Take a span instead of ndays as argument.
	This function is now responsible for computing the ndays based
	on span.
	(org-agenda-ndays-to-span): Return span only if number of days
	really matches.
	(org-agenda-span-to-ndays): New function.
	(org-agenda-manipulate-query): Use org-agenda-compute-starting-span.
	(org-agenda-goto-today): Use org-agenda-compute-starting-span.
	(org-agenda-later): Do not give compute a new span, use the
	current one.
	(org-agenda-day-view, org-agenda-week-view)
	(org-agenda-month-view, org-agenda-year-view): Stop touching
	org-agenda-ndays.
	(org-agenda-change-time-span): Only compute starting-span.
	(org-agenda-compute-starting-span): New function derived from
	the old org-agenda-compute-time-span.
	(org-agenda-set-mode-name): Compute mode based on
	org-agenda-current-span.
	(org-agenda-span-name): New function.

2010-12-11  Robert Pluim  <rpluim@gmail.com>  (tiny change)

	* org-agenda.el (org-agenda-toggle-deadlines): Fix docstring.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-quarter-to-date): Define variables.
	(org-clock-special-range): Defin variables.  Use org-floor*.
	(org-clocktable-write-default): Define tcol.

	* org-compat.el (org-floor*): New function.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>
	    John Wiegley  <jwiegley@gmail.com>

	* org-complete.el: New file.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clocktable-write-default): Fix the % formula.

2010-12-11  Matt Lundin  <mdl@imapmail.org>

	* org-agenda.el (org-format-agenda-item): The value of
	org-category is not converted to a string unless it is defined.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-babel-execute:python): Pass the new "prefix"
	header argument through to external evaluation.
	(org-babel-python-evaluate): Pass the new "prefix" header argument
	through to external evaluation.
	(org-babel-python-evaluate-external-process): When specified prepend
	"prefix" to the file used in external evaluation.

2010-12-11  Dan Davison  <dandavison7@gmail.com>

	* ob-python.el (org-babel-python-evaluate-session): Change python
	module name from 'pp' to 'pprint'.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-R.el (org-babel-R-evaluate-session): Removing empty lines
	from R session output, these are often the result of variable
	assignments.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sql.el (orgtbl-to-csv): Declaring an external function to
	fix a compiler warning.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-eval.el (require): No longer require ob.el to allow
	requiring by ob.el.

	* ob.el (ob-eval): Require ob-eval.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-confirm-evaluate): Show code block's name when
	it is available during evaluation query.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sql.el (org-babel-expand-body:sql): Expand the body of a sql
	code block.
	(org-babel-execute:sql): Use sql specific body expansion function.
	(org-babel-sql-expand-vars): Insert variables into a sql code block.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): Using markers instead of
	points for more robust buffer anchors.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org-capture.el: Use org-today.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org-habit.el: Use org-today.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org.el (org-auto-repeat-maybe): Use org-today.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-day-of-week): New function.
	(org-quarter-to-date): New function.
	(org-clock-special-range): Implement quarters.

2010-12-11  Sébastien Vauban  <wxhgmqzgwmuf@spammotel.com>

	* org.el (org-complete-tags-always-offer-all-agenda-tags):
	Fix docstring.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-format-agenda-item): Convert category to a string
	if it is a symbol.  This fixes the following call to
	org-agenda-get-category-icon which fails if category is not a string.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el: Updated requirements documentation to mention
	the minimum version of Clojure.
	(org-babel-expand-body:clojure): Fully qualified function name.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-lists): Do not add an
	unnecessary newline character after a list.

	* org-list.el (org-list-bottom-point-with-indent): Ensure bottom
	point is just after a non blank line.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-examplize-region): Remove old assertion which
	no longer applies to the result insertion code.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-babel-execute:python): Use a :return header
	argument for external evaluation in which the code block body need
	to be wrapped in a function.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-expand-body:clojure): Trapped free
	variable.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-edit-special): Edit formulas when in TBLMF line.

2010-12-11  Allen S. Rout  <asr@ufl.edu>  (tiny change)

	* org-capture.el (org-capture-after-finalize-hook): New hook.
	(org-capture-finalize): Run the new hook.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-expand-body:clojure): Support for
	pretty printing of Clojure code and data.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): No longer escape results which
	will be wrapped in a block.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-eval.el (org-babel-eval-wipe-error-buffer): Fix compiler
	warning and added documentation string.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-execute:clojure): Remade using slime
	for all code evaluation.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-beamer.el (org-beamer-sectioning): Allow overlay arguments for
	the column as well.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-confirm-evaluate): More descriptive message
	when evaluation is aborted or disabled.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): Responds to new "wrap" header
	argument.
	(org-babel-merge-params): Includes new "wrap" header argument in
	one of the results header argument exclusive groups.

2010-12-11  David Maus  <dmaus@ictsoc.de>

	* org-macs.el (with-silent-modifications): Fix condition for
	with-silent-modification.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-parse-header-arguments): Stripping trailing
	spaces off of header arguments (even the first one).

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sh.el (org-babel-sh-var-to-sh): Wrap end token of heredoc in
	single quotes which is the best practice.
	(org-babel-sh-table-or-results): Use `org-babel-script-escape' for
	more robust parsing of shell output.

2010-12-11  Dan Davison  <dandavison7@gmail.com>

	* org.el (org-additional-option-like-keywords): Add more keywords,
	and colons to some old ones.

2010-12-11  Dan Davison  <dandavison7@gmail.com>

	* ob-eval.el (org-babel-error-buffer-name): Define new variable.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-babel-python-table-or-string):
	Using `org-babel-script-escape' for reading string input from scripting
	languages.

2010-12-11  Achim Gratz  <Stromeko@nexgo.de>  (tiny change)

	* org-macs.el (org-called-interactively-p): Wrap function call in
	with-no-warnings.
	(with-silent-modifications): Declare macro for Emacs < 23.2.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-parse-header-arguments): Remove addition of
	":" to singleton first header arguments as it was leading to errors.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-make-header): Run the title through
	`org-export-latex-fontify-headline'.
	(org-export-latex-fontify-headline): Do the protection of math
	snippets also here.

2010-12-11  Richard Lawrence  <richard.lawrence@berkeley.edu>

	* org-latex.el (org-export-as-latex): Sent the section title
	through the preprocessor.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-html-level-start): Mark listified headings
	with a custom id.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-open-at-point): Don't do footnote action if cursor is
	on a bracket link.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-edit-special): Check also for TBLFM line.

2010-12-11  Achim Gratz  <Stromeko@Stromeko.DE>  (tiny change)

	* org-clock.el (org-get-clocktable): Previous patch incorrectly
	required whitespace in front of #+BEGIN: and #+END:.

2010-12-11  Dan Davison  <dandavison7@gmail.com>

	* org-src.el (org-edit-src-code): Allow region to be inherited by
	edit buffer when mark is one character beyond end of src block.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-list-bullet): Ensure point is at bol before
	checking item indentation.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-map-src-blocks): Move to earlier in the file
	and now autoloading.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-at-ref-p): Use higher level function
	for testing list membership.

	* ob.el (org-babel-read-result): Use higher level function for
	testing list membership.
	(org-babel-result-end): Use higher level function for testing list
	membership.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sqlite.el (ob-eval): Require ob-eval for external command
	execution.
	(org-babel-execute:sqlite): No longer uses the init option for
	passing commands to sqlite.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-indent-line-function): Drawers and blocks have no
	influence on indentation of text below.  Also fix indentation
	problem with a block at column 0 and add a special case for
	literal examples.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-map-src-blocks): Ensure that the file argument
	is only evaluated once.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-resolve): Recognize `list' as a unique
	type of data
	(org-babel-ref-at-ref-p): Recognize `list' as a unique type of data.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-load-file): Can be called interactively.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org-table.el (orgtbl-after-send-table-hook): New hook.
	(orgtbl-ctrl-c-ctrl-c): Run `orgtbl-after-send-table-hook' when a
	table was sent.
	(orgtbl-send-table): Return the number of sent tables, or nil if no
	sending has happened.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-get-priority-function): New option.
	(org-get-priority): Call `org-get-priority-function' if that
	has been set.

2010-12-11  Dan Davison  <dandavison7@gmail.com>

	* ob-table.el (org-babel-table-truncate-at-newline): Only add
	"..." if there is something after the newline.

2010-12-11  Achim Gratz  <Stromeko@nexgo.de>  (tiny change)

	* org-clock.el (org-get-clocktable):
	(org-in-clocktable-p):
	(org-clocktable-shift):
	(org-clocktable-steps): Fix regexp to allow for indented clock tables.

2010-12-11  Puneeth Chaganti  <punchagan@gmail.com>

	* org-exp.el (org-export-handle-include-files): Support :minlevel
	property.
	(org-get-file-contents): New argument minlevel to demote included
	content.

2010-12-11  Noorul Islam  <noorul@noorul.com>

	* org-latex.el (org-export-latex-hyperref-format): New option.
	(org-export-latex-href-format): Rename the existing variable
	`org-export-latex-hyperref-format' as `org-export-latex-href-format'
	(org-export-latex-links): Use `org-export-latex-hyperref-format' and
	`org-export-latex-href-format'.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-calc.el (org-babel-execute:calc): Ensure the *Calculator*
	buffer exists before it is used.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-preprocess-string): Delay code block
	processing a bit to allow correct list parsing in the export string.

2010-12-11  Christopher Allan Webber  <cwebber@dustycloud.org>

	* org-agenda.el (org-agenda-timegrid-use-ampm): New option.
	(org-agenda-time-of-day-to-ampm): New function.
	(org-agenda-time-of-day-to-ampm-maybe): New function.
	(org-format-agenda-item): Call org-agenda-time-of-day-to-ampm-maybe.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-faces.el (org-cycle-level-faces): New option.

	* org.el (org-get-level-face): Honor org-cycle-level-faces.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-today): New function.
	(org-agenda-get-day-face): New function.
	(org-timeline): Use org-agenda-today and org-agenda-get-day-face.
	(org-agenda-list): Use org-agenda-today and org-agenda-get-day-face.
	(org-todo-list): Use org-agenda-today.
	(org-get-all-dates): Use org-agenda-today.
	(org-agenda-day-face-function): New variable.
	(org-agenda-get-day-face): Use org-agenda-day-face-function.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-ctrl-c-ctrl-c): Consider sending a radio table also
	in Org.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-export-as-html): Do not treat partially
	protected lines as if they were fully protected.

2010-12-11  Dan Davison  <dandavison7@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Remove hard-wired configuration of minted export
	(org-export-latex-minted-with-line-numbers): Remove variable.

2010-12-11  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-dblock-write:clocktable): Fix double
	reference to `link' in let construct.
	(org-clock-clocktable-formatter): Fix typo in docstring.
	(org-clocktable-write-default): Fix typo in docstring.

2010-12-11  David Maus  <dmaus@ictsoc.de>

	* org-protocol.el (org-protocol-unhex-string): Normalize percent
	escape sequence to upper case letters.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-lob-get-info): Include pass-through
	header arguments in results variable header argument string.

2010-12-11  David Maus  <dmaus@ictsoc.de>

	* org-exp.el (org-export-visible): Limit search for in-buffer options
	beginning of first headline.

2010-12-11  David Maus  <dmaus@ictsoc.de>

	* org.el (org-open-at-point): Remove stale link handler for news:
	links.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clocktable-write-default): Better handling of
	narrowing.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-category-icon-alist): Fix defcustom type.

2010-12-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-indent-line-function): Simplify code and remove bug that
	would insert a tab at the beginning of the line when trying to
	indent the item.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org.el (org-diary-sexp-entry): Split sexp result strings at semicolon.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org-agenda.el (org-agenda-prefix-format): Insert place holder
	for icon.
	(org-agenda-category-icon-alist): New option.
	(org-agenda-get-category-icon): New function.
	(org-format-agenda-item): Support for icons.
	(org-compile-prefix-format): Support for icons.

2010-12-11  Julien Danjou  <julien@danjou.info>

	* org-compat.el: Create defalias for `string-match-p' and
	looking-at-p.

2010-12-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-calc.el (org-babel-execute:calc): Support for variables --
	converts :var variables in calc variables.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-sparse-tree): Mention [r] in dispatch menu.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-list.el (org-list-parse-list): Use `org-looking-at-p'.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-id.el (org-id-store-link): Test for org-mode before checking
	for IDs.

2010-12-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-shorten-string): New function.

	* org-exp.el (org-export-convert-protected-spaces): New function.
	(org-export-preprocess-string):
	Call `org-export-convert-protected-spaces' to handle new hard spaces.

2010-12-11  David Maus  <dmaus@ictsoc.de>

	* org.el (org-narrow-to-subtree): Check for heading that ends at end
	of buffer.

2010-11-12  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-templates): Remove autoload from
	defcustom.

	* ob-lisp.el (slime): Don't expect slime to be present.

2010-11-11  Dan Davison  <dandavison7@gmail.com>

	* ob.el: `copy-sequence' suffices to copy alist; no need for
	`copy-tree'.

2010-11-11  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-execute-src-block): If ":results file" is in
	effect, then ensure that the value of :file is returned as the
	result; don't rely on language files for this.

2010-11-11  Dan Davison  <dandavison7@gmail.com>

	* ob.el (org-babel-sha1-hash): Avoid corrupting `info' data
	structure by side-effects of `sort'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-bottom-point-with-indent): Do not check
	indentation of a non-empty blank line.

	* org-list.el (org-sort-list): Sort a list with point anywhere
	inside it.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-calc.el (org-babel-execute:calc): Safer evaluation and
	hopefully better error messages.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* org.el (org-babel-load-languages): Adding calc.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-initiate-session): Don't resolve variable
	references unless prefix arg is supplied.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-calc.el (org-babel-execute:calc): Ensure that calc stack
	refers to the correct stack.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-calc.el: Adding the beginnings of support for calc code
	blocks.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-update-block-body): Declaring function
	for updating code block bodies.
	(org-babel-spec-to-string):
	(org-babel-detangle): Detangle all tangled and commented code
	blocks in the current file back to org.
	(org-babel-tangle-jump-to-org): Jump from a tangled and commented
	file back to the originating org-mode code block ob-tangle:
	detangle changes in code files back to the original org files.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-comment-format-beg): Fix typo.
	(org-babel-tangle-comment-format-end): Fix typo.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-exp.el (org-export-format-source-code-or-example):
	Use minted for latex source code export if `org-export-latex-listings'
	has the value 'minted.

	* org-latex.el (org-export-latex-listings): Document special value
	'minted.

	* org-latex.el (org-export-latex-minted): Delete variable.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-get-src-block-info): Retrieve contents of
	parentheses, excluding parentheses themselves.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-gnuplot.el (org-babel-variable-assignments:gnuplot):
	Fix bug in gnuplot data file assignment using user variables.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-latex.el (org-babel-execute:latex): Adding new :headers
	header argument for latex code blocks.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-templates): New capture property
	`:kill-buffer'.
	(org-capture-finalize): Kill target buffer if that is desired.
	(org-capture-target-buffer): Remember if we have to make the buffer.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-dblock-write:clocktable): Fix bug when
	computing clock tables.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-dblock-write:clocktable): Pass file minutes up
	to caller even if no table is generated.

2010-11-11  Łukasz Stelmach  <lukasz.stelmach@iem.pw.edu.pl>

	* org-agenda.el (org-agenda-get-sexps): Handle lists as return
	values from diary entries.

	* org-bbdb.el (org-bbdb-anniversaries): Handle lists of
	anniversaries.

	* org.el (org-diary-sexp-entry): Handle lists as return values
	from diary entries.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-empty-lines-before):
	(org-capture-empty-lines-after): Make sure the n=0 does not insert
	any newlines.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-clojure-babel-clojure-cmd): Fix error
	message when clojure binary is not found.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-format-table-html): New argument DOCBOOK.
	(org-format-org-table-html): New argument DOCBOOK.  When set, use
	align instead of class to align table fields.

	* org-docbook.el (org-export-as-docbook): Specify the docbook
	argument for the table converter.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-macs.el (org-called-interactively-p): New macro.

	* org-freemind.el: No longer require 'rx.
	(org-freemind): New customization group, use it for all the
	variables.
	(org-export-as-freemind): Add docstring.
	(org-freemind-show): Improve filen naming.
	(org-freemind-convert-links-helper): New function.
	(org-freemind-bol-helper-base-indent): New variable.
	(org-freemind-bol-helper): New function.
	(org-freemind-node-css-style): New option.
	(org-freemind-node-pattern): New variable.
	(org-freemind-from-org-mode): Better docstring.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* ob-haskell.el (org-babel-variable-assignments:haskell):
	Don't pass more than two arguments to mapc.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* ob.el (org-babel-ref-resolve): Declare to silence byte compiler.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-footnote.el (message-signature-separator): Defvar to silence
	byte compiler.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-exp.el (org-export-string): Fix reference to wrong symbol.

2010-11-11  Jambunathan K  <kjambunathan@gmail.com>

	* org.el (org-link-search): Return 'dedicated on successful match
	when org-link-search-must-match-exact-headline is set to t.

2010-11-11  Daniel Clemente  <n142857@gmail.com>

	* org-html.el (org-html-make-link): Append fragment to file: links
	if present.

2010-11-11  Tassilo Horn  <tassilo@member.fsf.org>

	* org-footnote.el (org-footnote-create-definition)
	(org-footnote-goto-local-insertion-point): Add footnotes before
	signature when in message-mode.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-display-inline-images): Improve regexp.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-cycle): Make sure resetting to startup visibility
	works after another cycle command.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-string): New function org-export-string
	can be used to convert a string of test in org-mode markup to a
	specified format.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-display-inline-images): Allow non-ASCII characters
	in image file names.  Save match data.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-auto-repeat-maybe): Fix shifting multiple time
	stamps.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-store-forced-table-alignment):
	(org-export-remove-special-table-lines): Allow the "c" cookie for
	table alignment.

	* org-html.el (org-export-table-header-tags):
	(org-export-table-data-tags): Add another %s format for the
	alignment.
	(org-export-html-table-align-individual-fields): New option.
	(org-format-org-table-html): Implement field-by-field alignment
	and support centering.
	(org-format-table-table-html): Make sure the new table tag formats
	don't break this function.

	* org-table.el (org-table-cookie-line-p):
	(org-table-align): Allow for the <c> cookie.

	* org.el (org-set-font-lock-defaults): Allow for the <c> cookie.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-exp.el (org-export-normalize-links): Skip normalization of
	plain links that are part of another link.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-R.el (org-babel-expand-body:R): Fix bug in let binding.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-indent.el (org-indent-add-properties):
	Use `with-silent-modifications'.
	(org-indent-remove-properties): Use `with-silent-modifications'.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-cookie-line-p): Fix indentation.

	* org-exp.el (org-store-forced-table-alignment): New function.
	(org-export-preprocess-string):
	Call `org-store-forced-table-alignment'.

	* org-html.el (org-format-org-table-html): Use stored alignment
	information.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-execute-src-block): Respects prefix argument
	(which forces re-calculation).

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-execute-src-block): Remove needless param
	sorting from ob-execute-src-block, the params are sorted already
	by ob-sha1-hash.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-sha1-hash): Ensure that info is sorted at the
	header argument level.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-sha1-hash): Consider words in different order
	as different input.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-sha1-hash): Fix check for zero length sequences.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-sh.el (org-babel-sh-var-to-sh): Ensure value has the
	structure of an Org-mode table (list of lists).

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-tangle.el (org-babel-tangle-collect-blocks): Fix bug
	(reference to unassigned variable `src-lang' and avoid calling
	org-babel-get-src-block-info twice.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-demarcate-block): Update to reflect the new
	info list contents.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-code): Supply non-nil argument to
	`org-babel-get-src-block-info' to avoid resolving variable
	references.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-map-src-blocks): Fix minor bug in and
	improved efficiency of org-babel-map-src-blocks.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-collect-blocks): Now explicitly
	checks that a code block will actually be tangled before
	collecting it's full information (a process which could involve
	the execution of other code blocks).

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-demarcate-block): Use light version of
	`org-babel-get-src-block-info'.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-sha1-hash): Now handles more complex types in
	params.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-execute-src-block): Generally using the new
	more informative params
	(org-babel-process-params): Don't forget the :var portion of
	variable assignments.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-table.el (sbe): Simplify to reflect to var resolution.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-resolve): Bringing the referent
	arguments back to their params before evaluation.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-resolve): Cleanup of variable usage and
	indentation.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-table.el (sbe): Use `org-babel-process-params params' instead
	of `org-babel-expand-variables'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-C.el (org-babel-C-execute): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-R.el (org-babel-execute:R): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file
	(org-babel-R-variable-assignments): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-asymptote.el (org-babel-execute:asymptote): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-clojure.el (org-babel-execute:clojure): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-dot.el (org-babel-execute:dot): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-emacs-lisp.el (org-babel-expand-body:emacs-lisp): Remove
	call to org-babel-process-params which should no longer be called
	from within a language file
	(org-babel-execute:emacs-lisp): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-haskell.el (org-babel-execute:haskell): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-js.el (org-babel-execute:js): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-lisp.el (org-babel-execute:lisp): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-ocaml.el (org-babel-execute:ocaml): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-octave.el (org-babel-execute:octave): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-perl.el (org-babel-execute:perl): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-python.el (org-babel-execute:python): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-ruby.el (org-babel-execute:ruby): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-scheme.el (org-babel-execute:scheme): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-screen.el (org-babel-execute:screen): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file
	(org-babel-prep-session:screen): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-sh.el (org-babel-execute:sh): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-sql.el (org-babel-execute:sql): Remove call to
	org-babel-process-params which should no longer be called from
	within a language file.

	* ob-haskell.el (org-babel-execute:haskell): Remove reference to
	processed params.

	* ob-clojure.el (org-babel-execute:clojure): Remove reference to
	processed params.

	* ob-R.el (org-babel-execute:R): Remove reference to processed
	params.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-sql.el (org-babel-execute:sql): Use generic expansion
	function
	(org-babel-expand-body:sql): Delete function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-sh.el (org-babel-execute:sh): Use generic expansion function
	(org-babel-expand-body:sh): Delete function
	(org-babel-prep-session:sh): Change name of called function
	(org-babel-variable-assignments:sh): Change function name.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-screen.el (org-babel-execute:screen): Use generic expansion
	function
	(org-babel-expand-body:screen): Delete function
	(org-babel-prep-session:screen): Remove references to processed
	params.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-sass.el (org-babel-execute:sass): Use generic expansion
	function
	(org-babel-expand-body:sass): Delete function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-ruby.el (org-babel-execute:ruby): Use generic expansion
	function
	(org-babel-prep-session:ruby): Use new variable assignment
	function
	(org-babel-variable-assignments:ruby): New function
	(org-babel-expand-body:ruby): Delete function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-python.el (org-babel-execute:python): Use generic expansion
	function
	(org-babel-prep-session:python): Change name of called function
	(org-babel-variable-assignments:python): Change function name
	(org-babel-expand-body:python): Delete function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-plantuml.el (org-babel-expand-body:plantuml): Delete function
	(automatically handled by generic version).

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-perl.el (org-babel-execute:perl): Use generic expansion
	function
	(org-babel-expand-body:perl): Delete function
	(org-babel-variable-assignments:perl): New function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-org.el (org-babel-expand-body:org): Delete function
	(automatically handled by generic version).

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-octave.el (org-babel-execute:octave): Use generic expansion
	function
	(org-babel-variable-assignments:octave): Change name of function
	(org-babel-variable-assignments:matlab): New defalias
	(org-babel-prep-session:octave): Change name of function
	(org-babel-expand-body:matlab): Delete function
	(org-babel-expand-body:octave): Delete function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-ocaml.el (org-babel-execute:ocaml): Use generic expansion
	function
	(org-babel-variable-assignments:ocaml): New function
	(org-babel-expand-body:ocaml): Delete function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-mscgen.el (org-babel-expand-body:mscgen): Delete function
	(automatically handled by generic version).

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-js.el (org-babel-execute:js): Use new variable assignment
	function
	(org-babel-expand-body:js): Delete function
	(org-babel-prep-session:js): Use new variable assignment function
	(org-babel-variable-assignments:js): New function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-haskell.el (org-babel-execute:haskell): Use generic expansion
	function
	(org-babel-expand-body:haskell): Delete function
	(org-babel-prep-session:haskell): Use variable assignment function
	(org-babel-variable-assignments:haskell): New function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-gnuplot.el (org-babel-expand-body:gnuplot): Use variable
	assignment function
	(org-babel-prep-session:gnuplot): Use variable assignment function
	(org-babel-variable-assignments:gnuplot): New function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-ditaa.el (org-babel-expand-body:ditaa): Delete function
	(automatically handled by generic version).

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-css.el (org-babel-expand-body:css): Delete function
	(automatically handled by generic version).

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-asymptote.el (org-babel-execute:asymptote): Use generic
	expansion function
	(org-babel-expand-body:asymptote): Delete function
	(org-babel-variable-assignments:asymptote): New function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-R.el (org-babel-expand-body:R): Use new function
	`org-babel-variable-assignments:R'; don't trim body.
	(org-babel-execute:R): Respond to changes in
	`org-babel-expand-body:R'
	(org-babel-prep-session:R): Called function is now named
	`org-babel-variable-assignments:R'
	(org-babel-variable-assignments:R): Receives processed-params as
	new optional argument.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-C.el (org-babel-C-expand): Don't trim body.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-scheme.el (org-babel-expand-body:scheme): Fix bug in
	obtaining variable references.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-tangle.el (org-babel-tangle-collect-blocks): Supply variable
	assignment lines to generic expansion command.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-expand-src-block): Supply variable assignment
	lines to generic expansion function
	(org-babel-expand-body:generic): Prepend body with optional
	variable assignment lines.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-results): Replace old function call.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-lob-execute): Now expanding variable
	references before execution.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-execute-src-block): Only sort parameters if
	it's required for caching.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-table.el (sbe): Reworking for better indentation and to
	integrate the new variable resolution.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ref.el (org-babel-ref-resolve-reference): Now expanding
	variables when resolving references.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-merge-params): Fix order or precedence for
	variables.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-C.el (org-babel-expand-body:c++, org-babel-C-expand):
	* ob-R.el (org-babel-expand-body:R, org-babel-execute:R)
	(org-babel-R-variable-assignments):
	* ob-asymptote.el (org-babel-expand-body:asymptote)
	(org-babel-execute:asymptote):
	* ob-clojure.el (org-babel-expand-body:clojure)
	(org-babel-execute:clojure):
	* ob-css.el (org-babel-expand-body:css):
	* ob-ditaa.el (org-babel-expand-body:ditaa):
	* ob-dot.el (org-babel-expand-body:dot, org-babel-execute:dot):
	* ob-emacs-lisp.el (org-babel-expand-body:emacs-lisp)
	(org-babel-execute:emacs-lisp):
	* ob-gnuplot.el (org-babel-expand-body:gnuplot)
	* ob-haskell.el (org-babel-expand-body:haskell)
	(org-babel-execute:haskell, org-babel-load-session:haskell)
	(org-babel-prep-session:haskell):
	* ob-js.el (org-babel-expand-body:js, org-babel-execute:js):
	* ob-latex.el (org-babel-expand-body:latex):
	* ob-lisp.el (org-babel-expand-body:lisp, org-babel-execute:lisp):
	* ob-mscgen.el (org-babel-expand-body:mscgen):
	* ob-ocaml.el (org-babel-expand-body:ocaml, org-babel-execute:ocaml):
	* ob-octave.el (org-babel-expand-body:matlab)
	(org-babel-expand-body:octave, org-babel-execute:octave)
	(org-babel-octave-variable-assignments):
	* ob-org.el (org-babel-expand-body:org):
	* ob-perl.el (org-babel-expand-body:perl, org-babel-execute:perl):
	* ob-plantuml.el (org-babel-expand-body:plantuml):
	* ob-python.el (org-babel-expand-body:python, org-babel-execute:python)
	(org-babel-python-variable-assignments):
	* ob-ruby.el (org-babel-expand-body:ruby, org-babel-execute:ruby):
	* ob-sass.el (org-babel-expand-body:sass):
	* ob-scheme.el (org-babel-expand-body:scheme, org-babel-execute:scheme):
	* ob-screen.el (org-babel-expand-body:screen):
	* ob-sh.el (org-babel-expand-body:sh, org-babel-execute:sh)
	(org-babel-sh-variable-assignments):
	* ob-sql.el (org-babel-expand-body:sql):
	* ob-sqlite.el (org-babel-expand-body:sqlite, org-babel-execute:sqlite):
	* ob.el (org-babel-expand-body:generic):
	Remove obsoleted optional third argument.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-clojure.el (org-babel-prep-session:clojure): Purging all
	calls to removed org-babel-ref-variables.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-lob-ingest): Now returns the count of
	ingested code blocks.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-in-export-file): Wrapper for collecting
	information from within the original export file.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-get-src-block-info): Small but crucial fix)
	(this should return nil if not match found.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-emacs-lisp.el (org-babel-expand-body:emacs-lisp):
	Whitespace (org-babel-execute:emacs-lisp): Whitespace.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-sh.el (org-babel-sh-variable-assignments): Provide missing
	docstring.

	* ob-python.el (org-babel-python-variable-assignments):
	Provide missing docstring.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-octave.el (org-babel-expand-body:octave): Refactor: break
	variable assignment part out into a separate function
	(org-babel-octave-variable-assignments): New function constructing
	list of variable assignment statements
	(org-babel-prep-session:octave): Use new function
	`org-babel-octave-variable-assignments' instead of previous
	(incorrect) variable assignment code.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-sh.el (org-babel-expand-body:sh): Refactor: break variable
	assignment part out into a separate function
	(org-babel-sh-variable-assignments): New function constructing
	list of variable assignment statements
	(org-babel-prep-session:sh): Use new function
	`org-babel-sh-variable-assignments' instead of previous
	(incorrect) variable assignment code.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-python.el (org-babel-expand-body:python): Refactor: break
	variable assignment part out into a separate function
	(org-babel-python-variable-assignments): New function constructing
	list of variable assignment statements
	(org-babel-prep-session:python): Use new function
	`org-babel-python-variable-assignments' instead of previous
	(incorrect) variable assignment code.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-R.el (org-babel-expand-body:R): Refactor: break variable
	assignment part out into a separate function
	(org-babel-R-variable-assignments): New function constructing list
	of variable assignment statements
	(org-babel-prep-session:R): Use new function
	`org-babel-R-variable-assignments' instead of previous
	(incorrect) variable assignment code.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-initiate-session): Better variable names.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-number-sequence):
	Declared * ob-R.el (org-number-sequence): Declared.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-map-src-blocks): Store correct value of
	`end-block'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-mark-block): New function to mark the body of a
	src block in the style of `mark-defun'.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-compat.el (org-number-sequence): New function.

	* ob-R.el (org-babel-expand-body:R): Use `org-number-sequence'.

	* ob.el (org-babel-where-is-src-block-result):
	Use `org-number-sequence'.
	(org-babel-current-buffer-properties): Fix variable definition.

	* ob-ref.el (org-babel-ref-index-list): Use `org-number-sequence'.

	* ob-latex.el (org-babel-latex-tex-to-pdf): Use the 2-argument
	version of `shell-command'.

	* org-latex.el (org-export-as-pdf): Use the 2-argument version of
	`shell-command'.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-list.el (org-list-search-unenclosed-generic): Replace call
	to booleanp.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-agenda-jump-prefer-future): New option.

	* org-agenda.el (org-agenda-goto-date):
	Use `org-agenda-jump-prefer-future'.

2010-11-11  Noorul Islam  <noorul@noorul.com>

	* org-latex.el (org-export-latex-links): Replace hard coded
	hyperref format with custom variable
	`org-export-latex-hyperref-format'.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-insert-heading): Fix docstring.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>  (tiny change)

	* org-capture.el (org-capture-place-entry): If the first line is
	already a headline, just stay there.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sh.el (org-babel-sh-evaluate): No longer assumes that results
	are non-nil.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-ascii.el (org-ascii-replace-entities): Match an optional {}
	after an entity.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (orgtbl-to-html): Apply `org-html-expand' to the
	table fields.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-insert-heading): When on the headline of an inline
	task, insert another inline tasks.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-collect-blocks): Only create
	links for blocks that will actually tangle.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sh.el (org-babel-expand-body:sh): Don't insert extra newlines
	in expanded shell bodies.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-sh.el (org-babel-expand-body:sh): Avoid inserting extra
	newline characters.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-sh.el (org-babel-expand-body:sh): Align code.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-params-from-properties): Max line with at <=80.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* org-latex.el (org-export-latex-listings-langs): Clojure is now
	recognized as a lisp.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-params-from-properties): Use `org-babel-read'
	to interpret property as header argument value.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-parse-header-arguments): Simplify reading of
	header arg value.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-org-to-ascii):
	(org-publish-org-to-latin1):
	(org-publish-org-to-utf8): New functions.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-insert-heading): Skip inline tasks when trying to
	insert a new heading after the end of the subtree.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-inlinetask.el (org-inlinetask-min-level): Set customization
	type to integer or nil.

	* org.el (org-insert-heading): When after an inline task, do not
	use level but go back to headline level before the inline task.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-inlinetask.el (org-inlinetask-in-task-p): New function.

	* org.el (org-indent-line-function): Fix indentation of inline
	tasks.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-activate-links): Fix customize type.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-latex-to-pdf-process): Add rubber as another
	default option.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-latex.el (org-export-latex-minted): Document pygments
	dependency.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mobile.el (org-mobile-create-index-file): Encrypt the index
	file if encryption has been turned on.
	(org-mobile-copy-agenda-files): Avoid double encryption of
	`mobileorg.org'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-exp.el (org-export-latex-minted-with-line-numbers):
	Ensure that variable is declared.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-src-preserve-indentation): Fix compiler
	warning.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-exp.el (org-export-format-source-code-or-example):
	Latex formatting of source code blocks using the minted package
	(org-export-plist-vars): Add :latex-minted property
	(org-export-latex-minted): Ensure variable is defined
	(org-export-latex-minted-langs): Ensure variable is defined.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-src.el (org-edit-src-code): Use `org-region-active-p'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-tangle.el (org-babel-spec-to-string): Whitespace changes.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-tangle.el (org-babel-spec-to-string): Don't trim whitespace
	when `org-src-preserve-indentation' is non-nil.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-lob.el (org-babel-lob-ingest): Provide message stating number
	of blocks added to Library of Babel.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-lob.el (org-babel-lob-ingest): Check for nil source block
	name.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-beamer.el (org-beamer-place-default-actions-for-lists):
	Fix typo in regexp.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-toggle-checkbox): Avoid some boundary error
	when inserting a checkbox in an empty last item of a list.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-gnus.el (org-gnus-nnimap-query-article-no-from-file):
	Query article number from file is nil by default.

2010-11-11  Stephen Eglen  <S.J.Eglen@damtp.cam.ac.uk>

	* org-beamer.el (org-beamer-amend-header): Fix typo in docstring.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-place-entry): Move to `beg' before
	searching for `%?'.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-format-latex): Fix mathjax treatment of single
	letters in between dollars.

2010-11-11  Sébastien Vauban  <wxhgmqzgwmuf@spammotel.com>

	* org-latex.el (org-latex-to-pdf-process): Add a third pdflatex
	run.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-blank-before-new-entry): Improve docstring.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mobile.el (org-mobile-force-id-on-agenda-items):
	Fix docstring.
	(org-mobile-write-agenda-for-mobile): Use outline path if we do
	not have an ID and are not allowed to make one.
	(org-mobile-get-outline-path-link): New function.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mobile.el (org-mobile-copy-agenda-files): Encrypt the empty
	file.
	(org-mobile-write-agenda-for-mobile): Use the right name, even if
	the file get encrypted.
	(org-mobile-move-capture): Only delete tempfile if it does exist.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-number-p): Fix documentation string.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-collect-blocks): Accepting
	"tangle" as a positive argument for the :noweb header argument
	during tangling.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-src-blocks): Fix export when headings
	have links, with tests.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-latex-to-pdf-process): Use texi2dvi if
	available.
	(org-export-latex-get-error): New function.
	(org-export-as-pdf): Give an indication of the errors that
	happened during processing.

2010-11-11  Łukasz Stelmach  <lukasz.stelmach@iem.pw.edu.pl>

	* org-exp.el (org-export-language-setup): Fix Polish entries.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-set-tags): Allow comma as a separator when
	specifying tags at the completion interface.
	(org-tags-completion-function): Allow comma as a separator when
	specifying tags at the completion interface.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-src-blocks): Don't jump back to
	export-file if exporting from a buffer which is not visiting a
	file.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-src-blocks): Only append "::" to a file
	name in link construction if there is a heading to follow it.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-export-html-inline-image-extensions): Add "svg"
	as an allowed extension.

2010-11-11  Sébastien Vauban  <wxhgmqzgwmuf@spammotel.com>

	* org-agenda.el (org-agenda-add-time-grid-maybe): Pad clock times
	with zeros.  Start applying face earlier.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (or): Don't create org-babel-temporary-directory in batch
	as it won't be removed by emacs-kill-hook
	(org-babel-remove-temporary-directory): Only try to remove this
	directory if it exists.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-temporary-directory): Fixing byte-compilation
	warning in ob.el.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle): Now sharing the file name in
	the tangling message.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-load-languages): Fixes compiler warning.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-plantuml.el (org-babel-execute:plantuml): Fixes bug with svg
	output.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-ascii.el (org-export-as-ascii): Use the correct match group.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (boundp): Uncommenting defvar form for
	org-babel-temporary-directory
	(org-babel-temp-file): Now using the org-babel-temporary-directory
	for holding new babel temporary files
	(org-babel-remove-temporary-directory): Removes the babel temp dir
	when Emacs shutsdown
	(kill-emacs-hook): Now removing the babel temp dir on Emacs
	shutdown.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-fill-template): Initialize history
	variable.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-code): Don't move point when generating
	edit buffer.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-code): Deal with point being in
	#+end_src line.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-current-column): Add interactive to turn
	this into a command.

2010-11-11  Bernt Hansen  <bernt@norang.ca>

	* org.el (org-insert-heading): Run org-insert-heading-hook when
	creating the first heading in a file.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-startup-with-inline-images): New option.
	(org-startup-options): Add new keywords inlineimages and
	noinlineimages.
	(org-mode): Inline images when this has been configured.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-get-src-block-info): Remove optional
	HEADER-VARS-ONLY argument; further simplification.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-confirm-evaluate): Fix bug causing extra
	prompt in ob-confirm-evaluate in some cases.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-demarcate-block): Visible region and completion
	during language selection.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-get-src-block-info): Remove comment.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-get-src-block-info): Simplify function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-get-src-block-info): Form info list correctly
	when parenthesized arguments are missing.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-exp.el (org-export-babel-evaluate): Docstring typo
	(org-babel-exp-code): Docstring typo.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mobile.el (org-mobile-encryption-password):
	Improve docstring.
	(org-mobile-encryption-password-session): New variable.
	(org-mobile-encryption-password): New function.
	(org-mobile-check-setup):
	(org-mobile-encrypt-file):
	(org-mobile-decrypt-file): Use the new function.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-capture.el (org-capture-place-template): Widen to remove
	possible restrictions in target buffer.

2010-11-11  Jambunathan K  <kjambunathan@gmail.com>

	* org.el (org-speed-command-hook): Add org-speed-command-hook
	(org-babel-speed-command-hook): Hook for Babel's speed commands.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-execute-buffer): Re-implement using
	`org-babel-map-src-blocks'.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-capture.el (org-capture-templates): Update doc string with
	new message date related escapes.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-wl.el (org-wl-store-link-message): Define properties %:date)
	(%:date-timestamp, and %:date-timestamp-inactive.

	* org-mew.el (org-mew-store-link): Dto.

	* org-mhe.el (org-mhe-store-link): Dto.

	* org-rmail.el (org-rmail-store-link): Dto.

	* org-vm.el (org-vm-store-link): Dto.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-wl.el (org-wl-message-field): Always get literal content of
	header fields.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-gnus.el (org-gnus-store-link): Define properties
	%:date-timestamp and %:date-timestamp-inactive.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-gnus.el (org-gnus-store-link): Handle empty date header
	field.

2010-11-11  Jambunathan K  <kjambunathan@gmail.com>  (tiny change)

	* org.el (org-speed-command-hook): New.  Hook for installing
	additional speed commands.  Use this for enabling speed commands on
	src blocks.
	(org-speed-command-default-hook): The default hook for
	org-speed-command-hook.  Factored out from org-self-insert-command
	and mimics existing behavior.
	(org-self-insert-command): Modify to use org-speed-command-hook.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-search-view): Recover spaces in search words
	if they were escaped with \ or inside a regexp.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-additional-option-like-keywords): Add PROPERTIES to
	the list of completable meta line words.
	(org-complete): Complete property names after #+PROPERTY.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-python.el (org-babel-python-evaluate-session): Make temp file
	names consistent.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-clojure.el (org-babel-clojure-evaluate-external-process):
	Delete extra format argument.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-org.el (org-babel-org-export): Typo in docstring.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-sh.el (org-babel-sh-evaluate): Remove unused temporary file
	variable.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-scheme.el (org-babel-execute:scheme): Alter temp file name.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-process-file-name): New function
	(org-babel-maybe-remote-file): Delete function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-C.el (org-babel-C-execute): Remove unused variable.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org.el (org-make-link-string): Prevent superfluous colon.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org.el (org-make-org-heading-search-string): Leave headline
	intact.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org.el (org-make-link-string): Don't escape characters in link
	type.

2010-11-11  Bastien Guerry  <bzg@gnu.org>

	* org-capture.el (org-capture-templates): Update docstring to
	advertise %:org-date.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-dot.el (org-babel-execute:dot): Automatically specifies
	"-T<ext>" based on file name extension.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-org.el (org-babel-org-export): Raise error on nested export
	call.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-plantuml.el (org-babel-execute:plantuml): Support for svg
	output files.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-demarcate-block): Better initialization of
	stars.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-src-tab-acts-natively): Add customize interface.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-src-strip-leading-and-trailing-blank-lines):
	New variable allowing prevention of automatic stripping of leading and
	trailing blank lines when exiting edit buffer.
	(org-edit-src-exit): Respect value of
	`org-src-strip-leading-and-trailing-blank-lines'
	(org-src-native-tab-command-maybe):
	Bind `org-src-strip-leading-and-trailing-blank-lines' to nil during
	this function.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-code): If mark was inside code block
	then code edit buffer inherits mark with active region.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-demarcate-block): Fix compiler warnings.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-demarcate-block): Better handling of empty
	space around demarcated area.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-goto-date): Turn off prefer future for
	this command.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-gnus.el (org-gnus-open-nntp): New function.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-wl.el (org-wl-open-nntp): New function.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-wl.el (org-wl-open): Open message by numeric reference if
	article part is not a message id.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-filter-apply): Move cursor to a
	visible line.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-demarcate-block): Interactive demarcation of
	code blocks.

	* ob-keys.el (org-babel-key-bindings): Key bindings for block
	demarcation.

2010-11-11  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-link-types): Add the "message" link type.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-types): Add 'message:' link type to default
	link types.

2010-11-11  Bastien Guerry  <bzg@gnu.org>

	* org-gnus.el (org-gnus-store-link): Add the :date property to
	gnus links, allowing the use of %:date in capture templates.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-list-bullet): Follow order of bullets
	indicated in doc-string.

	* org-list.el (org-list-bottom-point-with-indent): List is ended
	when a line is less indented that the last item, not the less
	indented item.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-src-blocks): Now switching back to the
	original file before resolving code block parameters to ensure
	headline and buffer wide parameters are taken into consideration
	when only a narrowed portion of the file is exported.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-forward-same-level): Fix docstring.

2010-11-11  Sebastian Rose  <sebastian_rose@gmx.de>

	* org-publish.el (org-publish-attachment): Put the attachment into
	the right directory.

2010-11-11  Jambunathan K  <kjambunathan@gmail.com>  (tiny change)

	* org.el (org-goto-first-child): New command.

2010-11-11  Matt Lundin  <mdl@imapmail.org>

	* org-agenda.el (org-prepare-agenda): If the agenda is called from
	within the agenda via an elisp link, such as
	[[elisp:(org-agenda-list)]], org-prepare-agenda erases the buffer
	of the file containing the link, since that buffer is current
	during org-prepare agenda (due to a with-current-buffer in
	org-agenda-open-link).  An additional test now ensures that the
	agenda buffer is in fact current when the buffer is erased and
	local variables for the agenda are set.

2010-11-11  David Maus  <dmaus@ictsoc.de>  (tiny change)

	* org-exp.el (org-infile-export-plist): Define property macro.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-mhe.el (org-mhe-get-header): Remove possible folding white
	space in message header field.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-feed.el (org-feed): Fix typo in customization group :tag
	property.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-tag-markup): New option.
	(org-export-latex-keywords-maybe):
	Use `org-export-latex-tag-markup'.

2010-11-11  Rémi Vanicat  <vanicat@debian.org>  (tiny change)

	* org-icalendar.el (org-icalendar-use-UTC-date-time): New option.
	(org-ical-ts-to-string): Use UTC time when requested.

2010-11-11  Noorul Islam  <noorul@noorul.com>  (tiny change)

	* org-html.el (org-html-cvt-org-as-html): Do not convert protocol
	from 'file' to 'http'.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org.el (org-store-log-note): Fix wrong usage
	of`org-adapt-indentation'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-skip-over-state-notes): Do not compute bottom point
	at each item.

	* org-mouse.el (org-mouse-for-each-item): Use `org-apply-on-list'
	instead of moving to each item.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-capture.el (org-capture-templates): Small fix in doc string.

2010-11-11  aaa bbb  <dominik@powerbook-g4-12-van-aaa-bbb.local>

	* org-archive.el (org-get-local-archive-location):
	Use `org-archive-location' as default.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-C.el (org): No longer requires org.

	* ob-ledger.el (org): No longer requires org.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org.el (org-priority): Save match data before call to
	`read-char-exclusive'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-to-generic): Descriptions labels can be
	any suit of symbols, and will end at double colons.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-indent-line-function): Indent past [@num] and
	[@start:num], consistently with what is already done with
	checkboxes.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-store-log-note): Indent new notes to the right
	column.  Also take `org-list-two-spaces-after-bullet-regexp' into
	consideration when creating the note.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-gnus.el (nnimap-group-overview-filename): Declare function
	to silence byte compiler.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-gnus.el (org-gnus-nnimap-query-article-no-from-file):
	New customization variable.
	(org-gnus-nnimap-cached-article-number): New function.
	(org-gnus-follow-link): Try to fetch cached article number of
	message-id.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-org.el (org-babel-org-default-header): Used to insert a dummy
	first line into code blocks before export so that the first line
	is not interpreted as a title
	(org-babel-org-export): Use new dummy code block prefix.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): No longer throws error when
	inserting an empty result.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el: Autoload org-babel-tangle-lang-exts from ob-tangle.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-do-in-edit-buffer):
	Use `org-babel-where-is-src-block-head' to test for source block at
	point.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-keys.el (org-babel-key-bindings): Adding key-binding for
	`org-babel-goto-src-block-head'.

	* ob.el (org-babel-goto-src-block-head): Jump to the head of the
	current code block.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-next-src-block): Now raising more informative
	error when no further code blocks can be found.
	(org-babel-previous-src-block): Now raising more informative error
	when no previous code blocks can be found.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el
	(org-export-preprocess-after-include-files-hook): Now using this
	hook instead of `org-export-preprocess-hook'.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-plantuml.el (org-babel-execute:plantuml): ????

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-python.el (org-babel-python-evaluate): Refactor as call to
	either `org-babel-python-evaluate-external-process' or
	`org-babel-python-evaluate-session'.
	(org-babel-python-evaluate-external-process): New function to
	handle evaluation in external process.
	(org-babel-python-evaluate-session): New function to handle
	evaluation in emacs inferior process.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-org.el (org-babel-execute:org): Evaluates body to latex ascii
	or html respecting :results header arg
	(org-babel-org-export): Exports a string of text to an output
	format.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): Remove existing results when
	nil results are returned.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-ascii.el (org-export-as-ascii): Bind and set link path for
	link type specific markup function.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-clock.el (notifications-notify): Properly declare function
	to silence byte compiler.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-insert-item): Check invisibility of point at a
	meaningful location.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-insert-item-generic): Updating checkboxes
	can modify bottom point of a list, so make it a marker before
	calling `org-update-checkbox-count-maybe'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org.el (org-src-fontify-natively): Set to nil by default.
	Supply customize interface.

2010-11-11  Bastien Guerry  <bzg@gnu.org>

	* org-ascii.el (org-export-as-ascii): Fix bug in ASCII export: use
	`org-bracket-link-analytic-regexp++' to match the link type.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-collect-blocks): Rename `lang' to
	`language'.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-comment-format-beg):
	Format string specifying the link-comment preceding a code block
	(org-babel-tangle-comment-format-end): Format string specifying
	the link-comment following a code block
	(org-babel-tangle-collect-blocks): Storing more information in the
	spec of a tangling code block
	(org-babel-spec-to-string): Now makes use of customizable
	link-comment formats.

2010-11-11  Achim Gratz  <Stromeko@stromeko.net>  (tiny change)

	* org.el (org-delete-backward-char): Check for nil overwrite-mode
	before inserting spaces.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-icalendar.el (org-print-icalendar-entries): Exclude tags
	from summary of non-TODO ical entries.
	(org-print-icalendar-entries): Use `org-complex-heading-regexp' to
	exclude tags from summary of TODO ical entries.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-map-src-blocks): Now exposes much information
	about the code block in the form of let-bound local variables.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-list.el (org-outline-regexp, org-ts-regexp)
	(org-ts-regexp-both, org-in-regexps-block-p)
	(org-level-increment, org-at-heading-p)
	(outline-previous-heading, org-icompleting-read)
	(org-time-string-to-seconds): Declare to fix compiler warning.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-toggle-checkbox): Ignore items in drawers when
	used from an heading.  Send an error when no item is in region.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-do-in-edit-buffer): Use unwind-protect to
	ensure that edit buffer is exited.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-pad-newline): Can be used to
	control the amount of extra newlines inserted into tangled code
	(org-babel-tangle-collect-blocks): Now conditionally collects
	information to be used for "org" style comments
	(org-babel-spec-to-string): Now inserts "org" style comments, and
	obeys the newline configuration variable when inserting whitespace.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-pre-tangle-hook): Defines new tangle
	hook
	(org-babel-tangle): Calls new tangle hook.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture): Compute the length of the correct
	string when removing properties.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-plantuml.el (org-babel-execute:plantuml): Now expanding file
	names before shell quoting.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-src-tab-indents-natively): New variable
	controlling whether language-native TAB action should be performed
	(org-src-native-tab-command-maybe): New function to perform
	language-native TAB action.
	(org-tab-first-hook): Add `org-src-native-tab-command-maybe'.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-plantuml.el (org-babel-execute:plantuml): Explicitly check
	`org-plantuml-jar-path' before use.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-src-font-lock-fontify-block): Re-use hidden
	language major mode buffers during fontification.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org.el (org-fontify-meta-lines-and-blocks): Alter main regexp to
	match code blocks with switches and header args.
	Call `org-src-font-lock-fontify-block' for automatic fontification of
	code in code blocks, controlled by variable
	`org-src-fontify-natively'.
	(org-src-fontify-natively): New variable.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ruby.el (org-babel-expand-body:ruby): Remove requirement of
	inf-ruby.

2010-11-11  Noorul Islam  <noorul@noorul.com>  (tiny change)

	* org-html.el (org-html-make-link): (expand-file-name) removes
	one "/" from "///path-to-file", so add one.  Anything other than
	'file' type should be exported along with the type.

2010-11-11  Noorul Islam  <noorul@noorul.com>  (tiny change)

	* org.el (org-insert-subheading): Fix compiler warning
	(org-insert-todo-subheading): Fix compiler warning.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture): Remove read-only text properties
	from capture text.
	(org-capture-set-target-location): Throw an error if file+headline
	target does not point into a file which is in Org mode.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-map-src-blocks): Prefer `when' to `if'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-code): Improve docstring.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-execute-src-block): Document prefix argument in
	docstring.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-ditaa.el (org-babel-execute:ditaa): Now expanding
	org-ditaa-jar-path with expand-file-name.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-execute-subtree): Pass prefix arg through to
	`org-babel-execute-src-block'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-ascii.el (org-export-ascii-preprocess): Allow [@start:x] and
	[@x] syntax for list numbering.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-indent-line-function): Indentation of source block
	is left to `org-edit-src-exit' and shouldn't be modified by
	`org-indent-line-function'.  Indentation of others blocks should be
	the same as the #+begin line.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-map-src-blocks): If FILE is nil evaluate BODY
	forms on source blocks in current buffer; restore point in current
	buffer.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct): Accept list boundaries as an
	argument in order to avoid computing `org-list-top-point' and
	`org-list-bottom-point' twice when indenting.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-ending-method): Default value is now
	`both', to ensure maximum compatibility before previous
	implementation.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-in-item-p-with-indent): Test if first line
	is the item beginning.

	* org-list.el (org-list-top-point-with-indent): Test if first line
	is a valid list beginning.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-ending-method): New customizable variable
	to tell Org Mode how lists end.  See docstring.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-indent-item-tree): Shifting step of top-level
	item depends on `org-level-increment'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-indent-line-function): Indent first non blank line
	after a list according to current heading level.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-docbook.el (org-export-as-docbook): Remove check for
	indentation on lines that do not start with a list bullet.

	* org-html.el (org-export-as-html): Same thing.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-bottom-point): Take into consideration
	that bound of search can be before true ending of the list.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct-apply-struct): No longer shift
	item's body twice: one after replacing bullet and one after
	changing indentation.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct-indent): Add code to replace
	bullets if needed when indenting.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-insert-item-generic): A single item
	already counting blank lines in his body should be separated with
	the next one by a blank line.  Moreover, if user already provided
	blank lines, follow his wishes.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-indent-item-tree): When moving top item of a
	*-list to column 0, only the first item had its bullet changed to
	-.  It now changes all items of the top-level list, as expected.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-toggle-checkbox): Go to beginning of line
	before processing.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-struct-apply-struct): Check if ancestor
	exists.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-renumber-ordered-list): Check for [@start:x] is
	done at each item.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el: Removed unused variable
	`org-suppress-item-indentation'.

	* org-list.el (org-renumber-ordered-list): Skip item if bullet
	number is already good.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-automatic-rules): Doc-string reflects this
	change.

	* org-list.el (org-indent-item-tree): Prevent whole list from
	being moved when user is not moving subtree.
	Thus `org-cycle-item-indentation' will not allow to move the list.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-indent-item-tree): Remove region code.  It was
	prone to errors and undocumented.

	* org-list.el (org-item-indent-positions): Better heuristics to
	determine what bullet the item will have when demoted.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-bullet-string): First check if
	`org-list-two-spaces-after-bullet-regexp' isn't nil.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-bullet-string): Do not modify match-data.

	* org.el (org-toggle-item): Now working again when changing list
	items into plain text.  Moreover take into consideration
	`org-list-two-spaces-after-bullet-regexp'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-indent-item-tree): Remove unnecessary bullets
	fix, and improved heuristics to determine bullet when indenting.

	* org-list.el (org-item-indent-positions): Function now returns
	sane results when there are two lists separated with blank lines
	only.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-docbook.el (org-export-as-docbook): Use override="num" in
	any listitem matching [@start:num].

	* org-html.el (org-export-as-html): Use value="num" in any li
	matching [@start:num].

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-set-font-lock-defaults): Correct fontification for
	checkboxes found after [@start:?].

	* org-list.el (org-list-at-regexp-after-bullet-p): Skip any
	[@start:?]  when looking at a regex after a bullet.

	* org-list.el (org-toggle-checkbox): Correct insertion of
	checkboxes when there is already a [@start:?] in the item.

	* org-list.el (org-checkbox-blocked-p): Properly check if there's
	an unchecked item before.

	* org-list.el (org-list-parse-list): Function handles items having
	both a counter and a checkbox.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-item-indentation): Org-tab-ind-state
	stores both indentation and bullet when cycle started.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el: `org-at-description-p' renamed to
	`org-at-item-description-p', `org-first-list-item-p' renamed to
	`org-list-first-item-p', `org-end-of-item-text-before-children'
	renamed to `org-end-of-item-or-at-child'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-ctrl-c-ctrl-c): Call `org-fix-bullet-type' instead
	of `org-maybe-renumber-ordered-list' and `org-fix-bullet-type'
	before toggling a checkbox.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-bullet-string): New function returning
	bullet concatenated with an appropriate number of white spaces.

	* org-list.el (org-list-insert-item-generic): Insert the right
	bullet, with help of `org-list-bullet-string'.

	* org-list.el (org-indent-item-tree):
	Use `org-list-bullet-string'.

	* org-list.el (org-fix-bullet-type): Use `org-list-bullet-string'.

	* org-list.el (org-toggle-checkbox): Send an error when
	`org-toggle-checkbox' is trying to insert a checkbox at a
	description item.

	* org-list.el (org-item-re): Modify regexp so it can catch
	correct number of white space before item body.

	* org-list.el (org-list-at-regexp-after-bullet-p): Take into
	consideration new `org-item-re'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-insert-item-generic): The second item in a
	list will be separated from its predecessor with the number of
	blank lines separating the first item from its parent, if any, or
	no blank line.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-indent-item-tree): Fix and reorder every list
	and sublist, from parent of list that has moved if indenting, or
	from list at point if outdenting.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-indent-item-tree): Try to keep relative
	position on line.  It can't if point is in white spaces before
	bullet because mixed tabs and spaces make some columns
	unattainable.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-item-indentation): Cycle when the whole
	item only contains bullet and maybe a checkbox.  Previously, TAB
	would cycle when the first line of the item was blank.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-item-indentation): Allow a point just
	after a description item or a checkboxed item to start cycling.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-list-bullet):
	Check `org-plain-list-ordered-item-terminator' before allowing 1. or 1)
	as valid bullets when cycling.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-item-indentation): Do return t if and
	only if cycling is possible and succeded.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-indent-item-tree): When outdenting a subtree,
	the last item shouldn't have a children.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-item-indentation): Cycling should play
	nicely with indent rule in `org-list-automatic-rules'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-indent-item-tree): If indent rule is activated,
	it should be impossible to outdent an item having children without
	moving its subtree.  Improved reordering of lists modified by
	cycling indentation.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-maybe-renumber-ordered-list): Remove call for
	`org-fix-bullet-type' to prevent infinite loop, and some checks
	already done in `org-renumber-ordered-list'.

	* org-list.el (org-fix-bullet-type): Remove a check and call
	directly `org-maybe-renumber-ordered-list'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-indent-item-tree): It shouldn't be possible to
	indent the first item of a sublist (though outdent is possible) as
	it would break list's structure.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-insert-item-generic): When local search
	doesn't help, search the list globally for blank lines.  Moreover,
	don't bother with new lists, and add 1 blank line.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-capture.el (org-capture-place-item):
	Use `org-search-forward-unenclosed' and
	`org-search-backward-unenclosed' and new variable
	`org-item-beginning-re'.

	* org-list.el (org-item-beginning-re): Regexp matching beginning
	of an item.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-list-bullet): Put back support for
	'previous argument.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-in-item-p): Handle case when point is at an
	heading.

	* org-list.el (org-list-make-subtree): Add protection when used
	outside of list.

	* org-list.el (org-insert-item): Remove useless hack now
	`org-in-item-p' is fixed.

	* org-timer.el (org-timer-item): Remove useless hack now
	`org-in-item-p' is fixed.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-cycle-list-bullet): Prevent description items
	from being numbered.  String argument is also recognized now, as
	long as it is a valid bullet.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-indent-item-tree): Moving indentation of top
	list item will make the whole list move.

	* org-list.el (org-apply-on-list): Function is less sensitive to
	changes of indentation.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-at-item-checkbox-p): Add whitespaces at the end
	of the regexp.

	* org-list.el (org-checkbox-blocked-p): Use new checkbox regexp.

	* org-list.el (org-cycle-item-indentation): Allow cycling
	description items and checkbox items.

	* org-list.el (org-toggle-checkbox): Use new checkbox regexp.

	* org-list.el (org-reset-checkbox-state-subtree): Use new checkbox
	regexp.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-insert-item-internal): Guessing of blank lines
	number is made by looking at neighboring items, if any.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-sort-list): Add the possibility to sort timer
	lists with the ?t or ?T options.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-search-unenclosed-internal): New function to
	handle both `org-search-forward-unenclosed' and
	`org-search-backward-unenclosed'.

	* org-list.el (org-search-backward-unenclosed): Can send errors
	now.  Removed useless usage of COUNT.

	* org-list.el (org-search-forward-unenclosed): Can send errors
	now.  Removed useless usage of COUNT.

	* org-list.el (org-update-checkbox-count):
	Use `org-search-forward-unenclosed' and
	`org-search-backward-unenclosed' instead of `re-search-forward'
	and `re-search-backward'.

	* org-list.el (org-sort-list): Use `org-search-forward-unenclosed'
	and `org-search-backward-unenclosed' instead of
	`re-search-forward' and `re-search-backward'.

	* org-list.el (org-list-make-subtree):
	Use `org-search-forward-unenclosed' and
	`org-search-backward-unenclosed' instead of `re-search-forward'
	and `re-search-backward'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-insert-item-internal): Fixes the problem when
	point was before the first char of the item's body.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-timer.el (org-timer-item): Refactoring.  Compute timer string
	before inserting it in the buffer.

	* org-timer.el (org-timer): Add an optional argument to return
	timer string instead of inserting it.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-insert-item-internal): New function to handle
	positioning and contents of an item being inserted at a specific
	pos.  It is not possible anymore to split a term in a description
	list or a checkbox when inserting a new item.

	* org-list.el (org-insert-item): Refactored by using the new
	`org-insert-item-internal' function.

	* org-timer.el (org-timer-item): Refactored by using the new
	`org-insert-item-internal' function.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-bottom-point): Be sure to check real
	ORG-OUTLINE-REGEXP and not outline-regexp, that might be modified.

	* org.el (org-cycle-internal-local): Cycle up to end of subtree or
	end of item if we are in a list.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-insert-item): Move before any special block in
	a list prior to add a new item.

	* org-timer.el (org-timer-item): When in a timer list, insert a
	new timer item like `org-insert-item'.  If in another list, send an
	error.  Otherwise, start a new timer list.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el: Minor refactoring.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-timer.el (org-timer-item): Insert description list item at
	the right column.

	* org-list.el (org-insert-item): Insert the right number of blank
	lines before a relative timer.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-insert-item): Remove restriction on latex
	blocks.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-search-backward-unenclosed): Do not stop in
	protected places.

	* org-list.el (org-search-forward-unenclosed): Do not stop in
	protected places.

	* org-latex.el (org-export-latex-lists): Use the fact that
	org-search-forward do not stop anymore at protected places.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-search-backward-unenclosed): Do not prevent
	list items from being inside LaTeX blocks.

	* org-list.el (org-search-forward-unenclosed): Do not prevent list
	items from being inside LaTeX blocks.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-in-item-p): Do not widen before checking if we
	are in item.

	* org-list.el (org-list-send-list): We cannot count on
	`org-list-top-point' and `org-list-bottom-point' before buffer is
	narrowed.  Find bounds of list otherwise.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-end-regexp): By default, list ending is
	exactly 2 blank lines.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-docbook.el (org-export-as-docbook): When we find an empty
	line, we do not need to check for
	`org-empty-line-terminates-plain-lists' because we would have
	found end-list marker before.

	* org-html.el (org-export-as-html): Same.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-insert-item): Simplify count of blank lines to
	insert.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-end-regexp): New customizable variable to
	define what string should end lists.

	* org-list.el (org-list-end-re): Function is now aware of
	`org-list-end-regexp'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-html.el (org-export-as-html): Code cleanup.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-docbook.el (org-export-as-docbook): Properly close any open
	list when seeing ORG-LIST-END.  Removed any reference to now
	unneeded DIDCLOSE variable.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-mark-list-ending): Fix number of blank
	lines inserted after a list.

	* org-list.el (org-list-parse-list): Fix case when
	`org-list-end-re' would have an indentation greater than current
	list.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-mark-list-ending): Differentiate between
	export backends, and replace `org-list-end-re' by a blank line
	upon exporting.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-html.el (org-export-as-html): Delete didclose and everything
	related to it, as it is no longer needed.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-html.el (org-export-html-preprocess): Remove unneeded
	insertion of list end marker, as it is now handled by
	`org-export-mark-list-ending'.

	* org-html.el (org-export-as-html): Cleaner termination of lists.

	* org-exp.el (org-export-mark-list-ending): New function to insert
	specific markers at the end of lists when exporting to a backend
	not using `org-list-parse-list'.  This function is called early in
	`org-export-preprocess-string', while it is still able to
	recognize lists.

	* org-latex.el (org-export-latex-lists): Better search for
	lists.  It now only finds items not enclosed and not protected.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el: Replaced `re-search-forward' by
	`org-search-forward-unenclosed' where it made sense.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-apply-to-list): Now a return value is handed at
	each new call of the function applied.

	* org-list.el (org-fix-bullet-type): Use the new
	`org-apply-to-list' format.

	* org-list.el (org-renumber-ordered-list): Use the new
	`org-apply-to-list' format.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-in-regexps-block-p): Minor fix: limit wasn't
	correctly used.

	* org-list.el (org-search-forward-unenclosed): Better regexp used.

	* org-list.el (org-search-backward-unenclosed): Better regexp
	used.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-sort-list): End-rec function was ill-defined.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-search-forward-unenclosed): Fix behavior when
	last occurrence was enclosed.

	* org-list.el (org-search-backward-unenclosed): Fix behavior when
	last occurrence was enclosed.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-in-regexps-block-p): Fix documentation.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-search-backward-unenclosed): Fix block regexp.

	* org-list.el (org-search-forward-unenclosed): Fix block regexp.

	* org-list.el (org-list-parse-list): Minor fix.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-parse-list): Delete `org-list-end-re' when
	called with t argument.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-html.el (org-export-html-preprocess):
	Replace `org-list-end-re' by a blank line during pre-process.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-bottom-point): No need for square brackets
	for `skip-chars-backward'.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-html.el: Do not delete space between end of list and
	beginning of the following.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-html.el: Preprocess buffer string and add ORG-LIST-END where
	needed.  Lists should not end before seeing this.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-html.el: Notice end of lists.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-parse-list): Better handling of
	restrictions when function is called on a list with sublists.

	* org-list.el (org-list-send-list): Find the true ending of the
	list being sent.

	* org-list.el (org-list-radio-list-templates): Templates are more
	specific to lists.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-js.el (org-babel-js-eoe): Indicate end of input
	(org-babel-execute:js): Support for session evaluation
	(org-babel-prep-session:js): Fleshed out definition
	(org-babel-js-initiate-session): Can initiate a session using
	mozrepl.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org.el (org-set-regexps-and-options): Protect escape char in
	`org-complex-heading-regexp-format'.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-scheme.el (org-babel-scheme-eoe): For marking the end of
	session-based evaluation
	(org-babel-execute:scheme): Now supports session-based evaluation
	(org-babel-prep-session:scheme): Now works and defines variables
	(org-babel-scheme-initiate-session): Now works using run-scheme
	from cmuscheme.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-export-latex-default-packages-alist): Remove the
	t1enc package - this is already covered by fontenc.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (with-parsed-tramp-file-name): Declared
	(org-babel-tramp-localname): Ensure variable name exists locally.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-temp-file): Don't use babel temporary directory
	in remote case; use make-temp-file with remote file name so that
	temp file is guaranteed not to exist previously on remote machine.
	(org-babel-tramp-localname): New function to return local name
	portion of possibly remote file specification.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-R.el (org-babel-R-write-object-command): New unified R
	command for writing results to file
	(org-babel-R-wrapper-method): Remove variable
	(org-babel-R-wrapper-lastvar): Remove variable
	(org-babel-R-evaluate-external-process): Use new R command
	(org-babel-R-evaluate-session): Use new R command.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-comint.el
	(org-babel-comint-eval-invisibly-and-wait-for-file): New function
	to evaluate code invisibly and block until output file exists.

	* ob-R.el (org-babel-R-evaluate-session): Use `ess-eval-buffer' to
	evaluate R code in session for :results value.  Write result to
	file invisibly using new function
	`org-babel-comint-eval-invisibly-and-wait-for-file'.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-fill-template): Align tags after
	insertion.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-concatenate-multiline-emphasis):
	Ignore matches that start in a headline.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-plantuml.el (org-babel-execute:plantuml): Wrapping in-file
	and out-file in shell-quote-argument.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-docview.el (org-docview-store-link): Use expanded macro to
	get current page.
	(doc-view-goto-page, image-mode-window-get): Declare functions for
	byte compiler.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-scheme.el: Very preliminary support for evaluating scheme
	code blocks.

	* org.el (org-babel-load-languages): Adding scheme.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (require): Remove circular (require 'org).

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-R.el (ess-make-buffer-current): Declared.
	(ess-ask-for-ess-directory): Declared.
	(ess-local-process-name): Declared.
	* ob-latex.el (org-babel-latex-tex-to-pdf): Capturing free variable.

	* ob.el (org-edit-src-code): Fixing arguments.
	(org-edit-src-exit): Declared.
	(org-outline-overlay-data): Declared.
	(org-set-outline-overlay-data): Declared.

2010-11-11  Glenn Morris  <rgm@gnu.org>

	* ob.el: Require org when compiling.
	(org-save-outline-visibility): Remove macro declaration.

	* ob-emacs-lisp.el: Require ob-comint when compiling, for macros.
	Remove unnecessary/macro declarations.

	* org-docview.el: Require doc-view when compiling.
	(doc-view-goto-page): Autoload rather than declaring.
	(doc-view-current-page): Remove macro declaration.

	* ob.el (tramp-compat-make-temp-file, org-edit-src-code)
	(org-entry-get, org-table-import): Fix declarations.
	(org-match-string-no-properties): Remove declaration.

	* ob-sh.el (org-babel-comint-in-buffer)
	(org-babel-comint-wait-for-output, org-babel-comint-buffer-livep)
	(org-babel-comint-with-output): Remove unnecessary declarations.

	* ob-R.el (orgtbl-to-tsv): Fix declaration.

	* org-list.el (org-entry-get): Fix declaration.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-remove-temporary-directory): Remove explicit
	second argument.

2010-11-11  Magnus Henoch  <magnus.henoch@gmail.com>  (tiny change)

	* org-clock.el (org-clocktable-steps): Allow ts and te to be day
	numbers.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* org-macs.el (org-save-outline-visibility): Move from org.el.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-org.el (org-babel-default-header-args:org): Additional
	":results silent" default header argument for org code blocks.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-exp.el (org-babel-exp-do-export): Remove hacky ":noeval",
	which is now an alias to ":eval no".

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-remove-temporary-directory): The version of
	`delete-directory' found in files.el can not be assumed to be
	present on all versions, so this copies the recursive behavior of
	that command in such a way that all calls to delete-directory will
	also work with the built-in internal C implementation of that
	function.  This is not overly difficult as all elements of the
	directory can be assumed to be files.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-C.el (org-babel-C-execute): Corrected arguments to
	org-babel-temp-file.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-temporary-directory): Variable to hold the
	value of the Babel temporary directory.

2010-11-11  Aditya Siram  <aditya.siram@gmail.com>

	* ob.el (org-babel-load-in-session): Expanding noweb references
	when appropriate.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-make-link-regexps): Modify regexp of
	org-plain-link-re.

2010-11-11  Noorul Islam  <noorul@noorul.com>  (tiny change)

	* org-habit.el (org-habit-parse-todo): Find sr-days only if
	scheduled-repeat is non nil.  Use 4th element of the list returned
	by (org-heading-components) as habit-entry.  Modify the error
	message to be more meaningful.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-latex.el (org-babel-execute:latex): Adding new ":fit" and
	":border" header arguments which both use the "preview" latex
	package to fit the resulting PDF image to the figure.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-wl.el (org-wl-store-link): Don't try to store link if point
	is at end of buffer.

2010-11-11  Harri Kiiskinen  <harkiisk@gmail.com>

	* org-publish.el (org-publish-project-alist): Document the new
	body-only property.
	(org-publish-org-to): Use the body-only property.

2010-11-11  Jambunathan K  <kjambunathan@gmail.com>  (tiny change)

	* org.el (org-store-link): Return link when invoked
	non-interactively from an agenda buffer.

2010-11-11  Jambunathan K  <kjambunathan@gmail.com>  (tiny change)

	* org.el (org-store-link): Storing of links to headlines in
	indirect buffers was broken.  Fix it.

2010-11-11  Aidan Kehoe  <kehoea@parhasard.net>

	* ob-tangle.el (org-babel-tangle): Change the MODE argument to
	#'set-file-modes to use integer, not character syntax, avoiding
	compile problems with recent XEmacs.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-add-entry-text): Make sure we move
	forward even if there is no text to be added.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-make-tags-matcher): Read "\\-" as "-" in the
	tags/property matcher.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-infile-export-plist): Bind case-fold-search to
	t.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-with-point-at-orig-entry): New macro.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-set-initial-vars):
	Bind `case-fold-search' to t around the search for special LaTeX setup.

	* org-beamer.el (org-beamer-after-initial-vars):
	Bind `case-fold-search' to t around the search for special BEAMER
	setup.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-write-agenda): Delete PostScript file after
	creating conversion to PDF.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-write-agenda): Move require statements to
	proper place in evaluated lisp expression.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-write-agenda): Rename temporary buffer to
	remove dependency of `flet' macro.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-lob.el (org-babel-lob-get-info): Edit docstring.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-exp.el (org-babel-exp-lob-one-liners): Get parameter values
	from all standard sources when executing #+lob/#+call lines.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-R.el (org-babel-R-evaluate): Break the two branches into two
	separate functions
	(org-babel-R-evaluate-external-process): New function to handle
	external process evaluation
	(org-babel-R-evaluate-session): New function to handle session
	evaluation.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-initiate-session): New function derived from
	previous `org-babel-switch-to-session'
	(org-babel-switch-to-session): Refactored to use new
	`org-babel-initiate-session'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-switch-to-session): Supply missing "P" argument
	to (interactive).

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-feed.el (org-feed-format-entry): Decode entry according to
	its character encoding.

2010-11-11  David Maus  <dmaus@ictsoc.de>  (tiny change)

	* org-feed.el (xml-substitute-special): Declare function for byte
	compiler.
	(org-feed-unescape): Remove.
	(org-feed-parse-rss-entry, org-feed-parse-atom-entry):
	Use `xml-substitute-special' to unescape XML entities.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-switch-to-session): Throw error if block if
	:session not in effect for the block.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-create-with-table.el): Align table
	before converting.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-do-in-edit-buffer): Suppress message and check
	that org-src buffer is current before attempting exit.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (ob-comint): Require 'ob-comint
	(org-src-babel-info): Define variable.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-do-in-edit-buffer): New macro to evaluate lisp
	in the language major mode edit buffer.
	(org-babel-do-key-sequence-in-edit-buffer): New function to call
	an arbitrary key sequence in the language major mode edit buffer.

	* org-src.el (org-src-switch-to-buffer): Add new allowed value
	'switch-invisibly for `org-src-window-setup'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (ob-keys): Require ob-keys, because `org-babel-map'
	is used.
	(org-src-do-at-code-block): New macro to evaluate lisp with point
	at the start of the Org code block containing the code in this
	edit buffer.
	(org-src-do-key-sequence-at-code-block): New function to execute
	command bound to key at the Org code block containing the code in
	this edit buffer.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-R.el (org-babel-R-associate-session): New function to
	associate R code edit buffers with ESS comint session.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-code): If at src block, store babel
	info as buffer local variable.
	(org-src-associate-babel-session): New function to associate code
	edit buffer with comint session.  Does nothing unless a
	language-specific function named
	`org-babel-LANG-associate-session' exists.
	(org-src-babel-configure-edit-buffer): New function to be called
	in `org-src-mode-hook'.
	(org-src-mode-hook): Add `org-src-babel-configure-edit-buffer' to
	hook.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-switch-to-session-with-code): New function to
	generate split frame displaying edit buffer and session.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-set-tags): Consider org-indent-mode when computing
	the tags column.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-compat.el (org-looking-at-p): Only use looking-at-p when
	defined.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-finalize-agenda-entries): Delete excluded
	lines directly after call to sorting filter function.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-complex-heading-regexp-format): Document the
	variable.
	(org-get-refile-targets): Use `org-complex-heading-regexp-format'
	to make the regular expression for matching the headline.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-refile-check-position): New function.
	(org-goto):
	(org-refile-get-location): Call `org-refile-check-position'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-python.el (org-babel-python-initiate-session-by-key): Use eq
	instead of equal to compare symbols.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-before-sorting-filter-function):
	New hook function.
	(org-finalize-agenda-entries):
	Apply `org-agenda-before-sorting-filter-function'.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-first-lines): Do not protect meta
	lines that have nothing to do with babel.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-place-template): Handle the
	checkitem case.
	(org-capture-place-item): Provide boundaries for the search to
	make sure we do not get a match in a different tree.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-preprocess-apply-macros): Fix the macro
	argument parser.

2010-11-11  Noorul Islam  <noorul@noorul.com>

	* org-latex.el (org-latex-to-pdf-process): Add output-directory
	option for the command pdflatex.
	(org-export-as-pdf): Respect directory in path of
	EXPORT_FILE_NAME.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-with-LaTeX-fragments): New default t,
	which now means to use MathJax processing for HTML.  Also allow
	new value `dvipng' to force the old image processing.
	(org-infile-export-plist): Parse for MATHJAX setup line.

	* org-html.el (org-export-html-mathjax-options): New option.
	(org-export-html-mathjax-config): New function.
	(org-export-html-mathjax-template): New option.
	(org-export-html-preprocess): Call the LaTeX snippet processor
	with an additional argument to declare special ways of processing.
	(org-export-as-html): Bind the dynamical variable
	`org-export-have-math'.  Insert the MathJax script template when
	it is needed by the document.

	* org.el (org-preview-latex-fragment): Call `org-format-latex'
	with the additional processing argument.
	(org-export-have-math): New variable, for dynamic scoping.
	(org-format-latex): Implement specific ways of processing.
	New function argument for processing type.
	(org-org-menu): Remove the entry to configure LaTeX snippet
	processing.

2010-11-11  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-clock-goto): Use `\C-c\C-x\C-j' for
	`org-clock-goto' and `J' for `org-agenda-clock-goto'.  If the
	heading currently clocked in is not listed in the agenda, display
	this entry in another buffer.  If there is no running clock,
	display a help message.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-tables): Return "" instead of nil
	when no label is attached.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-menu-show-match): New option.
	(org-agenda-menu-two-column): New option.
	(org-agenda-get-restriction-and-command): Implement dispatch menu
	without showing the matcher, and with two-column display.

2010-11-11  Bernt Hansen  <bernt@norang.ca>

	* org-indent.el (org-indent-mode): Fix grammar for message when
	mode is refused.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-insert-result): Ensures `beg' is set, even if
	no previous result exists.

2010-11-11  Noorul Islam  <noorul@noorul.com>

	* ob.el Declare org-babel-lob-execute-maybe() to avoid compiler
	warning.

2010-11-11  Noorul Islam  <noorul@noorul.com>

	* org.el (org-set-visibility-according-to-property): Use backward
	search instead of forward, so that top hierarchy gets priority.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-timeline): Allow indirect buffer.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-preprocess-after-radio-targets-hook):
	(org-export-define-heading-targets-headline-hook): New hooks.

	* org.el (org-modules): Add entry for org-wikinodes.el.
	(org-font-lock-set-keywords-hook): New hook.
	(org-open-at-point-functions): New hook.
	(org-find-exact-headling-in-buffer):
	(org-find-exact-heading-in-directory): New functions.
	(org-mode-flyspell-verify): Better cursor position for checking if
	flyspell should ignore a word.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-indent.el (org-indent-remove-properties):
	(org-indent-add-properties): Make sure changing these properties
	does not trigger modification hooks.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-link-search-must-match-exact-headline): New option.
	(org-link-search-inhibit-query): New variable.
	(org-link-search): Search for exact headline match in Org files.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-execute-src-block-maybe): Remove check for
	`org-babel-no-eval-on-ctrl-c-ctrl-c'; this is done in the new
	function `org-babel-execute-safely-maybe'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-load-in-session): Set directory in case :dir
	arg is in effect.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-tangle-collect-blocks): Don't throw
	errors when we're not under of a headline.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-octave.el (org-babel-octave-wrapper-method): Use dlmwrite to
	write delimited text instead of save -ascii
	(org-babel-octave-import-elisp-from-file): Specify that data
	written to file is tab-delimited.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-R.el (org-babel-R-evaluate): Specify that tabular data is
	tab-delimited.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob.el (org-babel-import-elisp-from-file): Allow separator to be
	specified.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-python.el (org-babel-python-table-or-string): Fix recognition
	of lists and tuples.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-octave.el (org-babel-octave-evaluate-external-process):
	Allow remote files.

2010-11-11  Juan Pechiar  <pechiar@computer.org>

	* ob-octave.el (org-babel-octave-evaluate-external-process):
	Use `org-babel-octave-import-elisp-from-file' instead of
	`org-babel-eval-read-file'.
	(org-babel-octave-var-to-octave): Separate matrix rows with ';',
	and use '%s' as format specifier instead of '%S'.

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-octave.el: Only (require 'matlab) when necessary.
	(org-babel-octave-initiate-session): (require) octave-inf or matlab
	as appropriate.
	(org-babel-execute:matlab): Remove (require).
	(org-babel-prep-session:matlab): Remove (require).
	(org-babel-matlab-initiate-session): Remove (require).

2010-11-11  Dan Davison  <davison@stats.ox.ac.uk>

	* ob-octave.el (org-babel-octave-evaluate): Fix formal argument
	list.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-python.el (org-babel-python-table-or-string): Can now handle
	VERY long result lines.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-tables): Add label if any.

	* org-latex.el (org-export-latex-convert-table.el-table):
	Fix little mistake when inserting label.

2010-11-11  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org.el (org-cycle-internal-local): Remove an unnecessary call
	to `org-back-to-heading' that was preventing point to stay at its
	column when cycling visibility.

2010-11-11  Noorul Islam  <noorul@noorul.com>

	* org-capture.el (org-capture-finalize): Make messages consistent.

2010-11-11  Noorul Islam  <noorul@noorul.com>

	* org-gnus.el: Suppress compiler warning by declaring outside
	function nnimap-retrieve-headers-from-file.

2010-11-11  Noorul Islam  <noorul@noorul.com>

	* org-colview.el Use org-beamer-select-environment instead of
	org-beamer-set-environment-tag.

2010-11-11  Matt Lundin  <mdl@imapmail.org>

	* org.el (org-insert-time-stamp): Fix org-insert-time-stamp so
	that the value of org-last-inserted-timestamp includes time range.

2010-11-11  David Maus  <dmaus@ictsoc.de>

	* org-wl.el (org-wl-store-link-message): Provide link property for
	message-id without angle brackets.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-R.el (org-babel-R-evaluate): Improve prompt-stripping regexp.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-find-file-noselect-refresh): Finds a
	file ensuing that the latest changes on disk are represented.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-sqlite.el (org-babel-sqlite-expand-vars): Now inserts string
	arguments w/o quotes.

2010-11-11  Bernt Hansen  <bernt@norang.ca>

	* org-capture.el (org-capture-finalize): Fix clock in of
	interrupted task during capture finalize.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-R.el (org-babel-R-evaluate): Clean up extra prompts in
	session output.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-C.el (org-babel-C-ensure-main-wrap): More generous regular
	expression for matching main function.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-lob-one-liner-regexp): Fix error in lob
	regexp -- it wasn't matching lob lines w/o indices.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-latex-listings-w-names): Fix compiler
	warning in org-exp.el.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-file): Better error message if
	base-directory or publishing-directory are not defined.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-colview.el (org-columns-display-here): Use overlays to
	overrule line prefix properties during column view.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-filter-preset): Document the
	limitation for the filter preset - it can only be used for an
	entire agenda view, not in an individual block in a block agenda.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-table.el (sbe): Now able to accept range references from
	tables.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob.el (org-babel-pick-name): If colnames or rownames contain a
	list of names, then use those directly.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Escape underscores in code block names on latex listings export.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-tangle.el (org-babel-with-temp-filebuffer):
	Use find-file-noselect to avoid excess buffer movement.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-html-should-inline-p): Only inline images if
	they should be.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-id.el (org-id-store-link): Autoload.

	* org.el ("org-id"): Autoload `org-id-store-link'.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-html-should-inline-p): Only inline images if
	they should be.

2010-11-11  Eric S Fraga  <e.fraga@ucl.ac.uk>

	* org-icalendar.el (org-icalendar-alarm-time): New option.

	* org-icalendar.el (org-print-icalendar-entries): Timed events are
	exported with alarm events, a.k.a. reminders.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-target-buffer): Throw an error if we
	have no target file.
	(org-capture-select-template): Use a default template if the user
	has not specified any.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-modules): Add entry for org-velocity.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* ob-lob.el (org-babel-lob-execute): Changing indentation to
	improve line length.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-handle-table-metalines): Choose a better
	position for checking protectedness.

2010-11-11  Eric Schulte  <schulte.eric@gmail.com>

	* org-table.el (org-table-convert-region): Don't continue csv
	importation which the point catches the end, this fixes an
	infinite loop which was caused by the (point) never catching up
	with the "end" marker.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-macs.el (org-string-nw-p): New function.

	* org-capture.el (org-capture-import-remember-templates):
	Interpret an empty string as request to use
	`org-default-notes-file'.
	(org-capture-target-buffer): If the FILE is not a (non-empty)
	string, use `org-default-notes-file'.

2010-11-11  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-templates): Fix customize type.

2010-09-25  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-refile-targets):
	* org-agenda.el (org-agenda-hide-tags-regexp): Fix typos in docstrings.

2010-08-19  Glenn Morris  <rgm@gnu.org>

	* org.el (org-outline-overlay-data, org-set-outline-overlay-data)
	(org-save-outline-visibility): Move to org-macs.
	* org-macs.el (org-outline-overlay-data, org-set-outline-overlay-data)
	(org-save-outline-visibility): Move here from org.el.
	(show-all): Autoload it.
	* ob.el: Don't require org when compiling.

2010-08-18  Glenn Morris  <rgm@gnu.org>

	* ob.el: Require org when compiling.
	(org-save-outline-visibility): Remove macro declaration.
	* ob-emacs-lisp.el: Require ob-comint when compiling, for macros.
	Remove unnecessary/macro declarations.
	* org-docview.el: Require doc-view when compiling.
	(doc-view-goto-page): Autoload rather than declaring.
	(doc-view-current-page): Remove macro declaration.

2010-08-17  Glenn Morris  <rgm@gnu.org>

	* ob.el (tramp-compat-make-temp-file, org-edit-src-code)
	(org-entry-get, org-table-import): Fix declarations.
	(org-match-string-no-properties): Remove unnecessary declaration.
	* ob-sh.el (org-babel-comint-in-buffer)
	(org-babel-comint-wait-for-output, org-babel-comint-buffer-livep)
	(org-babel-comint-with-output): Remove unnecessary declarations.
	* ob-R.el (orgtbl-to-tsv): Fix declaration.
	* org-list.el (org-entry-get): Fix declaration.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* ob-C.el: New file.
	* ob-R.el: New file.
	* ob-asymptote.el: New file.
	* ob-clojure.el: New file.
	* ob-comint.el: New file.
	* ob-css.el: New file.
	* ob-ditaa.el: New file.
	* ob-dot.el: New file.
	* ob-emacs-lisp.el: New file.
	* ob-eval.el: New file.
	* ob-exp.el: New file.
	* ob-gnuplot.el: New file.
	* ob-haskell.el: New file.
	* ob-keys.el: New file.
	* ob-latex.el: New file.
	* ob-lob.el: New file.
	* ob-matlab.el: New file.
	* ob-mscgen.el: New file.
	* ob-ocaml.el: New file.
	* ob-octave.el: New file.
	* ob-perl.el: New file.
	* ob-python.el: New file.
	* ob-ref.el: New file.
	* ob-ruby.el: New file.
	* ob-sass.el: New file.
	* ob-screen.el: New file.
	* ob-sh.el: New file.
	* ob-sql.el: New file.
	* ob-sqlite.el: New file.
	* ob-table.el: New file.
	* ob-tangle.el: New file.
	* ob.el: New file.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mks.el: New file.
	* org-capture.el: New file.

2010-07-19  Christian Egli  <christian.egli@sbszh.ch>

	* org-taskjuggler.el: New file.

2010-07-19  Matt Lundin  <mdl@imapmail.org>

	* org-agenda.el (org-search-view): Fix inclusion of agenda-archives
	in org-agenda-text-search-extra-files.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-list.el (org-list-send-list): Locally bind variable `txt'.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org.el (org-reload): Now also reloading babel files.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-set-plist): Make sure txt is a string
	before calling `string-match'.
	(org-capture-templates): Fix customization type.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Make a special case
	for \nbsp.
	(org-latex-entities): Remove the entry for \nbsp.
	(org-latex-entities-exceptions): Variable removed.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-refile): Do not try to manipulate
	bookmark list.

	* org.el (org-refile): Use the correct bookmark here.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-list.el (org-list-send-list): Parse list from its true beginning.

	* org.el (org-ctrl-c-ctrl-c): Maybe send the list when at a list item.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-insert-link): Correctly determine if we should use
	a relative path.

2010-07-19  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-radio-list-templates): Fix templates.

2010-07-19  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-list.el (org-list-send-list): Regexp defining the start of
	a radio list is now on par with the one used for radio tables.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-entities.el (org-entities-help): Add a headline for
	the user-defined entities.

2010-07-19  Dirk-Jan C. Binnema  <djcb.bulk@gmail.com>  (tiny change)

	* org-agenda.el (org-agenda-action): Document capture key and add it
	to the prompt.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-latex.el (org-export-latex-listings-langs): Add (sqlite "SQL").

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-first-lines): Do not mark
	meta lines for removal.  Do not remove BABEL config lines during export.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-capture.el (org-capture): Check if
	`org-capture-link-is-already-stored' is bound before evaluating.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org.el: Add autoload for org-babel-do-load-languages.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-src.el (org-src-lang-modes): Add sqlite to sql-mode.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-feed.el: Change indentation to match coding style
	guideline.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-feed.el (org-feed-unescape, org-feed-parse-atom-feed): Load XML
	library if necessary.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-beamer.el (org-beamer-amend-header): Standardize the
	header cookie for the beamer extra stuff.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-beamer.el (org-beamer-amend-header): Put extra header
	last in header.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-exp-blocks.el (org-export-blocks-format-ditaa)
	(org-export-blocks-format-dot): Remove text properties of body before
	calculating cache hash.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-tabular-environment): New option.
	(org-export-latex-tables): Use `org-export-latex-tabular-environment'.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-compat.el (org-version-check): New function.

	* org-indent.el (org-indent-mode): Check for exact emacs version.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-templates): Allow the template
	to come from a file or function call.
	(org-capture-place-entry): Get the template from file or function.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-agenda-bulk-action): Don't create marker for
	position if target is entire file.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-autoload): Autoload a few more org-table functions.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org.el (org-babel-load-languages): Add ob-mscgen.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-latex.el (org-export-latex-tables): Format string now
	matches options.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org.el (org-babel-load-languages): This variable controls which
	languages will be loaded by org-babel.  It is customizable through
	the customize interface.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-latex.el (org-export-latex-format-image): Update number of
	arguments to allow for an optional short-name.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-indent.el (org-indent-mode): Refuse to turn on prior to Emacs 23.2.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-set-target-location):
	Store exact positions for file+regexp and file+function targets.
	(org-capture-place-entry, org-capture-place-item)
	(org-capture-place-table-line, org-capture-place-plain-text):
	Respect exact positions.
	(org-capture-finalize): Make sure we are at the beginning of a line
	when fixing the empty lines after the entry.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-entry-get-with-inheritance): New argument LITERAL-NIL.
	(org-entry-get): Pass `literal-nil' into
	`org-entry-get-with-inheritance'.
	(org-todo): React to nil values of the LOGGING property.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-default-notes-file): Update docstring.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-link-frame-setup): Use `org-gnus-no-new-news' as default.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-attach-captions-and-attributes):
	Add a shortname attribute to caption strings under the symbol name
	org-caption-shortn.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-switchb): Rename from `org-iswitchb'.
	Improve docstring.
	(org-iswitchb): New alias.
	(org-ido-switchb): Make alias point to `org-switchb'.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-fill-template):
	Respect time-of-day preference in template prompt.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-feed.el (org-feed-unescape): Remove superfluous lambda.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-wl.el (org-wl-disable-folder-check): New customization
	variable.
	(org-wl-open): Disable folder check depending on
	`org-wl-disable-folder-check'.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-set-target-location):
	Fix file+function interpretation.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-feed.el (org-feed-parse-rss-entry): Unescape rss element
	content.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-feed.el (xml-entity-alist): Declare variable
	`xml-entity-alist' for byte compiler.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-feed.el (org-feed-unescape): New function.
	Unescape protected entities.
	(org-feed-parse-atom-entry): Use function for atom:content
	type text and html.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-feed.el (org-feed-parse-rss-feed): Ignore case of rss
	element names.

2010-07-19  Bernt Hansen  <bernt@norang.ca>

	* org.el (org-time-string-to-absolute): Ignore cyclic repeater
	when displaying items on todays agenda date.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-get-progress): Avoid reusing previous
	value of EXTRA.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-initialize-cache):
	Make timestamp directory, the entire path to it.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-handle-comments): Make sure to check
	for protection in the comment line, and not in the line after it.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-export-html-preprocess): Call org-format-latex,
	possibly with a protect-only argument.

	* org.el (org-format-latex): New argument PROTECT-ONLY.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-handle-table-metalines): This function
	removes table specific meta-lines, now that we aren't wiping
	everything that looks remotely like a comment at the end of the
	export process we have to be sure to catch all of the specific lines
	in org-exp.el.

2010-07-19  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-exp.el (org-export-select-backend-specific-text): Properly
	get rid of #+Backend and #+ATTR_Backend specifics to backends not
	matching the one we're exporting to.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-table.el (orgtbl-to-generic): Add the :remove-newlines
	option which will strip newline characters from the text of table
	cells and replace then with "\n".

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-confirm-shell-link-function)
	(org-confirm-elisp-link-function): Limit the values that can be set by
	file variables.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-compute-latex-and-specials-regexp): Deal with
	string elements by discarding them.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-iswitchb): Make sure to use at least iswitchb.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-capture.el (org-capture-position-for-last-stored)
	(org-capture-bookmark-last-stored-position): New functions.
	(org-capture-place-table-line): Better error catching.
	(org-capture-place-item, org-capture-place-entry)
	(org-capture-place-plain-text):
	Call `org-capture-position-for-last-stored'.
	(org-capture-finalize): Just call
	`org-capture-bookmark-last-stored-position'.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-mark-blockquote-verse-center):
	Fix small bug, now grabbing match data before overwritten by looking-at
	this fixes a problem with remainders of #+end_quote lines appearing
	in exported output.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org.el (org-link-frame-setup): Add customization option for
	Wanderlust.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-latex.el (org-export-latex-fixed-width): Now check
	org-example rather than org-protected on verbatim export, because by
	default all ": " prefixed lines are marked protected.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-latex.el (org-export-latex-fixed-width): Check for
	protection before wrapping ": " lines as verbatim.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-export-handle-comments): Check for protection
	before removing comments.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-entities.el (org-entities): Restructure the list.
	(org-entities-help): Turn the help output into a buffer
	in Org-mode, so that it becomes easier to find a symbol
	in the structure.
	(org-entities-create-table): Deal with new structure.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-agenda.el (org-write-agenda): Use backquotes to expand
	`flet' at compile time.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-entry-properties): Make sure that standard property
	names are used even if the user has customized time keywords.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-macs.el (org-not-nil): Return the value if not interpreted
	as nil.

	* org.el (org-entry-get)
	(org-entry-get-with-inheritance): Interpret the value "nil"
	as nil for properties.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-switch-to-buffer-other-window): Return the buffer.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-macs.el (org-not-nil): New function.

	* org.el (org-block-todo-from-children-or-siblings-or-parent):
	Use `org-not-nil' to interpret a property value of nil.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-truely-invisible-p): New function.
	(org-beginning-of-line): Use `org-truely-invisible-p'.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-get-timestamps): No errors
	while getting TODO state.
	(org-agenda-highlight-todo): No error when no keyword has
	been matched.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-timestamp-change): New optional argument UPDOWN.
	Use this to identify calls from org-timestamp-up/down, so that we can
	skip by rounding minutes in this case.
	(org-timestamp-up, org-timestamp-down, org-timestamp-up-day)
	(org-timestamp-down-day): Call org-timestamp-change with the
	updown argument.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-action): Make `c' key call org-capture.

	* org-capture.el: New file.

	* org-compat.el (org-get-x-clipboard): Function moved here from
	remember.el.

	* org-mks.el: New file.

	* org.el (org-set-regexps-and-options): Allow statistic cookies as
	part of complex headlines.
	(org-find-olp): New argument THIS-BUFFER.  When set, assume that the
	OLP does not contain a file name.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-mode): Set `comment-start' instead of changing the
	syntax of the `#' character.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example): Mark examples
	by a property.

	* org-html.el (org-export-html-close-lists-maybe): Check if raw
	HTML stuff was actually made from an example.

2010-07-19  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el: Items are no longer skipped when their first line
	ends on a protected element.

	* org-list.el: Protected environments looking like lists are not
	exported anymore.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-export-blocks-preprocess):
	Cleanup trailing newline after block.

2010-07-19  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el: Comment regexp now matches documentation.  No more
	protection check when deleting comments before export.

2010-07-19  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-preprocess-string):
	Now using `org-export-handle-include-files-recurse' to resolve
	included files.

2010-07-19  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-get-deadlines)
	(org-agenda-get-scheduled):
	* org.el (org-time-string-to-seconds):
	For deadline and scheduled agenda display ignore the cyclic repeater
	when calculating how many days late the task is.  If you have a weekly
	task and miss the date the agenda view will show more than a week late
	now instead of resetting on the cyclic repeating date.  This makes it
	much more obvious when you missed a repeating task after the repeater.

2010-07-19  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-mark-blockquote-verse-center):
	Consider environments that end at eob.

2010-07-19  Mikael Fornius  <mfo@abc.se>

	* org.el (org-raise-scripts): Do not fontify sub/superscripts of text
	with face `org-special-keyword'.  Make property keys as :LAST_REPEAT:
	display correctly.

2010-07-19  Mikael Fornius  <mfo@abc.se>

	* org.el (org-at-property-p): Use save-match-data macro instead of let.

2010-07-19  Mikael Fornius  <mfo@abc.se>

	* org.el (test): Remove unused test function.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-export-blocks-preprocess): Fix typo.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-export-blocks-postblock-hook):
	Add documentation to and turn into a defcustom.

2010-07-19  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp.el (org-get-file-contents): By un-setting prefix1 to ""
	instead of to nil we avoid errors when :prefix1 is defined, but
	prefix is not.

2010-07-19  Nicolas Goaziou  <n.goaziou@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Environments coming
	from latex backend specific instructions (#+LaTeX) are already
	protected and won't be treated as normal environments.

2010-07-19  Bastien Guerry  <bzg@gnu.org>

	* org-timer.el (org-timer-set-timer): Fix typo in the docstring.

2010-07-19  Bastien Guerry  <bzg@gnu.org>

	* org-timer.el (org-timer-set-timer): Use a prefix argument.
	See the docstring of the function.

2010-07-19  Bastien Guerry  <bzg@gnu.org>

	* org-timer.el (org-timer-set-timer): Fix bug about canceling
	timers.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-w3m.el (org-w3m-copy-for-org-mode)
	(org-w3m-get-next-link-start, org-w3m-get-prev-link-start):
	Get text property directly, not using macro `w3m-anchor'.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-emph-re): Document the match groups.

2010-07-19  Bernt Hansen  <bernt@norang.ca>

	* org-clock.el (org-clock-in): Set `org-clock-clocking-in' to
	t before calling `org-clock-out', so that that function can
	know its call context.

2010-07-19  Bastien Guerry  <bzg@gnu.org>

	* org-timer.el (org-timer-default-timer): New variable.
	(org-timer-set-timer): Use the new variable.  Also offer the
	possibility to replace the current timer by a new one.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-kill-note-or-show-branches): Hide subtree before
	exposing the headings.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-add-planning-info): Remove the empty line also
	if there is no whitespace at all in there.

	* org-table.el (org-table-align): Fix alignment of strings
	with invisible characters.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org.el (org-refile-cache-get): Return empty list of targets
	when cache was cleared.
	(org-clone-subtree-with-time-shift): Maybe create ID property
	in cloned subtrees.
	(org-clone-delete-id): New customization variable.
	(org-clone-subtree-with-time-shift): Use customization
	variable `org-clone-delete-id'.
	(org-clone-subtree-with-time-shift): Remove empty property
	drawer in cloned subtrees.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-refile-use-cache): New option.
	(org-refile-cache, org-refile-markers): New variable.
	(org-refile-marker, org-refile-cache-clear)
	(org-refile-cache-check-set, org-refile-cache-put)
	(org-refile-cache-get): New function.
	(org-get-refile-targets): Use the refile cache.

	* org-clock.el (org-clock-sum): Don't include running clock if
	the time block is wrong.

2010-07-19  John Wiegley  <jwiegley@gmail.com>

	* org-clock.el (org-clock-clock-in, org-clock-in):
	Add parameter `start-time'.
	(org-clock-resolve-clock): Add parameter `clock-out-time'.
	If set, and resolve-to is a past time, then the clock out
	event occurs at `clock-out-time' rather than at `resolve-to'.
	In this case, `resolve-to' becomes the clock in time.
	(org-clock-jump-to-current-clock): Create new global command
	to reveal the current clock.
	(org-clock-resolve): Add new commands g/G and j/J, and a
	help window describing all commands and their meaning.
	(org-clock-resolve-expert): New customization variable.
	(org-find-open-clocks): Fix a bug that caused discovered
	clocks not to match up with the currently active clock.
	(org-resolve-clocks): Change the argument
	`also-non-dangling-p' to `only-dangling-p', since due to a bug
	this was the default behavior all along.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-id.el (org-id-uuid): New function.  Return string with
	random (version 4) UUID.
	(org-id-method): Make 'uuid the new default value.
	(org-id-new): Use `org-id-uuid' if call to uuidgen program
	does not return a UUID.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-format-image): Add support
	for multicolumn figures in LaTeX.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org.el (org-clone-subtree-with-time-shift): Remove ID
	property of original subtree in cloned subtrees.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	XEmacs compatibility.

	* org-latex.el (org-export-latex-tables): Accept comma in
	align string.

	* org-docbook.el (org-export-docbook-xslt-stylesheet): New option.
	(org-export-docbook-xslt-proc-command): Fix docstring.
	(org-export-docbook-xsl-fo-proc-command): Fix docstring.
	(org-export-as-docbook-pdf):
	Improve formatting of the xslt command.

	* org-exp.el (org-infile-export-plist): Check for XSLT setting.

	* org.el (org-file-contents): Improve error message.
	(org-set-regexps-and-options): Remove spaces at both ends.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-docbook.el (org-export-as-docbook-pdf):
	Improve formatting of the xslt command.

2010-07-19  Sebastian Rose  <sebastian_rose@gmx.de>

	* org-publish.el (org-publish-cache): Use one big hashmap for
	each project defined in `org-publish-project-alist'.
	(initialize-files-alist): Function removed.
	(org-publish-validate-link): Function removed.
	(org-publish-get-base-files): Add variable `sitemap-requested'
	to avoid sorting where possible.
	(org-publish-get-files): Function removed.
	(org-publish-get-project-from-filename): Make independent of
	file list.
	(org-publish-file): New argument NO-CACHE.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-beginning-of-defun, org-end-of-defun):
	New functions.
	(org-mode): Install the `org-beginning-of-defun' and
	`org-end-of-defun' functions.
	(org-pretty-entities): New option.
	(org-toggle-pretty-entities): New command.
	(org-fontify-entities): New function.
	(org-startup-options): New keywords for pretty entities.
	(org-set-font-lock-defaults): Call the pretty entities
	function.

	* org-latex.el (org-export-latex-keywords-maybe): Protect the
	TODO markup.

2010-07-19  Mikael Fornius  <mfo@abc.se>

	* org-habit.el (org-habit-build-graph): Help-echo date when
	mouse is over stars.

2010-07-19  Jan Böcker  <jan.boecker@jboecker.de>

	* org.el (org-file-apps): Improve docstring to reflect
	grouping matches.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-set-startup-visibility): Fix empty line display.

	* org-latex.el (org-export-latex-links): Use the formatting
	function of the link type, if it is available.

	* org-table.el (org-table-get-remote-range): Return to
	original buffer when retrieving remote reference.

	* org.el (org-display-inline-images): Do the entire buffer,
	not just the narrowed region.  Clear the cache.
	(org-display-inline-images): Match mode file paths.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-wl.el (org-wl-store-link-folder): Don't throw error when
	called on WL folder group.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-replace-escapes): Make sure the cdr is not nil.
	(org-read-date): Make `M-v' and `C-v' scroll the popup calendar.
	(org-mode): Revert comment syntax changes.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-sparse-tree): Make `C-c / t' search for all TODO
	keywords, and `C-c / T' for a specific one.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-mode): Fix comment syntax settings.

	* org-src.el (org-edit-src-allow-write-back-p):
	Define variable.

	* org.el (org-inline-image-overlays): New variable.
	(org-toggle-inline-images, org-display-inline-images)
	(org-remove-inline-images): New commands.
	(org-mode-map): Define a key for `org-toggle-inline-images'.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-wl.el (org-wl-message-field): New function.
	Return content of header field in message entity.
	(org-wl-store-link): Call `org-wl-store-link-folder' or
	`org-wl-store-link-message' depending on major-mode.
	(org-wl-store-link-folder): New function.  Store link to
	Wanderlust folder.
	(org-wl-store-link-message): New function.  Store link to
	Wanderlust message.
	(org-wl-store-link-message): Store link to message while
	visiting message.
	(org-wl-open): Don't try to jump to message when opening a
	folder link.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org.el (org-replace-escapes): Avoid infinite loop when
	replace string contains escape sequence it replaces.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-crypt.el (org-crypt-key-for-heading): Use symmetric
	encryption when now key is set.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-recalculate-buffer-tables)
	(org-table-iterate-buffer-tables): New commands.

	* org.el (org-check-for-hidden): When there is a region, skip
	the check.

2010-07-19  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-code): allow-write-back-p had
	erroneously been omitted from let binding.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-sorting-choice): New sorting type alpha.
	(org-cmp-alpha): New defsubst.
	(org-em): New defsubst.
	(org-entries-lessp): Only compute needed comparisons.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-format-org-table-html): Test all columns
	for number content.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-treat-sub-super-char):
	Make sure parenthesis matching is consistent.

	* org-table.el (org-table-colgroup-line-p)
	(org-table-cookie-line-p): New functions.

	* org-exp.el (org-table-clean-before-export): Better tests for
	colgroup and cookie lines.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-goto): Push a mark before changing
	the position.

	* org-footnote.el (org-footnote): New group.
	(org-footnote-section)
	(org-footnote-tag-for-non-org-mode-files): Fix typos.

	* org-list.el (org-end-of-item-text-before-children): Also do
	the right thing at the end of a file.

	* org.el (org-set-packages-alist, org-get-packages-alist):
	New function.
	(org-export-latex-default-packages-alist)
	(org-export-latex-packages-alist): Add extra flag to
	each package, indicating if it should be used for snippets.
	(org-create-formula-image): Add the snippet argument.
	(org-splice-latex-header): New argument SNIPPET-P, pass it
	through to `org-latex-packages-to-string'.
	(org-latex-packages-to-string): New argument SNIPPET-P.

	* org-latex.el (org-export-latex-make-header): Add the snippet
	argument.

	* org-docbook.el (org-export-as-docbook): Implement ordered
	lists starting at some offset.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-link-types, org-open-at-point): Add doi links.

	* org-ascii.el (org-export-ascii-preprocess): Remove list
	startcounter cookies.

	* org-list.el (org-renumber-ordered-list): Respect counter
	start values.

	* org-latex.el (org-export-latex-lists): Accept ordered list
	item offset cookie.

	* org-html.el (org-export-as-html): Accept ordered list
	item offset cookie.

	* org-indent.el (org-indent-mode): Turn off `indent-tabs-mode'
	which messes up alignment of tags.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-cancel, org-clock-out): Make sure
	the modeline display is removed.

	* org-exp.el (org-export-format-drawer-function):
	Fix docstring.

	* org-agenda.el (org-agenda-refile): New optional argument
	NO-UPDATE.
	(org-agenda-refile): Call `org-agenda-redo' unless NO-UPDATE
	is set.
	(org-agenda-bulk-action): Call the refile command with updates
	suppressed - but arrange for `org-agenda-redo' to be called at
	the end.

	* org.el (org-mode): Make table mapping quiet.
	(org-table-map-tables): New optional argument QUIETLY.

	* org-ascii.el (org-export-ascii-preprocess): Make table
	mapping quiet.

	* org-html.el (org-export-as-html, org-html-level-start):
	Change XHTML IDs to not use dots.

	* org-exp.el (org-export-define-heading-targets):
	Change XHTML IDs to not use dots.

	* org-docbook.el (org-export-docbook-level-start):
	Change XHTML IDs to not use dots.

	* org-latex.el (org-export-as-latex): Make sure that the
	result buffer is in latex-mode.

	* org.el (org-shiftup-final-hook, org-shiftdown-final-hook)
	(org-shiftleft-final-hook, org-shiftright-final-hook):
	New hooks.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-justify-field-maybe): Make sure that
	inserting a value does not turn a line into a hline.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-sum): New argument HEADLINE-FILTER.
	(org-clock-sum): Add property to selected headlines.
	(org-dblock-write:clocktable): Make tags matcher.

	* org.el (org-set-autofill-regexps): XEmacs compatibility.

	* org-latex.el (org-export-latex-set-initial-vars): Allow "-"
	in latex class definitions.

	* org.el (org-shiftup-hook, org-shiftdown-hook)
	(org-shiftleft-hook, org-shiftright-hook): New hooks.

	* org-entities.el (org-entities): Use \land and \lor for logical
	operators.

	* org.el (org-shiftmetaleft, org-shiftmetaright): Call the subtree
	indentation commands.
	(org-hidden-tree-error): New defsubst.
	(org-metaleft, org-metaright): Check for hidden stuff and throw an
	error.
	(org-check-for-hidden): New function.

	* org-list.el (org-item-re): New function.
	(org-at-item-p): Use `org-item-re'.
	(org-end-of-item-text-before-children): New function.
	(org-outdent-item, org-indent-item): Arrange for leaving the
	subtree alone.
	(org-outdent-item-tree, org-indent-item-tree): New argument
	NO-SUBTREE.
	(org-indent-item-tree): Use `org-end-of-item-text-before-children'
	to find the end for processing while ignoring the subtree.

	* org-publish.el (org-publish-sitemap-sort-alphabetically)
	(org-publish-sitemap-sort-folders)
	(org-publish-sitemap-sort-ignore-case): New options.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-compare-directory-files): Fix sorting.

	* org-compat.el (org-get-x-clipboard-compat): Use (featurep 'xemacs).

	* org-publish.el (org-publish-project-alist): Update docstring.
	(org-publish-file-title-cache): New variable.
	(org-publish-initialize-files-alist):
	Initialize `org-publish-initialize-files-alist' to nil.
	(org-publish-sort-directory-files): New function.
	(org-publish-projects): Access the new properties.
	(org-publish-find-title): Use the file title cache.
	(org-publish-find-title): Build the file title cache.
	(org-publish-get-base-files-1): Sort files.
	(org-publish-aux-preprocess): Do not throw an error when before
	the first headline.  Allow an empty target, meaning to link just
	to the file.
	(org-publish-index-generate-theindex.inc): Check if there is
	actually a target and only then add it to the link.
	(org-publish-projects): Fix a remaining issue with the last commit.

	* org-html.el (org-export-as-html): Treat verse as open/close
	paragraph.
	(org-export-html-close-lists-maybe): Allow to splice raw HTML into
	and out of lists.

2010-07-19  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-code): Allow the org-src edit buffer to
	be used in a read-only mode.
	(org-edit-src-code): Different message in read-only mode.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-src.el (org-edit-src-find-region-and-lang): Test for
	table.el as late as possible.

	* org-colview.el: Make sure this file is never loaded into XEmacs.

	* org-agenda.el (org-highlight, org-unhighlight): Use direct
	overlay calls.

	* org.el (org-key): Apply the translations defined in
	`org-xemacs-key-equivalents'.

	* org-mouse.el (org-mode-hook): Use `org-defkey'.

	* org-compat.el (org-xemacs-key-equivalents): New constant.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-inlinetask.el (org-inlinetask-defaut-state): New option.
	(org-inlinetask-insert-task): Use `org-inlinetask-defaut-state'.
	Obey `org-odd-levels-only'.

	* org-compat.el (org-find-overlays): Use overlays-in/at.

	* org.el (org-remove-empty-overlays-at)
	(org-outline-overlay-data, org-hide-block-toggle)
	(org-format-latex, org-context): Use overlays-in/at.

	* org-src.el (org-edit-src-exit): Use overlays-in/at.

	* org-agenda.el (org-agenda-mark-clocking-task)
	(org-agenda-fontify-priorities, org-agenda-dim-blocked-tasks)
	(org-agenda-entry-text-hide)
	(org-agenda-fix-tags-filter-overlays-at)
	(org-agenda-bulk-remove-overlays): Use overlays-in/at.

	* org-compat.el (org-overlays-at): Function removed.
	(org-overlays-in): Function removed.

2010-07-19  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-clock-set-current): Just return the headline
	itself, strip the TODO keyword, the priority cookie and the tags.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-compat.el (org-xemacs-without-invisibility): New macro.
	(org-xemacs-without-invisibility): New macro.
	(org-indent-to-column, org-indent-line-to, org-move-to-column):
	Redefine using the macro `org-xemacs-without-invisibility'.

	* org.el (org-mode, org-org-menu): Use `add-to-invisibility-spec'.

	* org-table.el (orgtbl-mode): Use `add-to-invisibility-spec'.

	* org-compat.el (org-make-overlay, org-delete-overlay)
	(org-overlay-start, org-overlay-end, org-overlay-put)
	(org-overlay-get, org-overlay-move, org-overlay-buffer):
	Functions removed.
	(org-add-to-invisibility-spec): Function removed.

	* org-html.el (org-export-as-html-and-open): Add argument to
	kill-buffer.

	* org-habit.el (require): `calendar' is now required already by
	org.el on top level.

	* org-clock.el (require): `calendar' is now required already by
	org.el on top level.

	* org-agenda.el (require, org-timeline, org-agenda-list)
	(org-todo-list, org-agenda-to-appt): `calendar' is now required
	already by org.el on top level.

	* org.el (org-export-latex-fix-inputenc): Declare function.

	* org-agenda.el (org-agenda-goto-calendar): Do not bind obsolete
	variables.

	* org.el (calendar): Require calendar now on top level in org.el
	and define aliases to new variables when needed.
	(org-read-date, org-goto-calendar): Do not bind obsolete
	variables.

	* org-clock.el (org-clock-out, org-clock-cancel): Get rid of
	compilation warning, add comment that this cannot be done with
	`with-current-buffer'.

	* org-wl.el (org-wl-open): Use `with-current-buffer'.

	* org.el (overlay, org-remove-empty-overlays-at)
	(org-outline-overlay-data, org-set-outline-overlay-data)
	(org-show-block-all, org-hide-block-toggle)
	(org-highlight-new-match, org-remove-occur-highlights)
	(org-tags-overlay, org-fast-tag-selection, org-date-ovl)
	(org-read-date, org-read-date-display, org-eval-in-calendar)
	(org-format-latex, org-context)
	(org-speedbar-restriction-lock-overlay)
	(org-speedbar-set-agenda-restriction): Use the normal overlay API.

	* org-table.el (org-table-add-rectangle-overlay)
	(org-table-remove-rectangle-highlight)
	(org-table-overlay-coordinates)
	(org-table-toggle-coordinate-overlays): Use the normal overlay
	API.

	* org-src.el (org-edit-src-code, org-edit-fixed-width-region)
	(org-edit-src-exit, org-src-mode-configure-edit-buffer): Use the
	normal overlay API.

	* org-colview.el (org-columns-new-overlay)
	(org-columns-display-here, org-columns-remove-overlays)
	(org-columns-edit-value, org-columns-next-allowed-value)
	(org-columns-update): Use the normal overlay API.

	* org-clock.el (org-clock-out, org-clock-cancel)
	(org-clock-put-overlay, org-clock-remove-overlays): Use the normal
	overlay API.

	* org-agenda.el (org-agenda-mark-filtered-text)
	(org-agenda-mark-clocking-task, org-agenda-fontify-priorities)
	(org-agenda-dim-blocked-tasks, org-agenda-entry-text-show-here)
	(org-agenda-entry-text-hide)
	(org-agenda-restriction-lock-overlay)
	(org-agenda-set-restriction-lock)
	(org-agenda-filter-by-tag-hide-line)
	(org-agenda-fix-tags-filter-overlays-at)
	(org-agenda-filter-by-tag-show-all, org-hl)
	(org-agenda-goto-calendar, org-agenda-bulk-mark)
	(org-agenda-bulk-remove-overlays): Use the normal overlay API.

	* org-freemind.el (org-freemind-from-org-mode-node)
	(org-freemind-from-org-mode)
	(org-freemind-from-org-sparse-tree, org-freemind-to-org-mode):
	Use interactive-p instead of called-interactively, because this is
	backward compatible with older Emacsen I still support..

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-define-heading-targets): Fix bug in
	regexp finding ID and CUSTOM_ID properties.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-footnote.el (org-footnote-goto-previous-reference):
	Rename from `org-footnote-goto-next-reference'.

	* org.el (org-auto-repeat-maybe): Only record LAST_REPEAT if
	org-log-repeat is non-nil, or if there is clocking data in the
	entry.

	* org-crypt.el (org-encrypt-entry): Improve mapping behavior.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-align-all-tags): New command.

2010-07-19  David Maus  <dmaus@ictsoc.de>

	* org-wl.el (org-wl-link-remove-filter): New customizable
	variable.  If non-nil, filter conditions are stripped when storing
	link to message in filter folder.
	(org-wl-shimbun-prefer-web-links): New customizable variable.
	If non-nil, links to shimbun messages are created as web links to
	message source.
	(org-wl-nntp-prefer-web-links): New customizable variable.
	If non-nil, links to nntp message are created as web links to gmane
	or googlegroups.
	(org-wl-namazu-default-index): New customizable variable.
	Directory of namazu search index that should be used as default
	when opening a link in a search folder.
	(org-wl-folder-types): New constant.  Wanderlust folder type
	indicators.
	(org-wl-folder-type): New function.  Return type of Wanderlust
	folder.
	(org-wl-store-link): Create web links for shimbun or nntp messages
	and strip filter conditions depending on customizable variables.
	(org-wl-open): Open namazu search folder for message when called
	with prefix.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-remove-if, org-remove-if-not): New functions.
	(org-open-file): Use internal remove-if functions.

2010-07-19  Jan Böcker  <jan.boecker@jboecker.de>

	* org.el (org-file-apps-entry-match-against-dlink-p): New function.
	(org-file-apps-ex): Remove variable.
	(org-open-file): Integrate org-file-apps-ex functionality back
	into org-file-apps, and decide whether to match a regexp against
	the link or the filename using org-file-apps-entry-uses-grouping-p.

2010-07-19  Jan Böcker  <jan.boecker@jboecker.de>

	* org.el (org-file-apps-ex): New variable.
	(org-open-file): Before considering org-file-apps, first match the
	regexps from org-file-apps-ex against the whole link.
	See docstring of org-file-apps-ex.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-export-latex-default-packages-alist):
	Remove microtype package.
	(org-todo-repeat-to-state): New variable.
	(org-auto-repeat-maybe): Allow user-selected target states.
	(org-default-properties): Add the new property REPEAT_TO_STATE.

2010-07-19  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mobile.el (org-mobile-check-setup): Make sure that there is
	a binary to compute checksums.

2010-06-26  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-goto-calendar): Do not bind obsolete
	variables.

	* org.el (calendar): Require calendar now on top level in org.el
	and define aliases to new variables when needed.
	(org-read-date, org-goto-calendar): Do not bind obsolete
	variables.

2010-06-22  Glenn Morris  <rgm@gnu.org>

	* org-entities.el: Add explicit utf-8 coding cookie to file with
	utf-8 characters.

2010-05-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org.el (org-file-complete-link): Avoid (expand-file-name ".").

2010-05-07  Chong Yidong  <cyd@stupidchicken.com>

	* Version 23.2 released.

2010-05-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org-table.el (orgtbl-setup):
	* org-agenda.el (org-agenda-entry-text-mode): Simplify.

2010-05-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org-table.el (orgtbl-mode): Use define-minor-mode.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-insert-link): Find the link buffer on visible frames.
	(org-export-latex-default-packages-alist): Hyperref must be loaded
	late.
	(org-open-file): More care with the new matching for file links.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Do not yet protect
	defined entities - these will be taken care of later.
	(org-export-latex-special-chars): Post-process entity replacement.
	(org-export-latex-fontify-headline): Do not yet protect defined
	entities - these will be taken care of later.
	(org-export-latex-tables, org-export-latex-links): Format the
	caption properly.

	* org-entities.el (org-entities-user): Fix typo.

	* org.el (org-prepare-agenda-buffers): Uniquify TODO keywords.

	* org-entities.el (org-entities-user): Improve docstring.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-entities.el (org-macs): Require org-macs, to be sure that we
	have `declare-function' defined.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-classes): Update docstring.

	* org.el (org-format-latex-header): Add cookies to the header.
	(org-splice-latex-header): Implement placement according to cookies.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-aux-preprocess): Control case
	sensitivity.

2010-04-10  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-splice-latex-header): Fix typo.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-make-header):
	Use `org-splice-latex-header' to build the header.
	(org-export-latex-classes): Update docstring.

	* org.el (org-splice-latex-header): New function.
	(org-create-formula-image): Use `org-splice-latex-header' to build
	the header.

	* org-gnus.el (org-gnus-follow-link): Handle nndoc backend.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-export-latex-packages-alist)
	(org-export-latex-default-packages-alist): Fix docstring to
	reflect the expected structure.

	* org-docbook.el (org-docbook-do-expand): Fix bug with variable names.
	(org-export-docbook-finalize-table): Make use of label for tables.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-attach.el (org-attach-commit): Split on newlines.

	* org.el (org-export-latex-default-packages-alist): Use list
	instead of cons for the entries.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-entities.el (org-entity-get-representation): Catch the case
	that there is not entry in the list.

	* org-mobile.el (org-mobile-use-encryption)
	(org-mobile-encryption-tempfile, org-mobile-encryption-password):
	New options.
	(org-mobile-check-setup): CHeck the encryption setup.
	(org-mobile-copy-agenda-files, org-mobile-sumo-agenda-command)
	(org-mobile-create-sumo-agenda): Use encryption code.
	(org-mobile-encrypt-and-move): New function.
	(org-mobile-encrypt-file, org-mobile-decrypt-file):
	New functions.
	(org-mobile-move-capture): Decrypt the capture file.

	* org.el (org-entities): Require the new file.
	(org-export-latex-default-packages-alist): New variable.
	(org-complete): Use new entity code for completion.
	(org-create-formula-image): Use the new packages variable.

	* org-latex.el (org-export-latex-classes): Remove the standard
	packages from the class headers.
	(org-export-latex-make-header): Use the new package variable.
	(org-export-latex-special-chars): Better regexp for entities, to
	support entity name that contain numbers.
	(org-export-latex-treat-backslash-char): Use the new entity code.

	* org-html.el (org-html-do-expand): Use the new entity code.

	* org-exp.el (org-export): Add the new export commands.
	(org-html-entities): Constant removed.
	(org-export-visible): Add the new export commands.

	* org-docbook.el (org-docbook-do-expand): Use new entity code.

	* org-ascii.el (org-export-ascii-entities): New variable.
	(org-export-as-latin1, org-export-as-latin1-to-buffer)
	(org-export-as-utf8, org-export-as-utf8-to-buffer): New commands.
	(org-export-as-encoding): New function.
	(org-export-ascii-preprocess): Call `org-ascii-replace-entities'.
	(org-ascii-replace-entities): New function.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>
	    Ulf Stegemann  <ulf@zeitform.de>

	* org-entities.el: New file.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-html-level-start): Catch the case that target
	might be nil.

2010-04-10  Dan Davison  <davison@stats.ox.ac.uk>

	* org.el (org-appearance): Change Customize group variable name
	from org-font-lock to org-appearance, and change tag from "Org
	Font Lock" to "Org Appearance".
	(org-odd-levels-only): Change Customize group variable name.
	(org-level-color-stars-only): Change Customize group variable name.
	(org-hide-leading-stars): Change Customize group variable name.
	(org-hidden-keywords): Change Customize group variable name.
	(org-fontify-done-headline): Change Customize group variable name.
	(org-fontify-emphasized-text): Change Customize group variable name.
	(org-fontify-whole-heading-line): Change Customize group variable name.
	(org-highlight-latex-fragments-and-specials): Change Customize
	group variable name.
	(org-hide-emphasis-markers): Change Customize group variable name.
	(org-emphasis-alist): Change Customize group variable name.
	(org-emphasis-regexp-components): Change Customize group variable
	name.
	(org-modules): Remove mention of org-R.

	* org-faces.el (org-faces): Change Customize group variable name.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-diary-last-run-time): New variable.
	(org-diary): Prepare agenda buffers only if last call was some
	time ago.

	* org-html.el (org-export-html-preprocess): Replace \ref macros
	with a link.
	(org-format-org-table-html): Add the label as an anchor.

	* org-docbook.el (org-export-docbook-format-image): Do some
	formatting on captions.

	* org-latex.el (org-export-latex-tables, org-export-latex-links):
	Do some formatting on captions.

	* org-html.el (org-export-html-format-image)
	(org-format-org-table-html): Do some formatting on captions.

2010-04-10  Dan Davison  <davison@stats.ox.ac.uk>

	* org.el (org-hidden-keywords): New customizable variable.  This is
	a list of symbols specifying which of the special keywords #+DATE,
	#+AUTHOR, #+EMAIL and #+TITLE should be hidden by font lock.
	(org-fontify-meta-lines-and-blocks): Changes to font-lock code
	implementing new faces and hiding behavior.

	* org-faces.el (org-document-title): New face for #+TITLE lines.
	(org-document-info): New face for #+DATE, #+AUTHOR, #+EMAIL lines.
	(org-document-info-keyword): New face for #+DATE, #+AUTHOR, #+EMAIL
	keywords.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-sanitize-plist): New function to
	rename "index" properties to "sitemap".  Do this renaming
	globally.
	(org-publish-with-aux-preprocess-maybe): New macro.
	(org-publish-org-to-pdf, org-publish-org-to-html): Use the new
	macro.
	(org-publish-aux-preprocess)
	(org-publish-index-generate-theindex.inc): New function.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-align): Interpret <N> at fixed width,
	not as maximum width.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-author-info, org-export-email-info):
	Fix docstrings.

	* org-beamer.el (org-beamer-select-environment): Rename from
	`org-beamer-set-environment-tag'.  Improve docstring.

	* org-freemind.el (org-freemind-write-mm-buffer): Fix another
	problem with odd levels.

	* org-ascii.el (org-export-as-ascii): Export email only if the
	author wants it.

	* org-docbook.el (org-export-as-docbook): Export email only if the
	author wants it.

	* org-html.el (org-export-as-html): Export email only if the
	author wants it.

	* org-exp.el (org-export-email-info): New option.
	(org-export-plist-vars): Add entry for `org-export-email'.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-goto-line): Fix typo.

2010-04-10  Mikael Fornius  <mfo@abc.se>

	* org.el (org-agenda-files): Typo.
	(org-read-agenda-file-list): Add optional argument to help
	`org-store-new-agenda-file-list' to remember un-expanded file
	names.  Expand file names relative to `org-directory'.
	(org-store-new-agenda-file-list): Keep un-expanded file names when
	saving, if available.
	(org-agenda-files): Update documentation.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-ascii.el (org-export-as-ascii): Catch the case of exporting
	a buffer with no file name attached.

	* org.el (org-log-refile): New option.
	(org-log-note-headings): Add a heading for refiling.
	(org-startup-options): Add keywords for logging of the refile
	action.
	(org-refile): Add logging action.
	(org-add-log-note): Allow for refiling action.

	* org-agenda.el (org-agenda-bulk-action): Make sure
	`org-log-refile' is not `note' during a bulk action.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-map-dblocks): Use save-excursion to remember the
	position.

	* org-attach.el (org-attach-commit): Remove dependence on xargs.
	(org-attach-delete-one): Commit after deleting a file.

	* org-latex.el (org-export-latex-fontify): Do not mistake table.el
	borders for strike-through emphasis.

	* org-freemind.el (org-freemind-write-mm-buffer): Simplify the
	handling of odd levels.

	* org-agenda.el (org-agenda-todo-ignore-deadlines): Document `past'
	and `future' values.
	(org-agenda-check-for-timestamp-as-reason-to-ignore-todo-item):
	Handle `past' and `future' values.

	* org.el (org-read-agenda-file-list): Interpret file names
	relative to org-directory and allow environment variables and
	"~".

	* org-latex.el (org-export-latex-special-chars): Allow a
	parenthesis before an exponent or subscript.

2010-04-10  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-exit): When returning from code edit
	buffer, if code block is hidden, leave point at start of
	#+begin_src line.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-insert-heading): Do not remove all spaces if the
	headline is empty.

	* org-indent.el (org-indent): Fix group name.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-goto-column): Fix forcing a non-existing
	column.
	(org-table-get, org-table-put, org-table-goto-line)
	(org-table-current-line): New functions.

2010-04-10  Jan Böcker  <jan.boecker@jboecker.de>

	* org.el (org-open-file): Allow regular expressions in
	org-file-apps to capture link parameters using groups.  In a
	command string to be executed, the parameters can be referenced
	using %1, %2, etc.  Lisp forms can access them using
	(match-string n link).
	(org-apps-regexp-alist): Adopt the created regexp, as this is now
	matched against a file: link instead of the file name.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-crypt.el (org-reveal-start-hook): Add a decryption function
	to this hook.
	(org-decrypt-entries, org-encrypt-entries, org-decrypt-entry):
	Add docstrings.

	* org.el (org-point-at-end-of-empty-headline)
	(org-level-increment, org-get-previous-line-level): New function.
	(org-cycle-level): Rewritten to be independent of when this
	function is called.
	(org-in-regexps-block-p): New function.
	(org-reveal-start-hook): New hook.
	(org-reveal): Run new hook.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-keywords): Start a new paragraph
	after time keywords, do not add "\newline".

	* org-html.el (org-export-as-html): Avoid double # in href.

	* org.el (org-refile-get-location): Catch an invalid target
	specification.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-add-entry-to-org-agenda-diary-file):
	Make sure the behavior regarding to extracting time is
	consistent.

2010-04-10  Stephen Eglen  <stephen@gnu.org>

	* org-agenda.el (org-agenda-insert-diary-extract-time):
	New variable.
	(org-agenda-add-entry-to-org-agenda-diary-file): Use this new
	variable rather than `org-agenda-search-headline-for-time'.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-list.el (org-fix-bullet-type): Improve cursor positioning.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-adaptive-fill-regexp-backup): New variable.
	(org-set-autofill-regexps): Store a backup of
	`adaptive-fill-regexp'.
	(org-adaptive-fill-function): Fix filling of comments and ordered
	lists.  If there is no other match, till try adaptive fill.

2010-04-10  John Wiegley  <jwiegley@gmail.com>

	* org-agenda.el (org-agenda-include-deadlines): Add new
	customization variable to determine whether unscheduled tasks
	should appear in the agenda solely because of their deadline.
	Default to true, which was the previous behavior (it just wasn't
	configurable).
	(org-agenda-mode-map, org-agenda-view-mode-dispatch): Bind ! in
	the agenda to show/hide deadline tasks.
	(org-agenda-menu): Add menu option for show/hide deadlines.
	(org-agenda-list): Make the agenda list sensitive to the value of
	`org-agenda-include-deadlines'.
	(org-agenda-toggle-deadlines): New function to toggle the value of
	`org-agenda-include-deadlines' and repaint the modeline
	indicators.
	(org-agenda-set-mode-name): Show "Deadlines" in the agenda
	modeline if deadline tasks are being displayed.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-eval-formula): Replace $# and @# by
	current column and row number.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-set-property, org-delete-property): Go back to
	prompting for the property.

	* org-latex.el (org-export-latex-make-header): Fully process
	author line.
	(org-export-latex-fontify-headline): Allow several arguments, not
	just one.
	(org-export-latex-fix-inputenc): Catch the error when
	`latexenc-coding-system-to-inputenc' is not defined.

	* org-agenda.el (org-agenda-skip-if-todo): New function.
	(org-agenda-skip-if): Add conditions for TODO keywords.
	(org-agenda-skip-if): Document the new todo conditions.

2010-04-10  Mikael Fornius  <mfo@abc.se>

	* org.el (org-at-property-p): Check if we are inside a property
	drawer not just any drawer.
	(org-set-property, org-delete-property): When cursor is on a
	property key value pair do not prompt for property name instead
	use name at cursor.
	(org-ctrl-c-ctrl-c): Still do org-property-action when cursor is
	on the first line of a property drawer.
	(org-property-end-re): Spell check.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-attach-captions-and-attributes): Add the
	properties to the entire table, in case the first line is
	removed.

	* org-archive.el (org-archive-reversed-order): New option.
	(org-archive-subtree, org-archive-to-archive-sibling): Use the new
	option `org-archive-reversed-order'.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-entry-types): New variable.
	(org-agenda-list): Use `org-agenda-entry-types'.
	(org-agenda-custom-commands-local-options): Support for setting
	`org-agenda-entry-types' as an option.
	(org-diary): Shift some documentation from here to the variable
	`org-agenda-entry-types'.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-make-header): Apply macros in
	author field.

	* org-clock.el (org-clocking-buffer, org-clocking-p): New function.
	(org-clock-select-task, org-clock-notify-once-if-expired)
	(org-clock-in, org-clock-out, org-clock-cancel, org-clock-goto)
	(org-clock-out-if-current, org-clock-save): Use the new functions.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-docbook.el (org-export-as-docbook): Remove unnecessary
	newline.
	(org-export-as-docbook): Remove unnecessary newline.
	(org-export-as-docbook): Fix problem with double footnote
	reference in one place.

	* org-exp.el (org-export-format-source-code-or-example):
	Remove unnecessary newline.

	* org.el (org-deadline, org-schedule): Allow rescheduling entries
	with repeaters.

	* org-table.el (org-table-convert-refs-to-rc): Better way to catch
	function calls that look like references.

	* org.el (org-open-at-point): Get link abbreviations from
	reference buffer.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-convert-refs-to-rc): Do not read arctan2
	as a reference.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-link-unescape): Solve issue with lower-case escapes.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-classes):
	Add \usepackage{latexsym} to all classes.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-export-as-html): Do not allow protected lines
	into the table of contents.

	* org-latex.el (org-export-latex-special-chars): Find subsequent
	occurrences of special characters.
	(org-export-latex-tables): Do not convert table-like stuff that is
	protected.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-list.el (org-toggle-checkbox): No errors when updating
	checkbox count fails because there is no heading.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-report-include-clocking-task):
	New option.
	(org-clock-sum): Add the current clocking task.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-cycle): Print a message when in a table.el table.
	(org-edit-special): Recognize the table.el context.
	(org-ctrl-c-ctrl-c): Print a message when in a table.el table.

	* org-src.el (org-at-table.el-p): Declare.
	(org-edit-src-code): Handle a special case for table.el editing.
	(org-edit-src-find-region-and-lang): Recognize the table.el
	context.

	* org-latex.el (org-export-latex-tables): Convert table.el
	tables.
	(org-export-latex-convert-table.el-table): New function.

	* org-html.el (org-html-expand): Fix table.el export.

	* org-latex.el (org-export-latex-preprocess): Protect footnotes in
	headings.

	* org-id.el (org-id-find-id-file): Fix bug when there is no hash
	table for the id locations.

	* org.el (org-read-date-analyze): Match American-style dates, like
	5/30 or 5/13/7.  Make sure cal-iso.el is loaded.  Don't force he
	current year when reading ISO and American dates.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-face-from-face-or-color): New function.
	(org-get-todo-face, org-font-lock-add-priority-faces)
	(org-get-tag-face): Use `org-face-from-face-or-color'.

	* org-faces.el (org-todo-keyword-faces, org-priority-faces):
	Allow simple colors as values.
	(org-faces-easy-properties): New option.

	* org-agenda.el (org-agenda-set-mode-name): Show if the agenda is
	restricted, as an agenda mode.
	(org-agenda-fontify-priorities): Allow simple colors as values.

2010-04-10  Bastien Guerry  <bzg@gnu.org>

	* org-timer.el (org-timer-current-timer): Rename from
	`org-timer-last-timer'.
	(org-timer-timer1, org-timer-timer2, org-timer-timer3): Remove.
	(org-timer-cancel-timer, org-timer-show-remaining-time)
	(org-timer-set-timer): Update to use only one timer.

	* org.el (org-set-property): Remove useless space in the prompt.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-export-html-style-default): Add a default style
	for textareas.

	* org-exp.el (org-export-format-source-code-or-example):
	Fix textarea tag.

2010-04-10  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-clock-current-task): New variable to store
	last clocked in task.
	(org-clock-set-current, org-clock-delete-current): New functions.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-remember-apply-template): Extend comment.
	(org-remember-handler): Implement clock sibling filing.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-all, org-publish-current-file)
	(org-publish-current-project): When called with prefix argument
	FORCE, also rebuild the validation file list.

	* org-latex.el (org-export-latex-preprocess): Protect footnotes in
	section headings.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-export-as-html-and-open): Kill product buffer
	if the user wants that.

	* org-latex.el (org-export-as-pdf-and-open): Kill product buffer
	if the user wants that.

	* org-exp.el (org-export-kill-product-buffer-when-displayed):
	New option.

	* org-agenda.el (org-batch-agenda-csv): Use the time property
	instead of the `time-of-day' property.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-timer.el (org-timer-start-hook, org-timer-stop-hook)
	(org-timer-pause-hook, org-timer-set-hook)
	(org-timer-cancel-hook): New hooks.
	(org-timer-start): Run `org-timer-start-hook'.
	(org-timer-pause-or-continue): Run `org-timer-pause-hook'.
	(org-timer-stop): Run `org-timer-stop-hook'.
	(org-timer-cancel-timers): Run `org-timer-cancel-hook'.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-reveal): Double prefix arg shows the subtree of the
	parent.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-search-view): Fix bug with searching full
	words in headlines in search view.
	(org-agenda-skip-deadline-prewarning-if-scheduled): New option.
	(org-agenda-get-deadlines): Suppress pre-warning if the entry is
	scheduled (if the user configures it so.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-hide-archived-subtrees): Don't jump to end of
	subtree if the match was not in a headline.
	(org-inside-latex-macro-p): Allow more complex arguments.
	(org-emphasize): Protect against use at end of buffer.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-align-tags): Avoid side effects on
	text properties.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-todo-ignore-scheduled): More allowed
	values.
	(org-agenda-todo-ignore-scheduled)
	(org-agenda-todo-ignore-deadlines): More control with different
	allowed values.
	(org-agenda-check-for-timestamp-as-reason-to-ignore-todo-item):
	Honor the new option settings.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-get-location): Make sure the selection buffer is
	shown in the current frame.

	* org-ascii.el (org-export-ascii-table-widen-columns):
	New option.
	(org-export-ascii-preprocess): Realign tables to remove narrowing
	if `org-export-ascii-table-widen-columns' is set.

	* org-table.el (org-table-do-narrow): New variable.
	(org-table-align): Narrow only if `org-table-do-narrow' is t.

	* org.el (org-deadline, org-schedule): Allow updating if the
	relevant time stamp does not have a repeater, i.e. do not require
	that no time stamp has a repeater.

	* org-agenda.el (org-agenda-align-tags): Don't add a face to the
	new white space before the tags.

	* org-latex.el (org-export-as-latex): Do nit require the buffer to
	be visiting a file when only exporting to a buffer or string.
	(org-export-latex-fix-inputenc): Only save the buffer is there is
	a file name attached to it.

2010-04-10  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-exit): Widen before exiting edit buffers.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-fontify-meta-lines-and-blocks):
	Honor `org-fontify-quote-and-verse-blocks'.

	* org-faces.el (org-fontify-quote-and-verse-blocks): New option.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-open-at-point): Also check for text property
	org-linked-text before offering collected links.

2010-04-10  Stephen Eglen  <stephen@gnu.org>

	* org-agenda.el (org-agenda-add-entry-to-org-agenda-diary-file):
	Optionally extract time specification from text and add to the
	timestamp.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-html-entities): Fix typo.

	* org-latex.el (org-export-latex-make-header): Use \providecommand
	to make sure the \alert macro is defined.

	* org.el (org-format-latex-signal-error)
	(org-create-formula-image): Use `org-format-latex-signal-error'.

2010-04-10  Stephen Eglen  <stephen@gnu.org>

	* org.el (org-store-link): For dired buffers, use
	default-directory as link name if dired-get-filename returns
	nil.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-concatenate-multiline-links): The for
	protectedness at beginning of match.

	* org-latex.el (org-export-latex-fix-inputenc): Never leave the
	AUTO as a coding system, instead default to utf8.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-block-todo-from-children-or-siblings-or-parent)
	(org-block-todo-from-checkboxes): Respect the local variable
	value when deciding if blocking should be active.

	* org-latex.el (org-export-latex-make-header): Define the align
	macro if it is not yet defined.

	* org-agenda.el (org-agenda-insert-diary-make-new-entry):
	Call `org-insert-heading' with the INVISIBLE-OK argument.

	* org-mac-message.el (org-mac-message-insert-flagged):
	Call `org-insert-heading' with the INVISIBLE-OK argument.

	* org.el (org-insert-heading): New argument INVISIBLE-OK.

	* org-agenda.el (org-agenda-view-mode-dispatch): Improve the
	prompt message.

	* org-html.el (org-html-level-start): Use the
	`html-container-class' text property to set an additional class
	for an outline container.

	* org-exp.el (org-export-remember-html-container-classes):
	New function.
	(org-export-preprocess-string):
	Call `org-export-remember-html-container-classes'.

	* org.el (org-cycle): Mention level cycling in the docstring.
	(org-default-properties): Add new property HTML_CONTAINER_CLASS.

	* org-remember.el (org-remember-apply-template): Do file insertion
	first.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-habit.el (org-habit-insert-consistency-graphs): Fix a
	problem with mis-aligned graphs when showing habits.

2010-04-10  Mikael Fornius  <mfo@abc.se>

	* org.el (org-assign-fast-keys): Prefer keys used in keyword name
	when assigning.  Begin using numerical characters when all in name
	is used up.  This is to spare alphanumeric characters for better
	match with other keywords.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-preprocess-hook): Improve documentation.

	* org-latex.el (org-export-latex-preprocess): More consistent
	conversion and protection of the words LaTeX and TeX.
	(org-export-latex-fontify-headline, org-export-latex-preprocess):
	Allow angle brackets in commands, for beamer.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-in): Improve the look of the clock line
	by formatting links.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-classes): Use AUTO as the place
	holder string for the coding system.  And improve the
	documentation.
	(org-export-latex-fix-inputenc): Only modify the coding system if
	it is given by the placeholder AUTO.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-task-overrun-text): New option.
	(org-task-overrun, org-clock-update-period): New variables.
	(org-clock-get-clock-string, org-clock-update-mode-line):
	Mark overrun clock.
	(org-clock-notify-once-if-expired): Check if clock is overrun.

	* org-faces.el: New face `org-mode-line-clock-overrun'.

2010-04-10  Jan Böcker  <jan.boecker@jboecker.de>

	* org.el (org-narrow-to-subtree): Position the end of the narrowed
	region before the line with the next heading, to prevent the user
	from prepending text to the next headline.

2010-04-10  Stephen Eglen  <stephen@gnu.org>

	* org-agenda.el (org-get-time-of-day):
	Use org-agenda-time-leading-zero to allow leading zero (rather than
	space) for times.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-diary-entry-in-org-file): Make sure
	org-datetree.el is loaded.

	* org-datetree.el: Autoload `org-datetree-find-day-create'.

	* org-latex.el (org-export-latex-hyperref-format): New option.
	(org-export-latex-links): Use `org-export-latex-hyperref-format'.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-ctags.el (org-ctags-enable): Change order of functions.
	(org-ctags-create-tags): Add wildcard to file name expansion.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-entry-properties): Fix some important bugs.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-link-unescape, org-link-escape): Only use hexlify if
	the table is not explicitly given.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-out-when-done): Allow a list of keywords
	as value.
	(org-clock-out-if-current): Work with the new list value of
	`org-clock-out-when-done'.
	(org-clock-out, org-clock-out-if-current): Avoid circular logic
	between clocking out and state changes.

	* org-ctags.el (org-ctags-path-to-ctags): Better system-type test.

	* org-latex.el (org-export-latex-treat-backslash-char): Do not by
	accident protect a character that is before a backslash.

2010-04-10  Paul Sexton  <eeeickythump@gmail.com>

	* org-ctags.el: New file.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-diary-class):
	Use `org-order-calendar-date-args'.

	* org.el (org-order-calendar-date-args): New function.

	* org-exp.el (org-export-target-internal-links): Check for
	protectedness after the first bracket.

	* org.el (org-entry-properties): Don't match wrong-case TODO
	keywords.

	* org-agenda.el (org-agenda-schedule, org-agenda-deadline):
	Document that ARG is passed through to remove the date.
	(org-agenda-bulk-action): Accept prefix arg and pass it on.
	Do not read a date when the user has given a `C-u' prefix.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-fix-displayed-tags): Fix bug when all
	tags are hidden.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-fix-inputenc): New function.
	(org-export-latex-inputenc-alist): New option.

	* org-exp.el (org-export): New key SPC to publish enclosing
	subtree.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-indent.el (org-indent-add-properties): Catch case when there
	is no headline in the buffer.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-html-entities): Add checkmark symbol.

	* org-ascii.el (org-export-ascii-preprocess): Protect targets in
	verbatim code for ASCII export.

	* org.el (org-update-statistics-cookies): Also see checkboxes in
	ordered lists.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-view-mode-dispatch): Define the `L'
	key.

	* org-beamer.el (org-beamer-amend-header): Change the location
	where `org-beamer-header-extra' is inserted.

	* org.el (org-compute-latex-and-specials-regexp): Don't do BIND
	just for computing this regexp.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-beamer.el (org-beamer-frame-default-options): New option.
	(org-beamer-sectioning): Use default options if the user does not
	have defined any.
	(org-beamer-fix-toc): Put a frame around the table of contents.

	* org-exp.el (org-export-remove-comment-blocks-and-subtrees):
	Make sure case-folding works well when processing comment stuff.

	* org-latex.el (org-export-latex-after-save-hook): New hook.
	(org-export-as-latex): Run the new hook.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-beamer.el (org-beamer-environments-default): Add the note
	environments.
	(org-beamer-after-initial-vars): Allow several BEAMER_HEADER_EXTRA
	lines and collect and combine the content.
	(org-beamer-after-initial-vars): Check for note tags and make sure
	they will be seen like a property.

	* org.el (org-offer-links-in-entry): Fix bug when there is a
	single link.

	* org-exp.el (org-export): Make sure the mark is activated, also
	when `transient-mark-mode' is off.

	* org-agenda.el (org-agenda-search-view-always-boolean): New option.
	(org-agenda-search-view-search-words-only): Obsolete variable, is
	now an alias for `org-agenda-search-view-always-boolean'.
	(org-agenda-search-view-force-full-words): New option.
	(org-search-view): Improve docstring, and implement a better logic
	for Boolean and phrase searches.
	(org-agenda-last-search-view-search-was-boolean): New variable.
	(org-agenda-manipulate-query): Consider the type of the last
	search when modifying the search string.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-as-latex): Do the first letbind in the
	right moment.

	* org-agenda.el (org-get-entries-from-diary): Add the new face to
	these entries.

	* org-faces.el (org-agenda-diary): New face.

	* org.el (org-make-link-regexps): Allow regexp-special characters
	in link types.
	(org-open-file): When in-emacs is `system', also force system
	opening, like when the value was `(16)'.
	(org-update-statistics-cookies): Handle entries without children.

	* org-exp.el
	(org-export-preprocess-before-normalizing-links-hook): New hook.
	(org-export-preprocess-string): Run the new hook.

	* org.el (org-offer-links-in-entry): Make RET open all links.

	* org-html.el (org-export-as-html): Remove any leftover display
	properties in the html file.

	* org-wl.el (org-wl-store-link): Work-around for format bug with
	text properties.

	* org-habit.el (org-habit-insert-consistency-graphs): Turn off
	invisibility while adding the graphs.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-select-remember-template): Use C letter to
	customize remember templates.

	* org-agenda.el (org-agenda-bulk-mark, org-agenda-bulk-unmark):
	Move cursor to next visible line.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-beamer.el (org-beamer-sectioning): Leave columns environment
	by specifying 0 or 1 for column width.
	(org-beamer-column-widths): Make 0 stand for 0.0.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-mark-radio-links): Don't match inside
	<<target>>.

	* org.el (org-format-latex-header-extra): New variable.
	(org-format-latex): Set org-format-latex-header-extra from
	in-buffer stuff.
	(org-format-latex): Add org-format-latex-header-extra to the
	variables on which image creation depends.
	(org-create-formula-image): Add the header stuff from in-buffer
	settings.
	(org-read-date-analyze): Base the analysis for future preference
	on NOW, not on the default date.

	* org-inlinetask.el (org-inlinetask-export-handler): Add CSS class
	for TODO keyword in inline tasks.

	* org.el (org-log-note-headings): New headings for removing
	deadline or scheduling date.
	(org-deadline, org-schedule): Arrange for logging when removing a
	date.
	(org-add-log-note): Handle deadline and scheduling removal.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-visible): Add LaTeX/pdf export.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-diary-class): New function.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Do process the text
	of a radio target.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-entry-properties): Add TIMESTAMP properties back
	in.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-all-time-keywords): New variable.
	(org-set-regexps-and-options): Set `org-all-time-keywords'.
	(org-entry-blocked-p): New function.
	(org-special-properties): Add BLOCKED as a new special property.
	(org-entry-properties): New optional argument SPECIFIC, only parse
	for this property when it is specified.
	(org-entry-get): Pass a SPECIFIC argument to
	`org-entry-properties'.

	* org-latex.el (org-export-as-latex): Preprocess TEXT as well.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-tables): No forced line end if
	there is no caption.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-html-entities): Add Euro symbols from Marvosym
	package.

	* org-latex.el (org-export-latex-tables): Only add a caption when
	macro is in longtable environments if one has been defined.

	* org-html.el (org-export-as-html): Only take title from buffer if
	not exporting body-only.

	* org-latex.el (org-export-latex-preprocess): Better version of
	the regular expression for protecting LaTeX macros.
	(org-export-latex-preprocess): Start searching for macros to
	protect from beginning of buffer.

	* org-exp.el (org-export-target-internal-links): Check for
	protectedness earlier in the string.

	* org-agenda.el (org-agenda-highlight-todo): Match TODO keywords
	case sensitively.

	* org-id.el (org-id-store-link): Match TODO keywords case
	sensitively.

	* org.el (org-heading-components, org-get-outline-path)
	(org-display-outline-path): Match TODO keywords case sensitively.

	* org-latex.el (org-export-as-latex): Ignore read-only
	properties.

	* org-exp.el (org-export-preprocess-string): Remove any
	`read-only' properties.

	* org-agenda.el (org-agenda-inactive-leader): New option.
	(org-agenda-get-timestamps): Use `org-agenda-inactive-leader'.
	(org-tags-view): Prompt for matcher if MATCH is an empty string.
	(org-todo-list): Prompt for matcher if ARG is an empty string.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-open-link-functions): New hook.
	(org-open-at-point): Run `org-open-link-functions'.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-date-prompt): Allow inactive time
	stamps as well.

	* org.el (org-inhibit-startup-visibility-stuff): New variable.
	(org-mode): Don't do startup visibility if inhibited.
	(org-outline-overlay-data, org-set-outline-overlay-data):
	New functions.
	(org-save-outline-visibility): New macro.
	(org-log-note-headings): Document that one should not change the
	`state' note format.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-make-link-regexps): Capture link path into a group.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-beamer.el (org-beamer-after-initial-vars): Do not overwrite
	the options plist.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-startup-with-beamer-mode): New option.
	(org-property-changed-functions)
	(org-property-allowed-value-functions): New hooks.
	(org-entry-put, org-property-get-allowed-values): Run the new
	hooks.
	(org-property-next-allowed-value): Run the new hooks.

	* org-exp.el (org-export-select-backend-specific-text): Add the
	special beamer tags.

	* org-beamer.el: New file.

	* org-latex.el (org-export-latex-after-initial-vars-hook): New hook.
	(org-export-as-latex):
	Run `org-export-latex-after-initial-vars-hook'.
	(org-export-latex-format-toc-function)
	(org-export-latex-make-header):
	Call `org-export-latex-format-toc-function'.

	* org.el (org-fill-template): Make template searches case sensitive.

	* org-exp.el (org-export): Use "1" as a sign to export only the
	subtree.

	* org-colview.el (org-columns-edit-value):
	Use org-unrestricted property.

	* org.el (org-compute-property-at-point): Set org-unrestricted
	text property if the list contains ":ETC".
	(org-insert-property-drawer):
	Use org-unrestricted property.

	* org-exp.el
	(org-export-preprocess-before-selecting-backend-code-hook): New hook.
	(org-export-preprocess-string):
	Run `org-export-preprocess-before-selecting-backend-code-hook'.

	* org-xoxo.el (org-export-as-xoxo): Run `org-export-first-hook'.

	* org-latex.el (org-export-region-as-latex):
	Run `org-export-first-hook'.

	* org-html.el (org-export-as-html): Run `org-export-first-hook'.

	* org-docbook.el (org-export-as-docbook):
	Run `org-export-first-hook'.

	* org-ascii.el (org-export-as-ascii): Run `org-export-first-hook'.

	* org-exp.el (org-export-first-hook): New hook.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-list.el (org-previous-item): Exit at the beginning of the
	buffer.

	* org-id.el (org-id-locations-save): Only write the id locations
	if any are defined.

	* org-archive.el (org-archive-all-done): Make this work in a file
	with org-odd-levels-only set.

	* org.el (org-get-refile-targets): Catch the case when a buffer
	has no file.

	* org-latex.el (org-export-as-latex): Cleanup forced line ends
	where they are not needed.
	(org-export-latex-subcontent): Remove unnecessary newlines.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-make-header): Remove \obeylines.
	(org-export-latex-fontify): Fix regexp bug that takes special
	care of protecting the right boundary characters in emphasis
	matches.
	(org-export-latex-preprocess): Allow multiple arguments to latex
	macros.

	* org.el (org-make-link-regexps): Use John Gruber's regexp for
	urls.

	* org-macs.el (org-re): Interpret :punct: in regexps.

	* org-exp.el (org-export-replace-src-segments-and-examples):
	Also take the final newline after the END line.

	* org.el (org-clean-visibility-after-subtree-move): Only fix
	entries that are not entirely invisible already.
	(org-insert-link): Respect org-link-file-path-type for
	"docview:" links in addition to "file:" links.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Avoid additional extra white lines in LaTeX.

	* org-list.el (org-list-parse-list): Leave empty lines after the
	list, don't consider them as part of the list.

	* org-mobile.el (org-mobile-sumo-agenda-command): Allow tagstodo
	searches.

	* org-clock.el (org-clock-select-task): Convert integer to
	character for XEmacs.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-resolve): Make reading a char XEmacs
	compatible.

2010-04-10  Tassilo Horn  <tassilo@member.fsf.org>

	* org.el (org-complete-tags-always-offer-all-agenda-tags):
	New variable.
	(org-set-tags): Use it.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-list.el (org-empty-line-terminates-plain-lists):
	Update docstring.

	* org.el (org-format-latex): Fix link creation for processed latex
	snippets.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-footnote.el (org-footnote-normalize): Protect replacement
	text.

	* org.el (org-inside-latex-macro-p): Save match data.

2010-04-10  Jan Böcker  <jan.boecker@jboecker.de>

	* org-docview.el: New file.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-class-options): New variable.
	(org-export-latex-set-initial-vars): Use the class options.

	* org.el (org-forward-same-level): Stop at headings that start
	with an invisible character.
	(org-additional-option-like-keywords): Add LaTeX_CLASS_OPTIONS.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-footnote.el (org-footnote-normalize): Don't take optional
	arguments in LaTeX macros as footnotes.

	* org.el (org-inside-latex-macro-p): New function.

	* org-latex.el (org-latex-to-pdf-process): Change customization
	group to `org-export-pdf'.

	* org-agenda.el (org-agenda-get-blocks): Look at time string also
	on days after the first one.

	* org.el (org-insert-heading): Also check for item before assuming
	before-first-heading condition.

	* org-latex.el (org-latex-to-pdf-process): Fix typo in group tag.
	(org-export-pdf-logfiles): New option.
	(org-export-as-pdf): Use `org-export-pdf-logfiles'.
	(org-export-pdf-logfiles): Fix customization type.

	* org.el (org-insert-link): Improve error message when there is no
	default link to select with RET.

	* org-agenda.el (org-agenda-filter-by-tag): Use char argument from
	parameter list.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-parse-global)
	(org-export-latex-parse-content)
	(org-export-latex-parse-subcontent):
	Use `org-re-search-forward-unprotected'.
	(org-export-as-pdf): Remove log files produced by XeTeX.

	* org-macs.el (org-re-search-forward-unprotected): New function.

2010-04-10  James TD Smith  <ahktenzero@mohorovi.cc>

	* org-colview.el (org-agenda-colview-summarize): Sort out some
	confusion between properties and titles, which resulted in
	agenda summaries not working if a title was set for a column.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mobile.el (org-mobile-agendas): New option.
	(org-mobile-sumo-agenda-command): Select the right agendas.

	* org-latex.el (org-export-latex-format-image): Preserve the
	original-indentation property.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-insert-selection-line): Catch error when
	an old tasks no longer exists.

	* org-latex.el (org-export-as-pdf): Remove also the .idx file.
	(org-export-as-pdf): Don't remove the old PDF file before making
	the new one.

	* org-mouse.el (org-mouse-end-headline, org-mouse-insert-item)
	(org-mouse-context-menu): Use `org-looking-back'.

	* org.el (org-cycle-level): Use `org-looking-back'.

	* org-list.el (org-cycle-item-indentation):
	Use `org-looking-back'.

	* org-compat.el (org-looking-back): New function.

	* org.el (org-insert-heading): Catch before-first-headline when
	inserting a headline.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-format-image): Indent figure
	environment, so that it does not interrupt plain list.

	* org.el (org-open-at-point): Allow long link descriptions.

2010-04-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-html.el (org-export-as-html): Remove empty lines at the
	beginning of the exported text.

2010-03-12  Chong Yidong  <cyd@stupidchicken.com>

	* org.el (org): Remove from hypermedia group.

2010-03-10  Chong Yidong  <cyd@stupidchicken.com>

	* Branch for 23.2.

2010-02-15  Chong Yidong  <cyd@stupidchicken.com>

	* org-freemind.el (org-freemind-from-org-mode-node)
	(org-freemind-from-org-mode)
	(org-freemind-from-org-sparse-tree, org-freemind-to-org-mode):
	Pass arg to called-interactively-p.

2010-01-14  Juanma Barranquero  <lekktu@gmail.com>

	* org-protocol.el (org-protocol-flatten-greedy, org-protocol-flatten):
	Fix typos in docstrings.

2010-01-01  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-get-outline-path, org-speed-command-help):
	Fix typos in error messages.

2009-12-14  Juri Linkov  <juri@jurta.org>

	* org-html.el (org-export-html-style-include-default):
	Put `safe-local-variable booleanp' on
	`org-export-html-style-include-default' instead of mistakenly
	duplicate `org-export-html-style'.

2009-11-20  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-diary-entry-in-org-file):
	Rebuild agenda after adding new entry.

	* org-datetree.el (org-datetree-find-day-create): Fix regular
	expression.

	* org.el (org-display-outline-path): Use a format specifier for
	message, to avoid problems with heading containing `%'.

	* org-agenda.el (org-agenda-hide-tags-regexp): New option.
	(org-format-agenda-item): Call `org-agenda-fix-displayed-tags'.
	(org-agenda-fix-displayed-tags): New function.
	(org-agenda-do-context-action): Just call
	`org-display-outline-path', without piping the result through
	`message'.

	* org-latex.el (org-export-latex-preprocess): Protect secondary
	footnote references.

	* org-indent.el (org-indent-initialize): Avoid empty strings as
	line prefixes.

	* org-agenda.el (org-agenda-diary-entry-in-org-file): Make sure
	hat checking for the mark does not throw an error.
	(org-agenda-diary-entry-in-org-file): Catch the case that there is
	not `day' text property in the cursor line.

	* org.el (org-sort-entries-or-items): Make sure that the final
	entry has a newline before doing the sorting.

	* org-agenda.el (org-agenda-diary-entry-in-org-file): Get the text
	property at the beginning of the line.

	* org.el (org-make-link-string): Don't allow a description with
	only white space.

	* org-agenda.el (org-agenda-insert-diary-strategy): New variable.
	(org-agenda-insert-diary-as-top-level): New function.
	(org-agenda-add-entry-to-org-agenda-diary-file):
	Call `org-agenda-insert-diary-as-top-level'.

	* org.el (org-occur-in-agenda-files): Make sure none of the
	buffers is narrowed.
	(org-activate-plain-links): Add the face property here.
	(org-set-font-lock-defaults): Do not add the face to plain links,
	the activator function does this.

	* org-habit.el (org-is-habit-p): Add doc string.

	* org-archive.el (org-archive-subtree-default-with-confirmation):
	Autoload.

	* org-latex.el (org-export-latex-fontify): Fix regexp to make char
	after match optional (happens at the end of a line...).

	* org.el (org-fontify-meta-lines-and-blocks): Apply special faces
	for special blocks.

	* org-faces.el (org-copy-face): Set lisp indentation.
	(org-quote, org-verse): New faces.

	* org-agenda.el (org-agenda-remove-date): Remove variable.

	* org-freemind.el (org-freemind-escape-str-from-org): Fix encoding.

	* org-html.el (org-export-as-html): Move the home/up link into
	the content div.

	* org.el (org-export-latex-packages-alist): Option definition
	moved here from org-latex.el.

	* org-html.el (org-export-html-home/up-format): Add an ID to the
	up/home div.

	* org-wl.el (org-wl-store-link): Handle the case that
	`wl-use-petname' is set.

	* org.el (org-set-effort): Improve prompt.
	(org-get-outline-path): Widen to get full path.
	(org-compact-display-after-subtree-move): Function removed.

2009-11-20  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el (org-export-blocks-format-ditaa): Use sha1
	hash keys to cache and re-use images generated by the
	org-exp-blocks interface to ditaa and dot.

	* org.el (org-format-latex): Latex images are now saved to files
	named by the sha1 hash of the latex source text avoiding
	regeneration of identical images.

2009-11-15  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-as-latex): Add the :drawers property.

2009-11-15  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-speed-commands-user): Allow documentation headlines.
	(org-speed-commands-default): Organize the value of this constant
	with descriptive headlines.
	(org-print-speed-command): Output the headlines.

2009-11-15  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-show-outline-path): New option.
	(org-agenda-do-context-action): New function.
	(org-agenda-next-line, org-agenda-previous-line):
	Use `org-agenda-do-context-action'.

	* org.el (org-use-speed-commands): Allow function value.
	(org-speed-commands-default): Make headline motion safe, so that
	these commands always end on a headline.
	(org-speed-commands-default): New key `v' for `org-agenda'.
	(org-speed-move-safe): New function.
	(org-self-insert-command): Use the function value of
	`org-use-speed-commands'.
	(org-get-outline-path): Improve docstring.
	(org-format-outline-path): New function.
	(org-display-outline-path): New function.

2009-11-15  John Wiegley  <jwiegley@gmail.com>

	* org-clock.el (org-clock-resolve): If `org-clock-into-string' is
	a string, use that to find the LOGBOOK drawer.

2009-11-15  Glenn Morris  <rgm@gnu.org>

	* org-agenda.el (org-datetree-find-date-create)
	(org-habit-get-priority):
	* org.el (org-format-agenda-item): Fix declarations.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-clone-subtree-with-time-shift): Make it work at the
	end of the buffer.

	* org-mobile.el (org-mobile-write-checksums): Specify coding
	system.
	(org-mobile-timestamp-buffer): Keep local variable/mode line at
	beginning of buffer.

	* org-latex.el (org-latex-entities-regexp): Fix typo in regexp.

	* org.el (org-block-todo-from-children-or-siblings-or-parent)
	(org-block-todo-from-checkboxes): Do not block changes to a nil
	TODO state.

2009-11-13  James TD Smith  <ahktenzero@mohorovi.cc>

	* org-habit.el (org-habit-parse-todo): Indicate which habit is
	wrongly set up in the error messages.

	* org-colview.el (org-columns-display-here): Don't try to
	calculate values if the underlying property is not set.
	(org-columns-string-to-number): Convert age strings back into
	fractional days.
	(org-agenda-colview-summarize): Handle extended summary types
	properly.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-format-drawer-function): New variable.
	(org-export-format-drawer): New function.
	(org-export-preprocess-string): Pass the backend as a parameter to
	`org-export-remove-or-extract-drawers'.
	(org-export-remove-or-extract-drawers): New parameter BACKEND.

	* org-protocol.el (org-protocol-char-to-string): New defsubst.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-diary-entry-in-org-file): Add error
	message when no block is selected.

	* org-latex.el (org-export-latex-links): Check for protectedness
	in the last matched character, not after the match.

	* org-datetree.el (org-datetree-find-date-create):
	Respect restriction when KEEP-RESTRICTION is set.
	(org-datetree-file-entry-under): New function.
	(org-datetree-cleanup): New command.

2009-11-13  Dan Davison  <davison@stats.ox.ac.uk>

	* org-src.el (org-edit-src-code): New optional argument context
	allows calling functions to avoid altering the saved window
	configuration.
	(org-edit-src-exit): Do not restore window configuration when this
	function is used in the context of saving the edit buffer.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-out, org-clock-cancel): Revert to
	instances to switching to with-current-buffer, because these seem
	to cause problems - no idea why.

	* org-agenda.el (org-agenda-add-entry-to-org-agenda-diary-file):
	Require diary-lib for (diary-date-display-form).

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-log-reschedule, org-log-redeadline): New options.
	(org-log-note-headings): Add templates for rescheduling and
	deadline changing.
	(org-startup-options): Add in-buffer settings for logging changing
	schedule and deadline time stamps.
	(org-deadline, org-schedule): Check for existing date and arrange
	for logging if the user requests it.
	(org-add-log-note): Prepare proper note buffers for rescheduling
	and deadline changes.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-diary-entry-in-org-file)
	(org-agenda-add-entry-to-org-agenda-diary-file)
	(org-agenda-insert-diary-make-new-entry): New functions.
	(org-agenda-diary-entry):
	Call `org-agenda-diary-entry-in-org-file' when appropriate.

	* org.el (org-calendar-insert-diary-entry-key): New option.
	(org-agenda-diary-file): New option.
	("calendar"): Install our insertion function in the calendar.

	* org-remember.el (org-datetree): Require.
	(org-remember-templates): Add new positioning option.
	(org-remember-reference-date): New variable.
	(org-remember-apply-template): Store the reference date in a local
	variable.
	(org-remember-handler): Implement date tree positioning of entries.

	* org-datetree.el: New file.

	* org-latex.el (org-export-latex-preprocess): Protect targets in
	verbatim emphasis.

	* org-html.el (org-export-as-html): Protect targets in verbatim
	emphasis.

	* org-docbook.el (org-export-as-docbook): Protect targets in
	verbatim emphasis.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-show-notification): Handle messages that
	contain a percent character.

	* org-remember.el (org-remember-apply-template): Turn of partial
	completion.

	* org-mobile.el (org-mobile-before-process-capture-hook): New hook.
	(org-mobile-pull): Run `org-mobile-before-process-capture-hook'.

	* org.el (org-indent-mode): Define variable already in org.el.
	(org-unfontify-region): Remove line-prefix and wrap-prefix
	properties only if org-indent-mode is active.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-icalendar.el (org-print-icalendar-entries): Save match data
	around call to verify function.
	(org-print-icalendar-entries): Add a call to the verification
	function.

	* org.el (org-speedbar-set-agenda-restriction): Remove unnecessary
	save-restrivtion' form.

2009-11-13  Dan Davison  <davison@stats.ox.ac.uk>

	* org-exp.el (org-export-format-source-code-or-example):
	Restrict scope of preserve-indentp to the let binding.
	(org-src): Require org-src, since org-src-preserve-indentation is used.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-timer.el (org-timer-set-timer): Set variables
	org-timer-timer[123] correctly.

	* org-mobile.el (org-mobile-files-alist): Make it work when
	`agenda-archives' is included in
	`org-agenda-text-search-extra-files'.
	(org-mobile-push): Restore agenda after mobile push.

2009-11-13  John Wiegley  <jwiegley@gmail.com>

	* org-clock.el (org-resolve-clocks-if-idle): Another fix to the
	way the amount of idle time is presented in the minibuffer.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-icalendar.el (org-print-icalendar-entries):
	Use org-icalendar-verify-function only if non-nil.

	* org.el (org-refile): Refile to clock only if the prefix arg is
	2.
	(org-sparse-tree): Fix docstring to be in line with prompt.
	(org-update-parent-todo-statistics):
	Call `org-after-todo-statistics-hook' on each level.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-remember-apply-template): Make sure the
	buffer exists.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-tab-ind-state): New variable.
	(org-cycle-level): New function.
	(org-cycle-level-after-item/entry-creation): New option.
	(org-flag-subtree): New function.
	(org-hide-archived-subtrees): Call `org-flag-subtree'.
	(org-set-effort): Indexed access.

	* org-list.el (org-cycle-item-indentation): New function.

	* org.el (org-refile): Make prefix argument 2 refile to current
	clock.
	(org-priority): Interpret action `remove' as call to remove the
	priority cookie.

	* org-remember.el (org-remember-apply-template): Don't depend on
	buffer name being like file name.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-play-sound): Expand file in
	org-clock-sound, to allow ~ for home.

	* org-remember.el (org-remember-handler):
	Set text-before-node-creation even if this already looks like a node,
	because the string might be needed on non-org-mode target files.

	* org-agenda.el (org-agenda-open-link): Make this work in agenda
	clocktables.
	(org-agenda-switch-to): Follow a link at point if
	org-return-follows-link' is set and there is nothing else to do in
	this line.

2009-11-13  Dan Davison  <davison@stats.ox.ac.uk>

	* org-exp-blocks.el: Modify split separator regexp to avoid empty
	strings.

2009-11-13  James TD Smith  <ahktenzero@mohorovi.cc>

	* org-colview.el (org-columns-new): Make this work with the new
	operators.
	(org-columns-store-format): Make this work with the new operators.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-src.el (org-src-preserve-indentation): Document that this
	variable is also used during export.

	* org-exp.el (org-export-format-source-code-or-example):
	Preserve indentation if a block has a -i option, or if
	`org-src-preserve-indentation' is set.

	* org-exp-blocks.el (org-export-blocks-preprocess):
	Preserve indentation if a block has a -i option, or if
	`org-src-preserve-indentation' is set.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-mode-map): Define the new archiving keys.
	(org-speed-commands-default): Define an archiving key in the speed
	command map.
	(org-org-menu): Improve the menu structure concerning archiving.

	* org-archive.el (org-archive-subtree-default-with-confirmation):
	New command.

	* org-agenda.el (org-agenda-mode-map): Define the new archiving keys.
	(org-agenda-menu): Add the new archiving commands to the menu.
	(org-agenda-archive-default)
	(org-agenda-archive-default-with-confirmation): New commands.
	(org-agenda-archive, org-agenda-archive-to-archive-sibling):
	Just call `org-agenda-archive-with'.
	(org-agenda-archive-with): New function.

	* org-table.el (org-table-convert-region): Inert spaces around "|"
	to avoid line beginnings like "|-1" which will be mistaken as
	hlines.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-offer-links-in-entry): Return nil if there are no
	links, t if a link has been selected.
	(org-open-at-point): Open attachment directory when called in the
	headline and there are no links in the entry body.
	(org-speed-commands-default): Add "o" for open-at-point as a speed
	command.

	* org-attach.el (org-attach-reveal): Optional prefix arg
	IF-EXISTS, which avoids creating the attachment directory if it
	does not yet exist.

	* org-agenda.el (org-agenda, org-run-agenda-series):
	Evaluate MATCH.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el ("abbrev"): Work with abbrev tables only after they have
	been loaded.

	* org-list.el (org-list-send-list): Fix bug related to match
	data.

	* org-latex.el (org-export-latex-fontify): Apply verbatim
	emphasis.
	(org-export-latex-make-header): Insert \obeylines if line breaks
	should be preserved.

	* org-exp.el (org-export-protect-verbatim): Add an
	`org-verbatim-emph' property to such text.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-icalendar.el (org-icalendar-use-plain-timestamp): New option.
	(org-print-icalendar-entries): Skip entries where the timestamp is
	not a deadline and not scheduled, if the user requests that.

	* org-latex.el (org-export-latex-quotation-marks): Allow a bracket
	before an opening quote.

	* org-archive.el (org-archive-subtree): Keep archive after
	archiving something.

	* org-id.el (org-id-update-id-locations): Add archive files if
	that is required by `org-id-extra-files'.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-src.el (org-src-window-setup): New option.
	(org-src-switch-to-buffer): New function.
	(org-edit-src-exit): Add optional argument CONTEXT and use it to
	restore window configuration.
	(org-edit-src-code, org-edit-src-continue, org-edit-src-exit):
	Call `org-src-switch-to-buffer'.

	* org.el (org-default-properties): Add STYLE property.
	(org-files-list): Use the function call to get the files.
	(org-additional-option-like-keywords): Add SETUPFILE to completion
	list.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-convert-region): Correctly interpret
	quoting in csv import.

	* org.el (org-icompleting-read): Make iswitchb completion work
	with lists and tables.

	* org-agenda.el (org-agenda-add-entry-text): Never add entry text
	while pushing the mobile agenda.

2009-11-13  John Wiegley  <jwiegley@gmail.com>

	* org-clock.el (org-clock-auto-clock-resolution): Now takes three
	values: nil, t and `when-no-clock-is-running'.
	(org-clock-in): Use `org-clock-auto-clock-resolution' to determine
	whether or not to resolve Org buffers on clock in.

2009-11-13  James TD Smith  <ahktenzero@mohorovi.cc>

	* org-colview.el (org-format-time-period): Function to format
	times in fractional days for display.
	(org-columns-display-here): Add support for showing a calculated
	value in place of the property.
	(org-columns): Set `org-columns-time' to the current time so time
	difference calculations will work.
	(org-columns-time): Use to store the current time when column view
	is displayed, so all time differences will use the same reference
	point.
	(org-columns-compile-map): There is now an extra position in each
	entry specifying the function to use to calculate the displayed
	value for the non-calculated properties in the column.
	(org-columns-compute-all): Set `org-columns-time' to the current
	time so time difference calculations will work.
	(org-columns-compute): Handle column operators where the values
	used are calculated from the underlying property.
	(org-columns-number-to-string): Handle the 'age' column format.
	(org-columns-string-to-number): Correct the function name (was
	org-column...).  Add support for the 'age' column format.
	(org-columns-compile-format): Support the additional parameter in
	org-columns-compile-map.

2009-11-13  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-mode-hook): Turn `org-mode-hook' into a customizable
	variable.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-has-been-used): New variable.
	(org-clock-in): Set `org-clock-has-been-used'.
	(org-clock-save): Save only if clock data has been used or created
	during this session.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-persist): New value, to store only the
	clock history.
	(org-clock-save): Don't save the clock if only the history should
	be stored.
	(org-clock-load): Turn off John Wiegley's auto resolving mechanism
	when restoring a saved clock.

2009-11-13  John Wiegley  <jwiegley@gmail.com>

	* org-clock.el (org-clock-display, org-clock-put-overlay):
	Use `org-time-clock-use-fractional'.

	* org.el (org-time-clocksum-use-fractional)
	(org-time-clocksum-fractional-format): Two new customizable
	variables which allow the user to select fractional times (1.25
	instead of 1:25) in the `org-clock-display' report.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-ascii.el (org-export-ascii-table-keep-all-vertical-lines):
	New option.

	* org.el (org-tag-alist): Fix customization type.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mobile.el (org-mobile-update-checksum-for-capture-file):
	Make sure the regexp search can fail without throwing an error.
	(org-mobile-apply): Save the inbox buffer after removing
	successfully applied changes.

2009-11-13  John Wiegley  <jwiegley@gmail.com>

	* org-clock.el (org-resolve-clocks-if-idle): Fix to the way idle
	time is reported after the user comes back (but before they
	resolve time).

	* org.el (org-get-repeat): Change so that this function can be
	called with either `org-scheduled-string' or
	`org-deadline-string'.

	* org-clock.el (org-clock-auto-clock-resolution): Rename from
	`org-clock-disable-clock-resolution', since negatives don't sound
	good in customization variables.
	(org-clock-in): Don't use the auto-resolution logic if the user is
	clocking into a different task while an active clock is running.
	This then allows the default behavior of clocking out of the open
	task and then into the new task.

	* org.el (org-modules): Made this variable more consistent, since
	it was referring to Org, OrgMode and Org-mode, whereas the docs
	for the variable always refer to Org-mode.

2009-11-13  James TD Smith  <ahktenzero@mohorovi.cc>

	* org.el (org-repeat-re): The changed org-repeat-re no longer
	matched simple +2d type repeaters.  Fix it so it does.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Protect the vspace
	macro in the VERSE environment.

2009-11-13  John Wiegley  <jwiegley@gmail.com>

	* org-habit.el (org-habit-get-priority): A new function that
	determines the relative priority of a habit, based on how long
	past its scheduled date it is, and how near the deadline is.

	* org-agenda.el (org-agenda-get-scheduled): Set habit priority
	using `org-habit-get-priority'.

	* org-habit.el (org-habit-build-graph): Start displaying colors
	from the first scheduled date, if that date is earlier than the
	first completion date.

	* org-habit.el: Changed all "color" variables to faces, and made
	them appropriate for light and dark backgrounds.

	* org-habit.el (org-habit-duration-to-days): Made this function
	more general.
	(org-habit-parse-todo): Parse the new ".+N/N" style repeater.

	* org-agenda.el (org-agenda-get-deadlines): Remove all mention of
	habits, since they don't use DEADLINE anymore.

	* org.el (org-repeat-re, org-display-custom-time)
	(org-timestamp-change): Extend to support the new ".+N/N"
	syntax, used for habits.

	* org-clock.el (org-clock-resolve-clock): Fix an incorrect
	variable reference.

	* org-agenda.el (org-agenda-set-mode-name): Show Habit in the
	modeline when habits are being displayed (if that module is being
	loaded).

2009-11-13  James TD Smith  <ahktenzero@mohorovi.cc>

	* org-clock.el (org-x11-idle-seconds): Add a method to get the X11
	idle time using the xscreensaver extension.
	(org-user-idle-seconds): Use X11 idle time if available.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-next-line): New command.
	(org-agenda-previous-line): New commands.
	(org-agenda-show-and-scroll-up, org-agenda-show-scroll-down):
	New commands.
	(org-agenda-follow-mode): Do the follow immediately if the mode is
	turned on here.
	(previous-line, next-line): Replace keys with the corresponding
	org functions.
	(org-agenda-mode-map): Bind backspace and delete to the scrolling
	command.

	* org.el (org-icompleting-read): Turn off partial completion mode
	for the duration of this completion round.

	* org-latex.el (org-export-latex-fontify-headline): Protect TeX
	macros in author lines and similar stuff.

	* org.el (org-file-tags): Fix docstring.
	(org-get-buffer-tags): Add the #+FILETAGS tags.
	("ecb"): Make ecb show context after jumping into an Org file.

2009-11-13  John Wiegley  <johnw@newartisans.com>

	* org-agenda.el (org-finalize-agenda): Draw habit consistency
	graphs after everything else in the buffer has been setup.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mobile.el (org-mobile-apply): Count success and failure.

	* org.el (org-indent-line-function): Fix regexp replace problem.

2009-11-13  John Wiegley  <johnw@newartisans.com>

	* org-clock.el (org-clock-disable-clock-resolution):
	New customization variable that disable automatic clock resolution on
	clock in.
	(org-clock-in): If `org-clock-disable-clock-resolution' is set, do
	not automatically resolve anything.  This is does not affect
	idle-time resolution, however, if `org-clock-idle-time' is set.

2009-11-13  John Wiegley  <johnw@newartisans.com>

	* org-habit.el: New file, which implements code to build a "habit
	consistency graph".

	* org-agenda.el (org-agenda-get-deadlines)
	(org-agenda-get-scheduled): Display consistency graphs when
	outputting habits into the agenda.  The graphs are always relative
	to the current time.
	(org-format-agenda-item): Add new parameter `habitp', which
	indicates whether we are formatting a habit or not.  Do not
	display "extra" leading information if habitp is true.

	* org.el (org-repeat-re): Improve regexp to include .+ and ++
	leaders for repeat strings.
	(org-get-repeat): Now takes a string parameter `tagline', so the
	caller can obtain the SCHEDULED repeat, or the DEADLINE repeat.

2009-11-13  John Wiegley  <johnw@newartisans.com>

	* org-agenda.el (org-agenda-auto-exclude-function):
	New customization variable for allowing the user to create an "auto
	exclusion" filter for doing context-aware auto tag filtering.
	(org-agenda-filter-by-tag): Changes to support the use of
	`org-agenda-auto-exclude-function'.  See the new manual addition.

2009-11-13  John Wiegley  <johnw@newartisans.com>

	* org.el (org-files-list): Don't attempt to return a file name for
	Org buffers which have no associated file.

	* org-agenda.el (org-agenda-do-action): Fix a typo.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mobile.el (org-mobile-locate-entry): Interpret files
	relative to org-directory.
	(org-mobile-inbox-for-pull): Document the best location for this
	file.
	(org-mobile-check-setup): Verify `org-directory'.
	(org-mobile-create-index-file): Sort the files to be listed in
	index.org.

2009-11-13  James TD Smith  <ahktenzero@mohorovi.cc>

	* org.el (org-fast-tag-selection): Add a way to display a
	description for a tag group.  This is done by adding a string to
	either the startgroup or endgroup cell.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-resolve, org-resolve-clocks)
	(org-emacs-idle-seconds): Use `org-float-time' instead of
	`time-to-seconds'.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-sorting-strategy): Fix customization
	type.

	* org.el (org-pre-cycle-hook): Document that `empty' can also be
	the value of ARG when doing local cycling.

2009-11-13  John Wiegley  <johnw@newartisans.com>

	* org-clock.el (org-clock-resolve-clock): If keeping or
	subtracting time results in a clock out at a time in the past, and
	if the resolution occurred due to idleness or invoking `M-x
	org-resolve-clocks', remember that past moment in time.  On the
	next clock in, the user will be prompted to see if they want to
	back-date their new clock to then.
	(org-clock-resolve): Do not jump the user to the location of a
	dangling clock if the resolution is occurring due to an idle
	timeout.  In that case there is typically only one dangling clock,
	the active one, and there is no value gained by shuffling their
	windows around to show it to them.  Being prompted to resolve an
	idle clock should be as inobtrusive as possible.
	(org-resolve-clocks-if-idle): New function that resolves only the
	currently active clock if the user has exceeded the time returned
	by `org-user-idle-seconds', based on the value of
	`org-clock-idle-time'.
	(org-clock-in): If, after resolving clocks, (???)
	(org-clock-out): Cancel the `org-clock-idle-timer' on clock out.

	* org-clock.el (org-clock-resolve-clock): New function that
	resolves a clock to a specific time, closing or resuming as need
	be, and possibly even starting a new clock.
	(org-clock-resolve): New function used by `org-resolve-clocks'
	that sets up for the call to `org-clock-resolve-clock'.
	It determines the time to resolve to based on a single-character
	selection from the user to either keep time, subtract away time or
	cancel the clock.
	(org-resolve-clocks): New user command which resolves dangling
	clocks -- that is, open but not active -- anywhere in the file
	list returned by `org-files-list'.
	(org-clock-in): Automatically resolve dangling clocks whenever a
	user clocks in.
	(org-clock-cancel): If the user cancels the solely clock in a
	LOGBOOK, remove the empty drawer.

	* org-clock.el (org-clock-idle-time): New user customizable option
	for detecting whether the user has left a clock idle.  Note: it is
	only used in this commit to test whether it's worthwhile to check
	OS X to get the Mac user's current idle time.  If the Emacs idle
	time is less than the value, the user hasn't been away long enough
	to be worth checking (a more expensive test than just getting
	Emacs idle time).
	(org-user-idle-seconds, org-mac-idle-seconds)
	(org-emacs-idle-seconds): This three functions, in conjunction
	with the user customization variable `org-clock-idle-time', return
	the number of seconds (as a floating point) that the user has been
	away from their Emacs (or, if running on OS X, their computer).

	* org-clock.el (org-find-open-clocks): New function that returns a
	list of all open clocks in the given FILE.  Note that each clock
	it returns is a cons cell of the format (MARKER . START-TIME).
	This "clock" value is used by several of the new clock module
	utility functions.
	(org-is-active-clock): New inline function which tests whether the
	given clock value is the same as the currently active clock.
	Returns non-nil if this is the case.
	(org-with-clock-position): New macro that evaluates FORMS with
	point in the buffer and at the position of the given clock.
	Changes to the current clock are global.
	(org-with-clock): New macro that evaluates FORMS with point in the
	buffer and at the position of the given clock.  However, changes
	to the current clock are local and have no effect on the user's
	active clock.  This allows, for example, far any clock to be
	canceled without canceling the active clock.
	(org-clock-clock-in): New inline function that switches the active
	clock to the given clock.  If either the argument RESUME, or the
	global `org-clock-in-resume', are non-nil, it will resume a clock
	that was previously left open.
	(org-clock-clock-out): New inline function that clocks out the
	given clock value without affecting the currently active clock.
	(org-clock-clock-cancel): New inline function that cancels the
	given clock value without affecting the currently active clock.

	* org-clock.el (org-clock-in): Before creating
	`org-clock-mode-line-timer', check to make sure an older timer is
	not currently running.
	(org-clock-out): Accept new third parameter `at-time', which
	permits a clock to be clocked out at a specific time.  Note that
	no attempt is made to verify that the clock out time is later than
	the clock in time.

	* org.el (org-files-list): New utility function for returning a
	list of all open org-mode buffers, plus all files used to build
	the agenda buffer.  Note that not all the files will necessarily
	be visited by a buffer at time of call.
	(org-entry-beginning-position): Like the function
	`line-beginning-position', this inline function returns the
	beginning position of the current heading/entry.
	(org-entry-end-position): Like the function `line-end-position',
	this inline function returns the end position of the current
	heading/entry.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-list): Mark the all-todo items line as
	a header line.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-inlinetask-remove-END-maybe): Declare function.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-filter-make-matcher): Allow to filter
	entries that have no tags.
	(org-agenda-search-view): New customize group.
	(org-agenda-search-view-search-words-only): New option.
	(org-search-view): Implement substring search.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-outline-level): Add doc string.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-inlinetask.el (org-inlinetask-export): Re-introduce
	variable.
	(org-inlinetask-export-handler): Only export inline task if the
	user option calls for it.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-handle-export-tags): Remove inlinetask
	END if present.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-tables): Don't format in
	protected regions.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-src.el (org-edit-src-code)
	(org-edit-src-find-region-and-lang, org-edit-src-exit):
	Handle macro editing.

	* org-agenda.el (org-prefix-category-max-length): New variable.
	(org-format-agenda-item): Use `org-prefix-category-max-length'.
	(org-compile-prefix-format): Set `org-prefix-category-max-length'.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mobile.el (org-mobile-create-index-file): Improve the
	listing of tags and todo keywords.

	* org-latex.el (org-export-latex-format-image): New function.
	(org-export-latex-links): Use `org-export-latex-format-image'.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-inlinetask.el (org-inlinetask-get-current-indentation)
	(org-inlinetask-remove-terminator): New functions.
	(org-inlinetask-export-handler): Terminate the description list.

	* org-exp.el (org-export-select-backend-specific-text): Remove the
	region markers.

	* org-inlinetask.el (org-inlinetask-export-handler): Fix bug for
	tasks without content.

	* org-clock.el: Make sure the clock-in target position does not
	move to a different node by widening the buffer.

	* org-html.el (org-export-html-format-image): Wrap image into
	figure div only when there is a caption.

	* org-archive.el (org-archive-mark-done): Change default value to
	nil.

2009-11-13  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-context): Call `bobp', not `eobp'.

	* org-clock.el (org-clock-cancel): Remove quotes from marker
	variables.

	* org.el (org-read-date-prefer-future): New allowed value `time'.
	(org-read-date-analyze): Shift day to tomorrow depending on time
	entered and value of `org-read-date-prefer-future'.

2009-11-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org.el (org-version, org-get-refile-targets, org-refile)
	(org-store-log-note, org-diary-to-ical-string)
	(org-speedbar-set-agenda-restriction):
	* org-publish.el (org-publish-find-title):
	* org-plot.el (org-plot/gnuplot):
	* org-mouse.el (org-mouse-do-remotely):
	* org-mobile.el (org-mobile-move-capture):
	* org-mac-message.el (org-mac-message-insert-flagged):
	* org-latex.el (org-replace-region-by-latex):
	* org-docbook.el (org-replace-region-by-docbook):
	* org-clock.el (org-clock-out, org-clock-cancel):
	* org-bibtex.el (org-execute-file-search-in-bibtex):
	Use with-current-buffer.

2009-10-04  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-directory, org-map-entries):
	* org-clock.el (org-clock-get-clocked-time): Fix typos in docstrings.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-set-tags-to): New command.

	* org-latex.el (org-export-latex-set-initial-vars): Also check in
	the plist.

	* org.el (org-additional-option-like-keywords): Add LATEX_CLASS
	keyword.

	* org-exp.el (org-infile-export-plist): Add LATEX_CLASS keyword.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-inlinetask.el (org-inlinetask-export): Option removed.
	(org-inlinetask-export-handler): Better export.

	* org-xoxo.el (org-export-xoxo-final-hook): New hook.
	(org-export-as-xoxo): Run the new hook.

	* org-html.el (org-export-html-final-hook): New hook.
	(org-export-as-html): Run the new hook.

	* org-docbook.el (org-export-docbook-final-hook): New hook.
	(org-export-as-docbook): Run the new hook.

	* org-ascii.el (org-export-ascii-final-hook): New hook.
	(org-export-as-ascii): Run the new hook.

	* org-latex.el (org-export-latex-treat-sub-super-char): Allow a
	space character as the character before the ^/_.
	(org-export-latex-final-hook): New hook.
	(org-export-as-latex): Run `org-export-latex-final-hook'.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-macs.el (org-if-unprotected-at): Fix docstring.

	* org-agenda.el (org-agenda-change-all-lines): Handle invisible
	text in the prefix (if category is a link).

	* org-latex.el (org-export-latex-preprocess): Deal properly with
	empty lines in verse environments.

	* org.el (org-format-latex-header): Inline fullpage.sty.

	* org-footnote.el (org-footnote-create-definition): Reveal context
	to add a new footnote definition.

	* org.el (org-ctrl-c-ctrl-c): Pass prefix arg to
	org-table-recalculate when cursor is in TBLFM line.

	* org-list.el (org-renumber-ordered-list): Fix cursor position
	when bullet length has changed.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-format-latex): Mention `org-format-latex-options' in
	the docstring.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-agenda-get): New function.

	* org-agenda.el (org-agenda-post-command-hook): No longer move
	point away from end of line.
	(org-agenda-add-entry-text, org-agenda-collect-markers)
	(org-finalize-agenda, org-agenda-mark-clocking-task)
	(org-agenda-dim-blocked-tasks, org-agenda-entry-text-show-here)
	(org-agenda-entry-text-show, org-agenda-highlight-todo)
	(org-agenda-compare-effort, org-agenda-filter-apply)
	(org-agenda-later, org-agenda-change-time-span)
	(org-agenda-post-command-hook, org-agenda-show-priority)
	(org-agenda-show-tags, org-agenda-goto, org-agenda-kill)
	(org-agenda-archive, org-agenda-archive-to-archive-sibling)
	(org-remove-subtree-entries-from-agenda, org-agenda-refile)
	(org-agenda-open-link, org-agenda-copy-local-variable)
	(org-agenda-switch-to, org-agenda-check-no-diary)
	(org-agenda-tree-to-indirect-buffer, org-agenda-todo)
	(org-agenda-add-note, org-agenda-change-all-lines)
	(org-agenda-priority, org-agenda-set-tags)
	(org-agenda-set-property, org-agenda-set-effort)
	(org-agenda-toggle-archive-tag, org-agenda-date-later)
	(org-agenda-show-new-time, org-agenda-date-prompt)
	(org-agenda-schedule, org-agenda-deadline, org-agenda-action)
	(org-agenda-clock-in, org-agenda-bulk-mark)
	(org-agenda-bulk-unmark, org-agenda-show-the-flagging-note):
	Use `org-get-at-bol'.

	* org-colview.el (org-columns-display-here)
	(org-columns-edit-allowed, org-agenda-columns):
	Use `org-get-at-bol'.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-special-ctrl-a/e): Improve documentation and
	customize type.
	(org-end-of-line): Don't jump to after the ellipsis.
	(org-mode-map): Bind <home> and <end> as well.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-fontify-meta-lines-and-blocks): Treat lines with a
	space after #+ as comments.
	(org-open-at-point): Run `org-follow-link-hook' always.

	* org-latex.el (org-export-latex-emph-format): Use better commands
	to insert special characters in verbatim snippets.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-faces.el (org-copy-face): New function.  Use it to create
	various faces formerly created by using `copy-face'.

	* org-agenda.el (org-prepare-agenda): Don't officially mark this
	window dedicated.
	(org-agenda-quit): Kill the frame containing the agenda window if
	that frame was created for the agenda.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-date-prompt): Mark the changed time
	stamp in the agenda.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-prepare-agenda):
	Reset `org-drawers-for-agenda'.
	(org-prepare-agenda): Uniquify list of drawers.

	* org.el (org-complex-heading-regexp-format): New variable.
	(org-set-regexps-and-options):
	Define `org-complex-heading-regexp-format'.
	(org-drawers-for-agenda): New variable.
	(org-map-entries): Bind `org-drawers-for-agenda'.
	(org-prepare-agenda-buffers): Add to `org-drawers-for-agenda'.

	* org-remember.el (org-go-to-remember-target)
	(org-remember-handler): Use `org-complex-heading-regexp-format'.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-highlight-todo): Fix text property
	problem.

	* org.el (org-on-heading-p, org-at-heading-p): Make sure these are
	always with `invisible-ok'.
	(org-store-link): No error when there is nothing to link to in the
	agenda.

	* org-list.el (org-update-checkbox-count): Insert changed cookie
	before the old, to avoid problems with invisibility at the end of
	the line.
	(org-update-checkbox-count): Insert changed cookie before the old,
	to avoid problems with invisibility at the end of the line.

	* org.el (org-sort-entries-or-items): Include the final newline.
	(org-fontify-meta-lines-and-blocks): Add indented dynamic block
	lines for fontification.
	(org-dblock-start-re, org-dblock-end-re): Allow indentation.
	(org-prepare-dblock): Store the current indentation of the BEGIN
	line.
	(org-update-dblock): Apply the indentation of the begin line to
	the rest of the block.
	(org-ctrl-c-ctrl-c): Also find indented dblock lines.
	(org-startup-folded): New allowed value `showeverything'.
	(org-startup-options): Add STARTUP keyword `showeverything'.
	(org-set-startup-visibility): Respect value `showeverything' in
	org-startup-folded.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-closest-date): Fix issue with past preference.

	* org-archive.el (org-archive-set-tag)
	(org-archive-subtree-default): New commands.

	* org-clock.el (org-clock-clocktable-default-properties):
	New option.
	(org-clock-report):
	Use `org-clock-clocktable-default-properties'.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-iswitchb-completing-read): Fix typo.

	* org-crypt.el: New file.

	* org.el: Add an entry for org-crypt.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-menu): Reorganize the menu for more
	consistency.
	(org-batch-store-agenda-views): New function.
	(org-agenda-title-append): Define variable.
	(org-write-agenda): New export to Org files.
	(org-agenda-get-some-entry-text): New arguments INDENT and KEEP.
	(org-agenda): Allow to keep the restricted file list if a special
	variable is bound to t.
	(org-agenda): Define a special agenda view for working on flagged
	entries.
	(org-agenda-get-restriction-and-command): List the new agenda
	view.
	(org-agenda-show-the-flagging-note): New command.
	(org-agenda-mode-map): New key `?' for looking at the flagging
	note.

	* org.el (org-autoload): Autoload org-mobile.el.
	(org-org-menu): Add menu commands for MobileOrg in the Org menu.

	* org-mobile.el: New file.

	* org-id.el (org-id-get): Fix bug with forcing ID on an item.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (orgtbl-line-start-regexp): Match also TBLNAME
	statements.
	(org-table-get-remote-range): Match indented #+TBLNAME
	statements.

	* org.el (org-convert-to-odd-levels)
	(org-convert-to-oddeven-levels): Work also correctly if the file
	is in outline-mode.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-store-link): When in agenda buffer, link to
	referenced entry.
	(org-add-planning-info): Remove spaces at eol.

	* org-macs.el (org-with-point-at): Add a `lisp-indent-function'
	property.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-first-lines): Fix problem with
	LaTeX export of first line and selected subtree.

	* org.el (org-shifttab): Interpret arg differently when using only
	odd levels.

2009-10-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-check-agenda-file): Use a more explicit message.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-remove-special-table-lines): Don't remove
	normal lines.

2009-10-01  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-offer-links-in-entry): Don't use "Select link" as a
	prompt in the temporary window.

	* org-agenda.el (org-agenda-bulk-mark): Use a slightly soberer
	prefix for marked entries in the agenda view.

2009-10-01  Andreas Burtzlaff  <andy13@gmx.net>  (tiny change)

	* org.el (outline-end-of-subtree): Bugfix: advise this function in
	a way that prevents any trailing character from being displayed.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-menu): Fix bugs in the bulk action
	menu.

	* org-exp.el (org-export-remove-special-table-lines): Remove bad
	slow regexp match.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Do not protect in
	the LaTeX header.

	* org-src.el (org-edit-src-save): Save window setup while saving.
	(org-edit-src-code): Use new buffer name construction scheme.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-entry-text-exclude-regexps):
	New variable.
	(org-agenda-entry-text-cleanup-hook): New hook.
	(org-agenda-get-some-entry-text): Remove matches of
	`org-agenda-entry-text-exclude-regexps' and run the hook
	`org-agenda-entry-text-cleanup-hook'.

	* org.el (org-offer-links-in-entry): New argument ZERO to
	implement a link with index zero.
	(org-cycle-show-empty-lines): Not keep empty line under header
	hidden.
	(org-iswitchb-completing-read): Bind `switchb-use-virtual-buffers'
	to nil for special completion.
	(org-store-link): Don't error before the first heading.

	* org-agenda.el (org-agenda-open-link): Pass the prefix to
	`org-offer-links-in-entry'.

2009-10-01  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-quit): Provide the window argument for
	`window-dedicated-p', Emacs 22 needs it.
	(org-format-agenda-item): If the category is a link, arrange for
	invisible text to replaced with spaces.
	(org-compile-prefix-format): Add the extra space.
	(org-prefix-category-length): New variable.

	* org-exp.el (org-export-cleanup-toc-line): Remove footnote
	references from TOC lines.

	* org.el (org-selected-window): New variable.

	* org-table.el (org-table-edit-formulas): Remember the selected
	window.
	(org-table-fedit-finish, org-table-fedit-abort): Select the window
	that was originally selected.

	* org-exp.el (org-export-preprocess-apply-macros): Scan the
	expansion of a macro for more macro definitions.

	* org-agenda.el (org-agenda-dim-blocked-tasks): Make sure the
	invisibility overlay starts on the newline.

2009-10-01  Glenn Morris  <rgm@gnu.org>

	* org-agenda.el (calendar-check-holidays):
	* org-exp.el (org-agenda-skip):
	* org-list.el (outline-back-to-heading):
	* org-wl.el (wl-summary-goto-folder-subr):
	* org.el (iswitchb-mode, remember, remember-buffer-desc)
	(remember-finalize, remember-save-after-remembering, remember-register)
	(remember-buffer, remember-handler-functions)
	(remember-annotation-functions): Remove unused declarations.

	* org.el (iswitchb-read-buffer): Fix declaration.

2009-09-30  Glenn Morris  <rgm@gnu.org>

	* org-compat.el (w32-focus-frame):
	* org-exp-blocks.el (R):
	* org-exp.el (htmlize-buffer):
	* org-protocol.el (server-edit):
	* org-table.el (org-format-org-table-html):
	* org.el (org-indent-mode): Fix declarations.

	* org-colview.el (org-columns-uncompile-format): Avoid assignment to
	free variable `fun'.

2009-09-29  Juanma Barranquero  <lekktu@gmail.com>

	* org-agenda.el (org-agenda-restore-windows-after-quit):
	Fix typo in docstring.

2009-09-23  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-tree-to-indirect-buffer, org-convert-to-oddeven-levels)
	(org-shiftselect-error, org-ctrl-c-ctrl-c):
	* org-agenda.el (org-agenda-undo, org-check-for-org-mode):
	* org-attach.el (org-attach-check-absolute-path):
	* org-docbook.el (org-export-as-docbook):
	* org-html.el (org-export-as-html):
	* org-id.el (org-id-update-id-locations):
	* org-table.el (org-table-fedit-lisp-indent, orgtbl-send-table):
	Fix typos in error messages.

2009-09-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org-ascii.el: Require CL for the `loop' macro.

2009-09-05  Carsten Dominik  <dominik@u016822.science.uva.nl>

	* org-gnus.el (require): Wrap (require gnus-sum) into
	eval-when-compile.

2009-09-03  Carsten Dominik  <dominik@u016822.science.uva.nl>

	* org-protocol.el (org-protocol-store-link)
	(org-protocol-remember, org-protocol-open-source): Remove autoload
	cookies again.

	* org-agenda.el (org-agenda-dim-blocked-tasks): Make sure we are
	referencing the start of the line.

	* org-gnus.el: Remove unnecessary declare-function forms.
	(gnus-sum): Always require gnus-sum.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-protocol.el (org-protocol-store-link)
	(org-protocol-remember, org-protocol-open-source): Add autoloads.

	* org-compat.el (org-float-time): New function.

	* org.el (org-clock-update-time-maybe)
	(org-sort-entries-or-items, org-do-sort)
	(org-evaluate-time-range, org-time-string-to-seconds)
	(org-closed-in-range): Use `org-float-time'.

	* org-timer.el (org-timer-start, org-timer-pause-or-continue)
	(org-timer-seconds): Use `org-float-time'.

	* org-clock.el (org-clock-get-clocked-time, org-clock-out)
	(org-clock-sum, org-dblock-write:clocktable)
	(org-clocktable-steps): Use `org-float-time'.

	* org-agenda.el (org-agenda-last-marker-time)
	(org-agenda-new-marker, org-diary): Use `org-float-time'.

	* org-compat.el (w32-focus-frame): Declare the w32-focus-frame
	function.

	* org-exp.el (org-get-file-contents): Only protect lines that
	really need it.

	* org-html.el (require): Require cl for compilation.

	* org.el: Avoid using `default-major-mode'.

	* org-plot.el (require): Require CL only at compile time.

	* org-exp.el (require): Require CL only at compile time.

	* org-agenda.el (org-agenda-quit): When the agenda window is
	dedicated, remove other windows before exiting, so that the frame
	really will be killed.

	* org-exp.el (org-export-handle-include-files): Reset START and
	END for each loop cycle.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-eval-in-calendar):
	Use `org-select-frame-set-input-focus'.

	* org-compat.el (org-select-frame-set-input-focus): New function.

	* org.el (org-update-statistics-cookies): New function.
	(org-mode-map): Bind `C-c #' to `org-update-statistics-cookies'.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-src.el (org-edit-fixed-width-region): Set org-src-mode only
	after the local variables are set.

	* org-latex.el (org-export-latex-protect-amp): New function.
	(org-export-latex-links): Protect link ampersands in tables.

	* org-exp.el (org-export-select-backend-specific-text): Match in
	two steps, to avoid regexp problems.

	* org.el (org-offer-links-in-entry): Improve working with many and
	duplicate links.

	* org-agenda.el (org-agenda-show-1): Make more consistent with
	normal cycling.
	(org-agenda-cycle-show): Make more consistent with normal cycling.

	* org-gnus.el (org-gnus-store-link): Restore the linking to a
	website.

2009-09-02  Bastien Guerry  <bzg@gnu.org>

	* org-latex.el (org-export-latex-first-lines): Bugfix.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-modify-effort-estimate): Emit message
	about new effort.

	* org.el (org-set-effort): New function.
	(org-mode-map): New key for effort setting command.

	* org-agenda.el (org-agenda): Keep window setup when calling
	agenda from within agenda window.
	(org-agenda-mode-map): New keys for effort setting commands.
	(org-agenda-menu): Add effort setting commands to menu.
	(org-agenda-set-property, org-agenda-set-effort): New functions.

	* org-latex.el (org-export-latex-tables):
	Fix `org-table-last-alignment' and `org-table-last-column-widths' if
	the first column has been removed.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-remove-timestamp-with-keyword): Only remove in
	entry, not in subtree.

	* org-src.el (org-src-lang-modes): Add abbreviation elisp for
	emacs lisp.

	* org.el (org-open-at-point): When on headline, offer all strings
	in entry.

	* org-remember.el (org-remember-templates): Documentation fix.

	* org.el (org-move-subtree-down): Use `org-get-next-sibling' and
	`org-get-last-sibling' instead of the outline versions of these
	functions.
	(org-get-last-sibling): New function.
	(org-refile): Use `org-get-next-sibling' instead of the outline
	version of this function.
	(org-clean-visibility-after-subtree-move):
	Use `org-get-next-sibling' and `org-get-last-sibling' instead of the
	outline versions of these functions.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-prepare-agenda): When creating a new frame
	for the agenda, make the window dedicated.

	* org-agenda.el (org-agenda-mode-map): New keys for time motion.

	* org-table.el (org-table-align): Change the order of reinsertion
	and deletion, to avoid problems with overlays following the table.

	* org.el (org-parse-time-string): Better error message.
	(org-show-subtree): Use org-end-of-subtree.

	* org-macs.el (org-goto-line): New defsubst.

	* org.el (org-open-file, org-change-tag-in-region)
	(org-fast-tag-show-exit): Don't use `goto-line'.

	* org-table.el (org-table-align, org-table-insert-column)
	(org-table-delete-column, org-table-move-column)
	(org-table-sort-lines, org-table-copy-region)
	(org-table-paste-rectangle, org-table-wrap-region)
	(org-table-get-specials, org-table-rotate-recalc-marks)
	(org-table-get-range, org-table-recalculate)
	(org-table-edit-formulas, org-table-fedit-convert-buffer)
	(org-table-show-reference, org-table-highlight-rectangle):
	Don't use `goto-line'.

	* org-src.el (org-edit-src-code, org-edit-fixed-width-region)
	(org-edit-src-exit): Don't use `goto-line'.

	* org-macs.el (org-preserve-lc): Don't use `goto-line'.

	* org-list.el (org-renumber-ordered-list, org-fix-bullet-type):
	Don't use `goto-line'.

	* org-exp.el (org-export-number-lines): Don't use `goto-line'.

	* org-colview.el (org-columns, org-columns-redo)
	(org-agenda-columns): Don't use `goto-line'.

	* org-agenda.el (org-agenda-mode): Force visual line motion off.
	(org-agenda-add-entry-text-maxlines): Improve docstring.
	(org-agenda-start-with-entry-text-mode): New option.
	(org-agenda-entry-text-maxlines): New option.
	(org-agenda-entry-text-mode): New variable.
	(org-agenda-mode): Set initial value of
	`org-agenda-entry-text-mode'.
	(org-agenda-mode-map): Add the `E' key.
	(org-agenda-menu): Add entry text mode to the menu.
	(org-agenda-get-some-entry-text): Fix line count bug.
	(org-finalize-agenda): Apply entry text mode if appropriate.
	(org-agenda-entry-text-show-here): New function.
	(org-agenda-entry-text-show): New function.
	(org-agenda-entry-text-hide): New function.
	(org-agenda-view-mode-dispatch): Add entry text mode to the view
	key menu.
	(org-agenda-entry-text-mode): New command.
	(org-agenda-set-mode-name): Add entry text mode to the mode line
	string.
	(org-agenda-undo, org-agenda-get-restriction-and-command)
	(org-agenda-get-some-entry-text, org-agenda-redo): Don't use
	`goto-line'.

2009-09-02  Bernt Hansen  <bernt@norang.ca>

	* org-clock.el (org-notify): Bugfix.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-open-link): Handle multiple links and
	check for after-string.

	* org-gnus.el (org-gnus-store-link): Simplify.

	* org.el (org-latex-regexps): Don't add extra empty lines for
	display formulas.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-get-some-entry-text): New function.
	(org-agenda-add-entry-text):
	Use `org-agenda-get-some-entry-text'.

	* org.el (org-cycle-separator-lines): Update docstring.
	(org-cycle-show-empty-lines): Handle negative values for
	`org-cycle-show-empty-lines'.

	* org-exp.el (org-export-protect-sub-super): New function.
	(org-export-normalize-links): Protect the url of plain links from
	supscript and superscript processing.

	* org-remember.el (org-remember-escaped-%): New function.
	(org-remember-apply-template): Use `org-remember-escaped-%' to
	detect escaped % signs.

2009-09-02  Bastien Guerry  <bzg@gnu.org>

	* org-timer.el (org-timer-set-timer): Use `org-notify' and play a
	sound when showing the notification.

	* org-clock.el (org-notify): New function.
	(org-clock-notify-once-if-expired): Use `org-notify'.

	* org-gnus.el (org-gnus-store-link): Handle `gnus-summary-mode'
	and `gnus-article-mode' separately.
	(gnus-summary-article-header): Fix the declare-function.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Translate language.

	* org-src.el (org-src-lang-modes): New variable.
	(org-edit-src-code): Translate language.

	* org-exp.el (org-export-format-source-code-or-example): Deal wit
	the new structure of the `org-export-latex-listings-langs'
	variable.

	* org-latex.el (org-export-latex-listings-langs): Change structure
	of the variable from plist to alist.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-in-commented-line): New function.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-hide-block-toggle): Make folded blocks searchable.

2009-09-02  Friedrich Delgado Friedrichs  <friedel@nomaden.org>  (tiny change)

	* org.el (org-flag-drawer): More useful error.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-remember-apply-template):
	Use org-icompleting-read.

	* org-publish.el (org-publish): Use org-icompleting-read.

	* org-colview.el (org-columns-edit-value, org-columns-new)
	(org-insert-columns-dblock): Use org-icompleting-read.

	* org-attach.el (org-attach-delete-one, org-attach-open):
	Use org-icompleting-read.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-hierarchical-todo-statistics): Improve docstring.
	(org-version): Return the version text.
	(org-org-menu): Add a menu entry for the new bug reporter.
	(org-submit-bug-report): New command.

	* org-list.el (org-hierarchical-checkbox-statistics):
	Improve docstring.

	* org.el (org-emphasis-regexp-components): Add "`" to set of
	pre-emphasis characters.

	* org-latex.el (org-export-latex-classes): Always include the soul
	package.
	(org-export-latex-emphasis-alist): Use \st for strikethough.

	* org-exp-blocks.el (org-export-blocks-preprocess):
	Use `indent-code-rigidly' to indent.

	* org-agenda.el (org-agenda-get-restriction-and-command):
	Remove properties only if MATCH really is a string.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-packages-alist):
	Fix customization type.

	* org.el (org-create-formula-image): Also use
	`org-export-latex-packages-alist'.

	* org-html.el (org-export-as-html): Fix bug in footnote regexp.
	(org-export-as-html): Format footnotes correctly.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-fast-tag-selection): Avoid text properties on tags
	in the alist.

	* org-agenda.el (org-agenda-get-restriction-and-command):
	Avoid text properties on the match element.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-set-regexps-and-options): Make sure the list of done
	keywords is not invalid.

	* org-exp.el (org-export-interpolate-newlines): New function.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-format-latex): Avoid nested overlays.

	* org-latex.el (org-export-latex-listings-langs): Add a few more
	languages.

	* org-exp.el (org-export-preprocess-apply-macros): Make sure to
	ignore newlines and space before the first macro argument.

	* org-latex.el (org-export-latex-tables): Remove save-excursion
	around `org-table-align'.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-export-html-special-string-regexps):
	Definition moved into org.el.

	* org-exp.el (org-export-preprocess-apply-macros): Allow newlines
	in macro calls.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-listings)
	(org-export-latex-listings-langs): New options.

	* org-exp.el (org-export-format-source-code-or-example):
	Use listing package if requested by the user.

2009-09-02  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-iswitchb): Fix bug when aborting the `org-iswitchb'
	command before actually switching to a buffer.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-get-file-contents): Only quote org lines when
	the markup is src or example.

	* org-agenda.el (org-agenda-skip-scheduled-if-deadline-is-shown):
	New option.
	(org-agenda-get-day-entries): Remember deadline results and pass
	them on into the function getting the scheduling information.
	(org-agenda-get-scheduled): Accept deadline results as parameters
	and maybe skip some entries.
	(org-agenda-skip-scheduled-if-deadline-is-shown): New option.

	* org.el (org-insert-heading): When respecting content, do not
	convert current line to headline.

	* org-clock.el (org-clock-save-markers-for-cut-and-paste):
	Also cheeeeeck the hd marker.
	(org-clock-in): Also set the hd marker.
	(org-clock-out): Also set the hd marker.
	(org-clock-cancel): Reset markers.

	* org.el (org-clock-hd-marker): New marker.

	* org-faces.el (org-agenda-clocking): New face.

	* org-agenda.el (org-agenda-mark-clocking-task): New function.
	(org-finalize-agenda): Call `org-agenda-mark-clocking-task'.

	* org.el (org-modules): Add org-track.el.

	* org-agenda.el (org-agenda-bulk-marked-p): New function.
	(org-agenda-bulk-mark, org-agenda-bulk-unmark):
	Use `org-agenda-bulk-marked-p'.
	(org-agenda-bulk-toggle): New command.

2009-09-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-move-subtree-down): Hide subtree if it was folded,
	not just the body.

	* org-remember.el (org-remember-finalize): Avoid buffer-modified
	messages.

2009-08-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* org-html.el (org-export-as-html):
	* org-docbook.el (org-export-as-docbook):
	Use (default-value 'major-mode) instead of default-major-mode.

2009-08-08  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-docbook.el: Add arch-tag.

	* org-exp-blocks.el: Add arch-tag.

	* org-id.el: Add arch-tag.

	* org-indent.el: Add arch-tag.

	* org-inlinetask.el: Add arch-tag.

	* org-protocol.el: Add arch-tag.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-create-formula-image): Remove the -E option for
	dvipng.

	* org-exp.el (org-default-export-plist): Respect #+BIND.
	(org-export-confirm-letbind): New function.

	* org.el (org-paste-subtree): Test the kill ring entry if it is
	going to be used.
	(org-copy-subtree): Use `org-forward-same-level'.
	(org-forward-same-level): Respect the `invisibe-ok' arg for
	back-to-heading.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-table-map-tables): Make sure cursor is back at table
	beginning after funcall.

	* org-agenda.el (org-agenda-bulk-action): Make sure parents are
	handled before children, and do not error if an entry is not
	found, probably because it hase been remove when the parent was
	archived or refiled.

	* org.el (org-ido-completing-read): Accept straight lists for
	completion as well as alists.

	* org-timer.el (org-timer-cancel-timers): Rename from
	`org-timer-cancel-timers'.

	* org.el (org-cycle-internal-local): Fix problem with finding next
	invisible line.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-list.el (org-list-send-list):
	Call `org-list-goto-true-beginning' instead of
	`org-list-find-true-beginning', which does not exist.

	* org-timer.el (org-timer-reset-timers): Use `mapc'.
	(org-timer-set-timer): Do not assign to heading.

	* org-id.el (org-id-open): Quote function name.

	* org-macs.el (org-unmodified): Turn off recording undo
	information while running inside the macro.

	* org-table.el (org-table-export): Also work in file-less
	buffers.

	* org.el (org-startup-indented): New option.
	(org-startup-options): Add new options indent and noindent.
	(org-unfontify-region): Remove line-prefix and wrap-prefix
	properties.
	(org-after-demote-entry-hook, org-after-promote-entry-hook):
	New hooks.
	(org-promote, org-demote): Run the new hooks.

	* org-table.el (org-table-align): Replace leading \n as well.

	* org-exp.el (org-export-push-to-kill-ring): Remove `line-prefix'
	and `line-wrap' text properties.

	* org-compat.el (org-kill-new): New function.

	* org-agenda.el (org-format-agenda-item): Remove `line-prefix' and
	`line-wrap' text properties.

	* org-indent.el: New file.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-provide-todo-statistics): Tweak docstring.

	* org-id.el (org-id-open): Honor `org-link-frame-setup'.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-as-org): Insert the "-source" string
	before the extension.

	* org.el (org-read-date): Make sure the calendar is in the current
	frame.
	(org-set-emph-re): Remove the ? from the post-match.
	(org-emphasis-regexp-components): Add backslash to the
	postmatch class.
	(org-set-font-lock-defaults): Write \n instead of \xa, and make it
	optional so that also lines at the end of the buffers will still
	be matched as headlines.

	* org-table.el (org-table-error-on-row-ref-crossing-hline):
	Variable made obsolete.
	(org-table-relative-ref-may-cross-hline): New option.
	(org-table-find-row-type): Honow the new option
	`org-table-relative-ref-may-cross-hline'.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-cut-region, org-table-copy-region):
	Work on single field if no active region.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-make-header): Only insert title
	if one is defined.

	* org.el (org-make-options-regexp): Allow empty values.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-cycle-internal-local): Improve version of finding
	next visible line.
	(org-cycle-hide-drawers): Only hide drawers if this is really
	necessary.
	(outline-end-of-subtree): Make `outline-end-of-subtree' use the
	org-version of this function in Org-mode.  We use advice to
	implement this change, so that future changes to this function in
	outline.el wil be handled properly.
	(org-forward-same-level, org-backward-same-level): New commands.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-remove-empty-overlays-at)
	(org-clean-visibility-after-subtree-move): New functions.
	(org-move-subtree-down): Simplify cleanup of display.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mac-message.el (org-mac-message-get-links): Improve
	docstring.  Make argument SELECT-OR-FLAGGED optional, default to
	"s".  Fix the return value.
	(org-mac-message-insert-flagged): Simplify.

	* org.el (org-refile-get-location): Tamper with refile history o
	that history contains compete matches instead of the entered
	string.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-store-link): Never store a link to an inline task.

	* org-footnote.el (org-footnote-goto-local-insertion-point):
	Skip inline tasks when positioning footnotes.

	* org.el (org-refile): Remove the END line when archiving an
	inline task that does have an END line.

	* org-archive.el (org-archive-subtree): Remove the END line when
	archiving an inline task that does have an END line.

	* org-macs.el (org-with-limited-levels): New macro.
	(org-get-limited-outline-regexp): New function.

	* org-exp.el (org-export-format-source-code-or-example): Fix bug
	that did not enumerate first line.
	(org-export-mark-radio-links): Skip matches in links.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-activate-plain-links): Make single-match.
	(org-adapt-indentation): Fix docstring.

	* org-macs.el (org-unmodified): Turn of modification hooks while
	running this macro.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-adapt-indentation): Slightly improve the docstring.
	(org-occur): Sends an error when the user inputs an empty string.
	(org-priority): Bugfix: the tag alignement should happen within
	save-excursion.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-make-link-regexps): Don't exclude parentheses from
	`org-plain-link-re'.
	(org-cycle-internal-local): When locally cycling, switch directly
	from CHILDREN to FOLDED if there is no subtree.
	(org-cycle): Update the docstring to document the new behavior of
	`org-cycle-internal-local'.

2009-08-06  Nicolas Goaziou  <n.goaziou@neuf.fr>  (tiny change)

	* org-clock.el (org-clock-in): Bugfix: recognize timestamps with
	an abbreviated format for days.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org-protocol.el (org-protocol-default-template-key):
	New option.

	* org.el (org-refile): Bugfix: save-excursion before reading the
	refile target, otherwise cursor moves might confuse `org-refile'.

	* org.el (org-toggle-heading): Bugfix: correctly convert list
	items before the first headline.

	* org.el (org-provide-todo-statistics): Allow a list of TODO
	keywords to compute statistics against headlines containing a
	keyword from this list.
	(org-update-parent-todo-statistics): Possibly use the new allowed
	value of `org-provide-todo-statistics'.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org-timer.el: Add autoload cookie.

	* org.el (org-occur-link-in-agenda-files): New function.

	* org-timer.el (org-timer-last-timer): New variable.

	* org-agenda.el (org-agenda-mode-map): New key for
	org-timer-set-timer called from the agenda.

	* org.el (org-mode-map): New key for org-timer-set-timer.

	* org-timer.el (org-timer-reset-timers)
	(org-timer-show-remaining-time, org-timer-set-timer):
	New functions.

	* org-clock.el (org-show-notification): Update the docstring.

	* org.el (org-provide-todo-statistics): Allow new value
	'all-headlines for this option, which includes entries with no
	TODO keywords in the todo statistics.
	(org-update-parent-todo-statistics): Possibly use the new
	'all-headline value from `org-provide-todo-statistics'.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-dblock-write:clocktable): Add a new option
	:timestamp which allows display of timestamps in clock reports.

	* org.el (org-mode-map): Define new key `C-c C-*': convert a plain
	list to a subtree, preserving the structure of the list.
	(org-set-emph-re): Make the last element optional in the regexp.
	This regexp now matches an emphasized string at the end of a line.

	* org-list.el (org-list-goto-true-beginning)
	(org-list-make-subtree, org-list-make-subtrees): New functions.

	* org.el (org-eval-in-calendar): Select the right frame.
	(org-save-frame-excursion): Remove this macro.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org-list.el (org-list-beginning-re): Bugfix: don't use * when
	trying to find the beginning of a list.

	* org-exp.el (org-get-file-contents): Use a new argument: markup.
	When present, tell org-get-file-contents not to protect org-like
	lines.

	* org-id.el (org-id-uuid-program): New option to set the name of
	the uuidgen program.
	(org-id-method): Use `org-id-uuid-program'.
	(org-id-new): Use `org-id-uuid-program'.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org-exp.el (org-export-number-lines): Allow whitespace in code
	references.  Allow the -r switch to remove the references in the
	source code even when the lines are not numbered: the labels can
	be explicit enough.

	* org.el (org-fontify-whole-heading-line): New option.
	(org-set-font-lock-defaults): Use the new option.

	* org-clock.el (org-show-notification-handler): New option.
	(org-show-notification): Use the new option.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-eval-in-calendar): Fix a bug about calendar
	navigation when `calendar-setup' value is 'calendar-only.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org.el (orgstruct++-mode): Fix typo in docstring.
	(org-insert-link): Clean up: (or (...)) => (...)
	(org-insert-link): Use TAB for stored links completion.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-get-refile-targets): Fix bug: don't ignore case when
	building the list of targets.

	* org-remember.el (org-remember-delete-empty-lines-at-end):
	New option.
	(org-remember-handler): Use the new option.

2009-08-06  James TD Smith  <ahktenzero@mohorovi.cc>

	* org.el (org-tags-sort-function): New option for sorting tags.
	(org-set-tags): Use the new option to sort tags.

	* org-plot.el (org-plot/gnuplot): Run with an idle timer to avoid
	premature deletion of the data when using org-plot in a script.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org-clock.el (org-clock-in-prepare-hook): New hook.
	(org-clock-in): Use this new hook.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-special-ctrl-a/e): Explicitly bind the value
	'reversed for this option to the "true line boundary first"
	behavior.
	(org-tags-match-list-sublevels): Document the 'indented value for
	this variable.

	* org-latex.el (org-export-latex-first-lines): Fix problem with
	publishing the region.

	* org-exp.el (org-export-format-source-code-or-example):
	Fix bad line numbering when exporting examples in HTML.

2009-08-06  James TD Smith  <ahktenzero@mohorovi.cc>

	* org-colview.el (org-format-time-period): Formats a time in
	fractional days as days, hours, mins, seconds.
	(org-columns-display-here): Add special handling for SINCE and
	SINCE_IA to format for display.

	* org.el (org-time-since): Add a function to get the time since an
	org timestamp.
	(org-entry-properties): Add two new special properties: SINCE and
	SINCE_IA.  These give the time since any active or inactive
	timestamp in an entry.
	(org-special-properties): Add SINCE, SINCE_IA.
	(org-tags-sort-function): Add custom declaration for tags
	sorting function.
	(org-set-tags): Sort tags if org-tags-sort-function is set.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-goto): Find hidden headlines as well.

	* org.el (org-narrow-to-subtree): Find hidden headlines as well.

	* org-plot.el (org-plot/add-options-to-plist): Add timeind
	option.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-remove-all-timestamps): New function.
	(org-publish-all): Remove all timestamp files if `org-publish-all'
	is called with a prefix argument.

	* org-list.el (org-indent-item): Fix typo.
	(org-item-indent-positions): Normalize ordered bullet.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-macs.el (org-set-local): Make a local variable, do not make
	the variable buffer-local!

	* org-latex.el (org-export-as-latex): Call `org-install-letbind'.

	* org-exp.el (org-infile-export-plist): Read BIND lines.
	(org-install-letbind): New function.
	(org-export-as-org, org-export-preprocess-string):
	Call `org-install-letbind'.

	* org-list.el (org-list-demote-modify-bullet): New option.
	(org-first-list-item-p): Save point.
	(org-fix-bullet-type): New optional argument FORCE-BULLET.
	(org-indent-item): Honor `org-list-demote-modify-bullet'.
	(org-item-indent-positions): Return bullet types along with
	indentation.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-show-entry): Hide drawers.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-footnote.el (org-footnote-auto-adjust): New option.
	(org-footnote-auto-adjust-maybe): New function.
	(org-footnote-new, org-footnote-delete):
	Call `org-footnote-auto-adjust-maybe'.

	* org.el (org-startup-options): Add new footnote-related
	keywords.

	* org-publish.el (org-publish-timestamp-filename): Additional
	arguments PUB-DIR and PUB-FUNC, which are included in the hash.
	(org-publish-needed-p): Additional arguments PUB-DIR PUB-FUNC
	TRUE-PUB-DIR.  Pass them through to
	`org-publish-timestamp-filename'.
	(org-publish-update-timestamp): Additional arguments PUB-DIR and
	PUB-FUNC, which are included in the hash.
	(org-publish-file): Delay timestamp test until the publishing
	function is known.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-bulk-action): Add scheduling and
	setting the deadline.

	* org.el (org-read-date-final-answer): New variable.
	(org-read-date): Store the final answer string, including the date
	from the calendar, for reuse by agenda bulk commands.

	* org-publish.el (org-publish-attachment): Fix publishing of
	attachments.

	* org-latex.el (org-export-latex-quotation-marks): Fix export of
	quotation makrs in parenthesis.
	(org-remove-initial-hash): New function.
	(org-export-latex-preprocess): Fix bug with infinite loop if
	environment is not properly closed.

	* org-table.el (org-table-get-remote-range): Find #+TBLNAME also
	when indented.

	* org.el (org-fontify-meta-lines-and-blocks): Make #+TBLNAME
	highlight also when indented.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-footnote.el (org-footnote-renumber-fn:N): New command.
	(org-footnote-action): Offer renumbering.

	* org.el (org-cycle): Honor the `integrate' value of
	org-cycle-include-plain-lists'.

	* org-list.el (org-cycle-include-plain-lists): New allowed value
	`internal'.  Improve the docstring.

	* org.el (org-set-autofill-regexps): Improve the paragraph-start
	regexp to work better with LaTeX commands.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-inline-image-extensions): Add ps
	and eps extensions.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-write-agenda): Make sure org-icalendar is
	loaded.

	* org.el (org-map-entries): No longer force
	`org-tags-match-list-sublevels' to t during a todo-only tags
	search.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-low-levels): Allow user-defined
	environment.
	(org-export-latex-subcontent): Handle user-defined environment.

	* org-agenda.el (org-agenda-view-mode-dispatch): Add more keys to
	the View dispatcher.

	* org.el (org-hide-block-toggle): Use `org-make-overlay' instead of
	`make-overlay'.

	* org-latex.el (org-export-as-pdf): Protect match data during call
	to shell-quote-argument.

	* org-agenda.el (org-agenda-mode-map): Modify bulk action keys.
	(org-agenda-view-mode-dispatch): New function.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-mode): Reset list of marks.
	(org-agenda-mode-map): Define new keys for refile and bulk action.
	(org-agenda-menu): Add menu itesm for refile and bulk action.
	(org-agenda-refile): New function.
	(org-agenda-set-tags): Optional arguments TAG and ONOFF.
	(org-agenda-marked-entries): New variable.
	(org-agenda-bulk-select, org-agenda-remove-bulk-action-overlays)
	(org-agenda-remove-all-bulk-action-marks)
	(org-agenda-bulk-action): New functions/commands.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-get-file-contents): Protect org-like lines in
	included files.
	(org-export-format-source-code-or-example): Remove newlines.

	* org-latex.el (org-export-latex-links): Check for no-description
	marking.

	* org-exp.el (org-export-preprocess-apply-macros): Switch macro
	argument separator back to comma.
	(org-export-normalize-links): Mark links without description.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-infile-export-plist): Fix bug in macro
	processing.

	* org-agenda.el (org-agenda-clock-out): Update line after clocking
	out.
	(org-agenda-highlight-todo): Fix bug with highlighting.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-set-font-lock-defaults): Adapt formatting to capture
	new alignment strings.

	* org-table.el (orgtbl-self-insert-command): Add yas/expand to
	command list.
	(org-table-align): Check for forced align type.

	* org.el (org-self-insert-command): Add yas/expand to command
	list.

	* org-clock.el (org-clock-in-hook): New hook.
	(org-clock-in): Run `org-clock-in-hook.
	(org-clock-out-hook): New hook.
	(org-clock-out): Run `org-clock-out-hook.
	(org-clock-cancel-hook): New hook.
	(org-clock-cancel): Run `org-clock-cancel-hook.
	(org-clock-goto-hook): New hook.
	(org-clock-goto): Run `org-clock-goto-hook.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-store-link): Better default description for link to
	Org-mode headline.

	* org-exp.el (org-export-generic): Autoload the generic exporter
	function.
	(org-export): Implement the `g' key for the generic exporter.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (orgtbl-setup): Add a binding for `S-iso-lefttab',
	and for zbacktab'.

	* org-exp.el (org-infile-export-plist): Get macros also from
	#+SETUPFILE.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-colview.el (org-columns-capture-view): Protect vertical bars
	in column values.
	(org-columns-capture-view): Exclude comment and archived trees.

	* org.el (org-quote-vert): New function.

	* org-latex.el (org-export-latex-verbatim-wrap): New option.

	* org-exp.el (org-export-format-source-code-or-example):
	Use `org-export-latex-verbatim-wrap'.

	* org.el (org-clone-subtree-with-time-shift): Also shift inactive
	time stamps.

2009-08-06  Eric Schulte  <schulte.eric@gmail.com>

	* org-exp-blocks.el: New file.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-remember-templates): Allow the headline
	element to be a function.
	(org-remember-apply-template): If the headline is a function, call
	it to get the true function.

	* org-clock.el (org-clock-menu): New function.
	(org-clock-update-mode-line): Update help string.
	(org-clock-modify-effort-estimate): New function.
	(org-clock-mark-default-task): New function.

	* org.el (org-hh:mm-string-to-minutes): Also take just a number of
	minutes as input.
	(org-org-menu): Add new clocking stuff.
	(org-clock-is-active): New function.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-open-non-existing-files): Improve docstring.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-icalendar.el (org-icalendar-include-bbdb-anniversaries):
	New option.
	(org-export-icalendar): Call `org-bbdb-anniv-export-ical'.

	* org-bbdb.el (org-bbdb-anniv-export-ical): New function.

	* org-list.el (org-get-checkbox-statistics-face): Use the new
	faces.

	* org-faces.el (org-checkbox-statistics-todo)
	(org-checkbox-statistics-done): New faces.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-use-verb): New variable.
	(org-export-latex-emph-format): Prefer \texttt over \verb when
	org-export-latex-use-verb is set.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-remember-handler): Abort remember if the
	buffer is empty.

	* org-exp.el (org-export-format-source-code-or-example):
	Run `org-src-mode-hook'.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-indent-line-function): Fix indentation of +#end lines.

2009-08-06  Tassilo Horn  <tassilo@member.fsf.org>

	* org-gnus.el (org-gnus-store-link): Require message.el in
	org-gnus-store-link.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-src.el: New file, split out of org.el.

	* org-macs.el (org-replace-match-keep-properties): New function.

	* org-exp.el (org-export-mark-blockquote-verse-center):
	Better preprocessing of center and quote and verse blocks.

	* org-list.el (org-list-end): Respect the stored "original"
	indentation when determining the end of the list.

	* org-exp.el (org-export-replace-src-segments-and-examples):
	Remember indentation correctly.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-update-mode-line): Apply face
	org-mode-line-clock.

	* org-faces.el (org-mode-line-clock): New face.

2009-08-06  Tassilo Horn  <tassilo@member.fsf.org>

	* org-gnus.el (org-gnus-store-link): Fix bug where
	`org-gnus-store-link' used wrong subject when called in an article
	buffer.  Patch provided by fengli AT gmail DOT com.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Remember the original indentation of source code snippets and examples.

	* org-latex.el (org-export-as-latex): Relocate the table of
	contents.

	* org.el (org-ctrl-c-ctrl-c): Update clock lines.

	* org-agenda.el (org-run-agenda-series): Scope global options also
	when creating the agenda buffer.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-adapt-indentation): Improve documentation.
	(org-insert-property-drawer): Respect org-adapt-indentation when
	inserting the drawer.
	(org-remove-flyspell-overlays-in): New function.
	(org-do-emphasis-faces, org-activate-plain-links)
	(org-activate-code, org-fontify-meta-lines-and-blocks)
	(org-activate-angle-links, org-activate-footnote-links)
	(org-activate-bracket-links, org-activate-dates)
	(org-activate-target-links, org-activate-tags): Remove flyspell
	overlays.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-edit-src-save): New function.

	* org-clock.el (org-clock-out-switch-to-state): New option.
	(org-clock-out): Honor `org-clock-out-switch-to-state'.

	* org-compat.el (org-compatible-face): Improve macro.

	* org.el (org-global-properties-fixed): Add default for
	CLOCK_MODELINE_TOTAL.

	* org-clock.el (org-clock-sum): Accept lists and strings as tstart
	and tend.
	(org-clock-sum-current-item): Optional argument TSTART, pass it to
	org-clock-sum.
	(org-clock-get-sum-start): New function.

	* org.el (org-startup-options): New keywords blockhide and
	blockshow.
	(org-mode): Add new invisibility spec.
	(org-set-startup-visibility): Hide block on startup if so
	desired.
	(org-hide-block-startup): New option.
	(org-block-regexp): New constant.
	(org-hide-block-overlays): New variable.
	(org-block-map, org-hide-block-toggle-all, org-hide-block-all)
	(org-show-block-all, org-hide-block-toggle-maybe)
	(org-hide-block-toggle): New functions.
	(org-edit-src-exit): Do not quote lines starting with # and no +
	behind it.
	(org-auto-repeat-maybe): Add LAST_REPEAT properter for a repeating
	entry.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-buffer-property-keys): Add Effort property for
	completion.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-sum-current-item): Fix positioning bug
	when retrieving total clocked time in the subtree.

	* org.el (org-quoting-blocks): New variable.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-table-store-formulas)
	(org-table-get-stored-formulas, org-table-fix-formulas)
	(org-table-edit-formulas, orgtbl-ctrl-c-ctrl-c)
	(orgtbl-gather-send-defs): Allow indented #+TBLFM line.

	* org.el (org-fontify-meta-lines, org-ctrl-c-ctrl-c):
	Allow indented #+TBLFM line.

	* org-footnote.el (org-footnote-goto-local-insertion-point):
	Allow indented #+TBLFM line.

	* org-colview.el (org-dblock-write:columnview): Allow indented
	#+TBLFM line.

	* org-clock.el (org-dblock-write:clocktable): Allow indented
	#+TBLFM line.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Make editing indented blocks work correctly.

	* org.el (org-edit-src-nindent): New variable.
	(org-edit-src-code, org-edit-fixed-width-region)
	(org-edit-src-find-region-and-lang, org-edit-src-exit):
	Make editing indented blocks work correctly.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-replace-src-segments-and-examples):
	Find indented blocks.
	(org-export-format-source-code-or-example): Fix indentation of
	blocks.
	(org-export-remove-indentation): New function.
	(org-export-select-backend-specific-text): Allow backend-specific
	code to be indented.
	(org-export-mark-blockquote-verse-center): Allow markers to be
	indented.

	* org.el (org-fontify-meta-lines): New function.
	(org-set-font-lock-defaults): Call the new fontification
	function.

	* org-faces.el (org-meta-line): New face.
	(org-block): New face.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-treat-insert-todo-heading-as-state-change)
	(org-treat-S-cursor-todo-selection-as-state-change):
	New variables.
	(org-insert-todo-heading):
	Honor `org-treat-insert-todo-heading-as-state-change'.
	(org-shiftright, org-shiftleft):
	Honor `org-treat-S-cursor-todo-selection-as-state-change'.
	(org-inhibit-logging): New variable.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-remove-subtree-entries-from-agenda):
	Reduce range for marker position checking.

	* org-latex.el (org-export-latex-first-lines): Fix bug when
	exporting a region.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-push-to-kill-ring): Protect using
	x-set-selection, because that does not always work.

	* org-agenda.el (org-agenda-list): Apply the new face
	`org-agenda-date-today'.

	* org-faces.el (org-agenda-date-today): New face.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-to-appt): Turn off restriction when
	creating appointments.

	* org-latex.el (org-export-latex-low-levels): Fix customization
	type.

	* org.el (org-priority, org-shiftup, org-shiftdown):
	Disable priority commands.

	* org-agenda.el (org-agenda-priority): Disable priority commands.

	* org.el (org-enable-priority-commands): New option.

	* org-colview.el (org-columns-compute)
	(org-columns-number-to-string): Fix problems with empty fields.

	* org-exp.el (org-export-push-to-kill-ring): New function.
	(org-export-copy-to-kill-ring): New option.

	* org-latex.el (org-export-as-latex):
	Call `org-export-push-to-kill-ring'.

	* org-exp.el (org-export-show-temporary-export-buffer):
	New option.

	* org-latex.el (org-export-as-latex):
	Use `org-export-show-temporary-export-buffer'.

	* org-exp.el (org-export-show-temporary-export-buffer):
	New option.
	(org-export-push-to-kill-ring): New function.

	* org-colview.el (org-columns-compile-map): New variable.
	(org-columns-new, org-columns-compute)
	(org-columns-number-to-string, org-columns-uncompile-format)
	(org-columns-compile-format): Implement new operators.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-plist-vars): Add :xml-declaration.

	* org-list.el (org-update-checkbox-count): Make property
	dependent.

	* org.el (org-hierarchical-todo-statistics): New option.
	(org-update-parent-todo-statistics): Modify to handle recursive
	statistics.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish): Make this function behave
	correctly in interactive use when called with a prefix argument.

	* org.el (org-todo-statistics-hook): New hook.
	(org-update-parent-todo-statistics): Use new hook.
	(org-log-into-drawer): New function.
	(org-add-log-setup): Use the new `org-log-into-drawer' function to
	determine if we should be logging into a drawer.
	(org-log-into-drawer): Update docstring.
	(org-default-properties): Add LOG_INTO_DRAWER as a property.

	* org-list.el (org-checkbox-statistics-hook): New hook.
	(org-update-checkbox-count-maybe): Use new hook.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-edit-src-code, org-edit-fixed-width-region): Use a
	better buffer-generating mechanism.
	(org-edit-src-find-buffer): New function.

	* org-icalendar.el (org-print-icalendar-entries): Don't check for
	archive tag, this is already done by `org-agenda-skip'.
	data while constructing lost of tags.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-preprocess-apply-macros): Use semicolon
	as argument separator in macros.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-after-sorting-entries-or-items-hook): New hook.
	(org-sort-entries-or-items): Run the new hook.
	(org-after-refile-insert-hook): New hook.
	(org-refile): Run `org-after-refile-insert-hook'.

	* org-agenda.el (org-agenda-get-progress): Never take time of day
	from headline when displaying progress.

	* org-latex.el (org-export-latex-complex-heading-re): New variable.
	(org-export-as-latex): Force the correct regexp in the
	preprocessor buffer.
	(org-export-latex-set-initial-vars):
	Set `org-export-latex-complex-heading-re'.

	* org-agenda.el (org-agenda-start-with-log-mode): New option.
	(org-agenda-mode): Use `org-agenda-start-with-log-mode'.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-tables-centered): New option.
	(org-export-latex-tables): Use `org-export-latex-tables-centered'.

	* org-exp.el (org-export-as-org): New command.
	(org-export-as-org): New command.

	* org-publish.el (org-publish-org-to-org): New function.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-yank): Just call `org-yank-generic'.
	(org-yank-generic): New function, containing the formaer
	functionality of `org-yank'.

	* org-latex.el (org-export-latex-not-done-keywords)
	(org-export-latex-done-keywords): New variables.
	(org-export-latex-todo-keyword-markup): New option.
	(org-export-latex-set-initial-vars): Remember the TODO keywords.
	(org-export-latex-keywords-maybe): Apply the TODO markup.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-infile-export-plist): Add more default macros.
	(org-export-preprocess-apply-macros): Process macro arguments.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-icalendar.el (org-icalendar-include-todo): New allowed value
	`unblocked'.
	(org-print-icalendar-entries): Respect the new value of
	`org-icalendar-include-todo'.

	* org.el (org-link-try-special-completion)
	(org-file-complete-link): New functions.
	(org-insert-link): Add special completion support for some link
	types.

	* org-bbdb.el (org-bbdb-complete-link): New function.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-list.el (org-update-checkbox-count): Allow recursive
	statistics.
	(org-hierarchical-checkbox-statistics): New option.

	* org.el (org-cycle): Remove erraneous space character.

	* org-icalendar.el (org-icalendar-timezone): Initialize from
	environment.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-autoload): Fix autoloading of ascii export
	functions.
	(org-modules): Add org-special-blocks.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-icalendar.el (org-start-icalendar-file): Use the new option.
	(org-ical-timezone): New option.

	* org-exp.el (org-export-get-coderef-format): Use the description
	is present.

	* org.el (org-sort-entries-or-items): Improve docstring, and make
	better implementation for time sorting.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-edit-src-persistent-message): New option.
	(org-edit-src-code, org-edit-fixed-width-region): Use the new
	option.

	* org-clock.el (org-clock-insert-selection-line): Fix prefious
	patch.

	* org.el (org-edit-src-code, org-edit-fixed-width-region):
	Use separate buffer instead of indirect buffer to edit source code.
	(org-edit-src-exit): Make this function work with the new setup.

	* org-clock.el (org-clock-insert-selection-line): Make sure tasks
	are properly fontified before shown in the selection menu.

	* org.el (org-fontify-like-in-org-mode): New function.

	* org-latex.el (org-export-latex-links): Use the property list to
	retrieve the default image attributes.

	* org-exp.el (org-export-plist-vars): Add a new option.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export, org-export-visible): Support ASCII
	export to buffer.
	(org-export-normalize-links): Do not protect the description if it
	is explicitly given.

	* org-list.el (org-reset-checkbox-state-subtree): Move here from
	org-checklist.el.
	(org-reset-checkbox-state-subtree):
	Call `org-reset-checkbox-state-subtree'.

	* org-remember.el (org-select-remember-template): For the
	selection of a valid template.

	* org-latex.el (org-export-region-as-latex): Supply the
	force-no-subtree argument.
	(org-export-as-latex): Provide better limits when exporting the
	first line.  When exporting to string, we still want the first
	lines.
	(org-export-latex-first-lines): New argument END, to force the end
	of the region.
	(org-export-region-as-latex): Use the property list.
	(org-export-as-latex): ????

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-after-blockquotes-hook): New hook.
	(org-export-latex-preprocess): Run the new hook.

	* org-exp.el (org-export-preprocess-after-blockquote-hook): New hook.
	(org-export-preprocess-string): Run the new hook.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-macs.el (org-check-external-command): New defsubst.

	* org.el (org-mode-map): New key for reload.
	(org-format-latex): Better error message when external programs
	are not available.

	* org-agenda.el (org-agenda-mode-map): Bind `org-reload'.

	* org.el (org-sort-entries-or-items): Explicit sorting function
	for priorities, needed for XEmacs compatibility.

	* org-remember.el (org-remember-apply-template): Improve auto-save
	behavior.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Also protect
	environments ending in a star.

	* org-list.el (org-at-item-p): Fix regular expression.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-end-of-subtree): Improve speed.

	* org-agenda.el (org-agenda-get-timestamps)
	(org-agenda-get-progress, org-agenda-get-deadlines)
	(org-agenda-get-scheduled, org-agenda-get-blocks): Optimizations,
	in particular, wait as long as possible to collect the tags.
	(org-stuck-projects): Improve docstring.

	* org.el (org-store-link): No errors when getting custom id before
	first headline.
	(org-get-tags-at): Use `org-up-heading-safe' when getting tags.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-prepare-agenda-buffers): Catch a throw to nextfile.

	* org-protocol.el: Remove dependency on url.el.
	(org-protocol-unhex-compound, org-protocol-open-source):
	Remove dependency on url.el.

	* org-latex.el (org-export-as-pdf):
	Use `org-latex-to-pdf-process'.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-latex-to-pdf-process): New option.

	* org-agenda.el (org-agenda-skip-additional-timestamps-same-entry):
	New option.
	(org-agenda-get-timestamps):
	Honor `org-agenda-skip-additional-timestamps-same-entry'.

	* org-clock.el (org-clock-goto-may-find-recent-task): New option.
	(org-clock-goto): Find recent task only if
	`org-clock-goto-may-find-recent-task' allows it.

	* org-exp.el (org-export-remove-or-extract-drawers): Handle empty
	drawers, and drawers that are missing the :END: line.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-goto): Go to recently clocked task if no
	clock is running.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-update-parent-todo-statistics): Check for
	STATISTICS_FROM property.

	* org-list.el (org-update-checkbox-count): Check for
	STATISTICS_FROM property.

	* org.el (org-tab-first-hook)
	(org-tab-after-check-for-table-hook)
	(org-tab-after-check-for-cycling-hook): New hooks.
	(org-cycle-internal-global, org-cycle-internal-local):
	New functions, split out from `org-cycle'.
	(org-cycle): Call the new hooks.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-preprocess-string): Reset the list of
	preferred targets for each run of the preprocessor.

	* org.el (org-refile-target-verify-function):
	Improve documentation.
	(org-get-refile-targets): Respect point being moved by the
	verification function.

	* org-latex.el (org-export-latex-timestamp-keyword-markup):
	New option.
	(org-export-latex-keywords): Use new option.

	* org.el (org-rear-nonsticky-at): New defsubst.
	(org-activate-plain-links, org-activate-angle-links)
	(org-activate-footnote-links, org-activate-bracket-links)
	(org-activate-dates, org-activate-target-links)
	(org-activate-tags): Place the rear-nonsticky properties at the
	correct location.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-protocol.el (server-edit): Declare `server-edit'.
	(org-protocol-unhex-string, org-protocol-unhex-compound):
	New functions.
	(org-protocol-check-filename-for-protocol): Call `server-edit'.

	* org.el (org-default-properties): New default properteis for
	completion.

	* org-exp.el (org-export-add-subtree-options): Add new properties
	for subtree export.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-id.el (org-id-get-with-outline-path-completion): Turn off
	org-refile-target-verify-function for the duration of the command.

	* org.el (org-link-to-org-use-id): New possible value
	`create-if-interactive-and-no-custom-id'.
	(org-store-link): Use custom IDs.
	(org-link-search): Find custom ID properties from #link.
	(org-default-properties): Add CUSTOM_ID for property completion.
	(org-refile-target-verify-function): New option.
	(org-goto): Turn off org-refile-target-verify-function
	for the duration of the command.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-preferred-target-alist): New variable.
	(org-export-define-heading-targets): Find the new CUSTOM_ID
	property.
	(org-export-target-internal-links): Target the custom ids when
	possible.

	* org-latex.el (org-export-latex-preprocess): Better regexp for
	matching latex macros with arguments.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-remember-handler): Allow filing to non-org
	files.

2009-08-06  Magnus Henoch  <magnus.henoch@gmail.com>

	* org-table.el (org-table-fix-formulas): Do not change references
	to remote tables.
	(org-table-get-remote-range): Convert standard coordinates to RC
	format.

	* org-latex.el (org-export-latex-keywords): Fix regexp bug.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-compat.el (org-sha1-string): Function removed.

	* org.el (org-refile-allow-creating-parent-nodes): New option.
	(org-refile-get-location): New argument NEW-NODES.
	(org-refile): Call `org-refile-get-location' with the new
	argument.
	(org-refile-get-location): Arrange for adding a new child.
	(org-refile-new-child): New function.

	* org-clock.el: Fix a number of docstrings.
	(org-clock-find-position): New argument
	FIND-UNCLOSED to make the function find an unclosed clock in the
	entry.
	(org-clock-in): Call `org-clock-find-position' with the new
	argument if we might be resuming a clock.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-display-custom-times): New variable.
	(org-export-latex-timestamp-markup): New option.
	(org-export-latex-set-initial-vars): Remember the local value of
	`org-display-custom-times'.
	(org-export-latex-content): Process time stamps.
	(org-export-latex-time-stamps): New function.

	* org-macs.el (org-maybe-intangible): Add intangible property
	again to invisible text.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-default-export-plist): Handle undefined
	variables.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-sort-entries-or-items): Match TODO keywords
	case-sensitively, when sorting.
	(org-priority): Do not match TODO keywords with wrong case.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-todo): Honor the NOBLOCKING property.

	* org-agenda.el (org-agenda-dim-blocked-tasks): Honor the
	NOBLOCKING property.

	* org.el (org-scan-tags): Fix bug in tag scanner.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-modules): Mark obsolete packages.

	* org-html.el: New file, split out from org-exp.el.

	* org-icalendar.el: New file, split out from org-exp.el.

	* org-xoxo.el: New file, split out from org-exp.el.

	* org-ascii.el: New file, split out from org-exp.el.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-compat.el (org-find-library-name): New function.

	* org.el (org-pre-cycle-hook): New hook.
	(org-cycle): Call the new hook in appropriate places.
	(org-reload): Only reload files that have been loaded before.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-set-font-lock-defaults): Enforxe space or line end
	after todo keyword.
	(org-todo): When changing TODO state, do matching
	case-sensitively.
	(org-map-continue-from): New variable.
	(org-scan-tags): Respect values in `org-map-continue-from'.
	(org-reload): Make XEmacs compatible.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-protocol.el (org-protocol-flatten-greedy): New function.
	(org-protocol-flatten): New function.

	* org.el (org-open-link-from-string): Pass reference buffer to
	`org-open-at-point'.
	(org-open-at-point): New optional argument `reference-buffer'.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-scan-tags): Make tag scan find headline in first
	line, 2nd attempt.
	(org-get-refile-targets): Add the naked file name.
	(org-refile): Store as top-level entry when only file name was
	given.

	* org-agenda.el (org-agenda-get-progress): Fix regexp bug.

	* org.el (org-block-todo-from-children-or-siblings-or-parent):
	Rename from org-block-todo-from-children-or-siblings, and
	enhanced to look for the parent's status as well.

	* org-agenda.el (org-agenda-log-mode-add-notes): New option.
	(org-agenda-get-progress): Add first notes line to log entry if so
	desired.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-cleanup-fancy-diary-hook): New hook.
	(org-agenda-cleanup-fancy-diary): Call the new hook.

	* org-remember.el (org-remember-apply-template): Take the default
	for the annotation from the :annotation property.

	* org-mac-message.el (org-mac-message-get-link): Remove the
	quotes.
	(org-mac-message-get-link): Return the result.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-refile-get-location): Add file name only if not
	already included in outline path.

	* org-faces.el (org-n-level-faces): Fix customization type from
	number to integer.

	* org-exp.el (org-export-headline-levels): Fix customization type
	from number to integer.

	* org-agenda.el (org-agenda-confirm-kill)
	(org-agenda-custom-commands-local-options)
	(org-timeline-show-empty-dates, org-agenda-ndays)
	(org-agenda-start-on-weekday, org-scheduled-past-days):
	Fix customization type from number to integer.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-protocol.el: Declare some functions.

	* org-agenda.el (org-agenda-compare-effort):
	Honor `org-sort-agenda-noeffort-is-high'.
	(org-agenda-filter-by-tag, org-agenda-filter-make-matcher)
	(org-agenda-compare-effort): Implement the "?" operator for
	finding entries without effort setting.

	* org.el (org-extract-attributes-from-string): New function.

	* org-exp.el (org-export-splice-attributes): New function.

2009-08-06  Bastien Guerry  <bzg@gnu.org>
	Daniel M German  <dmg@uvic.org>
	Sebastian Rose  <sebastian_rose@gmx.de>
	Ross Patterson  <me@rpatterson.net>

	* org-protocol.el: New file.

2009-08-06  Baoqiu Cui  <cbaoqiu@yahoo.com>

	* org-docbook.el: New file.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mouse.el: XEmacs compatibility fixes.

	* org.el (org-modules): Add org-inlinetasks.el.
	(org-cycle): Implement limiting level on cycling.
	(org-move-subtree-down): Fix bug with swapping subtrees at end of
	buffer.

	* org-inlinetask.el: New file.

	* org.el (org-emphasis-regexp-components): Allow braces in
	emphasis pre and post match.

	* org-footnote.el (org-footnote-normalize): When only sorting, do
	not insert inline notes at the end.

	* org.el (org-require-autoloaded-modules): Add org-docbook.el.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-reftex-citation): New command.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-cmp-user-defined): New option.
	(org-sorting-choice, org-agenda-sorting-strategy): Add the new
	sorting options.
	(org-entries-lessp): Apply the new sorting option.

	* org.el (org-block-todo-from-children-or-siblings): Fix bug in
	blocker code, when an older sibling has children.

	* org-mac-message.el (org-mac-message-get-link): Improve getting
	links from multiple selected messages.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-remember-finalize): Do not set buffer file
	name to nil.
	(org-remember-handler): Mark buffer as unmodified.
	(org-remember-handler): Delete backup file and show message about
	remaining backup files.
	(org-remember-auto-remove-backup-files): New option.

	* org.el (org-store-link): Use buffer name as link description in
	w3-mode buffers.
	(org-ido-switchb): Fix argument bug for completion.

	* org-remember.el (org-remember-apply-template): Set local
	variable `auto-save-visited-file-name' instead of global one.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-get-todos): Fix bug with match-data.
	(org-agenda-get-todos): Mark file tags as inherited.
	(org-agenda-list): Always search diary lines for a time.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-feed.el: New file.

	* org-exp.el (org-export-as-html): Close local lists depending on
	indentation, also when starting a table.

	* org-remember.el (org-remember-backup-directory)
	(org-remember-backup-name): New internal variable.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-out-if-current): Make buffer detection
	work in indirect buffers as well.

	* org.el (org-emphasis-regexp-components): Add the exxclamation
	mark to the post-emphasis characters.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-read-date-minibiffer-septup-hook): New hook.
	(org-read-date): Run the new hook.

	* org-mac-message.el (org-mac-flagged-mail): New group.
	(org-mac-mail-account): New variable.
	(org-mac-create-flagged-mail, org-mac-insert-flagged-mail):
	New commands.

	* org-remember.el (org-remember-backup-directory): New variable.
	(org-remember-apply-template): Write file to backup directory.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-mouse.el (org-mouse-todo-menu): New function.
	(org-mouse-todo-keywords): Function removed.
	(org-mouse-context-menu): Use `org-mouse-todo-menu'.

	* org-table.el (org-table-beginning-of-field)
	(org-table-end-of-field): New commands.
	(org-table-previous-field, org-table-beginning-of-field):
	Better error messages.
	(orgtbl-setup): Include `M-a' and `M-e'.

	* org.el (org-backward-sentence, org-forward-sentence):
	New commands.

	* org-colview.el (org-colview-initial-truncate-line-value):
	New variable.
	(org-columns-remove-overlays): Restore the value of `truncate-lines'.
	(org-columns): Remember the value of `truncate-lines'.

	* org.el (org-columns-skip-arrchived-trees): New option.

	* org-agenda.el (org-agenda-export-html-style): Define color for
	org-agenda-done face.
	(org-search-view, org-agenda-get-todos, org-agenda-get-progress)
	(org-agenda-get-deadlines, org-agenda-get-scheduled): Use new face.

	* org.el (org-scan-tags): Use the new face.

	* org-faces.el (org-agenda-done): New face.

	* org.el (org-scan-tags): Test the value org
	`org-tags-match-list-sublevels'.
	(org-tags-match-list-sublevels): New allowed value: indented.

	* org-latex.el (org-export-latex-make-header): Apply macros
	in header.

	* org-exp.el (org-export-apply-macros-in-string): New function.

	* org-latex.el (org-export-latex-list-parameters): Fix bug
	with the definition of a checked box.

	* org-clock.el (org-clock-find-position): Fix drawer indentations.

	* org-latex.el (org-export-latex-low-levels): More options
	for how to process lower levels in LaTeX.
	(org-export-latex-subcontent): Better treatment for lists as a
	means of publishing lower levels.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-set-font-lock-defaults): Use new checkbox face.

	* org-faces.el (org-checkbox): New face.

	* org-exp.el (org-export-html-preprocess): Only create LaTeX
	fragement images if there is an export file.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-stuck-projects): Document that the subtree of
	projects that are not stuck will now be searched for stuck
	sub-projects.
	(org-agenda-skip-entry-when-regexp-matches)
	(org-agenda-skip-entry-when-regexp-matches-in-subtree): New functions.
	(org-agenda-list-stuck-projects):
	Use `org-agenda-skip-entry-when-regexp-matches-in-subtree'.

	* org-latex.el (org-export-latex-preprocess):
	Improve export of verses.

	* org-exp.el (org-export-as-html): Implement centering as a div
	rather than a paragraph.  Do a better job with line-end in verse
	environments.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-open-at-point): Fix tags searches by mouse click.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-preprocess): Implement the
	centering markup.

	* org-exp.el (org-export-mark-blockquote-verse-center):
	Rename from `org-export-mark-blockquote-and-verse'.
	(org-export-as-html): Implement the centering markup.

	* org-latex.el (org-export-latex-tables): Fix vertical
	lines in tables.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-read-date-history): New variable.
	(org-read-date): Use new history variable.
	(org-toggle-heading): Fix bug when used before first headline.
	(org-store-log-note): Remove drawer if empty while note is
	aborted.
	(org-remove-empty-drawer-at): New function.
	(org-check-after-date): New command.
	(org-sparse-tree): New sparse tree command "a".

	* org-exp.el (org-export-as-ascii): Improve export of plain lists.

2009-08-06  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-toggle-fixed-width-section): Bug fix: insert a
	column and a space, not only a column.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-latex-emphasis-alist):
	Better defaults for verbose emphasis.
	(org-export-latex-emph-format): New function.
	(org-export-latex-fontify): Call `org-export-latex-emph-format'.

	* org-agenda.el (org-agenda-menu): Add new commands to menu.
	(org-agenda-do-date-later, org-agenda-do-date-earlier)
	(org-agenda-date-later-minutes, org-agenda-date-earlier-minutes)
	(org-agenda-date-later-hours, org-agenda-date-earlier-hours):
	New commands.

	* org.el (org-timestamp-change): Move end-time along with start
	time.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-target-internal-links)
	(org-export-as-html): Protect links specified as #name.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-clone-subtree-with-time-shift): New command.

	* org-latex.el (org-export-latex-special-chars)
	(org-export-latex-treat-sub-super-char): Fix subscript export.

	* org-exp.el (org-create-multibrace-regexp): Do not add
	backslashes to the class.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-colview.el (org-columns-map): Better functions for moving up
	and down a row, even if `truncate-line' is nil.

	* org.el (org-insert-todo-heading): Make sure the keyword is
	inserted at the correct position.

	* org-publish.el (org-publish-project-alist)
	(org-publish-projects, org-publish-org-index): Change default anme
	for the index of file names to "sitemap.org".

	* org-latex.el (org-export-latex-tables):
	Use `org-split-string', for Emacs 21 compatibility.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-log-mode-items): Improve docstring.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-page-description)
	(org-export-page-keywords): New variables.
	(org-export-plist-vars): Add entries for :keywords and
	:description.
	(org-infile-export-plist): Parse for new keywords.
	(org-get-current-options): Add new keywords.
	(org-export-as-html): Publish description and keywords.

	* org-agenda.el (org-agenda-add-entry-text-descriptive-links):
	New option.
	(org-agenda-add-entry-text):
	Honor `org-agenda-add-entry-text-descriptive-links'.

	* org-latex.el (org-export-latex-preprocess): Make all
	external preprocess functions use a PARAMETER arg.

	* org-exp.el (org-export-preprocess-string)
	(org-export-select-backend-specific-text)
	(org-export-format-source-code-or-example)
	(org-format-org-table-html): Support docbook export.
	(org-export-preprocess-string): Make all external preprocess
	functions use a PARAMETER arg.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-html-style-include-scripts): New option.
	(org-export-plist-vars): Add new option
	`org-export-html-style-include-scripts'.
	(org-export-as-html): Honor new option
	`org-export-html-style-include-scripts'.
	(org-export-html-scripts, org-export-html-style-default):
	Fix xml issues with the Safari browser.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-attachment): Only copy file when the
	directories differ.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clocktable-steps): Use inactive time stamps
	for clocktable steps.

	* org.el (org-additional-option-like-keywords): Add two more
	keywords.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Mark temporary buffer unmodified, so that it will be killed even if
	mode like message mode has decided to assign a file name.

	* org.el (org-scan-tags): Improve tag inheritance.
	(org-scan-tags, org-make-tags-matcher): Make tag comparison
	case-sensitive.
	(org-scan-tags): Use the internal tags list instead of creating it
	from scratch.
	(org-trust-scanner-tags, org-scanner-tags): New variables.
	(org-scan-tags): Set `org-scanner-tags'.
	(org-get-tags-at): Take advantage of `org-trust-scanner-tags'.
	(org-map-entries): Document the possible speedup using scanner
	tags.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-add-planning-info): Fix bug with looking for keyword
	only at column 0.

	* org-agenda.el (org-agenda-custom-commands-local-options):
	Add option for tags filter preset.
	(org-prepare-agenda): Store filter preset as a property on the
	filter variable.
	(org-finalize-agenda): Call the filter, if there is a preset.
	(org-agenda-filter-by-tag): Filter again after clearing the
	filter, when there still is a preset.
	(org-agenda-filter-make-matcher, org-agenda-set-mode-name):
	Include the preset filter.
	(org-agenda-redo): Apply the filter again, also the preset filter.

	* org-exp.el (org-export-as-html): Use IDs in the correct way.

	* org.el (org-uuidgen-p): New function.

	* org-agenda.el (org-agenda-fontify-priorities): New default value
	`cookies'.
	(org-agenda-fontify-priorities): Rename from
	org-fontify-priorities.

	* org.el (org-set-font-lock-defaults):
	Call `org-font-lock-add-priority-faces'.
	(org-font-lock-add-priority-faces): New function.

	* org-faces.el (org-set-tag-faces): New option.
	(org-priority-faces): New variable.

	* org-exp.el (org-export-as-html): Add a "content" div around the
	entire content of the body tag.
	(org-export-html-get-bibliography): New function.
	(org-export-html-validation-link): New variable.
	(org-export-as-html): Add validation link to exported page.

	* org.el (org-match-sparse-tree): Rename from
	`org-tags-sparse-tree'.
	(org-tags-sparse-tree): New alias.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-get-valid-level): Catch the case where the level
	change is nil.

	* org-clock.el (org-clock-find-position): Better indentation of
	new clock drawers.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-quit): Delete window only when the
	frame-setup was not `current-window'.

	* org.el (org-tag-persistent-alist): New option.
	(org-startup-options): Add keyword `noptag'.
	(org-fast-todo-selection): Handle :newline correctly.
	(org-set-tags): Handle :newline correctly.
	(org-fast-tag-selection): Handle :newline correctly.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-as-ascii): Reverse link buffer before
	outputting it.
	(org-export-ascii-push-links): Fix bug with pussing links into the
	export buffer.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-archive.el (org-archive-subtree): Do not add 1 to level if
	pasting at top level.

	* org-bbdb.el: Improve documentation.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-list.el (org-insert-item): Only consider insert empty lines
	is `org-empty-line-terminates-plain-lists' is not nil.

	* org.el (org-blank-before-new-entry): Mention the dependence on
	`org-empty-line-terminates-plain-lists' in the docstring.

	* org-publish.el (org-publish-get-project-from-filename):
	New optional argument UP.  Only find the top project if UP is set.
	(org-publish-current-project): Find the top encloding project.

	* org-agenda.el (org-agenda-before-write-hook)
	(org-agenda-add-entry-text-maxlines): New options.
	(org-write-agenda): Run the new hook in the temporary buffer.
	(org-agenda-add-entry-text): New function.
	(org-write-agenda): Implement PDF export, using ps2pdf.

	* org.el (org-global-properties-fixed, org-global-properties):
	Improve documentation string.

	* org-exp.el (org-export-ascii-links-to-notes): New option.
	(org-export-as-ascii): Handle links better.
	(org-export-ascii-wrap, org-export-ascii-push-links):
	New functions.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda): Make prefix arg optional.
	(org-agenda-search-headline-for-time): New option.
	(org-format-agenda-item):
	Honor `org-agenda-search-headline-for-time'.

	* org-table.el (orgtbl-self-insert-command): Cluster undo for 20
	characters.

	* org.el (org-self-insert-cluster-for-undo): New option.
	(org-self-insert-command): Cluster undo for 20 characters.
	(org-self-insert-command-undo-counter): New variable.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-as-html): Fix problem with closing colone
	example.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-latex.el (org-export-as-latex)
	(org-export-latex-first-lines): Avoid modification flag when
	adding or removing text properties.
	(org-export-latex-fontify): Catch error when org-emph-alist has
	entries that are not defined for LaTeX export.

	* org-export-latex.el: Rename to org-latex.el.

	* org-latex.el: Rename from org-export-latex.el.

	* org.el (orgstruct++-mode): New function.
	(turn-on-orgstruct++): Call `orgstruct++-mode'.
	(org-context-p): Allow detecting item context after the first line
	of an item.
	(orgstruct-make-binding): Detect if item-body context should be
	seen.
	(orgstruct-is-++): New variable.
	(org-add-planning-info): Catch the case when there is no planning
	info yet and the call does not want to add anything, only maybe
	tries to remove something.
	(org-special-ctrl-a/e): All value to be a cons cell with separate
	settings for `C-a' and `C-e'.
	(org-beginning-of-line, org-end-of-line): Honor separate values
	for `C-a' and `C-e'.

2009-08-06  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-reload): New command.

2009-06-05  Tassilo Horn  <tassilo@member.fsf.org>

	* org-gnus.el (org-gnus-store-link): Fix bug where
	org-gnus-store-link used wrong subject when called in an article
	buffer.  Patch provided by fengli AT gmail DOT com.

2009-03-13  D. Goel  <deego3@gmail.com>

	* org-bbdb.el: When calling (multiple-value-bind/setq .. ls)
	replace ls by (values-list ls).

2009-02-20  Carsten Dominik  <dominik@science.uva.nl>

	* org-remember.el (org-remember-apply-template): Turn off ido for
	this completion.

	* org.el (org-priority): Also find invisible headings, for remote
	editing.
	(org-completing-read-no-ido): New function.
	(org-make-tags-matcher, org-set-property): Turn off ido for this completion.

	* org-colview.el (org-columns-edit-value): No special treatment of
	prefix arg.

2009-02-19  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-block-todo-from-children-or-siblings):
	Use `org-up-heading-all' so that this will work correctly with hidden
	property drawers and entries.
	(org-end-of-line, org-beginning-of-line): Make prefix arg work, by
	falling back to normal, default command.
	(org-get-location): Temporarily turn off special behavior.

2009-02-13  Glenn Morris  <rgm@gnu.org>

	* org-rmail.el (rmail-show-message): Restore argument list to the
	declaration now that this functions behaves in Emacs 23 as in 22.

2009-02-12  Glenn Morris  <rgm@gnu.org>

	* org-footnote.el (org-footnote-at-definition-p): Fix doc typo.

2009-02-12  Joachim Reiter  <Reiter.Joachim@web.de>  (tiny change)

	* org-footnote.el (org-footnote-action): Fix doc typo.

2009-02-06  Carsten Dominik  <dominik@science.uva.nl>

	* org-exp.el (org-export-preprocess-string): Fix bug with skipping
	text before first headline.
	(org-export-remove-or-extract-drawers): Fix regular expression for
	extracting drawers.

	* org.el (org-format-latex): Stop LaTeX fragment processing in
	protected examples.

2009-02-05  Glenn Morris  <rgm@gnu.org>

	* org-rmail.el (rmail-show-message): Update declaration.
	(rmail-buffer, rmail-view-buffer): Declare.
	(org-rmail-store-link, org-rmail-follow-link): Handle mbox Rmail.

2009-02-04  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-return-follows-link): Revert setting
	`org-return-follows-link' to t by default.

2009-02-02  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-cycle-global-at-bob): Fix typo.

	* org-jsinfo.el (org-infojs-handle-options): Fix typo in comment.

2009-02-02  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-mode): Make dependence stuff work more reliably.
	(org-update-parent-todo-statistics): Fix bug with updating
	statistics cookie.
	(org-yank-adjusted-subtrees, org-return-follows-link)
	(org-use-fast-todo-selection, org-tags-column): New default
	setting for variables.

	* org-export-latex.el (org-export-latex-emphasis-alist): Use = and
	~ as verbatim delimiters, to avoid table bug.
	(org-export-latex-classes): Remove the a4paper option from the
	default styles.

	* org-exp.el (org-export-html-format-image): New argument
	PAR-OPEN, to fix XHTM validation bug.
	(org-export-as-html): Pass par-open to
	`org-export-html-format-image'.
	(org-export-html-footnotes-section): Use a more consistent id for
	footnotes.

	* org-agenda.el (org-agenda-sorting-strategy)
	(org-agenda-tags-column): New default setting for variables, based
	on a poll what typical uses use.
	(org-agenda-dim-blocked-tasks): Keep dimming blocked entries from
	setting the blocked tag.

2009-01-31  Carsten Dominik  <dominik@science.uva.nl>

	* org-agenda.el (org-agenda-dim-blocked-tasks): No tagging when
	only checking for blocks.

	* org-exp.el (org-export-html-footnotes-section): Make the div id
	consistent.

	* org-export-latex.el (org-export-latex-classes):
	Remove paper size option from LaTeX classes.

2009-01-31  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-enforce-todo-checkbox-dependencies): New option.
	(org-block-todo-from-checkboxes): New function.
	(org-todo): Make triple prefix arg circumvent blocking.

2009-01-30  Glenn Morris  <rgm@gnu.org>

	* org-list.el (org-empty-line-terminates-plain-lists)
	(org-toggle-checkbox): Doc fixes.

	* org-table.el (org-table-clean-before-export): Fix declaration.

2009-01-30  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-timer.el (org-timer): Provide the timer feature.

	* org.el (org-require-autoloaded-modules): Add a few more files to
	the list of autoloaded modules.

	* org-agenda.el (org-agenda-todo): Pass ARG to `org-todo'.

	* org-exp.el (org-export-remove-or-extract-drawers): Only remove
	drawers that are unprotected.
	(org-export-html-format-image): Make sure inlined LaTeX fragment
	images remain inlined.

	* org.el (org-toggle-ordered-property): New function.
	(org-mode-map): Add a key for `org-toggle-ordered-property'.
	(org-org-menu): Add menu entries for TODO dependencies.

	* org.el (org-default-properties): Add ORDERED to the default
	properties, to get completion support for it.

	* org-list.el (org-update-checkbox-count): Update more than one cookie.

	* org.el (org-update-parent-todo-statistics): Update more than one
	cookie.

2009-01-28  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-get-todos): Start search from correct
	position.

	* org.el (org-fast-todo-selection): Make sure TODO selection does
	not change buffer position.

	* org-list.el (org-toggle-checkbox): Implement adding or removing
	checkboxes from line or region when called with a prefix
	argument.

	* org-rmail.el (org-rmail-store-link): Protect the call to
	`rmail-narrow-to-non-pruned-header'.

	* org-clock.el (org-clock-special-range): Fix week display in
	clock tables.

	* org-exp.el (org-get-current-options): Fix bug when in indirect
	buffer.

	* org-agenda.el (org-agenda-dim-blocked-tasks): New option.
	(org-finalize-agenda): Call `org-agenda-dim-blocked-tasks'.
	(org-agenda-dim-blocked-tasks): New function.

	* org.el (org-enforce-todo-dependencies): New option.
	(org-block-todo-from-children-or-siblings): New function.

	* org-faces.el (org-agenda-dimmed-todo-face): New face.

2009-01-27  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-todo): Return correct state type even if the blocker
	throws an error.
	(org-modifier-cursor-error): Rename from
	`org-shiftcursor-error'.
	(org-shiftmetaleft, org-shiftmetaright, org-shiftmetaup)
	(org-shiftmetadown): Call `org-modifier-cursor-error'.

	* org-agenda.el (org-agenda-todo): Call `org-todo' interactively,
	to get real errors from the blocker hook.

	* org.el (org-shiftselect-error, org-call-for-shift-select):
	New functions.
	(org-set-visibility-according-to-property): Turn off the setting
	of `org-show-entry-below', to avoid overruling a FOLDED visibility
	property.

	* org.el (org-support-shift-select): New option.
	(org-shiftup, org-shiftdown, org-shiftright, org-shiftleft)
	(org-shiftcontrolright, org-shiftcontrolleft): Support for shift
	selection outside contexts.

	* org-list.el (org-at-item-bullet-p): New function.

	* org-jsinfo.el (org-infojs-handle-options): Remove unnecessary
	variables.

	* org-footnote.el (org-footnote-normalize): Remove unnecessary
	variable.
	(org-insert-footnote-reference-near-definition):
	Remove unnecessary let form.

2009-01-26  Carsten Dominik  <dominik@science.uva.nl>

	* org-export-latex.el (org-export-as-latex):
	Call `org-export-latex-first-lines' with OPT-PLIST as a parameter.
	(org-export-latex-first-lines): New parameter OPT-PLIST.

	* org.el (org-yank): Tell `delete-selection-mode' about
	`org-yank'.

	* org-faces.el (org-clock-overlay): Fix face definition.

	* org-export-latex.el (org-export-latex-first-lines):
	Pass timestamp and footnote parameters to the preprocessor.

	* org-exp.el (org-export-remove-timestamps): Do not remove time
	stamps inside tables.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-as-html): Turn \par into a paragraph.

	* org.el (org-agenda-tags-todo-honor-ignore-options):
	Declare variable.

	* org-table.el (org-table-insert-hline): Fix typo in function call
	to `backward-char'.

	* org-exp.el (org-export-as-html): Remove the initial space from
	colon examples.

	* org.el (org-scan-tags):
	Call `org-agenda-check-for-timestamp-as-reason-to-ignore-todo-item'.

	* org-agenda.el (org-agenda-todo-list, org-agenda-match-view):
	New customization groups.
	(org-agenda-tags-todo-honor-ignore-options): New option.
	(org-agenda-check-for-timestamp-as-reason-to-ignore-todo-item):
	New function.
	(org-agenda-get-todos):
	Use `org-agenda-check-for-timestamp-as-reason-to-ignore-todo-item'.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-format-source-code-or-example):
	Escape HTML characters also in examples that anre not treated with
	htmlize.  Also, just switch to EXAMPLE processing if we do not
	have a good version of htmlize.

	* org-rmail.el: Fix copyright notice.

	* org.el (org-activate-footnote-links): Improve footnote link
	highlighting.

	* org-footnote.el (org-footnote-normalize): Fix finding the end of
	a footnote definition at the end of the file.

	* org-table.el (org-table-get-specials): Add an imagined hline at
	the end of the table.  This can be useful for references that want
	to go to the end of the table.  Also fix bug when computing last
	row constants, in tables that do not start right at the right
	margin.
	(org-table-eval-formula): Match and replace remove references.
	(org-table-formula-substitute-names): Make sure that names inside
	a "remote" call are left alone, the will be replaced later when
	the remote call is handled.
	(org-table-convert-refs-to-rc): Do not convert things that might
	look like a reference, but are really part of an ID or namei n a
	remote reference.
	(org-table-get-remote-range): New function.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-faces.el (org-clock-overlay): Fix bug in face definition.

	* org-clock.el (org-clock-put-overlay): Use new face instead of
	`secondary-selection'.

	* org-faces.el (org-clock-overlay): New face.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-get-current-options): Include the option for
	publishing time stamps.

	* org.el (org-toggle-heading): Rename from
	`org-toggel-region-headings'.
	No longer needs a region defined, but will use it if there is one.
	(org-ctrl-c-star): Simplify, relying more on the internal
	workings of `org-toggle-heading'.
	(org-toggle-item): Rename from `org-toggle-region-items'.
	No longer needs a region defined, but will use it if there is one.
	(org-ctrl-c-minus): Simplify, relying more on the inernal
	workings of `org-toggle-item'.

	* org-export-latex.el (org-export-latex-preprocess): Fix bug in
	environment detection.  Also, do real changes only in unprotected
	places.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-export-latex.el (org-export-latex-quotation-marks):
	Use `org-if-unprotected-1'.
	(org-export-latex-set-initial-vars): Check for class definition in
	property.

	* org-macs.el (org-if-unprotected-1): New macro.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-compat.el (org-count-lines): New function.

	* org-exp.el (org-export-format-source-code-or-example):
	Handle switches related to text areas.

	* org.el (org-activate-footnote-links): Don't allow match inside a
	link.

	* org-footnote.el (org-footnote-re): Don't allow match inside a link.

	* org-export-latex.el (org-export-latex-links): Keep a relative
	path relative also after export.

	* org-exp.el (org-export-html-scripts): Fix HTML snippet.

	* org.el (org-make-tags-matcher): Never use IDO for completing the
	tags matcher match string.
	(org-completing-read): Also remove the special biding for "?".

	* org-attach.el (org-attach-allow-inheritance): New option.
	(org-attach-inherited): New variable.
	(org-attach-dir): Handle properties related to the attachment
	directory.
	(org-attach-check-absolute-path): New function.
	(org-attach-set-directory, org-attach-set-inherit): New commands.
	(org-attach): Accommodate the new commands in the dispatcher.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-compat.el (org-fit-window-to-buffer): Fix bug with using
	`window-full-width-p'.

	* org-exp.el (org-export-as-html): Only check for images files
	that really can be inlined.

	* org.el (org-image-file-name-regexp, org-file-image-p): Allow the
	list of extensions to be a parameter.

	* org-exp.el (org-export-html-inline-image-extensions):
	New variable.

	* org-agenda.el (org-prepare-agenda):
	Use `org-agenda-block-separator'.
	(org-agenda-block-separator): New option.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-export-latex.el (org-export-latex-tables):
	Call `org-table-clean-before-export' with the new optional argument.

	* org-exp.el (org-table-clean-before-export): New optional
	parameter MAYBE-QUOTED, allows for quoted characters like \# in
	first column.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-plot.el (org-plot/gnuplot): Fix text-ind parameter for
	histograms.

	* org-colview.el (org-colview-construct-allowed-dates):
	Better error catching when a date/time property does not have allowed
	values defined.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-map-entries): Restore point and restriction after
	`org-map-entries'.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-time=, org-time<, org-time<=, org-time>)
	(org-time>=, org-time<>): Make sure both values are dates.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-archive.el (org-extract-archive-heading): Allow %s for file
	name also in achive location heading.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-archive.el (org-add-archive-files): Uniquify the list before
	returning it.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-compat.el (org-fit-window-to-buffer):
	Use `window-full-width-p'.

	* org-export-latex.el (org-export-latex-fixed-width): Enforce the
	space after the colon in short examples.

	* org-exp.el (org-export-protect-colon-examples): Rewritten, to
	enforce a space after the colon.  However, we also allow lines
	that are *only* a colon.
	(org-export-as-html): Enforce the space after the colon in short
	examples.
	(org-export-preprocess-string): Do the colon example protection
	earlier.
	(org-export-remove-timestamps): Do not check for protection at the
	end of the line.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-format-latex-options): Add new matcher for single
	letters between dollars.
	(org-get-header): Function removed.
	(org-heading-components): New function.

	* org-exp.el (org-export-define-heading-targets): Record ID's also
	as alternative targets.
	(org-export-as-html): Interpret "id:" links to other files by
	preserving the relative path.

	* org-jsinfo.el (org-infojs-handle-options): Catch the case if v
	is nil.

	* org-exp.el (org-export-normalize-links): Protect the main link,
	to avoid special character processing.

	* org-export-latex.el (org-export-latex-special-keyword-regexp):
	New variable.
	(org-export-latex-special-string-regexps): Variable removed.
	(org-export-latex-keywords): Use the new regexp.

	* org-exp.el (org-export-handle-include-files): Fetch switches and
	put them into the BEGIN statement.

	* org-timer.el (org-timer-mode-line-string): New variable.

	* org-clock.el (org-clock-mode-line-map): Rename from
	`org-clock-mode-map'.
	(org-clock-mode-line-timer): Rename from `org-mode-line-timer'.
	(org-clock-update-mode-line): Rename from `org-update-mode-line'.
	(org-clock-put-overlay): Rename from `org-put-clock-overlay'.
	(org-clock-remove-overlays): Rename from
	`org-remove-clock-overlays'.

	* org-timer.el (org-timer-pause-or-continue): Implement stopping
	and mode line display.
	(org-timer-stop): New command.
	(org-timer-seconds): Return correct time when timer is paused.
	(org-timer-mode-line-timer): New variable.
	(org-timer-set-mode-line, org-timer-update-mode-line):
	New functions.

	* org.el (org-insert-heading): Handle new value `auto' for
	`org-blank-before-new-entry'.
	(org-org-menu): Add new items for timer functions.

	* org-list.el (org-insert-item): Handle new value `auto' for
	`org-blank-before-new-entry'.

	* org.el (org-blank-before-new-entry): New value `auto', made
	default.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-normalize-links): If the link is also
	used as the description, protect the description.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-closest-date): Fix bug with yearly repeats, in
	combination with preference of the past as it is used for deadline
	and scheduling search.

	* org-exp.el (org-html-handle-time-stamps): No longer check for
	the `org-export-with-timestamps' option, because the preprocesser
	has taken care of this already.

	* org.el (org-entry-properties): Catch the case when this is
	called in a non-org-mode file.

	* org-export-latex.el (org-export-latex-remove-from-headlines):
	Variable made obsolete, also LaTeX export now uses the standard
	variables.
	(org-export-as-latex): Add the timestamps parameter to the
	preprocessor parameter list.
	(org-export-latex-content): Export the remaining keywords without
	considering to remove them.
	(org-export-latex-keywords-maybe): Make the REMOVE-LIST optional.
	Use bold font instead of tt font for the keywords.
	(org-export-latex-fontify-headline): Format headlines, assuming
	that all keywords still present should be published.
	(org-export-latex-keywords): Remove argument TIMESTAMPS and just
	publish what ever remains of the time stamps.
	(org-export-latex-list-parameters): New option.
	(org-export-latex-lists): Pass additional parameters to the list
	converter.

	* org-exp.el (org-export-preprocess-string): Remove clock lines
	and timestamps already in the preprocesor.
	(org-export-remove-timestamps, org-export-remove-clock-lines):
	New functions.
	(org-export-as-ascii, org-export-as-html): Add the timestamps
	parameter to the preprocessor parameter list.

	* org-list.el (org-list-parse-list): Parse for checkboxes.
	(org-list-to-generic): Introduce and handle new parameters :cbon
	and :cboff.
	(org-list-to-latex, org-list-to-html, org-list-to-texinfo):
	Add optional parameter PARAMS.

	* org-export-latex.el (org-export-latex-special-chars):
	Fix problems with interpreting dollar signs.
	(org-inside-latex-math-p): New function.
	(org-export-latex-preprocess): Protect all the math fragments.

	* org.el (org-latex-regexps): Allow a dash after a dollar.

	* org-w3m.el (org-w3m-copy-for-org-mode): Always deactivate the
	mark after copying.

	* org-agenda.el (org-run-agenda-series): Have series options set
	when finalizing the agenda.

	* org-exp.el (org-export-format-source-code-or-example):
	Protect the converted examples.

	* org.el (org-set-regexps-and-options): Fix the regexp
	`org-complex-heading-regexp'.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-edit-src-get-label-format): New function.
	(org-coderef-label-format): New option.
	(org-edit-src-code, org-edit-src-find-region-and-lang): Parse for
	a label format specification and make sure it is used in the edit
	buffer.
	(org-edit-src-get-label-format): New function.
	(org-store-link): Handle new coderef formats.
	(org-link-search): Handle new coderef formats.

	* org-footnote.el (org-footnote-create-definition)
	(org-footnote-goto-local-insertion-point): Make footnote insertion
	work correctly when the "Footnotes" headline is the last line in
	the buffer.

	* org.el (org-goto-marker-or-bmk): Expose context after jumping to
	the location.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-w3m.el (org-w3m): New customization group.
	(org-w3m-deactivate-mark): New option.
	(org-w3m-copy-for-org-mode): Deactivate region, unless the user
	option say not to.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-set-font-lock-defaults): Trigger footnote
	fontification.
	(org-activate-footnote-links): New function.
	(org-activate-links): New entry `footnote'.

	* org-faces.el (org-footnote): New face.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-macs.el (org-re): Handle the [:word:] class.

	* org-exp.el (org-export-preprocess-string):
	Call `org-export-protect-colon-examples'.
	(org-export-protect-colon-examples): Rename from
	`org-export-protect-examples', and scope limited to lines starting
	with a colon.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-preprocess-string): Move the preprocess
	hook to after turning on Org-mode.
	(org-export-preprocess-after-include-files-hook)
	(org-export-preprocess-after-tree-selection-hook)
	(org-export-preprocess-before-backend-specifics-hook)
	(org-export-preprocess-final-hook): New hooks.
	(org-export-preprocess-string): Run the new hooks.

	* org.el (org-ctrl-c-minus): Fix indentation for new items.

	* org-footnote.el: New file.

	* org.el (org-footnote): Require footnote code.
	(org-startup-options): Add new footnote options.
	(org-mode-map): New keybindig for footnotes.
	(org-ctrl-c-ctrl-c): Add function at footnotes.
	(org-org-menu): New menu entries for footnotes.

	* org-export-latex.el (org-export-as-latex): Pass footnote
	variable to preprocessor.
	(org-export-latex-preprocess): Treat multiple references to a
	footnote.

	* org-exp.el (org-export-preprocess-string):
	Call `org-footnote-normalize'.
	(org-export-as-ascii, org-export-as-html): Pass footnote variable
	to preprocessor.
	(org-export-as-html): Treat multiple references to a footnote.

2009-01-25  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-export-latex.el (org-export-latex-links): Handle coderef
	links.

	* org.el (org-bracket-link-analytic-regexp++): New variable.
	(org-make-link-regexps):
	Initialize `org-bracket-link-analytic-regexp++'.
	(org-store-link): Implement special case in edit-src buffer.
	(org-insert-link): No use of ide to insert stored links.
	(org-link-search): Implement special case for coderefs.

	* org-exp.el (org-export-html-scripts): New constant.
	(org-export-html-style-default): Add a new style for highlighted
	code.
	(org-export-code-refs): New variable.
	(org-export-preprocess-string): Initialize `org-export-code-refs'.
	Call `org-export-replace-src-segments-and-examples'
	No longer call `org-export-protect-examples'.
	(org-export-target-internal-links): Take care of coderef targets.
	(org-export-last-code-line-counter-value): New variable.
	(org-export-replace-src-segments-and-examples): Rename from
	`org-export-replace-src-segments', and modified.
	(org-export-format-source-code-or-example): Rename from
	`org-export-format-source-code'.
	(org-export-number-lines): New function.
	(org-export-as-ascii, org-export-as-html): Handle coderef links.

2009-01-23  Glenn Morris  <rgm@gnu.org>

	* org-rmail.el (rmail-narrow-to-non-pruned-header):
	Remove declaration of deleted function.

2009-01-16  Glenn Morris  <rgm@gnu.org>

	* org-mouse.el (org-mouse-show-context-menu):
	Use mouse-menu-major-mode-map, if defined, rather than the obsolete
	mouse-major-mode-menu.

2008-12-23  Carsten Dominik  <dominik@science.uva.nl>

	* org-remember.el (org-remember-handler): Safer way to get a new
	buffer accessing the target file.

	* org.el (org-refile-get-location): Handle case of current buffer
	not having a file associated with it.

2008-12-22  Carsten Dominik  <dominik@science.uva.nl>

	* org-table.el (org-table-get-formula): Only ask to overwrite
	field formula if there really is one.

2008-12-21  Carsten Dominik  <dominik@science.uva.nl>

	* org-export-latex.el (org-export-latex-make-header): Double the
	commenting % in the time stamp format.
	(org-export-latex-special-chars): Handle case where there is no
	match group 3.

2008-12-20  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-get-refile-targets, org-refile-get-location):
	Use expanded file name to improve comparison.

2008-12-20  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-scan-tags): Rescan for tags, to get the correct
	upcase/downcase stuff.  This slows things down for now, but it
	works.
	(org-mode): Make sure the tag-faces regexp is initialized.

	* org-export-latex.el (org-export-latex-links): Fix bug with
	undefined label.

	* org-table.el (org-table-get-specials):
	Set `org-table-current-last-data-line'.
	(org-table-current-last-data-line): New variable.
	(org-table-insert-column, org-table-delete-column)
	(org-table-move-column, org-table-fix-formulas):
	Call `org-table-fix-formulas' a second time to fix the $LR references.
	(org-table-get-specials): Add the $LR references to the tables.
	(org-table-get-formula): Do not offer last-row names as LHS of
	formulas.

	* org.el (org-store-link): Capture link description from
	`org-id-store-link'.

	* org-exp.el (org-export-html-format-image): Add the / to the end
	of the <img> tag.
	(org-export-format-source-code): Surround example by empty lines,
	to make sure it will not be inside a paragraph.

	* org.el (org-ido-switchb): New function.

2008-12-20  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-show): New prefix argument
	FULL-ENTRY.

	* org.el (org-sort-entries-or-items): Add a COMPARE-FUNC
	argument.

2008-12-20  Glenn Morris  <rgm@gnu.org>

	* org.el (org-org-menu): Fix some more menu entries.

2008-12-18  Carsten Dominik  <dominik@science.uva.nl>

	* org-table.el (org-table-get-specials): Revert introduction of @0
	as reference of the last table row, because of conflicts.

	* org-agenda.el (org-agenda-change-all-lines): Remove FORCE-TAGS
	argument, get the current tags directly.
	(org-agenda-set-tags): Leave getting current tags to
	`org-agenda-change-all-lines'.

2008-12-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-org-menu): Do not quote the set-tags command.

2008-12-17  Carsten Dominik  <carsten.dominik@gmail.com>

	* Fix typos in comments and docstrings throughout Org-mode.

	* org.el (org-get-outline-path): Fix bug if level is not given.

	* org-agenda.el (org-finalize-agenda): Fix typo with variable name.

2008-12-16  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-refile): Avoid refiling to within the region to be
	refiled.

	* org-export-latex.el (org-export-latex-special-chars):
	Replace special characters also in tables.

	* org-agenda.el (org-agenda-change-all-lines): New argument
	FORCE-TAGS.
	(org-agenda-set-tags): Get the new tags and pass them to
	`org-format-agenda-item'.

2008-12-16  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-export-latex.el (org-export-latex-classes): Add longable as
	a default package to all classes.
	(org-export-latex-tables): Handle the longtable attribute and the
	align attribute.

	* org-table.el (orgtbl-to-generic): Handle tables that start with
	a hline.

	* org-export-latex.el (org-export-latex-emphasis-alist): Switch to
	\verb for colde-like snippets.
	(org-export-as-latex): Fix issues with region export.

	* org.el (org-up-heading-safe): Speed up function by using a
	direct regexp search.
	(org-olpa): New variable.
	(org-get-outline-path): Speed-up path constructions in cases where
	this is possible because the entire hierarchy is scanned anyway.
	(org-refile-get-location): Don't compare the truenames of files,
	this is too slow.
	(org-goto-max-level): New option.
	(org-goto): Use `org-goto-max-level'.

2008-12-16  Tassilo Horn  <tassilo@member.fsf.org>

	* org-gnus.el (org-gnus-article-link, org-gnus-article-link):
	Strip angle brackets from message-ids in the former and don't do
	it in the latter.
	(org-gnus-follow-link): Open summary reliable, even if the last
	messages were deleted, and handle empty groups, too.

2008-12-16  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-export-latex.el (org-export-latex-emphasis-alist): Use \verb
	instead of \texttt for the =...= and ~===~ emphasis environments.
	(org-export-as-latex): Remove any old :org-license-to-kill text
	properties.
	(org-export-as-latex): Pass RBEG to `org-export-latex-first-lines'.
	(org-export-latex-make-header): Add some hard space after the
	table of contents.
	(org-export-latex-first-lines): Accept RBEG argument.
	Mark exported text so that it will be excuded in further steps.

	* org-table.el (org-table-get-specials): Make @0 reference the
	last line in a table.
	(org-table-recalculate): Improve docstring.

2008-12-16  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-log-done): Fix docstring.

2008-12-16  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-html-format-image): Fix bugs.

	* org-export-latex.el (org-export-latex-tables)
	(org-export-latex-links): Implement attribute, label, and caption
	handling.

	* org-exp.el (org-export-html-style-default): Add style
	definitions for the figure div.
	(org-export-preprocess-string, org-export-as-html):
	Implement attribute, label, and caption handling.
	(org-export-attach-captions-and-attributes): New function.
	(org-export-html-format-image): New function.
	(org-format-org-table-html): Implement attribute, label, and
	caption handling.

	* org.el (org-find-text-property-in-string): New function.
	(org-extract-attributes): Use the property org-attr instead of
	org-attrobutes, because this property is now set with the #+ATTR
	lines.

2008-12-16  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-compat.el (org-substring-no-properties): Fix for XEmacs, for
	the case that FROM is nil.

	* org.el (org-before-first-heading-p): New function.

2008-12-16  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-as-html): Do not add a space before
	enforces line breaks.
	(org-export-as-html): Close paragraph before blockquote and verse
	tags.

2008-12-16  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-id.el (org-id-locations-file): Wrap file name with
	`convert-standard-filename'.
	(org-id-files): New variable.
	(org-id-use-hash): New option.
	(org-id-update-id-locations): Also search in all files current
	listed in `org-id-files'.  Convert the resulting alist to a hash
	if the user customation says so.
	(org-id-locations-save): Handle he case if `org-id-locations' is a
	hash.
	(org-id-locations-load): Convert the alist to a hash.
	(org-id-add-location): Handle the hast case.
	(kill-emacs-hook): Make sure id locations are saved when Emacs is
	exited.
	(org-id-hash-to-alist, org-id-alist-to-hash)
	(org-id-paste-tracker): New functions.

2008-12-07  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-goto-calendar): Remove duplicate let
	bindings of calendar variables.

	* org-table.el (org-table-find-row-type): Rename from
	`org-find-row-type'.
	(org-table-rewrite-old-row-references): Rename from
	`org-rewrite-old-row-references'.
	(org-table-shift-refpart): Rename from `org-shift-refpart'.
	(org-table-cleanup-narrow-column-properties): Rename from
	`org-cleanup-narrow-column-properties'.

2008-12-07  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (org-find-row-type): New arguments DESC and CLINE,
	for better error messages.
	(org-table-get-descriptor-line): Supply the new arguments to
	`org-find-row-type'.
	(org-table-error-on-row-ref-crossing-hline): New option.

	* org.el (org-target-link-regexp): Make buffer-local.
	(org-move-subtree-down): Fix bug with trees at beginning of
	buffer.

2008-12-07  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-faces.el (org-set-tag-faces): New function.
	(org-tags-special-faces-re): New variable.

	* org.el (org-font-lock-add-tag-faces, org-get-tag-face): New functions.

	* org-faces.el (org-tag-faces): New option.
	(org-tag): Mention `org-tag-faces' in the docstring.

2008-12-07  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-html-style-default): Implement new
	quoting.

	* org-jsinfo.el (org-infojs-template): Implement new quoting.

	* org-w3m.el (w3m-minor-mode-hook): Also add the special copy
	command to the `w3m-minor-mode-map'.

	* org-archive.el (org-archive-to-archive-sibling):
	Protect `this-command' to avoid appending kills during archiving.

	* org-exp.el (org-export-with-priority): New variable.
	(org-export-add-options-to-plist): Use `org-export-plist-vars'
	instead of internal list of strings and properties.
	(org-print-icalendar-entries): Retrieve the location property with
	inheritance.

2008-12-07  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-with-todo-keywords): New option.
	(org-export-plist-vars): Include also the keys for the #+OPTIONS
	line.
	(org-default-export-plist, org-export-add-options-to-plist)
	(org-export-as-ascii, org-export-as-html): Use the new structure
	of `org-export-plist-vars'.

	* org.el (org-map-entries): Return all values.

2008-12-07  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-matcher-time): Recognize more special values.

	* org-gnus.el (fboundp): Fix defvaralias for XEmacs.

2008-12-07  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-tags-exclude-from-inheritance): New option.
	(org-tag-inherit-p, org-remove-uniherited-tags):
	Respect `org-tags-exclude-from-inheritance'.

	* org-agenda.el (org-agenda-show-inherited-tags): New option.
	(org-format-agenda-item): Add inherited tags to the agenda line
	string, and make sure that properties are kept when downcasing the
	tags list.
	(org-agenda-add-inherited-tags): New function.
	(org-downcase-keep-props): New function.

	* org.el (org-scan-tags): Mark inherited tags with a text
	property.
	(org-get-tags-at): Mark inherited tags with a text property.
	(org-add-prop-inherited): New function.

	* org-agenda.el (org-agenda-add-inherited-tags): New function.
	(org-agenda-show-inherited-tags): New option.

2008-12-07  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-modules): Add org-w3m to the default modules.

	* org-table.el (orgtbl-self-insert-command): Make S-SPC work in
	orgtbl-mode.
	(orgtabl-create-or-convert-from-region): New command.

	* org-exp.el (org-export-as-ascii): Remove the handling of
	targets.
	(org-export-ascii-preprocess): Handle targets already in this
	function.

2008-12-07  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-timer.el (org-timer-start-time): Define this variable.
	(org-timer-item): Make argument optional.

	* org-list.el (org-insert-item): Automatically insert a timer item
	if the current list is a timer list.

	* org-timer.el: New file.

	* org-publish.el (org-publish-org-index): Only exclude the index
	file in the main directory from being added to the site-map.
	(org-publish-get-project-from-filename): If the current project is
	a component, start publishing from the parent project.

2008-12-07  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-table.el (orgtbl-ret): Fix RET at beginning-of-buffer.

	* org-publish.el (org-publish-org-index): Improve removal of
	temporary buffers.

2008-11-24  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-get-closed): Re-apply changes
	accidentially overwritten by last commit to Emacs.

	* org.el (org-outline-path-complete-in-steps): New option.
	(org-refile-get-location):
	Honor `org-outline-path-complete-in-steps'.
	(org-agenda-change-all-lines, org-tags-sparse-tree)
	(org-time-string-to-absolute, org-small-year-to-year)
	(org-link-escape): Re-apply changes accidentially overwritten
	by last commit to Emacs.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-dblock-write:clocktable): Make sure the
	clocktable sees the first line.
	(org-clock-in): Warn if the clock cannot be resumed.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-open-at-point): Fix mixup about interactive and
	non-interactive elisp links.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-preprocess-string): Allow one comment
	line before the first headline to always be included.  This is
	to not miss a commented target.

	* org-mouse.el (org-mouse-insert-item):
	Call `org-indent-to-column' instead of `indent-to', for XEmacs
	compatibility.

	* org.el (org-refile-targets): Fix customize definition so
	that it works also in XEmacs.
	(org-fixup-indentation): Call `org-indent-to-column' instead
	of `indent-to', for XEmacs compatibility.

2008-11-23  Tokuya Kameshima  <kames@fa2.so-net.ne.jp>

	* org-mew.el (org-mew-store-link): Get the correct case folder
	for refiled messages.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-as-ascii): Remove the "\\" forced
	line break indicators.

	* org.el (org-ido-completing-read): Remove the "i:" prefix for
	ido-completion propts.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-remember-apply-template):
	Use `org-substring-no-properties'.

	* org-compat.el (org-substring-no-properties): New function.

	* org-remember.el (org-remember-apply-template):
	Use `org-substring-no-properties' for compatibility.

	* org-list.el (org-list-two-spaces-after-bullet-regexp):
	New option.
	(org-fix-bullet-type):
	Respect `org-list-two-spaces-after-bullet-regexp'.

	* org-clock.el (org-clock-load): Clean up the code.

	* org.el (org-adaptive-fill-function): Allow two spaces after
	"1." as a list bullet.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-clock.el (org-clock-save, org-clock-load): Check for
	live buffers, existing files, and buffer file names to ensure
	consistent information.
	(org-clock-persist): Make `clock' a special value of this
	variable, and improve docstring.

	* org-list.el (org-cycle-list-bullet, org-fix-bullet-type)
	(org-get-string-indentation): Adapt indentation when the bullet
	width changes.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-remember-finalize): Make interactive.
	(org-remember-kill): New command.
	(org-remember-finish-immediately): Call `org-remember-finalize'
	directly.
	(org-remember-finalize): Make `org-remember-finalize' an interactive
	function.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-remember.el (org-remember-apply-template): No ido completion
	for free prompts in remember templates.
	(org-remember-before-finalize-hook): New hook.
	(org-remember-mode): New minor mode.
	(org-remember-apply-template): Turn on `org-remember-mode'.

	* org-remember.el (org-remember-apply-template): Fix the way how
	the list of allowed properties is retrieved from the target file.

	* org.el (org-insert-link): Improve file link matching.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-colview.el (org-columns-display-here): New argument
	DATELINE, to trigger using the new face.
	(org-agenda-colview-summarize): Call `org-columns-display-here'
	with the new argument.

	* org-faces.el (org-agenda-column-dateline): New face.

	* org-publish.el (org-publish-org-index): Use index-title at page
	title, not as section.

	* org-exp.el (org-export-html-format-desc): Respect the
	org-protect property.
	(org-export-as-html): Protect image specifiers that are in the
	description part of a link.

	* org.el (org-sort-entries-or-items, org-completing-read)
	(org-refile-get-location, org-olpath-completing-read, org-todo)
	(org-show-todo-tree, org-sparse-tree, org-make-tags-matcher)
	(org-set-tags, org-change-tag-in-region, org-fast-tag-selection)
	(org-set-property, org-delete-property)
	(org-delete-property-globally): Use `org-ido-completing-read'.

	* org-remember.el (org-remember-apply-template):
	Use `org-ido-completing-read'.

	* org-publish.el (org-publish): Use `org-ido-completing-read'.

	* org-colview.el (org-columns-edit-value, org-columns-new)
	(org-insert-columns-dblock): Use `org-ido-completing-read'.

	* org-attach.el (org-attach-delete-one, org-attach-open):
	Use `org-ido-completing-read'.

	* org-agenda.el (org-todo-list, org-agenda-filter-by-tag):
	Use `org-ido-completing-read'.

	* org.el (org-time-today): New function.
	(org-matcher-time): Use `org-time-today'.  Add special treatment
	for "<tomorrow>" and "<yesterday>".
	(org-ido-completing-read): New function.
	(org-completion-use-ido): New option.

	* org-exp.el (org-export-format-source-code): Fix bug in require
	htmlize code.
	(org-export-target-internal-links): Fix bug in search for text
	property.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-export-latex.el (org-export-latex-subcontent):
	Interpret target aliases as additional labels.

	* org-exp.el (org-export-target-aliases): New variable.
	(org-export-preprocess-string)
	(org-export-handle-invisible-targets): Fill the alias alist.
	(org-export-as-html): Remove the &nbsp; from the anchor, and also
	assign an id.
	(org-html-level-start): Insert the target aliases as additional
	anchors.

	* org.el (org-edit-fixed-width-region): Fix bug when starting a new
	picture area.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-open-at-mouse): Ensure correct link abbreviations
	when following a link with the mouse from the agenda.

	* org-exp.el (org-export-as-html): Avoid lone </div> when no
	headlines are created.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-link-translation-function): New option.
	(org-open-at-point): Call `org-link-translation-function' if
	non-nil.
	(org-translate-link): New function.
	(org-translate-link-from-planner): New function.
	(org-open-at-point): Allow interactive commands in elisp links.

	* org-exp.el (org-icalendar-cleanup-string): Restore the old
	iCalendar quoting.  The new one seems to caus problems with
	applications.

	* org.el (org-yank): Set `this-command' to `yank', so that
	`yank-pop' will work.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-icalendar-cleanup-string): Improve RFC2455
	compliance as far as quoting is concerned.

	* org.el (org-link-expand-abbrev): Implement %h as an escape for a
	hexified version of the tag.

	* org-vm.el (org-vm-follow-link): Require `vm-search'.

	* org.el (org-up-heading-safe, org-forward-same-level):
	Always call `org-back-to-heading' instead of `outline-back-to-heading'.
	(org-back-to-heading): New wrapper around outline-back-to-heading,
	with a useful error message telling where the error happened.

	* org-list.el (org-update-checkbox-count): Always call
	`org-back-to-heading' instead of `outline-back-to-heading'.

	* org-exp.el (org-export-as-html): Make sure that each <img> tag
	has an `alt' attribute, to ensure XHTML validation.

2008-11-23  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-publish.el (org-publish-attachment): Allow publishing to
	overwrite attachment files.

	* org-agenda.el (org-agenda-timerange-leaders): New option.
	(org-agenda-get-blocks): Use `org-agenda-timerange-leaders'.

	* org.el (org-edit-src-exit): Untabify ASCII image before
	returning.

2008-11-19  Glenn Morris  <rgm@gnu.org>

	* org.el, org-mouse.el (org-agenda-change-all-lines):
	Fix declaration.

2008-11-18  Carsten Dominik  <dominik@science.uva.nl>

	* org.el ("speedbar"): Only show context if the file really is an
	org-mode buffer.

2008-11-17  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-time-string-to-absolute, org-small-year-to-year)
	(org-tags-sparse-tree): Fix typos in docstrings.

2008-11-15  Carsten Dominik  <dominik@science.uva.nl>

	* org-publish.el (org-publish-attachment): Allow copy-file to
	overwrite files.

2008-11-13  Glenn Morris  <rgm@gnu.org>

	* org-agenda.el (org-get-closed): Fix alias.

2008-11-12  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-link-escape): Fix typo in docstring.

2008-11-12  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-yank): Make any prefix force normal yanking.
	Suppress folding if text would be swallowed into a folded
	subtree.
	(org-yank-folded-subtrees, org-yank): Docstring updates.

	* org-agenda.el (org-agenda-compare-effort): Treat no effort
	defined as 0.

	* org-exp.el (org-export-language-setup): Add Catalan and
	Esperanto language entries.

2008-11-12  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-refile): Allow refiling of entire regions.

	* org-clock.el (org-clock-time%): New function.

	* org.el (org-entry-get, org-entry-delete): Use safer regexps to
	retrieve property values.

2008-11-12  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-agenda.el (org-agenda-list): Handle the value `only' of
	org-agenda-show-log'.
	(org-agenda-log-mode): Interpret a double prefix arg.

2008-11-12  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-exp.el (org-export-html-footnotes-section): New variable.
	(org-export-as-html): Use `org-export-html-footnotes-section' to
	insert the footnotes.
	(org-export-language-setup): Add "Footnotes" to language words.

2008-11-12  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-yank): Fix bug when not inserting a subtree.

2008-11-12  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-vm.el (org-vm-follow-link): Call `vm-preview-current-message'
	instead of `vm-beginning-of-message'.

	* org.el (org-make-link-regexps): Make sure that links to gnus can
	contain brackets.

2008-11-12  Carsten Dominik  <carsten.dominik@gmail.com>

	* org-attach.el (org-attach-dir): Remove duplicate ID creation
	code.

	* org-id.el (org-id-new): Use `org-trim' to extract the uuid from
	shell output.

	* org.el (org-link-abbrev-alist): Improve customization type.

	* org-attach.el (org-attach-expand-link, org-attach-expand):
	New functions.

	* org-agenda.el (org-agenda-get-progress): Rename from
	`org-get-closed'.  Implement searching for state changes as well.
	(org-agenda-log-mode-items): New option.
	(org-agenda-log-mode): New option prefix argument, interpreted as
	request to show all possible progress info.
	(org-agenda-get-day-entries): Call `org-get-progress' instead of
	`org-get-closed'.
	(org-agenda-set-mode-name): Handle the more complex log mode
	settings.
	(org-get-closed): New alias, pointing to `org-get-progress'.

2008-11-12  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-file-apps-defaults-gnu)
	(org-file-apps-defaults-macosx)
	(org-file-apps-defaults-windowsnt): Add an entry defining the
	system command.
	(org-file-apps): Allow `system' as key and value.
	(org-open-at-point): Explain the effect of a double prefix arg.
	(org-open-file): If the argument `in-emacs' is (16),
	i.e. corresponding to a double prefix argument, try to open the
	file externally.

2008-11-12  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-insert-link): Abbreviate absolute files names in
	links.  Also, fix a bug in which the double C-u prefix would not
	be honored.

2008-11-12  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-insert-heading): If buffer does not end with a
	newline, add one if necessary to insert headline correctly.

	* org-exp.el (org-export-as-html): Make sure that <hr/> is between
	paragraphs, not inside.

	* org.el (org-todo):
	Quote `org-agenda-headline-snapshot-before-repeat'.

	* org-exp.el (org-export-as-html): Fully process link descriptions.
	(org-export-html-format-desc): New function.
	(org-export-as-html): Collect footnotes into the correct basket.
	(org-html-protect): No longer protect quotations marks here, this
	goes wrong.

	* org-agenda.el (org-agenda-remove-marked-text): Bind variable
	BEG.

	* org-compat.el (org-fit-window-to-buffer): New function (not
	really, a preliminary and incomplete version was present earlier,
	but not used).

	* org.el (org-fast-todo-selection, org-fast-tag-selection):
	Use `org-fit-window-to-buffer'.

	* org-exp.el (org-export): Use `org-fit-window-to-buffer'.

	* org-agenda.el (org-agenda-get-restriction-and-command)
	(org-fit-agenda-window, org-agenda-convert-date):
	Use `org-fit-window-to-buffer'.

	* org-exp.el (org-export-as-html): Process href links through
	`org-export-html-format-href'.
	(org-export-html-format-href): New function.

	* org-agenda.el (org-agenda-todo): Update only the current
	headline if this is a repeated TODO, marked done for today.
	(org-agenda-change-all-lines): New argument JUST-THIS, to change
	only the current line.

	* org.el (org-todo): Take a snapshot of the headline if the
	repeater might change it.

2008-11-12  Carsten Dominik  <dominik@science.uva.nl>

	* org-publish.el (org-publish-find-title): Remove buffers visited
	only for extracting the title.

	* org-exp.el (org-export-html-style)
	(org-export-html-style-default): Mark style definitions as
	unparsed CDATA.

	* org-publish.el (org-publish-validate-link):
	Function re-introduced.

2008-11-12  Charles Sebold  <csebold@gmail.com>

	* org-plot.el (org-plot/add-options-to-plist): Supports timefmt
	property.
	(org-plot-quote-timestamp-field): New function.
	(org-plot-quote-tsv-field): Call timestamp field function when
	necessary rather than just quoting as a string.
	(org-plot/gnuplot-to-data): Pass in timefmt property.
	(org-plot/gnuplot-script): Supports timefmt property.
	(org-plot/gnuplot): Checks for timestamp column before checking
	for text index column.

2008-11-12  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-insert-heading): Improve behavior with hidden subtrees.

	* org-publish.el (org-publish-org-index): Create a section in the
	index file.
	(org-publish-org-index): Stop linking to directories.

	* org.el (org-emphasis-alist): Use span instead of <u> to
	underline text.

	* org-exp.el (org-export-as-html): Make sure <p> is closed before
	<pre> sections.

2008-11-12  Sebastian Rose  <sebastian_rose@gmx.de>

	* org-jsinfo.el (org-infojs-template): Remove language attribute
	from script tag.

2008-11-12  Carsten Dominik  <dominik@science.uva.nl>

	* org-agenda.el (org-agenda-remove-marked-text): New function.
	(org-agenda-mark-filtered-text)
	(org-agenda-unmark-filtered-text): New functions.
	(org-write-agenda): Remove filtered text.

	* org.el (org-make-tags-matcher): Give access to TODO "property"
	without speed penalty.

2008-11-12  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-link-frame-setup): Add `org-gnus-no-new-news' as an
	option.
	(org-store-link-props): Make sure adding to the plist works
	correctly.

	* org-gnus.el (org-gnus-no-new-news): New function.
	(org-gnus-follow-link): Allow the article ID to be a message-id,
	in addition to allowing article numbers.  Message IDs make much
	more roubust links.
	(org-gnus-store-link): Use message-id to create link.

2008-11-12  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-emphasize): Reverse the selection array.
	(org-emphasis-alist): Set <code> tags for the verbatim
	environment.

	* org-remember.el (org-remember-handler): Fix bug with
	prefix-related changing of the note storage target.

	* org-exp.el (org-print-icalendar-entries): Make the exported
	priorities compatible with RFC 2445.

	* org-clock.el (org-clock-save): Insert time stamp without
	dependence on time-stamp.el.

2008-11-12  Carsten Dominik  <dominik@science.uva.nl>

	* org.el ("saveplace"): If saveplace puts point into an invisible
	location, make it visible.
	(org-make-tags-matcher): Allow inactive time stamps in time
	comparisons.
	(org-yank-adjusted-subtrees): New option.
	(org-yank): Incorporate adjusting trees.
	(org-paste-subtree): New argument FOR-YANK which will cause
	insertion at point without backing up over white lines, and leave
	point at the end of the inserted text.  Also if the cursor is
	at the beginning of a headline, use the same level or the inserted
	tree.

	* org-publish.el (org-publish-get-base-files-1): Deal correctly
	with broken symlinks.

2008-11-12  Carsten Dominik  <dominik@science.uva.nl>

	* org-exp.el (org-export-select-tags, org-get-current-options):
	Fix typo.

2008-11-06  Glenn Morris  <rgm@gnu.org>

	* org-publish.el (org-publish-attachment): Use copy-file rather than
	eshell/cp.

2008-11-04  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-columns-modify-value-for-display-function):
	* org-table.el (org-table-convert-region): Fix typos in docstrings.

2008-10-28  Glenn Morris  <rgm@gnu.org>

	* org-agenda.el (org-agenda-align-tags): Replace use of cl `adjoin'.

	* org-list.el (outline-next-heading, outline-back-to-heading):
	Fix declarations.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org-agenda.el (org-format-agenda-item)
	(org-agenda-filter-make-matcher): Make sure tags are stored and
	compared downcased.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-insert-todo-heading): Fix bug with force-heading
	argument.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org-exp.el (org-export-as-ascii): Handle the case that we are
	bulishing from an indirect buffer.

	* org-table.el (org-table-copy-down): Fix bug with time stamp
	increment.

	* org-mouse.el (org-mouse-features): New option.
	(org-mode-hook): Turn on features depending on
	`org-mouse-features'.

	* org.el (org-insert-heading-respect-content): Force heading
	creation.
	(org-insert-heading): Keep the folding state of the heading before
	the inserted one.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org-archive.el (org-archive-to-archive-sibling): Handle top
	level headlines better.

2008-10-26  Bastien Guerry  <bzg@gnu.org>

	* org-export-latex.el (org-export-latex-classes):
	Add \usepackage{graphicx} to the default list of packages.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org-agenda.el (org-agenda-filter): Rename from
	`org-agenda-filter-tags'.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-entry-properties): Add CATEGORY property, iven if it
	is not defined as a property in this entry.
	(org-add-log-note): Mask prefix argument when immediately storing
	the note.

	* org-agenda.el (org-agenda-filter-effort-default-operator):
	New option.

2008-10-26  James TD Smith  <ahktenzero@mohorovi.cc>

	* org.el (org-add-log-setup): Bugfix; code to find insertion point
	after drawers was skipping ahead one line too many, so notes were
	inserted after the first note instead of before it.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org-agenda.el (org-agenda-filter-tags, org-agenda-filter-form):
	New variables.
	(org-prepare-agenda): Reset the filter tags.
	(org-agenda-filter-by-tag, org-agenda-filter-by-tag-show-all):
	Show filter tags in mode line.

	* org-table.el (orgtbl-to-html): Bind `html-table-tag' for the
	formatter.

	* org-export-latex.el (org-latex-entities-regexp): New constant.
	(org-export-as-pdf): Use two calls to `shell-command'.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org-export-latex.el (org-export-latex-treat-sub-super-char):
	Honor the {} value of the subsuperscript setting.  Make sure that
	longer subsuperscripts are typeset in a roman font.

	* org.el (org-clock-update-time-maybe): Compute negative clock
	intervals correctly.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-add-log-setup):
	Respect `org-log-state-notes-insert-after-drawers'.
	(org-log-state-notes-insert-after-drawers): New option.
	(org-todo-trigger-tag-changes): New function.
	(org-todo): Call `org-todo-trigger-tag-changes'.

2008-10-26  James TD Smith  <ahktenzero@mohorovi.cc>

	* org.el (org-add-log-setup): Only skip drawers if they are
	immediately after the scheduling keywords.

	* org-clock.el (org-clock-in-switch-to-state): Allow this to be a
	function.
	(org-clock-in): If `org-clock-in-switch-to-state' is a function,
	call it with the current todo state to get the state to switch to
	when clocking in.
	(org-clock-in): Use org-indent-line-function to indent clock lines.
	(org-clock-find-position): Fix indentation of empty clock drawers.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org-publish.el (org-publish-org-to): Handle case when
	org-export-to-pdf does return a file name, not a buffer.
	(org-publish-org-to-pdf): New function.

	* org-export-latex.el (org-export-as-pdf)
	(org-export-as-pdf-and-open): New commands.

	* org-table.el (org-table-eval-formula): Avoid parsing Calc's HMS
	forms as ranges.

	* org-export-latex.el (org-export-latex-lists): Ignore lists-like
	things in protexted regions.

2008-10-26  Carsten Dominik  <dominik@science.uva.nl>

	* org-export-latex.el (org-export-latex-preprocess):
	Improve quoting of LaTeX environments.

2008-10-19  Eli Zaretskii  <eliz@gnu.org>

	* org.el (org-default-notes-file):
	* org-publish.el (org-publish-timestamp-directory):
	* org-id.el (org-id-locations-file): Run file names that begin
	with a period thru `convert-standard-filename'.

2008-10-12  Carsten Dominik  <dominik@science.uva.nl>

	* org-plot.el: Switch coding system to unix.

2008-10-12  John Wiegley  <johnw@newartisans.com>

	* org-attach.el: New file.

2008-10-12  Carsten Dominik  <carsten.dominik@gmail.com>

	* org.el (org-edit-fixed-width-region): Exclude final newline from
	picture area.

	* org-export-latex.el (org-export-latex-subcontent): Add labels to
	sections, to make internal links work.
	(org-export-latex-fontify-headline): Do not remove all text
	properties, to make sure that target properties survive this
	process.

	* org-exp.el (org-export-preprocess-string): Change sequence of
	modifications, to make sure links are prepared before the LaTeX
	conversions do happen.

	* org-attach.el (org-attach-delete-all): Rename from
	`org-attch-delete'.  Add a security query before deleting the
	entire directory.  New optional argument FORCE can overrule the
	security query.
	(org-attach-delete-one): New command.

	* org-attach.el (org-attach-file-list): Fix bug with directory.

	* org.el (org-apps-regexp-alist): New function.
	(org-file-apps): Add auto-mode to the default value.
	(org-open-file): Use the new structure of org-file-apps.

	* org-attach.el (org-attach): Support the new keys.
	(org-attach-method): New option.

	* org-bbdb.el (org-bbdb-anniversaries): Fix but with 29 Feb/1
	March.

	* org.el (org-remove-uniherited-tags): Fix reverse interpretation
	of the list value o `org-use-tag-inheritance'.

	* org-attach.el (org-attach-auto-tag): New option.
	(org-attach-tag, org-attach-untag): New functions.
	(org-attach-attach, org-attach-new, org-attach-sync):
	Call `org-attach-tag'.
	(org-attach-delete): Call `org-attach-untag'.

	* org-table.el (orgtbl-self-insert-command): Make this work for
	the keypad as well.

	* org.el (org-add-log-setup): Limit searc for drawers to entry
	text, not to subtree.

	* org-clock.el (org-clock-heading-for-remember): New variable.
	(org-clock-in): Set `org-clock-heading-for-remember'.

2008-10-12  James TD Smith  <ahktenzero@mohorovi.cc>

	* org-remember.el (org-remember-apply-template): Add new
	expansions: %k, %K for currently clocked task and a link to the
	currently clocked task, and %< to file notes in the currently
	clocked task.

2008-10-12  Carsten Dominik  <dominik@science.uva.nl>

	* org-export-latex.el (org-export-latex-make-header): Also insert
	the content of the property :latex-header-extra.

	* org-exp.el (org-infile-export-plist): Put the content of
	#+LATEX_HEADER: into the property :latex-header-extra.

	* org-colview.el (org-columns-get-format-and-top-level):
	Remove resetting the marker.

	* org.el (org-entry-property-inherited-from): Improve docstring.
	(org-entry-get-with-inheritance): Reset marker before starting the
	search.

	* org-exp.el (org-infile-export-plist): Allow multiple STYLE lines.

	* org.el (org-entry-get-multivalued-property)
	(org-entry-protect-space, org-entry-restore-space):
	New functions.
	(org-file-apps-defaults-macosx): Let PostScript files be opened by
	preview.
	(org-time-stamp-inactive): Call `org-time-stamp'.
	(org-time-stamp): New argument `inactive'.  Also edit inactive
	stamps.  Convert time stamp type.
	(org-open-file): Interpret the `default' value for the `command'
	in `org-file-apps'.

	* org-id.el (org-id-int-to-b36-one-digit)
	(org-id-b36-to-int-one-digit, org-id-int-to-b36)
	(org-id-b36-to-int, org-id-time-to-b36): Modify from b62 to
	b36.

	* org-id.el (org-id-reverse-string): New function.
	(org-id-new): Use `org-id-reverse-string' to make sure the
	beginning chars of the ID are mutating fast.  This allows to use a
	directory structure to spread things better.
	(org-id-prefix): Change default to nil.

	* org-list.el (org-move-item-down, org-move-item-up): Remember and
	restore the column of the cursor position.

	* org-remember.el (org-remember-apply-template): Remove properties
	from `initial'.

	* org-wl.el (org-wl-open): Remove useless call to
	`wl-thread-open-all'.

	* org-remember.el (org-remember-handler): Fix bug with `bottom'
	location.

	* org-bbdb.el (org-bbdb-anniversaries): Require bbdb in
	`org-bbdb-anniversaries'.

	* org.el (org-get-next-sibling, org-forward-same-level):
	New functions, similar to the outline versions, but invisible headings
	are OK.

2008-10-12  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-auto-repeat-maybe): Insert a space between
	the timestamp's type and the timestamp itself.

2008-10-12  Carsten Dominik  <dominik@science.uva.nl>

	* org-table.el (org-table-sum): Do not format the result with %g,
	it does rounding when there are too many digits.

	* org.el (org-map-entries): Protect the keyword-selecting variables.

2008-10-12  Bastien Guerry  <bzg@gnu.org>

	* org-agenda.el (org-agenda-to-appt): Make sure the function check
	against all agenda files.

2008-10-12  Carsten Dominik  <dominik@science.uva.nl>
	    Bastien Guerry  <bzg@gnu.org>

	* org-list.el: New file, aggregating list functions from org.el
	and org-export-latex.el.

2008-10-12  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-edit-src-region-extra): New option.

	* org-agenda.el (org-agenda-to-appt): Fix bug with appointment
	time before 1am.

2008-10-12  Bastien Guerry  <bzg@gnu.org>

	* org-export-latex.el (org-export-latex-keywords-maybe): Bug fix.

2008-10-12  James TD Smith  <ahktenzero@mohorovi.cc>

	* org-plot.el (org-plot/gnuplot): Make tables starting with a
	hline work correctly.
	(org-plot/gnuplot-script): Put commas at the end of each script
	line.

	* org.el (org-get-refile-targets): Replace links with their
	descriptions.
	(org-imenu-get-tree): Replace links with their descriptions.

	* org-remember.el (org-remember-apply-template): Add a new
	expansion for adding properties to remember items.

	* org.el (org-add-log-setup): Skip over drawers (properties,
	clocks etc) when adding notes.

	* org-agenda.el (org-agenda-get-closed): Show durations of clocked
	items as well as the start and end times.

	* org-compat.el (org-get-x-clipboard-compat): Add a compat
	function for fetching the X clipboard on XEmacs and GNU Emacs 21.

	* org-remember.el (org-get-x-clipboard): Use the compat
	function to get clipboard values when x-selection-value is
	unavailable.  Use substring-no-properties instead of
	set-text-properties to remove text properties from the clipboard
	value.

	* org-clock.el (org-update-mode-line): Support limiting the
	modeline clock string, and display the full todo value in the
	tooltip.  Set a local keymap so mouse-3 on the clock string goes to
	the currently clocked task.
	(org-clock-string-limit): Add a custom value for the maximum
	length of the clock string in the modeline.
	(org-clock-mode-map): Add a keymap for the modeline string.

2008-10-12  Carsten Dominik  <dominik@science.uva.nl>

	* org-compat.el (org-propertize): New function.

2008-10-12  Bastien Guerry  <bzg@gnu.org>

	* org-export-latex.el (org-export-latex-tables): Protect exported
	tables from further special chars conversion.
	(org-export-latex-preprocess): Preserve LaTeX environments.
	(org-list-parse-list): Parse descriptive lists.
	(org-list-to-generic, org-list-to-latex, org-list-to-html)
	(org-list-to-texinfo): Export descriptive lists.
	(org-quote-chars): Remove.
	(org-export-latex-keywords-maybe): Use `replace-regexp-in-string'.
	(org-export-latex-list-beginning-re): Rename to
	`org-list-beginning-re'.
	(org-list-item-begin): Rename to `org-list-item-beginning'.

2008-10-12  Eric Schulte  <schulte.eric@gmail.com>

	* org-plot.el: New file.

2008-10-12  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-refile): Allow refiling to the last entry in the
	buffer.
	(org-get-tags-at): Fix bug when inheritance is turned off.

	* org.el (org-indent-line-function): No longer check for src
	regions, this is too much overhead.

	* org-agenda.el (org-agenda-highlight-todo): Fix bugs with keyword
	matching.

	* org.el (org-scan-tags): Make sure that tags matching is not case
	sensitive.  TODO keyword matching is case sensitive, however, to
	avoid confusion with similar words that are not meant to be
	keywords.

	* org.el (org-get-local-tags-at): New function.
	(org-get-local-tags): New function.

	* org-exp.el (org-export-get-categories): New function.

	* org-agenda.el (org-sorting-choice)
	(org-agenda-sorting-strategy, org-agenda-get-todos)
	(org-agenda-get-timestamps, org-agenda-get-deadlines)
	(org-agenda-get-scheduled, org-agenda-get-blocks)
	(org-entries-lessp): Implement sorting by TODO state.
	(org-cmp-todo-state): New defsubst.

	* org-colview.el (org-colview-construct-allowed-dates):
	New function.
	(org-columns-next-allowed-value):
	Use `org-colview-construct-allowed-dates'.

	* org.el (org-protect-slash): New function.
	(org-get-refile-targets): Use `org-protect-slash'.

	* org-agenda.el (org-global-tags-completion-table): New variable.

	* org-exp.el (org-export-handle-export-tags): New function.
	(org-export-preprocess-string):
	Call `org-export-handle-export-tags'.

	* org-publish.el (org-publish-expand-components): Function removed.
	(org-publish-expand-projects): Allow components to have components.

	* org.el (org-indent-line-function): Do not indent in regions that
	are external source code.
	(org-yank-and-fold-if-subtree): New function.

	* org-agenda.el (org-agenda-todayp): New function.
	(org-agenda-get-deadlines, org-agenda-get-scheduled):
	Use `org-agenda-todayp'.

	* org.el (org-insert-heading-respect-content)
	(org-insert-todo-heading-respect-content): New commands.
	(org-insert-heading-respect-content): New option.
	(org-insert-heading): Respect `org-insert-heading-respect-content'.

	* org-clock.el (org-clock-find-position): Make sure the note after
	the clock line gets moved into the new clock drawer.

	* org-id.el (org-id-new): New option.

	* org-table.el (org-table-copy-down): Avoid overflow during
	increment.  Use prefix argument 0 to temporarily disable the
	increment.

	* org-exp.el (org-export-as-html): Do not turn on the major mode
	if the buffer will be killed anyway.
	(org-get-current-options): Exclude the #+TEXT field.
	(org-export-as-html): Make sure text before the first headline is
	a paragraph.

	* org-publish.el (org-publish-org-to): Tell the exporter that this
	buffer will be killed, so it is not necessary to do major mode
	initialization.

	* org-archive.el (org-archive-to-archive-sibling): Show empty
	lines after folding the archive sibling.

	* org.el (org-log-note-extra): New variable.

2008-10-12  Bastien Guerry  <bzg@gnu.org>

	* org.el (org-additional-option-like-keywords): Add keywords for
	the _QUOTE, _VERSE and _SRC environments.

	* org-export-latex.el (org-export-latex-preprocess): Fix bug when
	exporting _QUOTE and _VERSE environments.

2008-10-12  Carsten Dominik  <dominik@science.uva.nl>

	* org-agenda.el (org-agenda-filter-by-tag): New command.

	* org-exp.el (org-get-current-options): Remove angular brackets
	from the date entry.

	* org.el (org-edit-fixed-width-region): New function.
	(org-edit-fixed-width-region): Also try
	`org-edit-fixed-width-region'.
	(org-edit-fixed-width-region-mode): New option.
	(org-activate-code): Only interpret lines starting with colon
	plus a space as example lines.

	* org-remember.el (org-remember-templates): Add nil instead of
	empty strings to fix the length of remember templates.

	* org-table.el (org-calc-default-modes): Fix the time format for
	calc, from 12 hour to 24 hour clock.

	* org-agenda.el (org-agenda-get-deadlines)
	(org-agenda-get-scheduled): Avoid `time-of-day' extraction for
	entries that are pre-warnings of deadlines or reminders.

	* org.el (org-sort-entries-or-items): Make numeric and alpha
	comparisons ignore any TODO keyword and priority cookie.

	* org-remember.el (org-remember-handler): Reinterpretation of the
	prefix argument.

	* org-agenda.el (org-agenda-get-scheduled): Use new
	`org-scheduled' face.

	* org-faces.el (org-scheduled): New face.

	* org-wl.el (org-wl-open): Remove incorrect declaration.

	* org-gnus.el (org-gnus-store-link): Support for :to information
	in gnus links.

	* org-exp.el (org-export-as-html): Fix typo in creator
	information.
	(org-export-protect-examples): New parameter indent.  Insert extra
	spaces only when this parameter is specified.
	(org-export-preprocess-string): Call `org-export-protect-examples'
	with an indentation parameter when exporting to ASCII.

	* org-remember.el (org-remember-templates)
	(org-remember-apply-template): Allow the file component to be a
	function.

	* org.el (org-goto-local-search-headings): Rename from
	`org-goto-local-search-forward-headings'.  Added the possibility
	to search backwards.

	* org-export-latex.el (org-export-latex): New customization
	group.

	* org-agenda.el (org-write-agenda): Erase buffer for txt export.

	* org-exp.el (org-html-do-expand): Allow {} to terminate
	tex macro.

	* org.el (org-buffer-list): Select buffers based on major mode,
	not on file name.

	* org-agenda.el (org-agenda-align-tags): Fix bug with malformed
	face property.

	* org-colview.el (org-columns-display-here):
	Use `org-columns-modify-value-for-display-function'.

	* org.el (org-columns-modify-value-for-display-function): New option.

	* org-publish.el (org-publish-file): Make sure the directory match
	for the publishing directory works correctly.

	* org-agenda.el (org-agenda-execute-calendar-command)
	(org-agenda-diary-entry): Additional optional argument.

2008-07-24  Carsten Dominik  <dominik@science.uva.nl>

	* org-exp.el (org-export-as-html): Add attributes also in mailto
	and ftp links.

	* org.el (org-autoload): Add `org-dblock-write:columnview'.

2008-08-11  Glenn Morris  <rgm@gnu.org>

	* org-mac-message.el (do-applescript): Fix declaration.

2008-08-10  Glenn Morris  <rgm@gnu.org>

	* org-exp.el (org-export-as-html): Let-bind `i'.

	* org.el (org-renumber-ordered-list): Fix bob/bobp typo.
	(org-extract-attributes): Let-bind `key', `value'.
	(org-make-tags-matcher): Let-bind `time-p'.

2008-07-27  Carsten Dominik  <dominik@science.uva.nl>

	* org-install.el: New file.

2008-07-26  Carsten Dominik  <dominik@science.uva.nl>

	* org-exp.el (org-export-html-style)
	(org-export-html-style-extra): Declare as safe-local-variable.

2008-07-25  Carsten Dominik  <dominik@science.uva.nl>

	* org-publish.el (org-publish-file): Use the true name of the
	file.

	* org-jsinfo.el (org-infojs-handle-options): Use :style-extra
	instead of :style.

	* org-exp.el (org-export-plist-vars)
	(org-export-add-options-to-plist): Handle creator setting flag.
	(org-export-as-html): Handle attributes also for ftp and mailto
	links.

	* org-agenda.el (org-agenda-diary-entry)
	(org-agenda-execute-calendar-command): Cater for the second
	argument of `calendar-cursor-to-date'.

2008-07-24  Carsten Dominik  <dominik@science.uva.nl>

	* org-exp.el (org-export-region-as-html, org-export-as-html):
	Make sure that calls from `org-export-region-as-html' do not do the
	special check for a subtree.

	* org-agenda.el (org-batch-store-agenda-views): Fix parsing bug.

	* org.el (org-open-file):
	Use `org-open-directory-means-index-dot-org'.
	(org-open-directory-means-index-dot-org): New option.

	* org.el (org-make-link-string): Remove link attributes from
	description.
	(org-open-at-point): Remove link attributes before using the path.

	* org-exp.el (org-export-as-html): Handle link attributes.

	* org.el (org-extract-attributes, org-attributes-to-string): New functions.

	* org-table.el (org-table-to-lisp): New function.

	* org.el (org-narrow-to-subtree): Do not include the final newline
	into the narrowed region.

	* org-agenda.el (org-agenda-custom-commands-local-options):
	Fix bug with user-define skipping condition.

	* org-agenda.el (org-agenda-get-restriction-and-command): Fix typo.

	* org-exp.el (org-export-html-style-default): Automatic overflow
	handling for pre fields.
	(org-export-as-ascii, org-export-as-html): Change default format
	for time stamp.

	* org-table.el (org-table-export): Offer completion for translator
	functions, and do not require a heading above the table.

	* org.el (org-renumber-ordered-list, org-beginning-of-item-list):
	Cater for the case of a list starting in the first line of the
	buffer.

	* org-publish.el (org-publish-find-title): Bug fix.
	(org-publish-org-index): Implement new :index-style option.

	* org-publish.el (org-publish-timestamp-filename):
	Use SHA1-encoded file names in the timestamp directory.

	* org-publish.el (org-publish-needed-p): Be verbose about files
	published and files skipped.

	* org-exp.el (org-export-preprocess-string): Swap link
	normalization and internal link targeting.

	* org-publish.el (org-publish-needed-p): Create timestamp
	directory when it does not exist.

	* org-clock.el (org-clock-out-when-done): Doc fix.

	* org.el (org-agenda-skip-unavailable-files): Doc fix.

	* org-exp.el (org-export-remove-comment-blocks-and-subtrees):
	Ignore case when searching for the COMMENT cookie at export time.

	* org-exp.el (org-get-file-contents)
	(org-get-and-remove-property): New functions.
	(org-export-handle-include-files): Handle the new prefix options.
	(org-export-as-html): Fix the verse environment.

	* org.el (org-time=, org-time<, org-time<=, org-time>)
	(org-time>=, org-time<>, org-2ft): New functions.
	(org-op-to-function): Also provide for the time testing functions.

	* org-exp.el (org-export-html-style-default): New constant.

	* org-exp.el (org-export-html-style-extra): New variable.
	(org-export-splice-style): New function.

	* org-exp.el (org-export-plist-vars, org-export-as-html):
	Implement `org-export-creator-info'.
	(org-export-creator-info): New option.

	* org.el (org-clock-drawer-start-re, org-clock-drawer-end-re)
	(org-property-drawer-re, org-clock-drawer-re): New constants.

	* org-exp.el (org-icalendar-use-deadline)
	(org-icalendar-use-scheduled): New options.
	(org-icalendar-include-todo): Default changed to t.
	(org-print-icalendar-entries): Implement better utilization of
	scheduling and deadline time stamps.
	(org-export-target-internal-links, org-export-as-html): Allow file
	lines without the "file:" prefix if the file path is an absolute
	path or starts with ".".

	* org-clock.el (org-clocktable-shift): Also understand yesterday,
	lastweek etc.
	(org-clock-special-range): Also understand yesterday, lastweek etc.

	* org.el (org-agenda-skip-archived-trees): Docstring now
	discourages using this.
	(org-scan-tags): Check for org-agenda-archives-mode.
	(org-map-entries): Make sure org-agenda-archives-mode is nil.
	(org-agenda-files): Functionality of second arg changed.

	* org-agenda.el (org-agenda-archives-mode): New variable.
	(org-write-agenda, org-prepare-agenda, org-agenda-list)
	(org-search-view, org-todo-list, org-tags-view)
	(org-agenda-list-stuck-projects): Call `org-agenda-files' with
	`ifmode' argument.
	(org-agenda-quit): Reset the archives mode.
	(org-agenda-archives-mode): New command.
	(org-agenda-set-mode-name): Include archives info.

	* org.el (org-paste-subtree): Make sure the yanked headline is
	visible if it was yanked at a visible point.
	(org-move-item-up): Fix the bug with moving white space at the end
	of the item.
	(org-show-empty-lines-in-parent): New function.

2008-07-19  Juri Linkov  <juri@jurta.org>

	* org.el (narrow-map): Bind `org-narrow-to-subtree' to "s" on the
	new keymap `narrow-map' instead of binding "\C-xns".

2008-07-02  Juanma Barranquero  <lekktu@gmail.com>

	* org.el (org-agenda-skip-unavailable-files):
	* org-clock.el (org-clock-out-when-done): Doc fixes.

2008-06-18  Glenn Morris  <rgm@gnu.org>

	* org.el (org-map-entries): Let-bind `file'.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-colview.el (org-columns-next-allowed-value): Bug fix.

	* org-agenda.el (org-agenda-get-closed): Get the end time into the
	agenda prefix as well.

	* org-publish.el (org-publish-org-index): Make a properly indented
	list.

	* org.el (org-calendar-agenda-action-key): New option.
	(org-get-cursor-date): New function.
	(org-mark-entry-for-agenda-action): New command.
	(org-overriding-default-time): New variable.
	(org-read-date): Respect `org-overriding-default-time'.

	* org-remember.el (org-remember-apply-template): Respect the
	overriding default time.

	* org-agenda.el (org-agenda-action-marker): New variable.
	(org-agenda-action): New command.
	(org-agenda-do-action): New function.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-schedule, org-deadline): Protect scheduled and
	deadline tasks against changes that accidentally remove the
	repeater.  Also show a message with the new date when done.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-beginning-of-line): Cater for the case when there
	are tags but no headline text.
	(org-align-tags-here): Convert to tabs only when indent-tabs-mode
	it set.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-mhe.el (org-mhe-get-message-folder-from-index): Make sure
	the return value is nil instead of "nil" when there is no match.

	* org-exp.el (org-insert-centered): Use fill-column instead of
	80.
	(org-export-as-ascii): Use string-width to measure the width of
	the heading.

	* org.el (org-diary-to-ical-string): No longer kill buffer
	FROMBUF, this is now done by the caller.

	* org-exp.el (org-print-icalendar-entries): Move the call to
	`org-diary-to-ical-string' out of the loop, and kill the buffer
	afterwords.

	* org-remember.el (org-remember-visit-immediately):
	Position cursor after moving to the note.
	(org-remember-apply-template): Use a text property to record the
	cursor position.
	(org-remember-handler): Align tags after pasting the note.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-bbdb.el (org-bbdb-follow-anniversary-link): New function.

	* org-agenda.el (org-agenda-open-link): If there is an
	org-bbdb-name property in the current line, jump to that bbdb
	entry.

	* org-bbdb.el (org-bbdb-anniversaries): Add the bbdb-name as a
	text property, so that the agenda knows where this entry comes
	from.

	* org-agenda.el (org-agenda-clock-in): Fix bug in the
	interaction between clocking-in from the agenda, and  automatic
	task state switching.

	* org-macs.el (org-with-point-at): Bug fix in macro definition.

	* org.el (org-beginning-of-line, org-end-of-line): Make sure the
	zmacs-region stays after this command in XEmacs.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-scan-tags): Allow new values for ACTION parameter.

	* org-remember.el (org-remember-templates): Fix bug in
	customization type definition.

	* org.el (org-map-entries): New function.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-agenda.el (org-agenda-skip-comment-trees): New option.
	(org-agenda-skip): Respect `org-agenda-skip-comment-trees'.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-remember.el (org-jump-to-target-location): New variable.
	(org-remember-apply-template):
	Set `org-remember-apply-template' if requested by template.
	(org-remember-handler): Start an idle timer to jump to
	remember location.

	* org-exp.el (org-get-current-options): Add the FILETAGS setting.

	* org.el (org-set-regexps-and-options): Fix bug with parsing of
	file tags.
	(org-get-tags-at): Add the content of `org-file-tags'.

	* org-exp.el (org-export-handle-comments): Fix bug with several
	comment lines after each other.
	(org-number-to-roman, org-number-to-counter): New functions.
	(org-export-section-number-format): New option.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-exp.el (org-export-protect-examples): Catch the case of a
	missing end_example line.

	* org.el (org-set-regexps-and-options): Set `org-file-properties' and
	`org-file-tags' to nil.

	* org-colview.el (org-columns-next-allowed-value): Handle next
	argument NTH to directly select a value.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-agenda.el (org-agenda-scheduled-leaders): Fix docstring.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-columns-ellipses): New option.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-colview.el (org-columns-add-ellipses): New function.
	(org-columns-compact-links): New function.
	(org-columns-cleanup-item): Call `org-columns-compact-links'.
	(org-columns-display-here): Call `org-agenda-columns-cleanup-item'
	when in agenda.
	(org-columns-edit-value): Fix bug with editing values from
	agenda column view.
	(org-columns-redo): Also redo the agenda itself.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-agenda.el (org-agenda-columns-remove-prefix-from-item):
	New option.

	* org-colview.el (org-agenda-columns-cleanup-item): New function.

	* org-exp.el (org-export-ascii-preprocess): Rename from
	`org-export-ascii-clean-string'.
	(org-export-kill-licensed-text)
	(org-export-define-heading-targets)
	(org-export-handle-invisible-targets)
	(org-export-target-internal-links)
	(org-export-remove-or-extract-drawers)
	(org-export-remove-archived-trees)
	(org-export-protect-quoted-subtrees)
	(org-export-protect-verbatim, org-export-protect-examples)
	(org-export-select-backend-specific-text)
	(org-export-mark-blockquote-and-verse)
	(org-export-remove-comment-blocks-and-subtrees)
	(org-export-handle-comments, org-export-mark-radio-links)
	(org-export-remove-special-table-lines)
	(org-export-normalize-links)
	(org-export-concatenate-multiline-links)
	(org-export-concatenate-multiline-emphasis): New functions,
	obtained from splitting the export preprocessor.

	* org-table.el (org-table-recalculate): Improve error message if
	the row number is invalid.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-archive.el (org-archive-save-context-info): Fix bugs in
	customization setup and docstring.

	* org-exp.el (org-export-html-style): Change the size of in the
	<pre> element to 90%.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-find-src-example-start): Function removed.
	(org-edit-src-find-region-and-lang): New function.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-edit-src-exit): New function.
	(org-exit-edit-mode): New minor mode.

	* org-exp.el (org-export-preprocess-string): Fix bug with removing
	comment-like lines from protected examples.

	* org.el (org-edit-src-example, org-find-src-example-start)
	(org-protect-source-example, org-edit-special): New functions.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-publish.el (org-publish-project-alist): Fix typo in
	docstring.
	(org-publish-project-alist): Handle :index-title property.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-export-latex.el (org-export-as-latex): Make sure region
	bounds are correct.  Parse subtree properties relating to export.

	* org-exp.el (org-export-add-options-to-plist): New function.
	(org-infile-export-plist): Use `org-export-add-options-to-plist'.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-default-properties): Add EXPORT_FILE_NAME and
	EXPORT_TITLE.

	* org-exp.el (org-export-get-title-from-subtree)
	(org-export-as-ascii, org-export-as-html): Make sure the original
	region-beginning and region-end are used, even after moving point.
	(org-export-get-title-from-subtree): Also try the EXPORT_TITLE
	property.

	* org-remember.el (org-remember-last-stored-marker): New variable.
	(org-remember-goto-last-stored): Use `org-goto-marker-or-bmk'.
	(org-remember-handler): Also use marker to remember
	last-stored position.

	* org.el (org-goto-marker-or-bmk): New function.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-file-properties): Rename from `org-local-properties'.
	(org-scan-tags): Take file tags into account.
	(org-tags-match-list-sublevels): Default changed to t.

	* org-exp.el (org-export-as-html): Close paragraph after a footnote.

	* org.el (org-update-parent-todo-statistics): New function.

	* org-exp.el (org-icalendar-store-UID): New option.
	(org-icalendar-force-UID): Option removed.
	(org-print-icalendar-entries): IMplement UIDs.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-mhe.el (org-mhe-follow-link): Fix bug in mhe searches.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-faces.el (org-column): Document how this face is being used
	and why sometimes the background faces shine through.

	* org-mhe.el (org-mhe-follow-link): Improve handling of searches.

	* org-publish.el (org-publish-attachment): Create publishing
	directory if it does not yet exist.

	* org-table.el (org-calc-default-modes): Change default number
	format to (float 8).

	* org.el (org-olpath-completing-read): New function.
	(org-time-clocksum-format): New option.
	(org-minutes-to-hh:mm-string): Use `org-time-clocksum-format'.

	* org-clock.el (org-clock-display, org-clock-out)
	(org-update-mode-line): Use `org-time-clocksum-format'.

	* org-colview.el (org-columns-number-to-string):
	Use `org-time-clocksum-format'.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-id.el: New file, move from contrib to core.

	* org-exp.el (org-icalendar-force-UID): New option.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-exp.el (org-print-icalendar-entries): Make sure DTEND is
	shifted by one day if there is a date range without an end time.

	* org.el (org-try-structure-completion): New function.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-set-font-lock-defaults): Improve fontification of
	description lists.
	(org-insert-item): Handle description lists.
	(org-adaptive-fill-function): Improve auto indentation in
	description lists.

	* org-exp.el (org-export-as-html, org-export-preprocess-string):
	Implement VERSE environment.
	(org-export-preprocess-string): Implement the COMMENT
	environment.

	* org-export-latex.el (org-export-latex-preprocess):
	Implement VERSE environment.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-jsinfo.el (org-infojs-opts-table): Add entry for FIXED_TOC
	option.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-table.el (orgtbl-to-tsv, orgtbl-to-csv): New functions.

	* org.el (org-quote-csv-field): New functions.

	* org-table.el (org-table-export-default-format): Remove :splice
	from default format, we get the same effect by not specifying
	:tstart and :tend.
	(org-table-export): Improve setup, distinguish better between
	interactive and non-interactive use, allow specifying the format
	on the fly, better protection against wrong file names.
	(orgtbl-to-generic): Fix documentation.  Do not require :tstart
	and :tend when :splice is omitted.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-clock.el (org-clock-select-task): Make sure the selection
	letters are 1-9 and A-Z, no special characters.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-exp.el (org-export-htmlize): New group.
	(org-export-htmlize-output-type)
	(org-export-htmlize-css-font-prefix): New options.
	(org-export-htmlize-region-for-paste): New function.
	(org-export-htmlize-generate-css): New command.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-set-visibility-according-to-property): New function.
	(org-ctrl-c-ctrl-c): Do not restart org-mode, just get the options
	and compute the regular expressions, and update font-lock.
	(org-property-re): Allow a dash in property names.

	* org-archive.el (org-extract-archive-file): Insert the file name
	without the path into the format, to allow the location format to
	contain a subdirectory.

	* org-agenda.el (org-agenda-post-command-hook): If point is at end
	of buffer, and the `org-agenda-type' property undefined, use the
	value from the character before.

	* org.el (org-add-planning-info): Don't let indentation for
	would-be timestamp become extra whitespace at the end of headline.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-remove-double-quotes, org-file-contents):
	New functions.

	* org-exp.el (org-infile-export-plist): Also parse the
	contents of #+SETUPFILE files, recursively.

	* org.el (org-set-regexps-and-options): Also parse the
	contents of #+SETUPFILE files, recursively.

	* org-exp.el (org-export-handle-include-files): New function.
	(org-export-preprocess-string):
	Call `org-export-handle-include-files'.

	* org.el (org-delete-property-globally)
	(org-delete-property, org-set-property): Ignore case during
	completion.
	(org-set-property): Use `org-completing-read' instead of
	`completing-read'.

	* org.el (org-complete-expand-structure-template): New,
	experimental function.
	(org-structure-template-alist): New, experimental option.
	(org-complete): Call `org-complete-expand-structure-template'.

2008-06-17  Bastien Guerry  <bzg@gnu.org>

	* org-export-latex.el (org-export-latex-preprocess):
	Add support for blockquotes.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-read-date-analyze): Catch the case where only a
	weekday is given.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-set-font-lock-defaults): Make the description
	tag bold.

	* org-exp.el (org-export-as-html, org-close-li):
	Implement description lists.

2008-06-17  Jason Riedy  <jason@acm.org>

	* org-table.el (*orgtbl-default-fmt*): New variable.
	(orgtbl-format-line): Use the value of *orgtbl-default-fmt*
	when there is no other fmt available.

	(orgtbl-to-generic): Allow an explicitly nil :tstart or
	:tend to suppress the appropriate string.

	(orgtbl-to-orgtbl): New function for translating to another orgtbl
	table.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-read-date-analyze): "." as an alias for "+0" in
	read date.

	* org-clock.el (org-clock-save-markers-for-cut-and-paste):
	New function.

	* org-agenda.el (org-agenda-save-markers-for-cut-and-paste):
	New function.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-clock.el (org-clock-find-position): Don't include notes
	into clock drawer.

	* org-archive.el (org-archive-subtree): No longer remove an
	extra line after cutting the subtree.  `org-cut-subtree' already
	takes care of this.

	* org-remember.el (org-remember-handler): Only kill the target
	buffer if it does not contain the running clock.

	* org.el (org-markers-to-move): New variable.
	(org-save-markers-in-region, org-check-and-save-marker)
	(org-reinstall-markers-in-region): New function.
	(org-move-subtree-down, org-copy-subtree): Remember relative
	marker positions before cutting.
	(org-move-subtree-down, org-paste-subtree): Restore relative
	marker positions after pasting.

	* org-remember.el (org-remember-clock-out-on-exit): New option.
	(org-remember-finalize): Clock out only if the setting in
	`org-remember-clock-out-on-exit' requires it.
	(org-remember-handler): Do the cleanup in the buffer, to make sure
	that the clock marker remains in tact.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-clock.el (org-clock-goto): Widen buffer if necessary.
	(org-clock-in): Make sure that also tasks outside the narrowed
	region will be clocked in correctly.
	(org-clock-insert-selection-line): Widen the buffer so that we can
	find the correct task heading.

	* org.el (org-base-buffer): New function.

	* org-exp.el (org-icalendar-cleanup-string): Make sure ","
	and ";" are escaped.
	(org-print-icalendar-entries): Also apply
	`org-icalendar-cleanup-string' to the headline, not only to the
	summary property.

2008-06-17  Carsten Dominik  <dominik@science.uva.nl>

	* org-exp.el (org-export-preprocess-hook): New hook.
	(org-export-preprocess-string): Call `org-export-preprocess-hook'.

	* org.el (org-font-lock-hook): New variable.
	(org-font-lock-hook): New function.
	(org-set-font-lock-defaults): Call `org-font-lock-hook'.

;; Local Variables:
;; coding: utf-8
;; add-log-time-zone-rule: t
;; End:

	Copyright (C) 2008-2018 Free Software Foundation, Inc.

  This file is part of GNU Emacs.

  GNU Emacs is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GNU Emacs is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GNU Emacs.  If not, see <https://www.gnu.org/licenses/>.
