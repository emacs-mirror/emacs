

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>49. General MPS types &mdash; Memory Pool System 1.111.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/mps.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.111.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Memory Pool System 1.111.0 documentation" href="../index.html" />
    <link rel="up" title="Old design" href="old.html" />
    <link rel="next" title="50. Library version mechanism" href="version-library.html" />
    <link rel="prev" title="48. Tracer" href="trace.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="version-library.html" title="50. Library version mechanism"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="trace.html" title="48. Tracer"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Memory Pool System 1.111.0 documentation</a> &raquo;</li>
          <li><a href="old.html" accesskey="U">Old design</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="general-mps-types">
<span id="design-type"></span><span id="index-0"></span><h1>49. General MPS types<a class="headerlink" href="#general-mps-types" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="design.mps.type"></span><h2>49.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><span class="target" id="design.mps.type.intro"></span><a class="mpstag reference internal" href="#design.mps.type.intro">.intro:</a> See impl.h.mpmtypes.</p>
</div>
<div class="section" id="rationale">
<h2>49.2. Rationale<a class="headerlink" href="#rationale" title="Permalink to this headline">¶</a></h2>
<p>Some types are declared to resolve a point of design, such as the best
type to use for array indexing.</p>
<p>Some types are declared so that the intention of code is clearer. For
example, <a class="reference internal" href="#Byte" title="Byte"><tt class="xref c c-type docutils literal"><span class="pre">Byte</span></tt></a> is necessarily <tt class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></tt>, but it&#8217;s better to
say <a class="reference internal" href="#Byte" title="Byte"><tt class="xref c c-type docutils literal"><span class="pre">Byte</span></tt></a> in your code if it&#8217;s what you mean.</p>
</div>
<div class="section" id="concrete-types">
<h2>49.3. Concrete types<a class="headerlink" href="#concrete-types" title="Permalink to this headline">¶</a></h2>
<dl class="type">
<dt id="Bool">
int <tt class="descname">Bool</tt><a class="headerlink" href="#Bool" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.bool"></span><a class="mpstag reference internal" href="#design.mps.type.bool">.bool:</a> The <a class="reference internal" href="#Bool" title="Bool"><tt class="xref c c-type docutils literal"><span class="pre">Bool</span></tt></a> type is mostly defined so that the intention of
code is clearer. In C, Boolean expressions evaluate to <tt class="docutils literal"><span class="pre">int</span></tt>, so
<a class="reference internal" href="#Bool" title="Bool"><tt class="xref c c-type docutils literal"><span class="pre">Bool</span></tt></a> is in fact an alias for <tt class="docutils literal"><span class="pre">int</span></tt>.</p>
<p><span class="target" id="design.mps.type.bool.value"></span><a class="mpstag reference internal" href="#design.mps.type.bool.value">.bool.value:</a> <a class="reference internal" href="#Bool" title="Bool"><tt class="xref c c-type docutils literal"><span class="pre">Bool</span></tt></a> has two values, <tt class="xref c c-macro docutils literal"><span class="pre">TRUE</span></tt> and <tt class="xref c c-macro docutils literal"><span class="pre">FALSE</span></tt>. These
are defined to be <tt class="docutils literal"><span class="pre">1</span></tt> and <tt class="docutils literal"><span class="pre">0</span></tt> respectively, for compatibility with
C Boolean expressions (so one may set a <a class="reference internal" href="#Bool" title="Bool"><tt class="xref c c-type docutils literal"><span class="pre">Bool</span></tt></a> to the result of a C
Boolean expression).</p>
<p><span class="target" id="design.mps.type.bool.use"></span><a class="mpstag reference internal" href="#design.mps.type.bool.use">.bool.use:</a> <a class="reference internal" href="#Bool" title="Bool"><tt class="xref c c-type docutils literal"><span class="pre">Bool</span></tt></a> is a type which should be used when a Boolean
value is intended, for example, as the result of a function. Using a
Boolean type in C is a tricky thing. Non-zero values are &#8220;true&#8221; (when
used as control conditions) but are not all equal to <tt class="xref c c-macro docutils literal"><span class="pre">TRUE</span></tt>. Use
with care.</p>
<p><span class="target" id="design.mps.type.bool.check"></span><a class="mpstag reference internal" href="#design.mps.type.bool.check">.bool.check:</a> <tt class="xref c c-func docutils literal"><span class="pre">BoolCheck()</span></tt> simply checks whether the argument is
<tt class="xref c c-macro docutils literal"><span class="pre">TRUE</span></tt> (<tt class="docutils literal"><span class="pre">1</span></tt>) or <tt class="xref c c-macro docutils literal"><span class="pre">FALSE</span></tt> (<tt class="docutils literal"><span class="pre">0</span></tt>).</p>
<p><span class="target" id="design.mps.type.bool.check.inline"></span><a class="mpstag reference internal" href="#design.mps.type.bool.check.inline">.bool.check.inline:</a> The inline macro version of <tt class="docutils literal"><span class="pre">BoolCheck</span></tt> casts
the <tt class="docutils literal"><span class="pre">int</span></tt> to <tt class="docutils literal"><span class="pre">unsigned</span></tt> and checks that it is <tt class="docutils literal"><span class="pre">&lt;=</span> <span class="pre">1</span></tt>. This is
safe, well-defined, uses the argument exactly once, and generates
reasonable code.</p>
<p><span class="target" id="design.mps.type.bool.check.inline.smaller"></span><a class="mpstag reference internal" href="#design.mps.type.bool.check.inline.smaller">.bool.check.inline.smaller:</a> In fact we can expect that the &#8220;inline&#8221;
version of <tt class="xref c c-func docutils literal"><span class="pre">BoolCheck()</span></tt> to be smaller than the equivalent function
call. On IA-32 for example, a function call will be 3 instructions
(total 9 bytes), the inline code for <tt class="xref c c-func docutils literal"><span class="pre">BoolCheck()</span></tt> will be 1
instruction (total 3 bytes) (both sequences not including the test
which is the same length in either case).</p>
<p><span class="target" id="design.mps.type.bool.check.inline.why"></span><a class="mpstag reference internal" href="#design.mps.type.bool.check.inline.why">.bool.check.inline.why:</a> As well as being smaller (see
<a class="reference internal" href="#design.mps.type.bool.check.inline.smaller">.bool.check.inline.smaller</a>) it is faster. On 1998-11-16 drj
compared <tt class="docutils literal"><span class="pre">w3i3mv\hi\amcss.exe</span></tt> running with and without the macro
for <tt class="docutils literal"><span class="pre">BoolCheck</span></tt> on the PC Aaron. &#8220;With&#8221; ran in 97.7% of the time
(averaged over 3 runs).</p>
<dl class="type">
<dt id="Res">
int <tt class="descname">Res</tt><a class="headerlink" href="#Res" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.res"></span><a class="mpstag reference internal" href="#design.mps.type.res">.res:</a> <a class="reference internal" href="#Res" title="Res"><tt class="xref c c-type docutils literal"><span class="pre">Res</span></tt></a> is the type of result codes. A result code indicates
the success or failure of an operation, along with the reason for
failure. Like Unix error codes, the meaning of the code depends on the
call that returned it. These codes are just broad categories with
mnemonic names for various sorts of problems.</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Result code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ResOK</span></tt></td>
<td>The operation succeeded. Return parameters may only be
updated if OK is returned, otherwise they must be left
untouched.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ResFAIL</span></tt></td>
<td>Something went wrong which doesn&#8217;t fall into any of the
other categories. The exact meaning depends on the
call. See documentation.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ResRESOURCE</span></tt></td>
<td>A needed resource could not be obtained. Which resource
depends on the call. See also <tt class="docutils literal"><span class="pre">ResMEMORY</span></tt>, which is a
special case of this.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ResMEMORY</span></tt></td>
<td>Needed memory (committed memory, not address space)
could not be obtained.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ResLIMIT</span></tt></td>
<td>An internal limitation was reached.  For example, the
maximum number of somethings was reached.  We should
avoid returning this by not including static
limitations in our code, as far as possible. (See
rule.impl.constrain and
rule.impl.limits.)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ResUNIMPL</span></tt></td>
<td>The operation, or some vital part of it, is
unimplemented. This might be returned by functions
which are no longer supported, or by operations which
are included for future expansion, but not yet
supported.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ResIO</span></tt></td>
<td>An I/O error occurred. Exactly what depends on the
function.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ResCOMMIT_LIMIT</span></tt></td>
<td>The arena&#8217;s commit limit would have been exceeded
as a result of allocation.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ResPARAM</span></tt></td>
<td>An invalid parameter was passed.  Normally reserved for
parameters passed from the client.</td>
</tr>
</tbody>
</table>
<p><span class="target" id="design.mps.type.res.use"></span><a class="mpstag reference internal" href="#design.mps.type.res.use">.res.use:</a> <a class="reference internal" href="#Res" title="Res"><tt class="xref c c-type docutils literal"><span class="pre">Res</span></tt></a> should be returned from any function which might
fail. Any other results of the function should be passed back in
&#8220;return&#8221; parameters (pointers to locations to fill in with the
results).</p>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">This is documented elsewhere, I think &#8211; richard</p>
</div>
<p><span class="target" id="design.mps.type.res.use.spec"></span><a class="mpstag reference internal" href="#design.mps.type.res.use.spec">.res.use.spec:</a> The most specific code should be returned.</p>
<dl class="type">
<dt id="Fun">
void <tt class="descname">(*Fun)</tt><big>(</big>void<big>)</big><a class="headerlink" href="#Fun" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.fun"></span><a class="mpstag reference internal" href="#design.mps.type.fun">.fun:</a> <a class="reference internal" href="#Fun" title="Fun"><tt class="xref c c-type docutils literal"><span class="pre">Fun</span></tt></a> is the type of a pointer to a function about which
nothing more is known.</p>
<p><span class="target" id="design.mps.type.fun.use"></span><a class="mpstag reference internal" href="#design.mps.type.fun.use">.fun.use:</a> <a class="reference internal" href="#Fun" title="Fun"><tt class="xref c c-type docutils literal"><span class="pre">Fun</span></tt></a> should be used where it&#8217;s necessary to handle a
function in a polymorphic way without calling it. For example, if you
need to write a function <tt class="docutils literal"><span class="pre">g</span></tt> which passes another function <tt class="docutils literal"><span class="pre">f</span></tt>
through to a third function <tt class="docutils literal"><span class="pre">h</span></tt>, where <tt class="docutils literal"><span class="pre">h</span></tt> knows the real type of
<tt class="docutils literal"><span class="pre">f</span></tt> but <tt class="docutils literal"><span class="pre">g</span></tt> doesn&#8217;t.</p>
<dl class="type">
<dt id="Word">
<a class="reference internal" href="../topic/platform.html#MPS_T_WORD" title="MPS_T_WORD">MPS_T_WORD</a> <tt class="descname">Word</tt><a class="headerlink" href="#Word" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.word"></span><a class="mpstag reference internal" href="#design.mps.type.word">.word:</a> <a class="reference internal" href="#Word" title="Word"><tt class="xref c c-type docutils literal"><span class="pre">Word</span></tt></a> is an unsigned integral type which matches the size
of the machine word, that is, the natural size of the machine
registers and addresses.</p>
<p><span class="target" id="design.mps.type.word.use"></span><a class="mpstag reference internal" href="#design.mps.type.word.use">.word.use:</a> <a class="reference internal" href="#Word" title="Word"><tt class="xref c c-type docutils literal"><span class="pre">Word</span></tt></a> should be used where an unsigned integer is
required that might range as large as the machine word.</p>
<p><span class="target" id="design.mps.type.word.source"></span><a class="mpstag reference internal" href="#design.mps.type.word.source">.word.source:</a> <a class="reference internal" href="#Word" title="Word"><tt class="xref c c-type docutils literal"><span class="pre">Word</span></tt></a> is derived from the macro <a class="reference internal" href="../topic/platform.html#MPS_T_WORD" title="MPS_T_WORD"><tt class="xref c c-macro docutils literal"><span class="pre">MPS_T_WORD</span></tt></a>
which is declared in impl.h.mpstd according to the target platform
(design.mps.config.pf.word).</p>
<p><span class="target" id="design.mps.type.word.conv.c"></span><a class="mpstag reference internal" href="#design.mps.type.word.conv.c">.word.conv.c:</a> <a class="reference internal" href="#Word" title="Word"><tt class="xref c c-type docutils literal"><span class="pre">Word</span></tt></a> is converted to <a class="reference internal" href="../topic/interface.html#mps_word_t" title="mps_word_t"><tt class="xref c c-type docutils literal"><span class="pre">mps_word_t</span></tt></a> in the MPS C
Interface.</p>
<p><span class="target" id="design.mps.type.word.ops"></span><a class="mpstag reference internal" href="#design.mps.type.word.ops">.word.ops:</a> <tt class="xref c c-func docutils literal"><span class="pre">WordIsAligned()</span></tt>, <tt class="xref c c-func docutils literal"><span class="pre">WordAlignUp()</span></tt>,
<tt class="xref c c-func docutils literal"><span class="pre">WordAlignDown()</span></tt> and <tt class="xref c c-func docutils literal"><span class="pre">WordRoundUp()</span></tt>.</p>
<dl class="type">
<dt id="Byte">
unsigned char <tt class="descname">Byte</tt><a class="headerlink" href="#Byte" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.byte"></span><a class="mpstag reference internal" href="#design.mps.type.byte">.byte:</a> <a class="reference internal" href="#Byte" title="Byte"><tt class="xref c c-type docutils literal"><span class="pre">Byte</span></tt></a> is an unsigned integral type corresponding to the
unit in which most sizes are measured, and also the units of
<tt class="docutils literal"><span class="pre">sizeof</span></tt>.</p>
<p><span class="target" id="design.mps.type.byte.use"></span><a class="mpstag reference internal" href="#design.mps.type.byte.use">.byte.use:</a> <a class="reference internal" href="#Byte" title="Byte"><tt class="xref c c-type docutils literal"><span class="pre">Byte</span></tt></a> should be used in preference to <tt class="docutils literal"><span class="pre">char</span></tt> or
<tt class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></tt> wherever it is necessary to deal with bytes
directly.</p>
<p><span class="target" id="design.mps.type.byte.source"></span><a class="mpstag reference internal" href="#design.mps.type.byte.source">.byte.source:</a> <a class="reference internal" href="#Byte" title="Byte"><tt class="xref c c-type docutils literal"><span class="pre">Byte</span></tt></a> is a just pedagogic version of <tt class="docutils literal"><span class="pre">unsigned</span>
<span class="pre">char</span></tt>, since <tt class="docutils literal"><span class="pre">char</span></tt> is the unit of <tt class="docutils literal"><span class="pre">sizeof</span></tt>.</p>
<dl class="type">
<dt id="Index">
<a class="reference internal" href="#Word" title="Word">Word</a> <tt class="descname">Index</tt><a class="headerlink" href="#Index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.index"></span><a class="mpstag reference internal" href="#design.mps.type.index">.index:</a> <a class="reference internal" href="#Index" title="Index"><tt class="xref c c-type docutils literal"><span class="pre">Index</span></tt></a> is an unsigned integral type which is large
enough to hold any array index.</p>
<p><span class="target" id="design.mps.type.index.use"></span><a class="mpstag reference internal" href="#design.mps.type.index.use">.index.use:</a> <a class="reference internal" href="#Index" title="Index"><tt class="xref c c-type docutils literal"><span class="pre">Index</span></tt></a> should be used where the maximum size of the
array cannot be statically determined. If the maximum size can be
determined then the smallest unsigned integer with a large enough
range may be used instead.</p>
<dl class="type">
<dt id="Count">
<a class="reference internal" href="#Word" title="Word">Word</a> <tt class="descname">Count</tt><a class="headerlink" href="#Count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.count"></span><a class="mpstag reference internal" href="#design.mps.type.count">.count:</a> <a class="reference internal" href="#Count" title="Count"><tt class="xref c c-type docutils literal"><span class="pre">Count</span></tt></a> is an unsigned integral type which is large
enough to hold the size of any collection of objects in the MPS.</p>
<p><span class="target" id="design.mps.type.count.use"></span><a class="mpstag reference internal" href="#design.mps.type.count.use">.count.use:</a> <a class="reference internal" href="#Count" title="Count"><tt class="xref c c-type docutils literal"><span class="pre">Count</span></tt></a> should be used for a number of objects
(control or managed) where the maximum number of objects cannot be
statically determined. If the maximum number can be statically
determined then the smallest unsigned integer with a large enough
range may be used instead (although <a class="reference internal" href="#Count" title="Count"><tt class="xref c c-type docutils literal"><span class="pre">Count</span></tt></a> may be preferable for
clarity).</p>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">Should <a class="reference internal" href="#Count" title="Count"><tt class="xref c c-type docutils literal"><span class="pre">Count</span></tt></a> be used to count things that aren&#8217;t represented
by objects (for example, a level)? I would say yes. gavinm
1998-07-21</p>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">Only where it can be determined that the maximum count is less
than the number of objects. pekka 1998-07-21</p>
</div>
<dl class="type">
<dt id="Accumulation">
<a class="reference internal" href="#Word" title="Word">Word</a> <tt class="descname">Accumulation</tt><a class="headerlink" href="#Accumulation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.accumulation"></span><a class="mpstag reference internal" href="#design.mps.type.accumulation">.accumulation:</a> <a class="reference internal" href="#Accumulation" title="Accumulation"><tt class="xref c c-type docutils literal"><span class="pre">Accumulation</span></tt></a> is an arithmetic type which is
large enough to hold accumulated totals of objects of bytes (for
example, total number of objects allocated, total number of bytes
allocated).</p>
<p><span class="target" id="design.mps.type.accumulation.type"></span><a class="mpstag reference internal" href="#design.mps.type.accumulation.type">.accumulation.type:</a> Currently it is <tt class="docutils literal"><span class="pre">double</span></tt>, but the reason for
the interface is so that we can more easily change it if we want to
(if we decide we need more accuracy for example).</p>
<p><span class="target" id="design.mps.type.accumulation.use"></span><a class="mpstag reference internal" href="#design.mps.type.accumulation.use">.accumulation.use:</a> Currently the only way to use an
<a class="reference internal" href="#Accumulation" title="Accumulation"><tt class="xref c c-type docutils literal"><span class="pre">Accumulation</span></tt></a> is to reset it (by calling <tt class="docutils literal"><span class="pre">AccumulatorReset</span></tt>) and
accumulate amounts into it (by calling <tt class="docutils literal"><span class="pre">Accumulate</span></tt>). There is no
way to read it at the moment, but that&#8217;s okay, because no one seems to
want to.</p>
<p><span class="target" id="design.mps.type.accumulation.future"></span><a class="mpstag reference internal" href="#design.mps.type.accumulation.future">.accumulation.future:</a> Probably we should have methods which return
the accumulation into an <tt class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span></tt>, and also a <tt class="docutils literal"><span class="pre">double</span></tt>;
these functions should return <a class="reference internal" href="#Bool" title="Bool"><tt class="xref c c-type docutils literal"><span class="pre">Bool</span></tt></a> to indicate whether the
accumulation can fit in the requested type. Possibly we could have
functions which returned scaled accumulations. For example,
<tt class="docutils literal"><span class="pre">AccumulatorScale(a,</span> <span class="pre">d)</span></tt> would divide the <tt class="docutils literal"><span class="pre">Accumulation</span> <span class="pre">a</span></tt> by
<tt class="docutils literal"><span class="pre">double</span> <span class="pre">d</span></tt> and return the <tt class="docutils literal"><span class="pre">double</span></tt> result if it fitted into a
<tt class="docutils literal"><span class="pre">double</span></tt>.</p>
<dl class="type">
<dt id="Addr">
struct AddrStruct *<tt class="descname">Addr</tt><a class="headerlink" href="#Addr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.addr"></span><a class="mpstag reference internal" href="#design.mps.type.addr">.addr:</a> <a class="reference internal" href="#Addr" title="Addr"><tt class="xref c c-type docutils literal"><span class="pre">Addr</span></tt></a> is the type used for &#8220;managed addresses&#8221;, that is,
addresses of objects managed by the MPS.</p>
<p><span class="target" id="design.mps.type.addr.def"></span><a class="mpstag reference internal" href="#design.mps.type.addr.def">.addr.def:</a> <a class="reference internal" href="#Addr" title="Addr"><tt class="xref c c-type docutils literal"><span class="pre">Addr</span></tt></a> is defined as <tt class="docutils literal"><span class="pre">struct</span> <span class="pre">AddrStruct</span> <span class="pre">*</span></tt>, but
<tt class="xref c c-type docutils literal"><span class="pre">AddrStruct</span></tt> is never defined. This means that <a class="reference internal" href="#Addr" title="Addr"><tt class="xref c c-type docutils literal"><span class="pre">Addr</span></tt></a> is always an
incomplete type, which prevents accidental dereferencing, arithmetic,
or assignment to other pointer types.</p>
<p><span class="target" id="design.mps.type.addr.use"></span><a class="mpstag reference internal" href="#design.mps.type.addr.use">.addr.use:</a> <a class="reference internal" href="#Addr" title="Addr"><tt class="xref c c-type docutils literal"><span class="pre">Addr</span></tt></a> should be used whenever the code needs to deal
with addresses. It should not be used for the addresses of memory
manager data structures themselves, so that the memory manager remains
amenable to working in a separate address space. Be careful not to
confuse <a class="reference internal" href="#Addr" title="Addr"><tt class="xref c c-type docutils literal"><span class="pre">Addr</span></tt></a> with <tt class="docutils literal"><span class="pre">void</span> <span class="pre">*</span></tt>.</p>
<p><span class="target" id="design.mps.type.addr.ops"></span><a class="mpstag reference internal" href="#design.mps.type.addr.ops">.addr.ops:</a> Limited arithmetic is allowed on addresses using
<tt class="xref c c-func docutils literal"><span class="pre">AddrAdd()</span></tt> and <tt class="xref c c-func docutils literal"><span class="pre">AddrOffset()</span></tt> (impl.c.mpm). Addresses may also be
compared using the relational operators <tt class="docutils literal"><span class="pre">==</span></tt>, <tt class="docutils literal"><span class="pre">!=</span></tt>, <tt class="docutils literal"><span class="pre">&lt;</span></tt>, <tt class="docutils literal"><span class="pre">&lt;=</span></tt>,
<tt class="docutils literal"><span class="pre">&gt;</span></tt>, and <tt class="docutils literal"><span class="pre">&gt;=</span></tt>.</p>
<p><span class="target" id="design.mps.type.addr.ops.mem"></span><a class="mpstag reference internal" href="#design.mps.type.addr.ops.mem">.addr.ops.mem:</a> We need efficient operators similar to <tt class="xref c c-func docutils literal"><span class="pre">memset()</span></tt>,
<tt class="xref c c-func docutils literal"><span class="pre">memcpy()</span></tt>, and <tt class="xref c c-func docutils literal"><span class="pre">memcmp()</span></tt> on <a class="reference internal" href="#Addr" title="Addr"><tt class="xref c c-type docutils literal"><span class="pre">Addr</span></tt></a>; these are called <tt class="xref c c-func docutils literal"><span class="pre">AddrSet()</span></tt>,
<tt class="xref c c-func docutils literal"><span class="pre">AddrCopy()</span></tt>, and <tt class="xref c c-func docutils literal"><span class="pre">AddrComp()</span></tt>. When <a class="reference internal" href="#Addr" title="Addr"><tt class="xref c c-type docutils literal"><span class="pre">Addr</span></tt></a> is compatible with
<tt class="docutils literal"><span class="pre">void</span> <span class="pre">*</span></tt>, these are implemented through the functions
<a class="reference internal" href="../topic/plinth.html#mps_lib_memset" title="mps_lib_memset"><tt class="xref c c-func docutils literal"><span class="pre">mps_lib_memset()</span></tt></a>, <a class="reference internal" href="../topic/plinth.html#mps_lib_memcpy" title="mps_lib_memcpy"><tt class="xref c c-func docutils literal"><span class="pre">mps_lib_memcpy()</span></tt></a>, and <a class="reference internal" href="../topic/plinth.html#mps_lib_memcmp" title="mps_lib_memcmp"><tt class="xref c c-func docutils literal"><span class="pre">mps_lib_memcmp()</span></tt></a>
functions in the plinth (impl.h.mpm).</p>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">No other implementation exists at present. pekka 1998-09-07</p>
</div>
<p><span class="target" id="design.mps.type.addr.conv.c"></span><a class="mpstag reference internal" href="#design.mps.type.addr.conv.c">.addr.conv.c:</a> <a class="reference internal" href="#Addr" title="Addr"><tt class="xref c c-type docutils literal"><span class="pre">Addr</span></tt></a> is converted to <a class="reference internal" href="../topic/interface.html#mps_addr_t" title="mps_addr_t"><tt class="xref c c-type docutils literal"><span class="pre">mps_addr_t</span></tt></a> in the MPS C
Interface. <a class="reference internal" href="../topic/interface.html#mps_addr_t" title="mps_addr_t"><tt class="xref c c-type docutils literal"><span class="pre">mps_addr_t</span></tt></a> is defined to be the same as <tt class="docutils literal"><span class="pre">void</span> <span class="pre">*</span></tt>, so
using the MPS C Interface confines the memory manager to the same
address space as the client data.</p>
<dl class="type">
<dt id="Size">
<a class="reference internal" href="#Word" title="Word">Word</a> <tt class="descname">Size</tt><a class="headerlink" href="#Size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.size"></span><a class="mpstag reference internal" href="#design.mps.type.size">.size:</a> <a class="reference internal" href="#Size" title="Size"><tt class="xref c c-type docutils literal"><span class="pre">Size</span></tt></a> is an unsigned integral type large enough to
hold the size of any object which the MPS might manage.</p>
<p><span class="target" id="design.mps.type.size.byte"></span><a class="mpstag reference internal" href="#design.mps.type.size.byte">.size.byte:</a> <a class="reference internal" href="#Size" title="Size"><tt class="xref c c-type docutils literal"><span class="pre">Size</span></tt></a> should hold a size calculated in bytes.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This may not be true for all existing code.</p>
</div>
<p><span class="target" id="design.mps.type.size.use"></span><a class="mpstag reference internal" href="#design.mps.type.size.use">.size.use:</a> <a class="reference internal" href="#Size" title="Size"><tt class="xref c c-type docutils literal"><span class="pre">Size</span></tt></a> should be used whenever the code needs to deal
with the size of managed memory or client objects. It should not be
used for the sizes of the memory manager&#8217;s own data structures, so
that the memory manager is amenable to working in a separate address
space. Be careful not to confuse it with <tt class="docutils literal"><span class="pre">size_t</span></tt>.</p>
<p><span class="target" id="design.mps.type.size.ops"></span><a class="mpstag reference internal" href="#design.mps.type.size.ops">.size.ops:</a> <tt class="xref c c-func docutils literal"><span class="pre">SizeIsAligned()</span></tt>, <tt class="xref c c-func docutils literal"><span class="pre">SizeAlignUp()</span></tt>,
<tt class="xref c c-func docutils literal"><span class="pre">SizeAlignDown()</span></tt> and <tt class="xref c c-func docutils literal"><span class="pre">SizeRoundUp()</span></tt>.</p>
<p><span class="target" id="design.mps.type.size.conv.c"></span><a class="mpstag reference internal" href="#design.mps.type.size.conv.c">.size.conv.c:</a> <a class="reference internal" href="#Size" title="Size"><tt class="xref c c-type docutils literal"><span class="pre">Size</span></tt></a> is converted to <tt class="docutils literal"><span class="pre">size_t</span></tt> in the MPS C
Interface. This constrains the memory manager to the same address
space as the client data.</p>
<dl class="type">
<dt id="Align">
<a class="reference internal" href="#Word" title="Word">Word</a> <tt class="descname">Align</tt><a class="headerlink" href="#Align" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.align"></span><a class="mpstag reference internal" href="#design.mps.type.align">.align:</a> <a class="reference internal" href="#Align" title="Align"><tt class="xref c c-type docutils literal"><span class="pre">Align</span></tt></a> is an unsigned integral type which is used to
represent the alignment of managed addresses. All alignments are
positive powers of two. <a class="reference internal" href="#Align" title="Align"><tt class="xref c c-type docutils literal"><span class="pre">Align</span></tt></a> is large enough to hold the maximum
possible alignment.</p>
<p><span class="target" id="design.mps.type.align.use"></span><a class="mpstag reference internal" href="#design.mps.type.align.use">.align.use:</a> <a class="reference internal" href="#Align" title="Align"><tt class="xref c c-type docutils literal"><span class="pre">Align</span></tt></a> should be used whenever the code needs to
deal with the alignment of a managed address.</p>
<p><span class="target" id="design.mps.type.align.conv.c"></span><a class="mpstag reference internal" href="#design.mps.type.align.conv.c">.align.conv.c:</a> <a class="reference internal" href="#Align" title="Align"><tt class="xref c c-type docutils literal"><span class="pre">Align</span></tt></a> is converted to <a class="reference internal" href="../topic/interface.html#mps_align_t" title="mps_align_t"><tt class="xref c c-type docutils literal"><span class="pre">mps_align_t</span></tt></a> in the MPS
C Interface.</p>
<dl class="type">
<dt id="Shift">
unsigned <tt class="descname">Shift</tt><a class="headerlink" href="#Shift" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.shift"></span><a class="mpstag reference internal" href="#design.mps.type.shift">.shift:</a> <a class="reference internal" href="#Shift" title="Shift"><tt class="xref c c-type docutils literal"><span class="pre">Shift</span></tt></a> is an unsigned integral type which can hold the
amount by which a <a class="reference internal" href="#Word" title="Word"><tt class="xref c c-type docutils literal"><span class="pre">Word</span></tt></a> can be shifted. It is therefore large
enough to hold the word width (in bits).</p>
<p><span class="target" id="design.mps.type.shift.use"></span><a class="mpstag reference internal" href="#design.mps.type.shift.use">.shift.use:</a> <a class="reference internal" href="#Shift" title="Shift"><tt class="xref c c-type docutils literal"><span class="pre">Shift</span></tt></a> should be used whenever a shift value (the
right-hand operand of the <tt class="docutils literal"><span class="pre">&lt;&lt;</span></tt> or <tt class="docutils literal"><span class="pre">&gt;&gt;</span></tt> operators) is intended, to
make the code clear. It should also be used for structure fields which
have this use.</p>
<p><span class="target" id="design.mps.type.shift.conv.c"></span><a class="mpstag reference internal" href="#design.mps.type.shift.conv.c">.shift.conv.c:</a> <a class="reference internal" href="#Shift" title="Shift"><tt class="xref c c-type docutils literal"><span class="pre">Shift</span></tt></a> is converted to <tt class="xref c c-type docutils literal"><span class="pre">mps_shift_t</span></tt> in the MPS
C Interface.</p>
<dl class="type">
<dt id="Ref">
<a class="reference internal" href="#Addr" title="Addr">Addr</a> <tt class="descname">Ref</tt><a class="headerlink" href="#Ref" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.ref"></span><a class="mpstag reference internal" href="#design.mps.type.ref">.ref:</a> <a class="reference internal" href="#Ref" title="Ref"><tt class="xref c c-type docutils literal"><span class="pre">Ref</span></tt></a> is a reference to a managed object (as opposed to any
old managed address). <a class="reference internal" href="#Ref" title="Ref"><tt class="xref c c-type docutils literal"><span class="pre">Ref</span></tt></a> should be used where a reference is
intended.</p>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">This isn&#8217;t too clear &#8211; richard</p>
</div>
<dl class="type">
<dt id="RefSet">
<a class="reference internal" href="#Word" title="Word">Word</a> <tt class="descname">RefSet</tt><a class="headerlink" href="#RefSet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.refset"></span><a class="mpstag reference internal" href="#design.mps.type.refset">.refset:</a> <tt class="docutils literal"><span class="pre">RefSet</span></tt> is a conservative approximation to a set of
references. See design.mps.refset.</p>
<dl class="type">
<dt id="Rank">
unsigned <tt class="descname">Rank</tt><a class="headerlink" href="#Rank" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.rank"></span><a class="mpstag reference internal" href="#design.mps.type.rank">.rank:</a> <a class="reference internal" href="#Rank" title="Rank"><tt class="xref c c-type docutils literal"><span class="pre">Rank</span></tt></a> is an enumeration which represents the rank of a
reference. The ranks are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="7%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Rank</th>
<th class="head">Index</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">RankAMBIG</span></tt></td>
<td>0</td>
<td>The reference is ambiguous. That is, it must be
assumed to be a reference, but not updated in case it
isn&#8217;t.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">RankEXACT</span></tt></td>
<td>1</td>
<td>The reference is exact, and refers to an object.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">RankFINAL</span></tt></td>
<td>2</td>
<td>The reference is exact and final, so special action
is required if only final or weak references remain
to the object.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">RankWEAK</span></tt></td>
<td>3</td>
<td>The reference is exact and weak, so should be deleted
if only weak references remain to the object.</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="#Rank" title="Rank"><tt class="xref c c-type docutils literal"><span class="pre">Rank</span></tt></a> is stored with segments and roots, and passed around.</p>
<p><a class="reference internal" href="#Rank" title="Rank"><tt class="xref c c-type docutils literal"><span class="pre">Rank</span></tt></a> is converted to <a class="reference internal" href="../topic/root.html#mps_rank_t" title="mps_rank_t"><tt class="xref c c-type docutils literal"><span class="pre">mps_rank_t</span></tt></a> in the MPS C Interface.</p>
<p>The ordering of the ranks is important. It is the order in which the
references must be scanned in order to respect the properties of
references of the ranks. Therefore they are declared explicitly with
their integer values.</p>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">Could <a class="reference internal" href="#Rank" title="Rank"><tt class="xref c c-type docutils literal"><span class="pre">Rank</span></tt></a> be a <tt class="docutils literal"><span class="pre">short</span></tt>?</p>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">This documentation should be expanded and moved to its own
document, then referenced from the implementation more thoroughly.</p>
</div>
<dl class="type">
<dt id="Epoch">
<a class="reference internal" href="#Size" title="Size">Size</a> <tt class="descname">Epoch</tt><a class="headerlink" href="#Epoch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.epoch"></span><a class="mpstag reference internal" href="#design.mps.type.epoch">.epoch:</a> An <a class="reference internal" href="#Epoch" title="Epoch"><tt class="xref c c-type docutils literal"><span class="pre">Epoch</span></tt></a> is a count of the number of flips that have
occurred. It is used in the implementation of location dependencies.</p>
<p><a class="reference internal" href="#Epoch" title="Epoch"><tt class="xref c c-type docutils literal"><span class="pre">Epoch</span></tt></a> is converted to <a class="reference internal" href="../topic/interface.html#mps_word_t" title="mps_word_t"><tt class="xref c c-type docutils literal"><span class="pre">mps_word_t</span></tt></a> in the MPS C Interface, as a
field of <a class="reference internal" href="../topic/location.html#mps_ld_s" title="mps_ld_s"><tt class="xref c c-type docutils literal"><span class="pre">mps_ld_s</span></tt></a>.</p>
<dl class="type">
<dt id="TraceId">
unsigned <tt class="descname">TraceId</tt><a class="headerlink" href="#TraceId" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.traceid"></span><a class="mpstag reference internal" href="#design.mps.type.traceid">.traceid:</a> A <a class="reference internal" href="#TraceId" title="TraceId"><tt class="xref c c-type docutils literal"><span class="pre">TraceId</span></tt></a> is an unsigned integer which is less than
<tt class="xref c c-macro docutils literal"><span class="pre">TRACE_MAX</span></tt>. Each running trace has a different <a class="reference internal" href="#TraceId" title="TraceId"><tt class="xref c c-type docutils literal"><span class="pre">TraceId</span></tt></a> which is
used to index into tables and bitfields used to remember the state of
that trace.</p>
<dl class="type">
<dt id="TraceSet">
unsigned <tt class="descname">TraceSet</tt><a class="headerlink" href="#TraceSet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.traceset"></span><a class="mpstag reference internal" href="#design.mps.type.traceset">.traceset:</a> A <a class="reference internal" href="#TraceSet" title="TraceSet"><tt class="xref c c-type docutils literal"><span class="pre">TraceSet</span></tt></a> is a bitset of <a class="reference internal" href="#TraceId" title="TraceId"><tt class="xref c c-type docutils literal"><span class="pre">TraceId</span></tt></a>,
represented in the obvious way:</p>
<div class="highlight-c"><pre>member(ti, ts) ⇔ ((1&lt;&lt;ti) &amp; ts) != 0</pre>
</div>
<p><a class="reference internal" href="#TraceSet" title="TraceSet"><tt class="xref c c-type docutils literal"><span class="pre">TraceSet</span></tt></a> is used to represent colour in the Tracer.</p>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">Expand on this.</p>
</div>
<dl class="type">
<dt id="AccessSet">
unsigned <tt class="descname">AccessSet</tt><a class="headerlink" href="#AccessSet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.access-set"></span><a class="mpstag reference internal" href="#design.mps.type.access-set">.access-set:</a> An <a class="reference internal" href="#AccessSet" title="AccessSet"><tt class="xref c c-type docutils literal"><span class="pre">AccessSet</span></tt></a> is a bitset of <tt class="docutils literal"><span class="pre">Access</span></tt>
modes, which are <tt class="docutils literal"><span class="pre">AccessREAD</span></tt> and <tt class="docutils literal"><span class="pre">AccessWRITE</span></tt>. <tt class="docutils literal"><span class="pre">AccessNONE</span></tt> is
the empty <a class="reference internal" href="#AccessSet" title="AccessSet"><tt class="xref c c-type docutils literal"><span class="pre">AccessSet</span></tt></a>.</p>
<dl class="type">
<dt id="Attr">
unsigned <tt class="descname">Attr</tt><a class="headerlink" href="#Attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.attr"></span><a class="mpstag reference internal" href="#design.mps.type.attr">.attr:</a> Pool attributes. A bitset of pool or pool class
attributes, which are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">AttrFMT</span></tt></td>
<td>Contains formatted objects.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">AttrSCAN</span></tt></td>
<td>Contains references and must be scanned.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">AttrPM_NO_READ</span></tt></td>
<td>May not be read protected.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">AttrPM_NO_WRITE</span></tt></td>
<td>May not be write protected.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">AttrALLOC</span></tt></td>
<td>Supports the <tt class="docutils literal"><span class="pre">PoolAlloc</span></tt> interface.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">AttrFREE</span></tt></td>
<td>Supports the <tt class="docutils literal"><span class="pre">PoolFree</span></tt> interface.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">AttrBUF</span></tt></td>
<td>Supports the allocation buffer interface.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">AttrBUF_RESERVE</span></tt></td>
<td>Supports the reserve/commit protocol on allocation buffers.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">AttrBUF_ALLOC</span></tt></td>
<td>Supports the alloc protocol on allocation buffers.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">AttrGC</span></tt></td>
<td>Is garbage collecting, that is, parts may be reclaimed.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">AttrINCR_RB</span></tt></td>
<td>Is incremental, requiring a read barrier.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">AttrINCR_WB</span></tt></td>
<td>Is incremental, requiring a write barrier.</td>
</tr>
</tbody>
</table>
<p>There is an attribute field in the pool class (<tt class="xref c c-type docutils literal"><span class="pre">PoolClassStruct</span></tt>)
which declares the attributes of that class. These attributes are only
used for consistency checking at the moment.</p>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">It&#8217;s no longer true that they are only used for consistency
checking &#8211; drj 1998-05-07</p>
</div>
<dl class="type">
<dt id="RootVar">
int <tt class="descname">RootVar</tt><a class="headerlink" href="#RootVar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.rootvar"></span><a class="mpstag reference internal" href="#design.mps.type.rootvar">.rootvar:</a> The type <a class="reference internal" href="#RootVar" title="RootVar"><tt class="xref c c-type docutils literal"><span class="pre">RootVar</span></tt></a> is the type of the
discriminator for the union within <tt class="xref c c-type docutils literal"><span class="pre">RootStruct</span></tt>.</p>
<dl class="type">
<dt id="Serial">
unsigned <tt class="descname">Serial</tt><a class="headerlink" href="#Serial" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.serial"></span><a class="mpstag reference internal" href="#design.mps.type.serial">.serial:</a> A <a class="reference internal" href="#Serial" title="Serial"><tt class="xref c c-type docutils literal"><span class="pre">Serial</span></tt></a> is a number which is assigned to a structure
when it is initialized. The serial number is taken from a field in the
parent structure, which is incremented. Thus, every instance of a
structure has a unique &#8220;name&#8221; which is a path of structures from the
global root. For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">space</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">pool</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">buffer</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>Why? Consistency checking, debugging, and logging. Not well thought
out.</p>
<dl class="type">
<dt id="Compare">
unsigned <tt class="descname">Compare</tt><a class="headerlink" href="#Compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.compare"></span><a class="mpstag reference internal" href="#design.mps.type.compare">.compare:</a> <a class="reference internal" href="#Compare" title="Compare"><tt class="xref c c-type docutils literal"><span class="pre">Compare</span></tt></a> is the type of tri-state comparison
values.</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">CompareLESS</span></tt></td>
<td>A value compares less than another value.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">CompareEQUAL</span></tt></td>
<td>Two values compare the same.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">CompareGREATER</span></tt></td>
<td>A value compares greater than another value.</td>
</tr>
</tbody>
</table>
<dl class="type">
<dt id="ULongest">
<a class="reference internal" href="../topic/platform.html#MPS_T_ULONGEST" title="MPS_T_ULONGEST">MPS_T_ULONGEST</a> <tt class="descname">ULongest</tt><a class="headerlink" href="#ULongest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.ulongest"></span><a class="mpstag reference internal" href="#design.mps.type.ulongest">.ulongest:</a> <a class="reference internal" href="#ULongest" title="ULongest"><tt class="xref c c-type docutils literal"><span class="pre">ULongest</span></tt></a> is the longest unsigned integer on the
platform. (We used to use <tt class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span></tt> but this assumption is
violated by 64-bit Windows.) This type should be used for calculations
where any integer might be passed. Notably, it is used in <a class="reference internal" href="writef.html#WriteF" title="WriteF"><tt class="xref c c-func docutils literal"><span class="pre">WriteF()</span></tt></a>
to print any integer.</p>
</div>
<div class="section" id="abstract-types">
<h2>49.4. Abstract types<a class="headerlink" href="#abstract-types" title="Permalink to this headline">¶</a></h2>
<p><span class="target" id="design.mps.type.adts"></span><a class="mpstag reference internal" href="#design.mps.type.adts">.adts:</a> The following types are abstract data types, implemented as
pointers to structures. For example, <a class="reference internal" href="ring.html#Ring" title="Ring"><tt class="xref c c-type docutils literal"><span class="pre">Ring</span></tt></a> is a pointer to a
<tt class="xref c c-type docutils literal"><span class="pre">RingStruct</span></tt>. They are described elsewhere.</p>
<p><tt class="xref c c-type docutils literal"><span class="pre">AP</span></tt>, <a class="reference internal" href="arena.html#Arena" title="Arena"><tt class="xref c c-type docutils literal"><span class="pre">Arena</span></tt></a>, <tt class="xref c c-type docutils literal"><span class="pre">Buffer</span></tt>, <tt class="xref c c-type docutils literal"><span class="pre">Format</span></tt>, <tt class="xref c c-type docutils literal"><span class="pre">LD</span></tt>, <tt class="xref c c-type docutils literal"><span class="pre">Lock</span></tt>, <tt class="xref c c-type docutils literal"><span class="pre">PoolClass</span></tt>, <tt class="xref c c-type docutils literal"><span class="pre">Pool</span></tt>, <a class="reference internal" href="ring.html#Ring" title="Ring"><tt class="xref c c-type docutils literal"><span class="pre">Ring</span></tt></a>, <tt class="xref c c-type docutils literal"><span class="pre">Root</span></tt>, <tt class="xref c c-type docutils literal"><span class="pre">ScanState</span></tt>, <a class="reference internal" href="seg.html#Seg" title="Seg"><tt class="xref c c-type docutils literal"><span class="pre">Seg</span></tt></a>, <tt class="xref c c-type docutils literal"><span class="pre">Space</span></tt>, <a class="reference internal" href="thread-manager.html#Thread" title="Thread"><tt class="xref c c-type docutils literal"><span class="pre">Thread</span></tt></a>, <tt class="xref c c-type docutils literal"><span class="pre">Trace</span></tt>, <tt class="xref c c-type docutils literal"><span class="pre">VM</span></tt>.</p>
<dl class="type">
<dt id="Pointer">
void *<tt class="descname">Pointer</tt><a class="headerlink" href="#Pointer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><span class="target" id="design.mps.type.pointer"></span><a class="mpstag reference internal" href="#design.mps.type.pointer">.pointer:</a> The type <a class="reference internal" href="#Pointer" title="Pointer"><tt class="xref c c-type docutils literal"><span class="pre">Pointer</span></tt></a> is the same as <tt class="docutils literal"><span class="pre">void</span> <span class="pre">*</span></tt>, and
exists to sanctify functions such as <tt class="xref c c-func docutils literal"><span class="pre">PointerAdd()</span></tt>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">49. General MPS types</a><ul>
<li><a class="reference internal" href="#introduction">49.1. Introduction</a></li>
<li><a class="reference internal" href="#rationale">49.2. Rationale</a></li>
<li><a class="reference internal" href="#concrete-types">49.3. Concrete types</a></li>
<li><a class="reference internal" href="#abstract-types">49.4. Abstract types</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="trace.html"
                        title="previous chapter">48. Tracer</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="version-library.html"
                        title="next chapter">50. Library version mechanism</a></p><h4>Downloads</h4>

<p class="topless">
<a href="http://www.ravenbrook.com/project/mps/release/1.111.0/">MPS Kit release 1.111.0</a><br>
<a href="http://www.ravenbrook.com/project/mps/release/">All MPS Kit releases</a>
</p>

<h4>Issues</h4>

<p class="topless">
<a href="http://www.ravenbrook.com/project/mps/issue/?action=list&amp;view=status%3dopen&amp;display=Job:Priority:Title&amp;sort=Priority">Known issues</a><br>
<a href="http://www.ravenbrook.com/project/mps/issue/?action=fixed&release_fixed=1.111.0">Issues fixed in release 1.111.0</a>
</p><h4>Contact us</h4>

<p class="topless"><a href="mailto:mps-questions@ravenbrook.com">mps-questions@ravenbrook.com</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="version-library.html" title="50. Library version mechanism"
             >next</a> |</li>
        <li class="right" >
          <a href="trace.html" title="48. Tracer"
             >previous</a> |</li>
        <li><a href="../index.html">Memory Pool System 1.111.0 documentation</a> &raquo;</li>
          <li><a href="old.html" >Old design</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2013, Ravenbrook Limited.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>