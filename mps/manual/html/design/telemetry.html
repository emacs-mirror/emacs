

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>22. Telemetry &mdash; Memory Pool System 1.111.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/mps.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.111.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Memory Pool System 1.111.0 documentation" href="../index.html" />
    <link rel="up" title="Old design" href="old.html" />
    <link rel="next" title="23. Thread safety in the MPS" href="thread-safety.html" />
    <link rel="prev" title="21. Splay trees" href="splay.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="thread-safety.html" title="23. Thread safety in the MPS"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="splay.html" title="21. Splay trees"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Memory Pool System 1.111.0 documentation</a> &raquo;</li>
          <li><a href="old.html" accesskey="U">Old design</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="telemetry">
<span id="design-design-telemetry"></span><span id="design-telemetry"></span><span id="index-0"></span><h1>22. Telemetry<a class="headerlink" href="#telemetry" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="design.mps.telemetry"></span><h2>22.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><span class="target" id="design.mps.telemetry.intro"></span><a class="mpstag reference internal" href="#design.mps.telemetry.intro">.intro:</a> This documents the design of the telemetry mechanism within
the MPS.</p>
<p><span class="target" id="design.mps.telemetry.readership"></span><a class="mpstag reference internal" href="#design.mps.telemetry.readership">.readership:</a> This document is intended for any MPS developer.</p>
<p><span class="target" id="design.mps.telemetry.source"></span><a class="mpstag reference internal" href="#design.mps.telemetry.source">.source:</a> Various meetings and brainstorms, including
meeting.general.1997-03-04(0), mail.richard.1997-07-03.17-01(0),
mail.gavinm.1997-05-01.12-40(0).</p>
</div>
<div class="section" id="overview">
<h2>22.2. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><span class="target" id="design.mps.telemetry.over"></span><a class="mpstag reference internal" href="#design.mps.telemetry.over">.over:</a> Telemetry permits the emission of events from the MPS. These
can be used to drive a graphical tool, or to debug, or whatever. The
system is flexible and robust, but doesn&#8217;t require heavy support from
the client.</p>
</div>
<div class="section" id="requirements">
<h2>22.3. Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p><span class="target" id="design.mps.telemetry.req.simple"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.simple">.req.simple:</a> It must be possible to generate code both for the MPS
and any tool without using complicated build tools.</p>
<p><span class="target" id="design.mps.telemetry.req.open"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.open">.req.open:</a> We must not constrain the nature of events before we are
certain of what we want them to be.</p>
<p><span class="target" id="design.mps.telemetry.req.multi"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.multi">.req.multi:</a> We must be able to send events to multiple streams.</p>
<p><span class="target" id="design.mps.telemetry.req.share"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.share">.req.share:</a> It must be possible to share event descriptions between
the MPS and any tool.</p>
<p><span class="target" id="design.mps.telemetry.req.version"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.version">.req.version:</a> It must be possible to version the set of events so
that any tool can detect whether it can understand the MPS.</p>
<p><span class="target" id="design.mps.telemetry.req.back"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.back">.req.back:</a> Tools should be able to understand older and newer
version of the MPS, so far as is appropriate.</p>
<p><span class="target" id="design.mps.telemetry.req.type"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.type">.req.type:</a> It must be possible to transmit a rich variety of types
to the tool, including doubles, and strings.</p>
<p><span class="target" id="design.mps.telemetry.req.port"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.port">.req.port:</a> It must be possible to transmit and receive events
between different platforms.</p>
<p><span class="target" id="design.mps.telemetry.req.control"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.control">.req.control:</a> It must be possible to control whether and what
events are transmitted at least at a coarse level.</p>
<p><span class="target" id="design.mps.telemetry.req.examine"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.examine">.req.examine:</a> There should be a cheap means to examine the contents
of logs.</p>
<p><span class="target" id="design.mps.telemetry.req.pm"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.pm">.req.pm:</a> The event mechanism should provide for post mortem to
detect what significant events led up to death.</p>
<p><span class="target" id="design.mps.telemetry.req.perf"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.perf">.req.perf:</a> Events should not have a significant effect on
performance when unwanted.</p>
<p><span class="target" id="design.mps.telemetry.req.small"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.small">.req.small:</a> Telemetry streams should be small.</p>
<p><span class="target" id="design.mps.telemetry.req.avail"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.avail">.req.avail:</a> Events should be available in all varieties, subject to
performance requirements.</p>
<p><span class="target" id="design.mps.telemetry.req.impl"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.impl">.req.impl:</a> The plinth support for telemetry should be easy to write
and flexible.</p>
<p><span class="target" id="design.mps.telemetry.req.robust"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.robust">.req.robust:</a> The telemetry protocol should be robust against some
forms of corruption, e.g. packet loss.</p>
<p><span class="target" id="design.mps.telemetry.req.intern"></span><a class="mpstag reference internal" href="#design.mps.telemetry.req.intern">.req.intern:</a> It should be possible to support string-interning.</p>
</div>
<div class="section" id="architecture">
<h2>22.4. Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h2>
<p><span class="target" id="design.mps.telemetry.arch"></span><a class="mpstag reference internal" href="#design.mps.telemetry.arch">.arch:</a> Event annotations are scattered throughout the code, but
there is a central registration of event types and properties. Events
are written to a buffer via a specialist structure, and are optionally
written to the plinth. Events can take any number of parameters of a
range of types, indicated as a format both in the annotation and the
the registry.</p>
</div>
<div class="section" id="analysis">
<h2>22.5. Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h2>
<p><span class="target" id="design.mps.telemetry.anal"></span><a class="mpstag reference internal" href="#design.mps.telemetry.anal">.anal:</a> The proposed order of development, with summary of
requirements impact is as follows (★ for positive impact, ⇓ for
negative impact):</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">solution</th>
<th class="head">si</th>
<th class="head">op</th>
<th class="head">mu</th>
<th class="head">sh</th>
<th class="head">ve</th>
<th class="head">ty</th>
<th class="head">po</th>
<th class="head">co</th>
<th class="head">ex</th>
<th class="head">pm</th>
<th class="head">pe</th>
<th class="head">sm</th>
<th class="head">av</th>
<th class="head">im</th>
<th class="head">ro</th>
<th class="head">in</th>
<th class="head">ba</th>
<th class="head">status</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#design.mps.telemetry.sol.format">.sol.format</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>merged</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#design.mps.telemetry.sol.struct">.sol.struct</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>⇓</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>merged</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#design.mps.telemetry.sol.string">.sol.string</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>merged</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#design.mps.telemetry.sol.relation">.sol.relation</a></td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>merged</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#design.mps.telemetry.sol.dumper">.sol.dumper</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>merged</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#design.mps.telemetry.sol.kind">.sol.kind</a></td>
<td>·</td>
<td>⇓</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>merged</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#design.mps.telemetry.sol.control">.sol.control</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>merged</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#design.mps.telemetry.sol.variety">.sol.variety</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>★</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The following are not yet ordered:</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">solution</th>
<th class="head">si</th>
<th class="head">op</th>
<th class="head">mu</th>
<th class="head">sh</th>
<th class="head">ve</th>
<th class="head">ty</th>
<th class="head">po</th>
<th class="head">co</th>
<th class="head">ex</th>
<th class="head">pm</th>
<th class="head">pe</th>
<th class="head">sm</th>
<th class="head">av</th>
<th class="head">im</th>
<th class="head">ro</th>
<th class="head">in</th>
<th class="head">ba</th>
<th class="head">status</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#design.mps.telemetry.sol.buffer">.sol.buffer</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>★</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>.</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#design.mps.telemetry.sol.traceback">.sol.traceback</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>.</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#design.mps.telemetry.sol.client">.sol.client</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>.</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#design.mps.telemetry.sol.head">.sol.head</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>.</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#design.mps.telemetry.sol.version">.sol.version</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#design.mps.telemetry.sol.exit">.sol.exit</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>.</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#design.mps.telemetry.sol.block">.sol.block</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>⇓</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#design.mps.telemetry.sol.code">.sol.code</a></td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#design.mps.telemetry.sol.msg">.sol.msg</a></td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>·</td>
<td>★</td>
<td>★</td>
<td>·</td>
<td>.</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p><span class="target" id="design.mps.telemetry.file-format"></span><a class="mpstag reference internal" href="#design.mps.telemetry.file-format">.file-format:</a> One of the objectives of this plan is to minimise the
impact of the changes to the log file format. This is to be achieved
firstly by completing all necessary support before changes are
initiated, and secondly by performing all changes at the same time.</p>
</div>
<div class="section" id="ideas">
<h2>22.6. Ideas<a class="headerlink" href="#ideas" title="Permalink to this headline">¶</a></h2>
<p><span class="target" id="design.mps.telemetry.sol.format"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.format">.sol.format:</a> Event annotations indicate the types of their
arguments, for example, <tt class="xref c c-macro docutils literal"><span class="pre">EVENT_WD</span></tt> for a <a class="reference internal" href="type.html#Word" title="Word"><tt class="xref c c-type docutils literal"><span class="pre">Word</span></tt></a> and a <tt class="docutils literal"><span class="pre">double</span></tt>.
(<a class="reference internal" href="#design.mps.telemetry.req.type">.req.type</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.struct"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.struct">.sol.struct:</a> Copy event data into a structure of the appropriate
type, for example, <tt class="xref c c-type docutils literal"><span class="pre">EventWDStruct</span></tt>. (<a class="reference internal" href="#design.mps.telemetry.req.type">.req.type</a>, <a class="reference internal" href="#design.mps.telemetry.req.perf">.req.perf</a>, but
not <a class="reference internal" href="#design.mps.telemetry.req.small">.req.small</a> because of padding)</p>
<p><span class="target" id="design.mps.telemetry.sol.string"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.string">.sol.string:</a> Permit at most one string per event, at the end, and
use the <tt class="docutils literal"><span class="pre">char[1]</span></tt> hack, and specialised code; deduce the string
length from the event length and also <tt class="xref c c-macro docutils literal"><span class="pre">NUL</span></tt>-terminate (<a class="reference internal" href="#design.mps.telemetry.req.type">.req.type</a>,
<a class="reference internal" href="#design.mps.telemetry.req.intern">.req.intern</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.buffer"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.buffer">.sol.buffer:</a> Enter all events initially into internal buffers, and
conditionally send them to the message stream. (<a class="reference internal" href="#design.mps.telemetry.req.pm">.req.pm</a>,
<a class="reference internal" href="#design.mps.telemetry.req.control">.req.control</a>, <a class="reference internal" href="#design.mps.telemetry.req.perf">.req.perf</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.variety"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.variety">.sol.variety:</a> In optimized varieties, have internal events (see
<a class="reference internal" href="#design.mps.telemetry.sol.buffer">.sol.buffer</a>) for a subset of events and no external events; in
normal varieties have all internal events, and the potential for
external events. (<a class="reference internal" href="#design.mps.telemetry.req.avail">.req.avail</a>, <a class="reference internal" href="#design.mps.telemetry.req.pm">.req.pm</a>, <a class="reference internal" href="#design.mps.telemetry.req.perf">.req.perf</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.kind"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.kind">.sol.kind:</a> Divide events by some coarse type into around 6 groups,
probably related to frequency. (<a class="reference internal" href="#design.mps.telemetry.req.control">.req.control</a>, <a class="reference internal" href="#design.mps.telemetry.req.pm">.req.pm</a>, but not
<a class="reference internal" href="#design.mps.telemetry.req.open">.req.open</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.control"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.control">.sol.control:</a> Hold flags to determine which events are emitted
externally. (<a class="reference internal" href="#design.mps.telemetry.req.control">.req.control</a>, <a class="reference internal" href="#design.mps.telemetry.req.perf">.req.perf</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.dumper"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.dumper">.sol.dumper:</a> Write a simple tool to dump event logs as text.
(<a class="reference internal" href="#design.mps.telemetry.req.examine">.req.examine</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.msg"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.msg">.sol.msg:</a> Redesign the plinth interface to send and receive
messages, based on any underlying IPC mechanism, for example, append
to file, TCP/IP, messages, shared memory. (<a class="reference internal" href="#design.mps.telemetry.req.robust">.req.robust</a>,
<a class="reference internal" href="#design.mps.telemetry.req.impl">.req.impl</a>, <a class="reference internal" href="#design.mps.telemetry.req.port">.req.port</a>, <a class="reference internal" href="#design.mps.telemetry.req.multi">.req.multi</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.block"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.block">.sol.block:</a> Buffer the events and send them as fixed size blocks,
commencing with a timestamp, and ending with padding. (<a class="reference internal" href="#design.mps.telemetry.req.robust">.req.robust</a>,
<a class="reference internal" href="#design.mps.telemetry.req.perf">.req.perf</a>, but not <a class="reference internal" href="#design.mps.telemetry.req.small">.req.small</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.code"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.code">.sol.code:</a> Commence each event with two bytes of event code, and
two bytes of length. (<a class="reference internal" href="#design.mps.telemetry.req.small">.req.small</a>, <a class="reference internal" href="#design.mps.telemetry.req.back">.req.back</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.head"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.head">.sol.head:</a> Commence each event stream with a platform-independent
header block giving information about the session, version (see
<a class="reference internal" href="#design.mps.telemetry.sol.version">.sol.version</a>), and file format; file format will be sufficient to
decode the (platform-dependent) rest of the file. (<a class="reference internal" href="#design.mps.telemetry.req.port">.req.port</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.exit"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.exit">.sol.exit:</a> Provide a mechanism to flush events in the event of
graceful sudden death. (<a class="reference internal" href="#design.mps.telemetry.req.pm">.req.pm</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.version"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.version">.sol.version:</a> Maintain a three part version number for the file
comprising major (incremented when the format of the entire file
changes (other than platform differences)), median (incremented when
an existing event changes its form or semantics), and minor
(incremented when a new event type is added); tools should normally
fail when the median or major is unsupported. (<a class="reference internal" href="#design.mps.telemetry.req.version">.req.version</a>,
<a class="reference internal" href="#design.mps.telemetry.req.back">.req.back</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.relation"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.relation">.sol.relation:</a> Event types will be defined in terms of a relation
specifying their name, code, optimised behaviour (see
<a class="reference internal" href="#design.mps.telemetry.sol.variety">.sol.variety</a>), kind (see <a class="reference internal" href="#design.mps.telemetry.sol.kind">.sol.kind</a>), and format (see
<a class="reference internal" href="#design.mps.telemetry.sol.format">.sol.format</a>); both the MPS and tool can use this by suitable
<tt class="docutils literal"><span class="pre">#define</span></tt> hacks. (<a class="reference internal" href="#design.mps.telemetry.req.simple">.req.simple</a>, <a class="reference internal" href="#design.mps.telemetry.req.share">.req.share</a>, <a class="reference internal" href="#design.mps.telemetry.req.examine">.req.examine</a>,
<a class="reference internal" href="#design.mps.telemetry.req.small">.req.small</a> (no format information in messages))</p>
<p><span class="target" id="design.mps.telemetry.sol.traceback"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.traceback">.sol.traceback:</a> Provide a mechanism to output recent events (see
<a class="reference internal" href="#design.mps.telemetry.sol.buffer">.sol.buffer</a>) as a form of backtrace when <tt class="xref c c-macro docutils literal"><span class="pre">AVER</span></tt> statements fire
or from a debugger, or whatever. (<a class="reference internal" href="#design.mps.telemetry.req.pm">.req.pm</a>)</p>
<p><span class="target" id="design.mps.telemetry.sol.client"></span><a class="mpstag reference internal" href="#design.mps.telemetry.sol.client">.sol.client:</a> Provide a mechanism for user events. (<a class="reference internal" href="#design.mps.telemetry.req.intern">.req.intern</a>)</p>
</div>
<div class="section" id="implementation">
<h2>22.7. Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="annotation">
<h3>22.7.1. Annotation<a class="headerlink" href="#annotation" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="design.mps.telemetry.annot"></span><a class="mpstag reference internal" href="#design.mps.telemetry.annot">.annot:</a> An event annotation is of the form:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">EVENT3</span><span class="p">(</span><span class="n">FooCreate</span><span class="p">,</span> <span class="n">pointer</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="target" id="design.mps.telemetry.annot.string"></span><a class="mpstag reference internal" href="#design.mps.telemetry.annot.string">.annot.string:</a> If there is a string in the format, it must be the
last parameter (and hence there can be only one). There is currrently
a maximum string length, defined by <tt class="docutils literal"><span class="pre">EventMaxStringLength</span></tt> in
impl.h.eventcom.</p>
<p><span class="target" id="design.mps.telemetry.annot.type"></span><a class="mpstag reference internal" href="#design.mps.telemetry.annot.type">.annot.type:</a> The event type should be given as the first parameter
to the event macro, as registered in impl.h.eventdef.</p>
<p><span class="target" id="design.mps.telemetry.annot.param"></span><a class="mpstag reference internal" href="#design.mps.telemetry.annot.param">.annot.param:</a> The parameters of the event should be given as the
remaining parameters of the event macro, in order as indicated in the
event parameters definition in impl.h.eventdef.</p>
</div>
<div class="section" id="registration">
<h3>22.7.2. Registration<a class="headerlink" href="#registration" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="design.mps.telemetry.reg"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg">.reg:</a> All event types and parameters should be registered in
impl.h.eventdef, in the form of a higher-order list macros.</p>
<p><span class="target" id="design.mps.telemetry.reg.just"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.just">.reg.just:</a> This use of a higher-order macros enables great
flexibility in the use of this file.</p>
<p><span class="target" id="design.mps.telemetry.reg.rel"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.rel">.reg.rel:</a> The event type registration is of the form:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">EVENT</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">FooCreate</span><span class="p">,</span> <span class="mh">0x1234</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">,</span> <span class="n">Arena</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="target" id="design.mps.telemetry.reg.type"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.type">.reg.type:</a> The first parameter of the relation is the event type.
This needs no prefix, and should correspond to that used in the
annotation.</p>
<p><span class="target" id="design.mps.telemetry.reg.code"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.code">.reg.code:</a> The second parameter is the event code, a 16-bit value
used to represent this event type. Codes should not be re-used for new
event types, to allow interpretation of event log files of all ages.</p>
<p><span class="target" id="design.mps.telemetry.reg.always"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.always">.reg.always:</a> The third parameter is a boolean value indicating
whether this event type should be implemented in all varieties. See
<a class="reference internal" href="#design.mps.telemetry.control.buffer">.control.buffer</a>. Unless your event is on the critical path
(typically per reference or per object), you will want this to be
<tt class="xref c c-macro docutils literal"><span class="pre">TRUE</span></tt>.</p>
<p><span class="target" id="design.mps.telemetry.reg.kind"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.kind">.reg.kind:</a> The fourth parameter is a kind keyword indicating what
category this event falls into. See <a class="reference internal" href="#design.mps.telemetry.control">.control</a>. The possible values
are:</p>
<ul class="simple">
<li><a class="reference internal" href="arena.html#Arena" title="Arena"><tt class="xref c c-type docutils literal"><span class="pre">Arena</span></tt></a> &#8211; per space or arena or global</li>
<li><tt class="xref c c-type docutils literal"><span class="pre">Pool</span></tt> &#8211; pool-related</li>
<li><tt class="xref c c-type docutils literal"><span class="pre">Trace</span></tt> &#8211; per trace or scan</li>
<li><a class="reference internal" href="seg.html#Seg" title="Seg"><tt class="xref c c-type docutils literal"><span class="pre">Seg</span></tt></a> &#8211; per segment</li>
<li><a class="reference internal" href="type.html#Ref" title="Ref"><tt class="xref c c-type docutils literal"><span class="pre">Ref</span></tt></a> &#8211; per reference or fix</li>
<li><tt class="docutils literal"><span class="pre">Object</span></tt> &#8211; per object or allocation</li>
<li><tt class="docutils literal"><span class="pre">User</span></tt> &#8211; invoked by the user through the MPS interface</li>
</ul>
<p>This list can be seen in impl.h.eventcom.</p>
<p><span class="target" id="design.mps.telemetry.reg.doc"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.doc">.reg.doc:</a> Add a docstring column. [RB 2012-09-03]</p>
<p><span class="target" id="design.mps.telemetry.reg.params"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.params">.reg.params:</a> The event parameters registration is of the form:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#define EVENT_FooCreate_PARAMS(PARAM, X) \</span>
<span class="cp">  PARAM(X,  0, P, firstParamPointer) \</span>
<span class="cp">  PARAM(X,  1, U, secondParamUnsigned)</span>
</pre></div>
</div>
<p><span class="target" id="design.mps.telemetry.reg.param.index"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.param.index">.reg.param.index:</a> The first column is the index, and must start at
zero and increase by one for each row.</p>
<p><span class="target" id="design.mps.telemetry.reg.param.sort"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.param.sort">.reg.param.sort:</a> The second column is the parameter &#8220;sort&#8221;, which,
when appended to <tt class="docutils literal"><span class="pre">EventF</span></tt>, yields a type for the parameter. It is a
letter from the following list:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">P</span></tt> &#8211; <tt class="docutils literal"><span class="pre">void</span> <span class="pre">*</span></tt></li>
<li><tt class="docutils literal"><span class="pre">A</span></tt> &#8211; <a class="reference internal" href="type.html#Addr" title="Addr"><tt class="xref c c-type docutils literal"><span class="pre">Addr</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">W</span></tt> &#8211; <a class="reference internal" href="type.html#Word" title="Word"><tt class="xref c c-type docutils literal"><span class="pre">Word</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">U</span></tt> &#8211; <tt class="docutils literal"><span class="pre">unsigned</span> <span class="pre">int</span></tt></li>
<li><tt class="docutils literal"><span class="pre">S</span></tt> &#8211; <tt class="docutils literal"><span class="pre">char</span> <span class="pre">*</span></tt></li>
<li><tt class="docutils literal"><span class="pre">D</span></tt> &#8211; <tt class="docutils literal"><span class="pre">double</span></tt></li>
<li><tt class="docutils literal"><span class="pre">B</span></tt> &#8211; <a class="reference internal" href="type.html#Bool" title="Bool"><tt class="xref c c-type docutils literal"><span class="pre">Bool</span></tt></a></li>
</ul>
<p>The corresponding event parameter must be assignment compatible with
the type.</p>
<p><span class="target" id="design.mps.telemetry.param.types"></span><a class="mpstag reference internal" href="#design.mps.telemetry.param.types">.param.types:</a> When an event has parameters whose type is not in the
above list, use the following guidelines: All <tt class="docutils literal"><span class="pre">C</span></tt> pointer types not
representing strings use <tt class="docutils literal"><span class="pre">P</span></tt>; <a class="reference internal" href="type.html#Size" title="Size"><tt class="xref c c-type docutils literal"><span class="pre">Size</span></tt></a>, <a class="reference internal" href="type.html#Count" title="Count"><tt class="xref c c-type docutils literal"><span class="pre">Count</span></tt></a>, <a class="reference internal" href="type.html#Index" title="Index"><tt class="xref c c-type docutils literal"><span class="pre">Index</span></tt></a> use
<tt class="docutils literal"><span class="pre">W</span></tt>; others should be obvious.</p>
<p><span class="target" id="design.mps.telemetry.reg.param.name"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.param.name">.reg.param.name:</a> The third column is the parameter name. It should
be a valid C identifier and is used for debugging display and human
readable output.</p>
<p><span class="target" id="design.mps.telemetry.reg.param.doc"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.param.doc">.reg.param.doc:</a> Add a docstring column. [RB 2012-09-03]</p>
<p><span class="target" id="design.mps.telemetry.reg.dup"></span><a class="mpstag reference internal" href="#design.mps.telemetry.reg.dup">.reg.dup:</a> It is permissible for the one event type to be used for
more than one annotation. There are generally two reasons for this:</p>
<ul class="simple">
<li>Variable control flow for successful function completion;</li>
<li>Platform/Otherwise-dependent implementations of a function.</li>
</ul>
<p>Note that all annotations for one event type must have the same format
(as implied by <a class="reference internal" href="#design.mps.telemetry.sol.format">.sol.format</a>).</p>
</div>
<div class="section" id="control">
<h3>22.7.3. Control<a class="headerlink" href="#control" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="design.mps.telemetry.control"></span><a class="mpstag reference internal" href="#design.mps.telemetry.control">.control:</a> There are two types of event control, buffer and output.</p>
<p><span class="target" id="design.mps.telemetry.control.buffer"></span><a class="mpstag reference internal" href="#design.mps.telemetry.control.buffer">.control.buffer:</a> Buffer control affects whether particular events
implemented at all, and is controlled statically by variety using the
always value (see <a class="reference internal" href="#design.mps.telemetry.reg.always">.reg.always</a>) for the event type. The hot variety
does compiles out annotations with <tt class="docutils literal"><span class="pre">always=FALSE</span></tt>. The cool variety
does not, so always buffers a complete set of events.</p>
<p><span class="target" id="design.mps.telemetry.control.output"></span><a class="mpstag reference internal" href="#design.mps.telemetry.control.output">.control.output:</a> Output control affects whether events written to
the internal buffer are output via the plinth. This is set on a
per-kind basis (see <a class="reference internal" href="#design.mps.telemetry.reg.kind">.reg.kind</a>), using a control bit table stored in
EventKindControl. By default, all event kinds are off. You may switch
some kinds on using a debugger.</p>
<p>For example, to enable <tt class="xref c c-type docutils literal"><span class="pre">Pool</span></tt> events using gdb (see impl.h.eventcom for
numeric codes):</p>
<div class="highlight-c"><pre>$ gdb ./xci3gc/cool/amcss
(gdb) break GlobalsInit
(gdb) run
...
(gdb) print EventKindControl |= 2
$2 = 2
(gdb) continue
...
(gdb) quit
$ mpseventcnv -v | sort | head
0000178EA03ACF6D PoolInit                9C1E0    9C000 0005E040
0000178EA03C2825 PoolInitMFS             9C0D8    9C000     1000        C
0000178EA03C2C27 PoolInitMFS             9C14C    9C000     1000       44
0000178EA03C332C PoolInitMV              9C080    9C000     1000       20    10000
0000178EA03F4DB4 BufferInit             2FE2C4   2FE1B0        0
0000178EA03F4EC8 BufferInitSeg          2FE2C4   2FE1B0        0
0000178EA03F57DA AMCGenCreate           2FE1B0   2FE288
0000178EA03F67B5 BufferInit             2FE374   2FE1B0        0
0000178EA03F6827 BufferInitSeg          2FE374   2FE1B0        0
0000178EA03F6B72 AMCGenCreate           2FE1B0   2FE338</pre>
</div>
<p><span class="target" id="design.mps.telemetry.control.env"></span><a class="mpstag reference internal" href="#design.mps.telemetry.control.env">.control.env:</a> The initial value of <tt class="docutils literal"><span class="pre">EventKindControl</span></tt> is read
from the C environment when the ANSI Plinth is used, and so event
output can be controlled like this:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">MPS_TELEMETRY_CONTROL</span><span class="o">=</span><span class="mi">127</span> <span class="n">amcss</span>
</pre></div>
</div>
<p>or like this:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">MPS_TELEMETRY_CONTROL</span><span class="o">=</span><span class="s">&quot;Pool Arena&quot;</span> <span class="n">amcss</span>
</pre></div>
</div>
<p>where the variable is set to a space-separated list of names defined by <tt class="docutils literal"><span class="pre">EventKindENUM</span></tt>.</p>
<p><span class="target" id="design.mps.telemetry.control.just"></span><a class="mpstag reference internal" href="#design.mps.telemetry.control.just">.control.just:</a> These controls are coarse, but very cheap.</p>
<p><span class="target" id="design.mps.telemetry.control.external"></span><a class="mpstag reference internal" href="#design.mps.telemetry.control.external">.control.external:</a> The MPS interface function
<tt class="docutils literal"><span class="pre">mps_telemetry_control</span></tt> can be used to change <tt class="docutils literal"><span class="pre">EventKindControl</span></tt>.</p>
<p><span class="target" id="design.mps.telemetry.control.tool"></span><a class="mpstag reference internal" href="#design.mps.telemetry.control.tool">.control.tool:</a> The tools will be able to control
<tt class="docutils literal"><span class="pre">EventKindControl</span></tt>.</p>
</div>
<div class="section" id="debugging">
<h3>22.7.4. Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="design.mps.telemetry.debug.buffer"></span><a class="mpstag reference internal" href="#design.mps.telemetry.debug.buffer">.debug.buffer:</a> Each event kind is logged in a separate buffer,
<tt class="docutils literal"><span class="pre">EventBuffer[kind]</span></tt>.</p>
<p><span class="target" id="design.mps.telemetry.debug.buffer.reverse"></span><a class="mpstag reference internal" href="#design.mps.telemetry.debug.buffer.reverse">.debug.buffer.reverse:</a> The events are logged in reverse order from
the top of the buffer, with the last logged event at
<tt class="docutils literal"><span class="pre">EventLast[kind]</span></tt>. This allows recovery of the list of recent events
using the <tt class="docutils literal"><span class="pre">event-&gt;any.size</span></tt> field.</p>
<p><span class="target" id="design.mps.telemetry.debug.dump"></span><a class="mpstag reference internal" href="#design.mps.telemetry.debug.dump">.debug.dump:</a> The contents of all buffers can be dumped with the
<tt class="docutils literal"><span class="pre">EventDump</span></tt> function from a debugger, for example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">gdb</span><span class="o">&gt;</span> <span class="n">print</span> <span class="n">EventDump</span><span class="p">(</span><span class="n">mps_lib_get_stdout</span><span class="p">())</span>
</pre></div>
</div>
<p><span class="target" id="design.mps.telemetry.debug.describe"></span><a class="mpstag reference internal" href="#design.mps.telemetry.debug.describe">.debug.describe:</a> Individual events can be described with the
EventDescribe function, for example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">gdb</span><span class="o">&gt;</span> <span class="n">print</span> <span class="n">EventDescribe</span><span class="p">(</span><span class="n">EventLast</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">mps_lib_get_stdout</span><span class="p">())</span>
</pre></div>
</div>
<p><span class="target" id="design.mps.telemetry.debug.core"></span><a class="mpstag reference internal" href="#design.mps.telemetry.debug.core">.debug.core:</a> The event buffers are preserved in core dumps and can
be used to work out what the MPS was doing before a crash. Since the
kinds correspond to frequencies, ancient events may still be available
in some buffers, even if they have been flushed to the output stream.
Some digging may be required.</p>
</div>
<div class="section" id="dumper-tool">
<h3>22.7.5. Dumper tool<a class="headerlink" href="#dumper-tool" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="design.mps.telemetry.dumper"></span><a class="mpstag reference internal" href="#design.mps.telemetry.dumper">.dumper:</a> A primitive dumper tool is available in impl.c.eventcnv.
For details, see guide.mps.telemetry.</p>
</div>
<div class="section" id="allocation-replayer-tool">
<h3>22.7.6. Allocation replayer tool<a class="headerlink" href="#allocation-replayer-tool" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="design.mps.telemetry.replayer"></span><a class="mpstag reference internal" href="#design.mps.telemetry.replayer">.replayer:</a> A tool for replaying an allocation sequence from a log
is available in impl.c.replay. For details, see
design.mps.telemetry.replayer.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">22. Telemetry</a><ul>
<li><a class="reference internal" href="#introduction">22.1. Introduction</a></li>
<li><a class="reference internal" href="#overview">22.2. Overview</a></li>
<li><a class="reference internal" href="#requirements">22.3. Requirements</a></li>
<li><a class="reference internal" href="#architecture">22.4. Architecture</a></li>
<li><a class="reference internal" href="#analysis">22.5. Analysis</a></li>
<li><a class="reference internal" href="#ideas">22.6. Ideas</a></li>
<li><a class="reference internal" href="#implementation">22.7. Implementation</a><ul>
<li><a class="reference internal" href="#annotation">22.7.1. Annotation</a></li>
<li><a class="reference internal" href="#registration">22.7.2. Registration</a></li>
<li><a class="reference internal" href="#control">22.7.3. Control</a></li>
<li><a class="reference internal" href="#debugging">22.7.4. Debugging</a></li>
<li><a class="reference internal" href="#dumper-tool">22.7.5. Dumper tool</a></li>
<li><a class="reference internal" href="#allocation-replayer-tool">22.7.6. Allocation replayer tool</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="splay.html"
                        title="previous chapter">21. Splay trees</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="thread-safety.html"
                        title="next chapter">23. Thread safety in the MPS</a></p><h4>Downloads</h4>

<p class="topless">
<a href="http://www.ravenbrook.com/project/mps/release/1.111.0/">MPS Kit release 1.111.0</a><br>
<a href="http://www.ravenbrook.com/project/mps/release/">All MPS Kit releases</a>
</p>

<h4>Issues</h4>

<p class="topless">
<a href="http://www.ravenbrook.com/project/mps/issue/?action=list&amp;view=status%3dopen&amp;display=Job:Priority:Title&amp;sort=Priority">Known issues</a><br>
<a href="http://www.ravenbrook.com/project/mps/issue/?action=fixed&release_fixed=1.111.0">Issues fixed in release 1.111.0</a>
</p><h4>Contact us</h4>

<p class="topless"><a href="mailto:mps-questions@ravenbrook.com">mps-questions@ravenbrook.com</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="thread-safety.html" title="23. Thread safety in the MPS"
             >next</a> |</li>
        <li class="right" >
          <a href="splay.html" title="21. Splay trees"
             >previous</a> |</li>
        <li><a href="../index.html">Memory Pool System 1.111.0 documentation</a> &raquo;</li>
          <li><a href="old.html" >Old design</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2013, Ravenbrook Limited.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>