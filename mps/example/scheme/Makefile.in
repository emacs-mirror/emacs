# example/scheme/Makefile -- Makefile for the MPS Scheme example
#
# $Id$

CFLAGS = @CFLAGS@

MPS = ../../code

TARGETS = scheme-malloc scheme scheme-advanced

TESTS = r5rs mps leaf

all: $(TARGETS)

$(TARGETS): %: %.c
	$(CC) $(CFLAGS) -o $@ -I $(MPS) $< $(MPS)/mps.c

clean:
	rm $(TARGETS)

test: $(TARGETS)
	for TARGET in $(TARGETS); do \
	   for TEST in $(TESTS); do \
	     ./$$TARGET test-$$TEST.scm || exit; \
	   done \
	done
