                     MM/EP-CORE MEETING 1999-03-04
                       meeting.epcore.1999-03-04
                               draft doc
                            pekka 1999-03-04

.intro: Pekka P. Pirinen <pekka> met with Dave T. Berry <dtb> and Eric Penfold 
<ericp> to discuss the plans for MM/EP-Core, particularly the upcoming release, 
called brisling.4.

.half-tone-cache: Pekka warned that the hack used to measure the space for the 
half-tone screen cache (avail_p_memoryF as modified in SW Support Call 103693 ) 
is unstable, because it relies on returning to exactly the same state after a 
sequence of allocations and corresponding deallocations.  The code expects to 
be able to repeat the same sequence of allocations.  If the free-list doesn't 
return to using exactly the same blocks, it might hold onto some segment that 
was available for the first sequence of allocations, and prevent the repeat.  
Currently, the deallocations are done in the reverse order of allocation, and 
this will actually guarantee that the MVFF free-list will use the same 
segments, but it's a subtle requirement, that we'd do well without.  The core 
group is naturally unwilling to rewrite this code to avoid the need for an 
avail_p_memoryF.

.smp: Dave asked about VM support for the SMP RIP, and Pekka confirmed that 
there is a plan (request.epcore.160047) for implementing it, using mostly the 
same interfaces SW is currently using for its SMP versions.  Implementation for 
NT is estimated to take three man-weeks, for UNIX four, because of the 
limitations on the number of shared segments.  .smp.limit: In Dave's 
experience, SGIs ignore this limit and on Solaris it should be configurable (by 
a kernel reboot).  He promised to share the program he'd used to test this.  
.smp.windows: SMP RIP is only needed for NT, although the uniprocessor version 
runs on Windows 95 and 98 as well.  .smp.future: Dave confirmed that this is 
still high on their list of priorities and a rearchitecting of the RIP to be 
multithreaded instead is not.  The SGI SMP RIP is more important than Solaris.

.linux: Dave warned that a Linux port of SW is being considered.  .vxworks: As 
previously discussed, a VxWorks port might be needed -- this is likely to 
happen on a very tight schedule.

.ac: Pekka handed over draft documentation of the allocation caches, and 
explained that the work is proceeding well, and is expected to produce a 
substantial improvement for the color pool.  .ac.interface: Eric suggested 
using an array to describe the size classes to mps_sac_create; this seems like 
a good idea.  He thought eight classes would be better than six.  .ac.work: 
Pekka promised to inform the core group about the progress and estimated 
release date, and to provide a prerelease for Eric when it goes to QA.

.dl-free: Dave explained that the recent problem with slow EPDL free 
(mail.ericp.1999-03-03.17-40) was particularly bad for TIFF/IT files, that have 
millions of small elements in them.  While they might be able to turn off 
vignette detection in them, the underlying problem would remain wherever 
vignette detection and partial paints coincide.  As it is, the core group would 
very much like some fix for the next release.  .vignettes: Vignette detection 
is used for trapping, recombine, vignette replacement (a new option), and 
HCMS.  .dl.mvff: While MVFF was much faster in these jobs, a 3 % slow-down in 
general would be unacceptable.  Dave felt that even if MVFF could be improved 
for brisling.4, using it for the DL wasn't an option, as there was not enough 
time to QA the performance.  .dl.epdl: Pekka explained that there were a number 
of relatively simple ways for improving this behavior of EPDL (assuming our 
tentative diagnosis is correct), and they would deliver one in brisling.4.

.other: Other high-priority work (as discussed at previous meetings) was 
reviewed, and while small advances could be reported for some, none of it is 
suitable for delivery in brisling.4 -- in particular, the changes to remove 
segment-boundary limitation from MVFF allocation points are part of a larger 
reorganization (but SW doesn't use this ATM, anyway).

.brisling.4: release.epcore.brisling.4 will be for the release following SW5.1 
(name undecided as yet).  It will be released to the trunk and branch SW_E.  A 
suitable version of SW for testing it would be SW_E 1999-03-02 00:00 GMT.

