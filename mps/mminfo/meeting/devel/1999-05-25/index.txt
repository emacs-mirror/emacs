             NOTES FROM MM DEVELOPMENT AND PRODUCT MEETING
                        meeting.devel.1999-05-25
                             incomplete doc
                             rit 1999-05-27

Start 12:39

Telecon: Dave Berry <daveb>, David Jones <drj>, Pekka Pirinen <pekka>, Richard 
Tucker <rit>.

Tony Mann <tony> is on holiday; Andy Sizer <andys> was on the phone and joined 
the meeting later.

NEWS

rit: Mike Cox has told me about a problem with delays between tickles in SW. 
I'm looking at it, but we don't have any reason to believe it's MM-related.

pekka: release.web.diadem has been installed, with links from various public 
pages on Hqn's website to the consulting page.

pekka: Some mail came in this morning: call for papers for a "Workshop on 
Hardware Support for Objects and Microarchitectures for Java". Sounds 
interesting. Andy seemed interested too, so perhaps we should discuss that 
later on.

daveb: Could someone mail it to me?

drj: Yes, I'll do that.

daveb: Meeting with EP on Friday, is that right? To discuss the Orange Box API?

pekka: Yes. They raised the issue last week, and we discussed it a bit. I think 
it's a good opportunity to get the MPS used more. I'm not sure about the actual 
volumes of data here. It might be that we're just talking about a few large 
objects, in which case the problems are mostly on their side. If it's lots of 
new objects, we have the usual problems with strategy, which we're planning to 
address this summer, but the timetables are going to be critical. Ultimately, I 
think we'd like to substitute MPS as the default MM in the framework, which is 
probably going further than they want to go at this time. But we'll see about 
that.

daveb: What's the underlying thing they've run into?

pekka: Currently the framework MM interface is just an improved interface on 
top of the standard malloc. They want better control over the division of 
memory.


RELEASES

* product.web

pekka: release.web.diadem's closed now. Work on release.web.garden has started, 
and is scheduled to finish at the end of July.


* product.dylan

rit: I spoke to Tony on Friday, and he said he hadn't got round to talking to 
Dylan about the stack-scanning issues. We agreed I'd bring it up at this 
meeting. Dave, are you the best person to talk to Dylan about that?

daveb: Yes, ok. I'll raise it with Jonathan.


* product.epcore

daveb: Any work on epcore now?

pekka: Not really. What I'm doing is connected to it, though.


* DDJ article

daveb: Tony's second draft has gone to the DDJ for comment. Andew Shalit amd 
Pekka have also commented on it. I was interested in what Pekka said about 
trade secrets. Do you have a list of which trade secrets it might be breaching?

pekka: Yes. I sent it to Tony; it's easy enough to make a new list. I think 
Tony's position would be that we are deliberately revealing these things now. 
If that's the decision then I'd like to get our list of trade secrets updated. 
overview.ideas in the InfoSys hasn't been updated for several years, because 
nobody wanted to take the responsibility.

daveb: So how up to date is it? If I go and look at it, how does the info there 
differ from the actual state of affairs?

pekka: I think it's pretty valid, because most of the technology is still 
there. There are one or two ideas that have been invented since that I think 
should be there, but not many. It's more that we might decide that some of 
these things we are now making public. If and when we publish the MPS as a 
product, the interface to the MPS will definitely give some of these things 
away.

daveb: It would be useful to record in the list of ideas whether they can be 
deduced from the interface or not.

daveb: One way would be to go through a list, see what's mentioned in the DDJ 
article.

pekka: Ok, I'll make a list so we have something to refer to.

daveb: Anything else arising from the article.

rit: I thought it was very good.

daveb: Does it have the URL for the MM reference?

pekka, rit: No, well yes it does but only in the references. We've talked to 
tony about mentioning it earlier, perhaps in the definitions section/sidebar.


* product.java

drj: Me and tony revised the plan for amaretto on Thursday. The planned date is 
now 22nd June. A lot later than planned, but that's the nature of the beast.

daveb: I'm sure I'm going to be asked this this afternoon: what's the main 
cause of the delay?

drj: Dealing with someone else's code. Also I had originally assumed the object 
format was sensible, things like that.

daveb: The significant technical problem is separation of handles and objects?

drj: Yes, at the moment.

daveb: Do we have a plan that we're agreed on?

drj: We have a plan that I'm agreed on 8-): add a back-pointer from the objects 
to the handle, at the end of the object (rit's suggestion [andy suggested back 
pointers]).

pekka: I'm not disagreeing!

daveb: So it uses a little more space for each object.

drj: Yes. Hopefully if we were talking to an actual vendor, we could influence 
the object format. At the moment we can't because it's all tied up with the 
rest of the runtime and the JIT. If we were talking to a vendor we could say 
"Actually this format's not all that great for GC, and if we could change it 
like this it would be better...".

daveb: What about Tony's suggestion of having objects and handles next to each 
other?

drj: I think it's workable, but a bit harder.


PLAN

drj: Main change is Java date now 22nd June.

daveb: Segment placement is scheduled for July.


WORKING PRACTICES

drj: I'm still trying to get a review schedule together.

daveb: I'm sure I'll be told that actually getting a JVM working is more 
important. So look at review schedule when you have/need a break.

daveb: Did we get anywhere with Darwin ratings, or is that still up in the air?

drj: Still up in the air.


AOB

* java hardware support workshop

pekka: Andy's off the phone now, lets talk about this workshop on hardware 
support for Java.

<andys joins the meeting>

andys: If you want to attend, you have to write a position paper. Mario's an 
ex-Harlequin person (me and Tony know him) so it might not be an absolute 
requirement, but it's probably a good idea anyway. But what would we put in it?

pekka: Deadline is July 12th.

andys: There's an upper limit on what it can be: 5 pages. So the biggest 
problem is likely to be verbosity. Do we have anything useful to say? I guess 
we probably do if we thought hard about it. Assuming that what we'd be 
primarily interested in is support for garbage collection. They'll probably be 
pretty-much focused on Java.

rit: Who's organising this?

andys: Sun in conjunction with ICCD (international conference on computer 
design), University of Texas.

daveb: Hardware support: read- and write-barriers, or is that more at the O/S 
level?

drj: Also cache design issues.

andys: Also questions like: do you want to do the whole of GC in hardware? If 
not, there's are instruction-set design issues. (the naive approach of 
implementing the JVM instruction set is probably not powerful enough to write a 
GC.)

daveb: I'll raise the whole question at the quartet this afternoon. By all 
means toss out ideas.

andys: Seems to be it's a fairly strategic thing to attend, if we are serious 
about in GC for Java.

pekka: Good place to find partners, perhaps.

andys: And get ourselves known. Plus we've got some inside contacts there. I 
suspect the people that'll be there besides Mario are people like Ole Ageson, 
Dave Unger. Maybe even Guy Steele.

andys: I'd say if MM is going to spend money on one trip this year, this would 
have to be a strong contender.


* real-time Java stuff

daveb: I read the minutes from the first meeting.

drj: I think we decided to come up with a number of sketches for the quartet.

andys: Also an idea of doing something that conforms to the Java consortium's 
idea of what it should be: i.e. no GC in real-time threads.

pekka: Second meeting didn't get quite as far as we'd hoped. But we could now 
probably make a choice about the algorithm to use in a prototype, and produce a 
plan for the quartet to look at. We have an action item, but noone to do it. It 
can't be tony, as he's away.

daveb: Andy, do you have any time? Looking at real-time GC algorithms would be 
the first step of that.

andys: Hmm. Yes, ok. But I still think we've got a vastly underspecified 
problem here. We don't know what our target markets and customers are. 
Potentially the largest market is not web-type systems but embedded systems. At 
least we should consider that possibility. I think the most sensible initial 
step is to support the J consortium's approach. That gives us something to say.

andys: But realtime _is_ embedded systems, right? And they'll go for mass 
market if they can commoditise the whole thing and get volume. _Then_ they can 
do hardware things. So I think it's too early to do an algorithm yet.

pekka: I think the reason for choosing an algorithm was that to have a concrete 
work-plan you need something to release. So even though you don't have a 
requirement, you pick something that's fairly easy to do, and hope that much of 
the work you end up doing is generally applicable.

andys: Sure, but why not just go and find out the requirements first? I'm 
dubious about thinking we're productive simply because we're churning out code.

pekka: True, but some of the issues we've identified, like software-barriers, 
are going to be a factor in any solution.

andys: Are they? Suppose we go along to ARM and say: we'd like to integrate 
special MM hardware into one of your chips? That's what Apple did.

pekka: Ok. In it's current state, the MPS only support one kind of algorithm: 
page-based hardware barrier. So I do think there's design work to do.

daveb: If there's something that looks like it may be a requirement for a broad 
class of potential customers, it's worth doing something about it.

andys: Well I think if you look at the ESPRIT project &c there's are people we 
could go and talk to _now_. Like Daimler-Benz, who are using it to stick cars 
together.

andys: So I think our current strategy is bankrupt.

daveb: But we don't have anything to show them now.

andys: But we can point to plenty of previous cases where we've written garbage 
collectors. Why should Java be any different?

daveb: Ok, this is a question of business strategy. You should talk to John 
Hotchkiss.

andys: Ok, another reason: if we don't talk to people soon rather than later, 
the window of opportunity closes. They won't consider us later because the cost 
of switching will be too high. I think by doing the port and not talking to 
people, we gain only an incremental benefit, 

daveb: Well, I could say something like this in the quartet...

andys: As chief designer, do you think I could?

daveb: Yes, come this afternoon.

pekka: There's also a risk that we'd promise someting we can't deliver.

andys: We don't have to promise anything. Just find out what they'd be 
interested in and what sort of timescales.

Finish 13:20.


