            ANALYSIS OF DESIGN DECISION IN BIT TABLES MODULE
                            analysis.mps.bt
                             incomplete doc
                             drj 1997-05-21

INTRODUCTION

.intro: This is a presentation of the some of the design decisions that are 
made in design.mps.bt - the design of the Bit Tables module.  Also presented 
are some of the non-decisions and why they were not taken.

.readership: Any MPS developer.

STUFF

.unboxed: Originally, the design did not have any box around the bit array.  A 
BT was a "Word *" and pointed directly at the base of a table of bits; no size 
of signature was kept.  .unboxed.justify: The reason for doing this is that it 
means that Bit Tables are more likely to have sizes that are a power-of-two.  
.unboxed.pot.why: The reason there will be more sizes that are a power-of-two 
is because most bit tables are in correspondence with a page or similar object 
and hence will have a number of bits that are a power-of-two.  Being a 
power-of-two in size means that they will pack more nicely in pages, and align 
more gracefully with memory hierarchies (cache lines in particular).  
.unboxed.whynot: The benefits to be gained were not measured and for the moment 
it is probably better to have extra checking and so on provided by signatures 
and sizes.

See design.mps.bt(1)

