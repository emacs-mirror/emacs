         NOTES FROM MM/EPCORE REQUIREMENTS MEETING, 1996-05-16
                       meeting.epcore.1996-05-16
                               draft doc
                           richard 1996-05-20

INTRODUCTION

Richard Brooksby, Nick Barnes, and David Jones met Andy Cave to discuss 
requirements-related points he raised in response to the release proposal 
(mail.richard.1996-05-14.14-27).


NOTES

Andy's Points (see mail.andy.1996-05-14.20-16):

> 1. The layered MM system lost us debugging aids that we use for problem
> diagnosis. [I am using these now to sort out Creo/Gerber problems.]
>
> 2. The layered MM system lost us debugging aids that we use for debugging.
> [We use these for hard to find problems and without them we could end up
> "wasting" huge amounts of time.]

Creo have a problem with fragmentation caused by their use of a tiled images.  
Andy has suggested a workaround involving changing the size of their tiles.  He 
is waiting for feedback from Brent to see if this is acceptable.  If it is, it 
relaxes the requirement to replace the MM early somewhat.

For Gerber, Andy has produced a fix by reducing link objects.  This made them 
happy until they ran a yet more complex job which painted to disk.

Andy agreed that:

 1. EP doesn't have an urgent requirement for extra debugging tools _before_ 
integration of the MPS.

 2. They _will_ need these tools in the replacement memory manager.

 3. An extensible arena may have become an important requirement, so that 
trapping and recombining can work.

Andy put the fragmentation display as a high priority for a debugging tool.  It 
is one of the most useful tools for keeping customers happy.

> 3. Low memory handling is now not as complete as it used to be. [Ask Angus
> for more details.]

- In what ways is it less complete?
- Is it a short term requirement to fix this up?
- What can we do about this in the short term?

Need to ask Angus, who is away.

> 4. Due to requirements of the layered MM system the current (existing)
> memory allocator can't be as clever as it used to be and so we get much
> more fragmentation (so speed loss) than we used to.

Andy agreed that no action is required on this point.

> 5. We already have a number of vital improvements that we need to make that
> we've been delaying (so that the new MM system can do them as opposed to
> the current dead end MM system). These can't wait much longer. [In fact the
> current Creo situation is to do with fragmentation problems that the new MM
> system will aim to sort out.]

The vital improvement is extensible base memory (arena), to make recombining 
and trapping work.  See above.

> 6. We can't wait for the replacement system until beginning of next year as
> that means that it won't ship for over another year whilst we iron out bugs
> in the GC. i.e. we have to ship a replacement system for the current system
> BEFORE we add in gc. If we don't then we can't address point 5 for ages.

Andy said that whether or not we have to _ship_ a replacement with 4.1 depends 
on the requirement for extensible base memory.  In the absence of this 
requirement he sees no reason that the MM must be shipped in 4.1.

> [If we have a new basic system working (& shippable) this summer, then I
> would expect an optimised (& shippable) version later on in the year, a gc
> working end of year and that version shippable middle of next year.]

That's what MM intend.

> 7. If we don't have gc soon, we're going to get into a lot of trouble.
> Delaying the first version (with gc) to the beginning of next year (so we
> have one that ships a year later) will prove too late.

That's not what we intend, see above.

> 8. We lose out on any publicity involved.

Andy pointed out that the risk of bad publicity has increased because people 
like Creo and Gerber are running into low memory conditions.  We're already 
hedging a bit.  There is now some limited "GC" in the RIP, so we can say that 
we have it but are working on improving it.

Creo
- Severe fragmentation.
- They have a work-around which Andy thinks they'll be happy with.
- Andy reckons that a better fix would be OK by 4.1 release.

Gerber
- Complex jobs exhaust memory.
- Want to skimp so they don't need large memories for bursty application.
- Reduce display list will help.
- Technique would also help Creo.
- Multiple memory areas a priority.

Other
- Can't do partial paints when trapping or recombining.  Need to get more 
memory and page instead of paint.  Trapping will fail if it runs out of memory.
- 4.1 has trapping and so it can't partial paint.
- Strong argument for new MM going into 4.1.
- Swapping out (low memory) wants to work on a large single contiguous block 
not little chunks (100K).

Richard observed that what the MM needs is a strong requirements specification 
from the OEM, e.g. "use this much disk/this much time" and _not_ a set of 
detailed algorithms for dealing with specific conditions.  This will ultimately 
lead to a RIP which can cope better with new and unexpected circumstances, and 
reduce the support burden.

