                MEETING BETWEEN MM/EP-CORE ON 1997-09-16
                       meeting.epcore.1997-09-16
                               draft doc
                           gavinm 1997-09-16

INTRODUCTION

.intro: Pekka Pirinen <Pekka>, Nick Barnes <NickB>, and Gavin Matthews <GavinM> 
met with Dave Berry <DTB>, and David Gilday <DavidG> to discuss MM/EP-Core 
release schedules and flexible arena requirements.


CURRENT WORK

.psvm: MM have written a PSVM pool and it is nearly ready.  To support its GC, 
EP need to provide root-finding which is a few days' work.  EP don't want this 
in their trunk before Seybold

.arena-class: Arena classes have been written and don't appear to be causing 
problems.  The VM arena has no hard limits on available memory.

[ It does have a hard limit, set when it's initialised.  However, it doesn't 
allocate all of that in one go, but basically page by page, so it might well 
satisfy the small footprint requirements. Pekka 1997-09-16 ]

.irix: The new IRIX port of the VM sub-system has been done and seems fine.


FORTHCOMING WORK

.tag: Nick knows roughly how to fix the tags and promises problems, and has a 
document outlining this.  This is entirely in glue code.

.arena-flex: The headless RIP wiill require a flexibily extensible arena.  We 
haven't got enough information to implement this yet.  There was an email 
discussion about it.

[ I don't think we know even that yet (we can just set the arena limit to be 
larger than we ever intend to allocate).  Once EP have had some experience with 
the VM arena, we can sort this out.  Pekka 1997-09-16 ]


FUTURE

.smp: We discussed the MM requirements of making the SMP multi-threaded.  The 
MPS works for multiple threads by means of a per-arena lock.  If EP need 
multi-threading with less blocking than this, then they could use multiple 
arenas; this is not an ideal solution.

.port: It is possible that EP will be asked to port ScriptWorks to a new 
embeded platform.  This shouldn't cause significant problems for MM, but is an 
untested area.  MM would need:
  - Compiler: ANSI C
  - Headers: Freestanding 
  - Plinth: Not hard
  - Protection: Not necessary for EP because there is no incremental collection
  - Locking: Could be trivial if single-threaded

[ Also, we don't currently need stack scanning for EP, because stacks aren't 
roots, but this may be a requirement later.  This would require an assembler 
and some knowledge of stack frames.  GavinM 1997-09-16 ]


SCHEDULES

.next-release: EP don't need the current work until mid-October.  MM should 
make a release by then including Arena Classes, PSVM, and the IRIX port.

.help: EP want tags and promises to work as soon as possible.  This will help 
with leak debugging, and may fix the mps_free performance problems.

.root-finder: EP won't need root-finding until after the mid-October release.  
Nick can produce a draft root-finder for that release.

.flex-req: The flexible arena requirements can be determined after experience 
with the mid-October release.

