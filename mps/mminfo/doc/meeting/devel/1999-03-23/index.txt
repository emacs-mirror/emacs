             NOTES FROM MM DEVELOPMENT AND PRODUCT MEETING
                        meeting.devel.1999-03-23
                             incomplete doc
                            tony 1999-03-24

Start 1999-03-23 11:35 GMT

Telecon: Dave Berry <daveb>, David Jones <drj>, Pekka Pirinen <pekka>,
Richard Tucker <rit>, Tony Mann <tony>.

[Although there have been sightings, Andy Sizer is on holiday.]


NEWS

tony: Just heard from epcore that they're quite keen for us to do the Linux
port. Expressed a hope that it should take about 2 weeks, after brisling.4.
We think it shouldn't be too much work, but there's the question of the
compiler.

drj: I've been taking a look at it -- it seems to be working ok.

tony: Had some more feedback from Chris Gathercole. Some progress, but we
still think the decision trees he's coming up with are too complex for use
at runtime.


RELEASES

* release.epcore.brisling.4

tony: Imminent. Close to official release to QA.

pekka: Yes, just one approval left. And rit's already been doing work on
it. I think we're three days late from the original schedule, but perhaps
not actually that late in practice?

rit: Yes, I think we need another 2 days or so.

rit: Preliminary findings on SAC performance: I've done two kinds of
performance testing with SACs. (1) replaying logs of SW colour pool
allocation (from pekka). (2) defining a new pool type in the SW glue, and
running with Scriptworks.

rit: With (1), I've seen an improvement over using a pool directly of 10%
or more of total time. That's actually a big improvement, as the test
spends a lot of its time reading the log file. (Duh!)

rit: With (2), however, I've seen no performance improvements at all. I
tried some different choices for the SAC classes: derived from pekka's
analysis of the logs, chosen as powers of two with longer freelists, or a
simple setting with only two classes. But none of this seemed to make much
difference.

rit: So I've been looking at different page setups and comparing colour
pool allocation. To my surprise, it doesn't depend either on resolution or
on the number of "extra grays" in the screening setup.

pekka: How about number of colours?

rit: You mean like 3-colour, 4-colour and 6-colour devices? I don't know --
I didn't think of that. All my testing's been with CMYK.

rit: So now I'm going to construct a page setup that should minimise the
amount of other stuff SW does (low res, no extra grays, &c) in an attempt
to show up differences in colour pool allocation more clearly.

rit: I'm also going to try choosing new classes based on an analysis of
current colour pool allocation, in case SW has changed since pekka took his
logs.

rit: Sorry to be so inconclusive, but I really don't know the full story
yet. At least I have verified that the SAC is working (and checked with a
debugger that it's not calling Fill and Empty too much).

tony: Also related to brisling: if we're going to do a linux port for
epcore in the space of a few weeks, than that ought to be a brisling
release, rather than something from the trunk.

pekka: Yes that's what they want.


* release.java.amaretto

tony: drj's been making some progress, but also had a day off.

drj: It didn't go so well last week as I'd hoped, mostly because I was
feeling a bit unwell. But I haven't found any huge technical difficulties.
It's mostly a question of writing the format code, and finding out when
their roots are, which I'm about half-way through.

tony: Schedule currently is for this to be done around the end of the
month. Unfortunately, rit's on holiday at the start of April, which means
the QA work won't start immediately. But given the uncertainly in the
planning, we can't be sure when the release will happen to the nearest day.

rit: drj, last week you seemed slightly concerned that the JVM might rely
on objects not moving or staying in order. Have you managed to disprove
that?

drj: Not actually disproved, but I think it's very unlikely. Their GC moves
objects already -- it's mark/sweep/compact.


* release.dylan.kinglet -- sunset on segments

tony: Did this. Got rit to do some brief QA on it. Saw about 4% degradation
in performance with Dylan, similar with MMQA tests, half of which I have now
removed by tuning. variety.ci is extremely slow in at least one MMQA test -- 
I know why and could remove some assertions to speed it up if necessary.

tony: For next epcore release, main pools that SW use (MVFF, MV, EPDL)
should be recoded not to use segments at all. Then we'd expect to see a
measurable performance improvement.

tony: For dylan, we should be reworking the pools to make use of
subclassable segments rather than groups. There may be some small
performance gain from that.


* release.web.diadem

pekka: Not progressing very fast at all.

tony: But then again this is a very busy week.

pekka: Yes, and it's not critical, though I was hoping that something would
happen.



PLAN

tony: I've updated the plan. Date for brisling.4 to QA is now today
(1999-03-23).

pekka: That's plausible.

tony: And I have down in the plan a week of development and QA interaction
before the final release, with final release on 1999-03-31. Perhaps that's
a little pessimistic, but there's a lot of building to do.

pekka: Yes, it's not usually safe to assume you can do the building in less
than a week, which means we're talking about next Monday.

tony: Early JVM milestone I have down as 1999-03-31 (allowing for drj's
being unwell last week). Because of rit's holiday, release date for early
JVM after QA is currently 1999-04-13.

rit: I know it's too soon to be in the plan, but what to we expect to
happen with the linux port? When do you think we'll schedule it for, and
what do you think will get delayed if anything?

tony: I don't know yet, though I think the amount of development work may
be very small.

pekka: There's nothing to delay except the JVM work, and I don't think they
conflict in the end, or I hope not.


WORK PRACTICES

tony: We didn't have a review last week. We felt that there was nothing
immediately ready to review, and the pressures on the epcore and java week
meant that it wasn't worthwhile. Same story for this week. We could have
one next week, though.

daveb: I think we should.

tony: Yes. We'll think about what to review. We have a list of suggestions.
Need to pick one nearly ready for review, for which the editor isn't drj.
It could be me, maybe it could be pekka, given that brisling.4 is about to
come to completion. Options include: CBS, the bit table code, mvff pool.

pekka: CBS isn't ready.

tony: Don't need to decide at this meeting, of course.

drj: Yes, let's decide in mail.

daveb: How is editing going from previous review?

tony: So far I've spent about half a day on it. Not finished, but not too
scary either. I hoped to have it done by this week, but I haven't been able
to find the time. Should be done by next week.


AOB

daveb: Should we be talking to SW about brisling.4? They're probably
expecting a speed up.

pekka: I'm talking to them today -- they wanted to go over the interface
once more.

daveb: Is it worth having rit sit in on that meeting as well?

pekka: Yes, why not.

rit: Ok.


Finish about 12:00 GMT

