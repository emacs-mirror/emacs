              SUMMARY OF TOOL "PLOTS" MEETING, 1997-06-05
                       meeting.general.1997-06-05
                               draft doc
                             drj 1997-06-06

INTRODUCTION

.intro: This is a summary of the meeting between David Jones <drj>, Nick
Barnes <nickb>, and Nick Dalton <sheep> that took place in the Pool
Hall on 1997-06-05 to discuss the tool's requirements as they relate to
improving the performance of the DylanWorks MM for the Sunflower release
(release.dylan.sunflower).


DEFINITIONS

.def.cohort: An aggregation of objects.  The term is an attempt to
escape from the generational terminology.  Think of cohorts as like
generations but with no implicit age hierarchy.


REQUIREMENTS

.goal: Improve the performance of DylanWorks using the MM.

.remembered.set: It would be useful to know how effective the remembered
sets are.  The remembered sets are key in reducing scanning (of old
cohorts) in a cohort collector.


IDEAS

.seg.big-map: at the beginning of every collection (just after
condemn) it would be useful to see the following information about each
segment:

- colour (ie white (= condemned), gray (= may reference condemned set),
  black (= does not reference condemned set))
- zone
- cohort of segment

.idea.seg.aggregate: aggregate the segments according to zone, colour,
and cohort


[diagram of segments.

Scatter-diagram with Zone on the abscissa and Cohort on the ordinate.

Note the the number of different values on each of these axes is quite
small so this axis system defines a grid of boxes into which
(representations of) segments can put.

Each allocated segment in the arena is coloured and put in the
appropriate box.

Zone and Cohort will correlate strongly if the MM is doing its job well.
]

Using this diagram, it might be possible to instantly see what the
condemned set is and how the remembered sets are working.

Note that the address of a particular segment isn't particularly
interesting (except for its Zone which is derived from the address).


EVENTS

.event: The MPS doesn't emit sufficient information for the tool to be
able to plot this yet.

.event.add.genseg: PoolClassAMC needs to emit an event that is the
correspondence between each segment it allocates and the cohort of that
segment.  This is just seg->p, so possibly this could be done
generically, and the pool would just say what the p field meant.

.event.add.zoneshift: The Space/Arena should emit an event that
describes what the zoneShift is.  Probably there is a whole load more
static information that the Space should emit when it has been created.

.event.add.heartbeat: We had the idea that there might be a heartbeat
event that contained all the information that the Space had on bootup
(like zoneShift above).  It would be emitted regularly by the MPS and
would be used to convince the tool that it was alive and also to aid in
synchronization.

