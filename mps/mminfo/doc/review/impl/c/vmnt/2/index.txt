                    REVIEW RECORD FOR IMPL.C.VMNT(2)
                          review.impl.c.vmnt.2
                              draft review
                             drj 1995-10-06

Candidate: impl.c.vmnt(2)
Rules: rule.universal, guide.impl.c.*
Author: richard
Leader: richard
Lines: 196
Status: draft
Entry: ?
Exit: ?
Checkers: richard, dsm (tired and emotional), drj (perfectly sane, thanks)
Kickoff time: 1995-10-06 12:45

Rate: 10 lines/min

Logging start: 16:41  finish: 16:58  majors: 4  minors: 9  questions: 4  
comments: 1  suggestions: 3

1. C, drj, 96, Allocating a page for the VMStruct is wasteful.  Comment.
2. s, drj, 96, Could we have an interface which allows this "wasted" space to 
be used, e.g. for the SpaceStruct?
3. M, drj, 103, Need to take care in case we get the top page in memory 
(somehow).
4. s, drj, 155, Map and Unmap could check status of page using VirtualQuery.
5. q, dsm, 33, Shouldn't system-specific headers be included elsewhere?  What 
is the external interface?  Should document (perhaps in os.nt) what our 
dependencies on Win32 API are, so that we can check when things change.  
Document assumptions here too?
6. q, dsm, 64, Is #ifdef DEBUG_ASSERT something new?  (No.)
7. m, dsm, 131, Should invalidate signature in any case.  Don't remove 
defensive stuff through reasoning.
8. Q, dsm, 170, Is it true that READWRITE is the only privilege wanted here?  
(Should be in the interface.)
9. m, dsm, 1, Check ranges in ascending order using < and <=.
10. M, richard, 1, Source documents aren't listed.
11. m, richard, 12, Mention version of the SDK and where it came from 
somewhere, even if in os.nt.
12. m, richard, 18, Move Note to an issue document.
13. m, richard, 55, Should explain what this AVER is all about (checking Addr 
size is DWORD size).
14. m, richard, 59, This AVER checks a system dependency, that grain is a power 
of two.  Document this assumption.
15. M, dsm, 1, Policy about things we expect to work should be decided and 
documented (such as VirtualFree failing).
16. s, richard, 67, IsValid could do Win32-specific sanity checks, maybe using 
VirtualQuery.
17. m, richardm 88+, Call to VMGrain before assertion, in automatic variable 
init.
18. m, richard, 93, Explain AVER that checks size of LPVOID.
19. m, richard, 95, "page" -- it might not be.
20. q, richard, 99, Returns RESOURCE, should this be RESMEM?
21. M, richard, 135+, document assumption that VirtualFree succeeds.

Edit:

1. commented and create issue.vmnt.waste
2. as above
3. check and document assumption
4. inserted comment
5. doc'ed assumptions
6. no
7. done
8. added execute
9. done
10. ref'ed design
11. done
12. create issue.nt.alloc-grain
13. done
14. done
15. issue.assume.policy
16. rejected
17. moved
18. done
19. amended
20. it should and now is
21. done

