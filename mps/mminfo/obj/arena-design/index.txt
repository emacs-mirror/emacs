              CREATE DETAILED DESIGN OF THE ARENA MANAGER
                            obj.arena-design
                         obsolete complete obj
                           richard 1995-08-25

Responsible: richard
Due: 04/09/95
Products: design.mps.arena
Procedures: proc.universal


The arena manager has no design document.  The existing arena manager interface 
(arena.h) is clunky, and doesn't support the operations necessary for 
incremental collection (protection for example).  The existing implementations 
(arenan.c, arenvm.c) assume that segment operations are quite rare and that 
segments are fairly large.  The new AMC pool design (design.mps.poolamc) will 
require more and smaller segments, which will be very inefficient under these 
implementations.  The existing virtual mapping interface (vm.h) does not 
include support for protection.

1. Redesign the arena manager interface to make it similar to the external 
interface (design.mps.interface).  Eventually we may be able to unify these two 
interfaces.  The interface must include support for the barrier mechanism 
(address maps to chain of handlers?).  The arena interface must be extended to 
include "protection" in the abstract, for both the hard and soft barriers.

2. Design an implementation which will support the new AMC pool design, which 
will use more and smaller segments, and also requires barriers on those 
segments.  This will involve the software barrier design (design.mps.barrier) 
and the hardware fault handling mechanism (design.mps.fault)

3. Redesign virtual mapping (design.mps.vm) to provide protection services to 
the virtual mapped arena manager (arenvm.c).

Designs must include some requirement analysis in the form of functional 
requirements (functionality required by other parts) and attribute requirements 
(expected performance, sizes of objects managed, etc.).


REPORT:

I have already created the design documents, but these are mainly empty.  I 
have ideas for these designs which need to be dumped into the documents.  It's 
possible someone else could then produce the detailed design.  -- richard 
1995-08-25

I've created a draft design which contains enough information to do an 
implementation, but is not really as complete as it could be.  Hopefully work 
with Bob Matthews will improve this.  It's a useful starting point for a design 
document.  -- richard 1995-09-19

