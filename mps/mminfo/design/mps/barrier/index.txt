         THE DESIGN OF THE MEMORY POOL SYSTEM BARRIER MECHANISM
                           design.mps.barrier
                           incomplete design
                           richard 1995-08-25


INTRODUCTION:

This document will describe the barrier mechanism of the Memory Pool System.


TEXT:

The software barrier mechanism takes a soft load/store request and schedules 
whatever work is necessary to lift the barrier condition on the page accessed.  
This requires a mapping from the address to the code which will remove the 
barrier.  Suggestion: the arena page table contains masks with one bit per 
process in the process table.  The load/store request checks the appropriate 
mask and calls the fault handler of the processes which have bits set.  These 
handlers must lift the barrier before returning.

Loads and stores to memory that we manage can be considered as operations 
through the MM interface.  In fact, ww can make these operations explicit, by 
adding "Load" and "Store" to our interface explicitly.  This gives us a good 
place to implement and test incremental collection with barriers independently 
of the OS or hardware fault mechanism.  The barrier mechanism, and its 
interaction with scheduling, collections, etc. can be implemented behind this 
interface.

  requirements
    from
      scheduler
      AMC pool
      fault handling
    to
      fault handling
  load/store interface
  look up in arena page table
  dispatch via chain in page table


