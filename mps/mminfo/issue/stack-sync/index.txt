               WE MUST SYNC THE STACK BEFORE SCANNING IT
                            issue.stack-sync
                     obsolete unknown requirement 
                           richard 1995-08-22

Urgency: 5 - necessary
Importance: 6 - significant
Discoverer: ptw
Discovery date: 22/08/95 16:42:58
Discovery process: responding to issue.sp-stack-flush
Locaction: stack scanning code


DESCRIPTION:

ptw: 
Note, this will be an issue on _all_ architectures.  Those that do not have
a register window will have plain registers, which can just as well be
considered an extension of the top of stack.  For that case, I suggest
writing assembly code that simply pushes all relevant registers onto the
stack (rather than creating a custom ScanRegisters routine for each
architecture).

Note also that this flush is only required for the "current" stack, i.e.,
the stack that the GC is running on at the time of its atomic flip/scan.
(All other stacks must be suspended at the time of this atomic scan, and
hence their registers or register window should be de-cached and stored
either in thread stack or process structure.

(See also issue.nt-thread-state.)

ROOT CAUSE:



SUGGESTIONS:



PROCESS SUGGESTIONS:



Resolution: See request.mps.170375


