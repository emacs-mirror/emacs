                  THE DEBUGGING VERSIONS ARE TOO SLOW
                           issue.debug-speed
                       obsolete complete defect 
                             drj 1995-08-03

Urgency: 7 - pressing
Importance: 5 - valuable
Discoverer: drj
Discovery date: 03/08/95 17:32:22
Discovery process: DylanWorks liaison
Locaction: pervasive


DESCRIPTION:

drj: All the consistency checking and validation used in the debuggin versions 
of the code introduces too much of a time overhead.  Currently it is about 
40-50 times slower than the 'release' versions.

ROOT CAUSE:



SUGGESTIONS:

richard: change the nature of the calls to _blah_IsValid to IsValid(_blah_); 
this will give us more control through macros.

dsm: distinguish recursive calls from top-level calls.

PROCESS SUGGESTIONS:



Resolver: drj
Date resolved: 22/08/95
Resolution process: development
Resolution: running the following program:
  SpaceInit(space);
  SpaceFinish(space);
resulted in 52469 calls to validation methods.  One validation method was 
dominant:
SigIsValid.  Is was called most often with the signatures for Deque and for 
DequeNode (10858 calls for Deque, 14766 calls for DequeNode).

compiling with optimisations on results in a 2 times speed up (on SunOS/gcc).

      125.3 real       115.7 user         0.0 sys  full checking
      123.5 real       121.7 user         0.1 sys  10 deep
      103.4 real       102.2 user         0.0 sys  3 deep
       73.5 real        71.9 user         0.0 sys  2 deep
       32.8 real        32.1 user         0.0 sys  1 deep
       10.6 real         9.8 user         0.0 sys  0 deep
        9.0 real         8.7 user         0.0 sys  nested calls macroized out
        4.3 real         4.1 user         0.0 sys  no validation methods
        1.7 real         1.2 user         0.0 sys  no checking (optimised)

See request.mps.170335


