%!PS-Adobe-2.0
%%Creator: dvips 5.499 Copyright 1986, 1993 Radical Eye Software
%%Title: RDOSS-GC.dvi
%%CreationDate: Wed Nov  9 16:48:04 1994
%%Pages: 19
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Palatino-Roman Helvetica Palatino-Bold Palatino-Italic
%%+ Courier
%%EndComments
%DVIPSCommandLine: dvips -f RDOSS-GC
%DVIPSSource:  TeX output 1994.11.09:1549
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N /X{S N}
B /TR{translate}N /isls false N /vsize 11 72 mul N /@rigin{isls{[0 -1 1 0 0 0]
concat}if 72 Resolution div 72 VResolution div neg scale isls{Resolution hsize
-72 div mul 0 TR}if Resolution VResolution vsize -72 div 1 add mul TR matrix
currentmatrix dup dup 4 get round 4 exch put dup dup 5 get round 5 exch put
setmatrix}N /@landscape{/isls true N}B /@manualfeed{statusdict /manualfeed
true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N
/IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn begin /FontType 3 N /FontMatrix
fntrx N /FontBBox FBB N string /base X array /BitMaps X /BuildChar{
CharBuilder}N /Encoding IE N end dup{/foo setfont}2 array copy cvx N load 0 nn
put /ctr 0 N[}B /df{/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0
0 sf neg 0 0]N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data
dup length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128
ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127
sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp 0 N
/cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2 index get
S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff ch-yoff ch-height
sub ch-xoff ch-width add ch-yoff setcachedevice ch-width ch-height true[1 0 0
-1 -.1 ch-xoff sub ch-yoff .1 add]/id ch-image N /rw ch-width 7 add 8 idiv
string N /rc 0 N /gp 0 N /cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}
imagemask restore}B /G{{id gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get
exec}loop}B /adv{cp add /cp X}B /chg{rw cp id gp 4 index getinterval
putinterval dup gp add /gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get
dup 0 eq{pop 1}{dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}
ifelse put 1 adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}
{dup 2 idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval adv}B
/fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}{adv 1 chg
nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add
adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]dup{
bind pop}forall N /D{/cc X dup type /stringtype ne{]}if nn /base get cc ctr
put nn /BitMaps get S ctr S sf 1 ne{dup dup length 1 sub dup 2 index S get sf
div put}if put /ctr ctr 1 add N}B /I{cc 1 add D}B /bop{userdict /bop-hook
known{bop-hook}if /SI save N @rigin 0 0 moveto /V matrix currentmatrix dup 1
get dup mul exch 0 get dup mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N
/eop{SI restore showpage userdict /eop-hook known{eop-hook}if}N /@start{
userdict /start-hook known{start-hook}if pop /VResolution X /Resolution X 1000
div /DVImag X /IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}
for 65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0 0
]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V{}B /RV
statusdict begin /product where{pop product dup length 7 ge{0 7 getinterval
dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}ifelse}{false}
ifelse end{{gsave TR -.1 -.1 TR 1 1 scale rulex ruley false RMat{BDot}
imagemask grestore}}{{gsave TR -.1 -.1 TR rulex ruley scale 1 1 false RMat{
BDot}imagemask grestore}}ifelse B /QV{gsave transform round exch round exch
itransform moveto rulex 0 rlineto 0 ruley neg rlineto rulex neg 0 rlineto fill
grestore}B /a{moveto}B /delta 0 N /tail{dup /delta X 0 rmoveto}B /M{S p delta
add tail}B /b{S p tail}B /c{-4 M}B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{
1 M}B /i{2 M}B /j{3 M}B /k{4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p
-2 w}B /o{p -1 w}B /q{p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}
B /y{3 2 roll p a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginFont: Palatino-Roman
/ExtendedTeXEncoding [          % now 256 chars follow
  /grave /acute /circumflex /tilde /dieresis /hungarumlaut /ring /caron
  /breve /macron /dotaccent /cedilla
  /ogonek /quotesinglbase /guilsinglleft /guilsinglright
  /quotedblleft /quotedblright /quotedblbase /guillemotleft 
  /guillemotright /endash /emdash /cwm
  /zeroinferior /dotlessi /dotlessj /ff /fi /fl /ffi /ffl
  /space /exclam /quotedbl /numbersign /dollar /percent /ampersand /quoteright
  /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
  /zero /one /two /three /four /five /six /seven
  /eight /nine /colon /semicolon /less /equal /greater /question
  /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
  /P /Q /R /S /T /U /V /W
  /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
  /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
  /p /q /r /s /t /u /v /w
  /x /y /z /braceleft /bar /braceright /asciitilde /hyphen
  /Abreve /Aogonek /Cacute /Ccaron /Dcaron /Ecaron /Eogonek /Gbreve
  /Lacute /Lcaron /Lslash /Nacute /Ncaron /Eng /Ohungarumlaut /Racute
  /Rcaron /Sacute /Scaron /Scedilla /Tcaron /Tcedilla /Uhungarumlaut /Uring
  /Ydieresis /Zacute /Zcaron /Zdot /IJ /Idot /dstroke /paragraph
  /abreve /aogonek /cacute /ccaron /dcaron /ecaron /eogonek /gbreve
  /lacute /lcaron /lslash /nacute /ncaron /eng /ohungarumlaut /racute
  /rcaron /sacute /scaron /scedilla /tcaron /tcedilla /uhungarumlaut /uring
  /ydieresis /zacute /zcaron /zdot /ij /exclamdown /questiondown /sterling
  /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
  /Egrave /Eacute /Ecircumflex /Edieresis
  /Igrave /Iacute /Icircumflex /Idieresis
  /Eth /Ntilde /Ograve /Oacute /Ocircumflex /Otilde /Odieresis /OE
  /Oslash /Ugrave /Uacute /Ucircumflex /Udieresis /Yacute /Thorn /Germandbls
  /agrave /aacute /acircumflex /atilde /adieresis /aring /ae /ccedilla
  /egrave /eacute /ecircumflex /edieresis
  /igrave /iacute /icircumflex /idieresis
  /eth /ntilde /ograve /oacute /ocircumflex /otilde /odieresis /oe
  /oslash /ugrave /uacute /ucircumflex /udieresis /yacute /thorn /germandbls
] def
%%EndFont
%%BeginFont: Courier
/ExtendedTeXEncoding [          % now 256 chars follow
  /grave /acute /circumflex /tilde /dieresis /hungarumlaut /ring /caron
  /breve /macron /dotaccent /cedilla
  /ogonek /quotesinglbase /guilsinglleft /guilsinglright
  /quotedblleft /quotedblright /quotedblbase /guillemotleft 
  /guillemotright /endash /emdash /cwm
  /zeroinferior /dotlessi /dotlessj /ff /fi /fl /ffi /ffl
  /space /exclam /quotedbl /numbersign /dollar /percent /ampersand /quoteright
  /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
  /zero /one /two /three /four /five /six /seven
  /eight /nine /colon /semicolon /less /equal /greater /question
  /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
  /P /Q /R /S /T /U /V /W
  /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
  /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
  /p /q /r /s /t /u /v /w
  /x /y /z /braceleft /bar /braceright /asciitilde /hyphen
  /Abreve /Aogonek /Cacute /Ccaron /Dcaron /Ecaron /Eogonek /Gbreve
  /Lacute /Lcaron /Lslash /Nacute /Ncaron /Eng /Ohungarumlaut /Racute
  /Rcaron /Sacute /Scaron /Scedilla /Tcaron /Tcedilla /Uhungarumlaut /Uring
  /Ydieresis /Zacute /Zcaron /Zdot /IJ /Idot /dstroke /paragraph
  /abreve /aogonek /cacute /ccaron /dcaron /ecaron /eogonek /gbreve
  /lacute /lcaron /lslash /nacute /ncaron /eng /ohungarumlaut /racute
  /rcaron /sacute /scaron /scedilla /tcaron /tcedilla /uhungarumlaut /uring
  /ydieresis /zacute /zcaron /zdot /ij /exclamdown /questiondown /sterling
  /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
  /Egrave /Eacute /Ecircumflex /Edieresis
  /Igrave /Iacute /Icircumflex /Idieresis
  /Eth /Ntilde /Ograve /Oacute /Ocircumflex /Otilde /Odieresis /OE
  /Oslash /Ugrave /Uacute /Ucircumflex /Udieresis /Yacute /Thorn /Germandbls
  /agrave /aacute /acircumflex /atilde /adieresis /aring /ae /ccedilla
  /egrave /eacute /ecircumflex /edieresis
  /igrave /iacute /icircumflex /idieresis
  /eth /ntilde /ograve /oacute /ocircumflex /otilde /odieresis /oe
  /oslash /ugrave /uacute /ucircumflex /udieresis /yacute /thorn /germandbls
] def
%%EndFont
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2 index
/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll exec 0 exch 5
-1 roll VResolution Resolution div mul neg 0 0]/Metrics exch def dict begin
Encoding{exch dup type /integertype ne{pop pop 1 sub dup 0 le{pop}{[}ifelse}{
FontMatrix 0 get div Metrics 0 get div def}ifelse}forall Metrics /Metrics
currentdict end def[2 index currentdict end definefont 3 -1 roll makefont
/setfont load]cvx def}def /ObliqueSlant{dup sin S cos div neg}B /SlantFont{4
index mul add}def /ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding
exch def}def end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N /vs
792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen false N
/rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B /@scaleunit 100 N
/@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit div /vsc X}B /@hsize{/hs
X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{/CLIP 2 N}B /@hoffset{/ho X}B
/@voffset{/vo X}B /@angle{/ang X}B /@rwi{10 div /rwi X /rwiSeen true N}B /@rhi
{10 div /rhi X /rhiSeen true N}B /@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B
/@ury{/ury X}B /magscale true def end /@MacSetUp{userdict /md known{userdict
/md get type /dicttype eq{userdict begin md length 10 add md maxlength ge{/md
md dup length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{
}N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath clippath
mark{transform{itransform moveto}}{transform{itransform lineto}}{6 -2 roll
transform 6 -2 roll transform 6 -2 roll transform{itransform 6 2 roll
itransform 6 2 roll itransform 6 2 roll curveto}}{{closepath}}pathforall
newpath counttomark array astore /gc xdf pop ct 39 0 put 10 fz 0 fs 2
F/|______Courier fnt invertflag{PaintBlack}if}N /txpose{pxs pys scale ppr
aload pop por{noflips{pop S neg S TR pop 1 -1 scale}if xflip yflip and{pop S
neg S TR 180 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0
get neg sub neg TR}if xflip yflip not and{pop S neg S TR pop 180 rotate ppr 3
get ppr 1 get neg sub neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get
neg TR}if}{noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop
pop 90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get
neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr 0
get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add 2 div 3
1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp{pop pop
showpage pm restore}N end}if}if}N /normalscale{Resolution 72 div VResolution
72 div neg scale magscale{DVImag dup scale}if 0 setgray}N /psfts{S 65781.76
div N}N /startTexFig{/psf$SavedState save N userdict maxlength dict begin
/magscale false def normalscale currentpoint TR /psf$ury psfts /psf$urx psfts
/psf$lly psfts /psf$llx psfts /psf$y psfts /psf$x psfts currentpoint /psf$cy X
/psf$cx X /psf$sx psf$x psf$urx psf$llx sub div N /psf$sy psf$y psf$ury
psf$lly sub div N psf$sx psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy
psf$sy div psf$ury sub TR /showpage{}N /erasepage{}N /copypage{}N /p 3 def
@MacSetUp}N /doclip{psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll
newpath 4 copy 4 2 roll moveto 6 -1 roll S lineto S lineto S lineto closepath
clip newpath moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{
SDict begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial{CLIP
1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto closepath
clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx sub div rhiSeen{
rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR}{rhiSeen{rhi ury lly
sub div dup scale llx neg lly neg TR}if}ifelse CLIP 2 eq{newpath llx lly
moveto urx lly lineto urx ury lineto llx ury lineto closepath clip}if
/showpage{}N /erasepage{}N /copypage{}N newpath}N /@endspecial{count ocount
sub{pop}repeat countdictstack dcount sub{end}repeat grestore SpecialSave
restore end}N /@defspecial{SDict begin}N /@fedspecial{end}B /li{lineto}B /rl{
rlineto}B /rc{rcurveto}B /np{/SaveX currentpoint /SaveY X N 1 setlinecap
newpath}N /st{stroke SaveX SaveY moveto}N /fil{fill SaveX SaveY moveto}N
/ellipse{/endangle X /startangle X /yrad X /xrad X /savematrix matrix
currentmatrix N TR xrad yrad scale 0 0 1 startangle endangle arc savematrix
setmatrix}N end
%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600
(/home/pseudo/doc/articles/rapp_rech_inria/rdoss:rr2399/RDOSS-GC.dvi)
@start /Fa 4 104 df<1406140EA25CEB1F9CEBFFFC3801E07C3803803C3807003E48133F001E
EB7780001C1373003C14C0A214E3007C14E0007813E1EB01C1A200F814F0A2EB0381A3EB0701A4
130EA4131CA31338A2007814E0A21370007C1303003C14C013E0A2001EEB0780A2390FC00F0000
07131E143E3803E078EBFFF0EB9F800180C7FC48C8FCA212061C387DB223>59
D<00C0150C6C151CA200701538A26C1570A26C15E0A26CEC01C0A26CEC0380A26C6CEB0700A36C
6C130EA26C6C5BA201705BA26D5BA26D5BA26D485AA36D485AA2D90387C7FCA2EB01CEA2EB00FC
A21478A3143026297CA72F>95 D<141F14FFEB03F0EB07C0EB0F80EB1F00131E133EB3A35BA25B
EA03E0EA7FC048C7FCEA7FC0EA03E0EA00F8137CA27FB3A3131E131FEB0F80EB07C0EB03F0EB00
FF141F18437BB123>102 D<127CB47EEA0FE0EA01F06C7E137CA27FB3A37FA2EB0F80EB07E0EB
01FEEB007FEB01FEEB07E0EB0F80EB1F00A2133EB3A35BA25B485AEA0FE0EAFF80007CC7FC1843
7BB123>I E /Fb 134[33 33 58[39 1[18 18 9[37 48[{
ExtendedTeXEncoding ReEncodeFont}6 66.666664 /Helvetica rf
/Fc 136[48 1[37 22 26 26 2[29 37 1[18 3[33 2[26 33 27 1[29
52[17 44[{ExtendedTeXEncoding ReEncodeFont}14 66.666664 /Palatino-Italic
rf /Fd 134[46 2[46 1[28 37 32 2[46 51 1[28 2[28 1[46 32 42
51 2[42 31[65 12[42 1[42 42 2[21 46[{ExtendedTeXEncoding ReEncodeFont}19
83.333336 /Palatino-Bold rf /Fe 131[60 124[{ExtendedTeXEncoding ReEncodeFont}
1 100.000000 /Courier rf /Ff 134[50 50 34[72 6[72 1[55 14[58
1[28 28 9[55 48[{ExtendedTeXEncoding ReEncodeFont}9 100.000000
/Helvetica rf /Fg 2 104 df<EC01F8140FEC3F80ECFC00495A495A495AA2495AB3A8495AA2
49C7FC133E13FCEA03F8EA7FE048C8FCEA7FE0EA03F8C67E133E133F6D7EA26D7EB3A86D7EA26D
7E6D7E6D7EEC3F80EC0FF814011D537ABD2A>102 D<127CEAFFC0EA07F0EA01FCEA007E7F6D7E
A26D7EB3A86D7EA213036D7E6D7E147EEC1FF0EC07F8EC1FF0EC7E0014F8495A495A1307A2495A
B3A8495AA249C7FC137E485AEA07F0EAFFC0007CC8FC1D537ABD2A>I E
/Fh 133[42 42 42 60 42 46 23 42 28 1[46 46 46 69 18 2[18 3[46
46 42 46 46 11[60 1[55 4[60 1[46 8[60 1[55 3[48 1[23 23 5[46
46 46 46 4[23 2[28 28 40[{ExtendedTeXEncoding ReEncodeFont}36
83.333336 /Helvetica rf /Fi 128[28 4[42 46 43 69 1[50 27 35
33 1[50 45 48 73 24 2[24 48 46 28 40 51 37 46 42 11[65 51 44
55 1[50 65 2[51 4[63 46 1[64 59 13[42 42 5[21 1[21 15[50 28[{
.167 SlantFont ExtendedTeXEncoding ReEncodeFont}39 83.333336
/Palatino-Roman rf /Fj 200[25 25 25 25 25 25 25 49[{
ExtendedTeXEncoding ReEncodeFont}7 50.000000 /Palatino-Roman
rf /Fk 200[29 29 29 29 29 29 29 49[{ExtendedTeXEncoding ReEncodeFont}7
58.333336 /Palatino-Roman rf /Fl 128[28 5[42 1[60 42 46 28
32 32 1[42 37 46 65 23 37 23 23 42 42 23 32 42 34 38 37 9[78
3[46 55 1[51 65 1[78 46 2[28 1[60 46 1[65 55 8[21 42 2[42 3[42
42 2[21 1[21 2[28 28 40[{ExtendedTeXEncoding ReEncodeFont}45
83.333336 /Palatino-Italic rf /Fm 128[33 5[55 50 1[55 61 33
44 39 61 61 55 61 89 33 1[33 33 61 55 39 50 61 44 61 50 8[66
4[61 72 2[83 1[100 61 4[83 1[61 83 72 66 78 11[50 50 50 50
50 2[25 46[{ExtendedTeXEncoding ReEncodeFont}42 100.000000
/Palatino-Bold rf /Fn 134[65 1[97 65 71 39 52 45 1[71 65 71
103 39 71 1[39 71 65 45 58 71 52 71 58 14[84 2[97 5[45 1[97
3[84 1[90 11[58 58 58 58 58 49[{ExtendedTeXEncoding ReEncodeFont}33
116.666672 /Palatino-Bold rf /Fo 11[45 10[40 18[65 86[28 4[42
46 43 69 47 50 27 35 33 46 50 45 48 73 24 46 19 24 48 46 28
40 51 37 46 42 3[28 1[28 55 55 55 83 60 65 51 44 55 1[50 65
69 79 51 60 28 28 69 63 46 51 64 59 51 65 5[21 21 42 42 42
42 42 42 42 42 42 42 50 21 1[21 50 1[28 28 23 3[50 5[50 50
6[42 3[42 42 7[28 8[{ExtendedTeXEncoding ReEncodeFont}83 83.333336
/Palatino-Roman rf /Fp 128[22 4[33 37 34 55 38 40 22 28 26
37 40 36 39 59 19 37 16 19 39 37 22 32 41 29 37 33 3[22 1[22
2[44 66 1[52 41 35 44 1[40 52 55 63 41 2[22 1[51 2[51 47 41
52 3[40 2[17 33 33 33 33 33 1[33 33 33 2[17 1[17 2[22 22 18
10[40 28[{ExtendedTeXEncoding ReEncodeFont}62 66.666664 /Palatino-Roman
rf /Fq 1 4 df<133013381330A20040130800F0133C00FC13FC383E31F0380FB7C03801FE00EA
0030EA01FE380FB7C0383E31F038FC30FC00F0133C0040130800001300A21338133016157C9620
>3 D E /Fr 139[25 33 29 14[33 46 37 31[58 65[{
ExtendedTeXEncoding ReEncodeFont}7 75.000000 /Palatino-Bold
rf /Fs 140[37 25 1[42 42 42 4[17 42 1[21 4[42 32[76 17[21 46[{
ExtendedTeXEncoding ReEncodeFont}11 75.000000 /Helvetica rf
/Ft 128[25 4[37 42 39 62 42 45 24 32 30 42 45 41 43 66 22 42
17 22 43 42 25 36 46 33 41 37 12[46 39 50 1[45 59 62 71 46
2[25 4[58 53 1[58 6[19 10[45 19 1[19 2[25 25 11[45 28[{
ExtendedTeXEncoding ReEncodeFont}46 75.000000 /Palatino-Roman
rf /Fu 128[33 5[55 51 1[56 60 32 42 39 1[60 54 58 88 29 2[29
58 2[48 61 44 55 50 11[78 61 52 67 1[60 78 83 94 61 2[34 1[76
55 2[71 1[78 1[44 1[60 2[25 50 2[50 1[50 50 50 50 2[25 1[25
44[{ExtendedTeXEncoding ReEncodeFont}45 100.000000 /Palatino-Roman
rf /Fv 3 104 df<147014F8A8002001701320007815F000FCEC01F8B41407D87F80EB0FF0D83F
C0EB1FE0D80FF0EB7F80D803F8EBFE003900FE73F890383F77E090380FFF80D903FEC7FCEB00F8
EB03FE90380FFF8090383F77E09038FE73F83903F870FED80FF0EB7F80D83FC0EB1FE0D87F80EB
0FF0D8FF00EB07F800FC14010078EC00F000201520C700F81300A81470252B7AAD32>3
D<ED0FE015FF913803FC00EC0FE0EC1F804AC7FC147E14FE495AA2495AB3AD495AA2495A5C495A
49C8FC13FEEA07F8EAFFE0A2EA07F8EA00FE133F6D7E6D7E806D7EA26D7EB3AD6D7EA26D7E147E
806E7EEC0FE0EC03FC913800FFE0150F236479CA32>102 D<127EEAFFE0EA07F8EA00FE133F6D
7E6D7E806D7EA26D7EB3AD6D7EA26D7E147E806E7EEC0FE0EC03FC913800FFE0A2913803FC00EC
0FE0EC1F804AC7FC147E14FE495AA2495AB3AD495AA2495A5C495A49C8FC13FEEA07F8EAFFE000
7EC9FC236479CA32>I E /Fw 128[47 5[78 3[85 46 60 56 1[85 77
82 125 41 2[41 82 78 1[68 86 63 78 71 13[74 94 2[111 2[86 7[109
9[35 58[{ExtendedTeXEncoding ReEncodeFont}25 141.666672 /Palatino-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 1406 963 a Fw(Lar)m(chant\177RDOSS:)724 1146 y(a)34
b(distributed)i(shar)m(ed)f(persistent)f(memory)1194 1328 y(and)h(its)h
(garbage)e(collector)2717 1276 y Fv(\003)1322 1663 y Fu(Mar)n(c)26
b(Shapir)n(o,)g(Paulo)f(Ferr)n(eira)1604 1779 y Ft(INRIA)19
b(Rocquencourt)1631 1895 y Fs(shapiro@sor)l(.inria.fr)1116
2132 y Fu(INRIA)k(Rapport)i(de)g(Recher)n(che)g(no.)g(2399)1136
2248 y(Cornell)g(Computer)g(Science)h(TR94\1771466)1607 2450
y(November)g(1994)1812 2871 y Fr(Abstract)843 3013 y Ft(Lar)o(chant\177RDOSS)
f(is)e(a)i(distributed)e(shar)o(ed)g(memory)g(that)i(persists)e(on)h(r)o
(eli\177)731 3105 y(able)f(storage)f(acr)o(oss)g(pr)o(ocess)g(lifetimes.)38
b(Memory)22 b(management)i(is)f(automatic:)731 3196 y(including)29
b(consistent)h(caching)h(of)f(data)g(and)h(of)e(locks,)i(collecting)f
(objects)g(un\177)731 3287 y(r)o(eachable)c(fr)o(om)e(the)i(persistent)g(r)o
(oot,)g(writing)f(r)o(eachable)h(objects)h(to)e(disk,)h(and)731
3378 y(r)o(educing)c(stor)o(e)i(fragmentation.)44 b(Memory)22
b(management)k(is)d(based)h(on)h(a)g(novel)731 3470 y(garbage)d(collection)h
(algorithm,)h(that)g(appr)o(oximates)e(a)i(global)f(trace)g(by)g(a)h(series)
731 3561 y(of)17 b(local)h(traces,)g(with)h(no)g(induced)e(I/O)i(or)e
(locking)g(traf)o(\034c,)h(and)h(no)g(synchr)o(oniza\177)731
3652 y(tion)27 b(between)h(the)f(collector)f(and)i(the)g(application)f(pr)o
(ocesses.)49 b(This)27 b(r)o(esults)f(in)731 3744 y(a)h(simple)f(pr)o
(ogramming)g(model,)i(and)f(expected)g(minimal)g(added)f(application)731
3835 y(latency)-8 b(.)35 b(The)22 b(algorithm)f(is)g(designed)f(for)h(the)h
(most)f(unfavorable)h(envir)o(onment)731 3926 y(\(uncontr)o(olled)27
b(pr)o(ogramming)f(language,)31 b(r)o(efer)o(ence)26 b(by)i(pointers,)i
(distributed)731 4018 y(system,)18 b(non\177coher)o(ent)j(shar)o(ed)d
(memory\))h(and)h(should)f(work)g(well)g(also)g(in)h(mor)o(e)731
4109 y(favorable)e(settings.)p 523 4183 1146 4 v 607 4237 a
Fq(\003)643 4260 y Fp(This)13 b(work)h(was)g(conducted)f(in)h(part)f(during)g
(the)g(\034rst)g(author)5 b('s)14 b(sabbatical)h(year)e(at)h(Cornell)g
(University)-7 b(,)523 4339 y(supported)16 b(by)g(funding)g(fr)o(om)h
(Cornell)g(University)-7 b(,)16 b(Isis)h(Distributed)g(Systems)f(Inc.,)g
(INRIA,)h(and)f(NA)-5 b(T)o(O.)1934 5147 y Fo(1)p eop
%%Page: 2 2
2 1 bop 523 614 a Fn(1)116 b(Introduction)523 859 y Fm(1.1)99
b(Setting)523 1056 y Fo(The)28 b(Reliable)g(Distributed)h(Object)f(Storage)g
(System)g(\(Lar)o(chant\177RDOSS\))e(is)i(an)g(exe\177)523
1155 y(cution)d(envir)o(onment)g(based)e(on)i(the)f(abstraction)g(of)g(a)f
(distributed)h(shar)o(ed)f(memory)-9 b(.)523 1255 y(The)21
b(implementation)h(dif)o(fers)d(very)h(much)i(fr)o(om)e(this)h(abstraction.)
666 1393 y(Applications)27 b(see)f(a)g(single)h(memory)-9 b(,)28
b(containing)g(dynamically\177allocated)d(data)523 1493 y(str)o(uctur)o(es)d
(\(or)g(objects\))g(connected)g(by)g(or)o(dinary)f(pointers.)34
b(Internally)-9 b(,)22 b(the)h(memory)523 1593 y(is)h(divided)f(into)h
(granules)g(called)e Fl(clusters)j Fo(\(of)e(arbitrary)f(size,)i(typically)f
(of)h(the)f(or)o(der)523 1692 y(of)d(a)g(few)g(kilobytes\).)30
b(An)20 b(application)h(maps)f(only)h(those)g(clusters)f(that)h(it)f(is)h
(curr)o(ently)523 1792 y(r)o(eading)f(or)h(updating;)f(updates)g(r)o(emain)g
(local)h(until)g(the)g(application)g(commits.)666 1930 y(Pointers)12
b(and)g(allocation)g(information)g(ar)o(e)g(supplemented,)k(internally)-9
b(,)14 b(by)e(location\177)523 2030 y(independent)19 b(data)f(str)o(uctur)o
(es.)29 b(Fr)o(om)20 b(these,)g(the)f(system)h(determines)f(which)i(objects)
523 2130 y(ar)o(e)j(actually)i(shar)o(eable)e(by)i(other)g(applications)g
(\(any)g(object)g(r)o(eachable)e(fr)o(om)h(a)h(per)o(\177)523
2229 y(sistent)21 b(object)g(is)g(itself)f(persistent;)h(this)g(is)g(called)e
(\020persistence)h(by)g(r)o(eachability\021)f([1)o(]\),)523
2329 y(by)f(tracing)g(fr)o(om)f(a)g(persistent)i(r)o(oot.)28
b(Such)18 b(automatic)g(management)g(r)o(esults)f(in)i(a)e(sim\177)523
2429 y(ple)23 b(and)g(natural)g(pr)o(ogramming)h(model,)g(because)f(the)g
(application)h(need)f(not)h(worry)523 2528 y(about)d(input\177output)g(or)g
(deallocation.)666 2667 y(The)k(intended)f(application)h(ar)o(ea)e(is)i(pr)o
(ograms)g(sharing)g(a)f(lar)o(ge)g(amount)h(\(many)523 2766
y(gigabytes\))15 b(of)h(objects)g(on)g(a)f(wide\177ar)o(ea)e(network,)k
Fl(e.g.,)f Fo(acr)o(oss)f(the)h(Internet.)28 b(Examples)523
2866 y(include)37 b(\034nancial)g(databases,)j(design)d(databases,)j(gr)o
(oup)c(work)i(applications,)j(or)523 2965 y(exploratory)20
b(applications)h(similar)g(to)g(the)g(W)-8 b(orld\177W)j(ide)21
b(W)-8 b(eb.)523 3247 y Fm(1.2)99 b(Larchant\177RDOSS)523 3444
y Fo(This)25 b(setting)h(imposes)g(performance)d(constraints,)k(such)e(as)f
(avoiding)h(I/O)h(and)e(syn\177)523 3543 y(chr)o(onization.)37
b(Furthermor)o(e)23 b(it)h(is)f(not)h(r)o(easonable)e(to)i(expect)e(any)h
(str)o(ong)h(coher)o(ence)523 3643 y(guarantees.)56 b(\(Coher)o(ence)28
b(is)j(costly)f(in)g(the)g(lar)o(ge)f(scale,)i(unnecessary)f(for)f(some)h(of)
523 3742 y(the)21 b(intended)f(applications,)g(and)g(will)h(block)g(in)g(the)
g(pr)o(esence)e(of)i(network)g(partitions)523 3842 y(and)g(during)h
(disconnected)g(operation.\))33 b(An)22 b(algorithm)g(that)g(performs)f(well)
i(in)f(such)523 3942 y(a)g(setting)h(can)f(be)g(expected)f(to)i(apply)f(also)
h(to)g(a)f(less)g(demanding)h(envir)o(onment)g(such)523 4041
y(as)e(a)f(multipr)o(ocessor)h(or)g(a)f(well\177connected)h(local)g(network.)
666 4180 y(These)g(performance)f(constraints)h(appear)e(to)j(clash)e(with)i
(persistence)f(by)f(r)o(eacha\177)523 4279 y(bility)-9 b(.)37
b(Distributed)23 b(tracing)g(r)o(equir)o(es)f(global)h(synchr)o(onization.)
2670 4249 y Fk(1)2741 4279 y Fo(Accessing)g(r)o(emote)p 523
4356 1146 4 v 614 4412 a Fj(1)643 4436 y Fp(W)-6 b(e)10 b(deliberately)g
(ignor)o(e)g(r)o(efer)o(ence)g(counting)g(\(RC\),)g(for)g(the)g(following)g
(r)o(easons:)24 b(\(1\))10 b(RC)g(is)g(not)g(complete)523 4514
y(\(it)h(does)g(not)g(collect)g(cycles)g(of)g(garbage\).)24
b(\(2\))11 b(The)g(existence)g(of)g(multiple)g(kinds)g(of)g(r)o(oots)g
(\(transient)g(r)o(oots)g(and)523 4593 y(persistent)18 b(r)o(oots\))g(makes)g
(RC)g(awkwar)o(d.)29 b(\(3\))19 b(W)-6 b(e)18 b(have)f(alr)o(eady)h(studied)g
(extensively)f(a)h(wide\177ar)o(ea,)h(fault\177)523 4672 y(tolerant)k
(version)f(of)h(r)o(efer)o(ence)g(counting)f([8)q(,)g(7])h(and)f(have)g
(found)g(it)h(inadequate)f(for)h(a)g(shar)o(ed\177memory)523
4751 y(envir)o(onment.)58 b(As)29 b(we)g(shall)h(see,)h(our)e(new)g
(algorithm)g(combines)g(tracing,)j(whenever)c(economically)523
4830 y(feasible,)17 b(with)f(a)h(variant)g(of)g(RC)g(when)f(tracing)h(would)g
(be)f(too)h(expensive.)1934 5147 y Fo(2)p eop
%%Page: 3 3
3 2 bop 523 614 a Fo(or)28 b(on\177disk)g(portions)h(of)f(the)g(object)g
(graph)g(r)o(equir)o(es)f(costly)i(input\177output)f(and)g(net\177)523
714 y(work)f(communication.)49 b(Published)28 b(concurr)o(ent)e(GC)h
(typically)g(assume)f(a)h(coher)o(ent)523 814 y(memory)-9 b(,)27
b(and)e(r)o(equir)o(e)f(a)h(str)o(ong,)i(non\177portable)e(synchr)o
(onization)h(between)g(the)f(ap\177)523 913 y(plication)c(\(the)g
(\020mutator)6 b(\021\))20 b(and)g(the)h(collector)-6 b(.)666
1052 y(Our)28 b(algorithm)h(works)g(ar)o(ound)e(these)h(dif)o(\034culties.)51
b(Instead)28 b(of)g(a)f(global)i(trace,)523 1151 y(we)20 b(perform)f(a)h
(series)g(of)g(opportunistic)h(local)e(traces)h(that)f(together)i(appr)o
(oximate)d(the)523 1251 y(global)32 b(trace.)63 b(A)32 b(local)g(trace)f(r)o
(equir)o(es)g(no)i(r)o(emote)f(synchr)o(onization)h(and)e(no)i(I/O.)523
1351 y(W)-8 b(e)30 b(avoid)g(mutator)o(\177collector)g(synchr)o(onization,)j
(by)d(r)o(elying)g(on)h(the)f(trace)f(itself)h(to)523 1450
y(discover)17 b(new)i(pointers.)29 b(W)-8 b(e)18 b(avoid)f(r)o(elying)h(on)g
(any)g(particular)e(coher)o(ence)h(model)h(by)523 1550 y(delaying)26
b(the)g(delete)g(of)g(an)g(object)g(until)h(it)g(has)f(been)g(detected)f(unr)
o(eachable)f(every\177)523 1649 y(wher)o(e.)29 b(W)-8 b(e)19
b(do)g(however)h(assume)f(that)g(a)g(granule)g(has)g(no)h(mor)o(e)f(than)h(a)
e(single)i(writer)523 1749 y(at)h(any)g(point)h(in)f(time.)31
b(For)22 b(performance)e(we)h(use)g(asynchr)o(onous)h(messages,)f(r)o(elying)
523 1849 y(on)g(causally\177or)o(der)o(ed)d(delivery)j(for)f(corr)o(ectness.)
523 2130 y Fm(1.3)99 b(Larchant\177RDOSS)24 b(vs.)i(Larchant\177BMX)523
2327 y Fo(T)-7 b(wo)14 b(slightly)g(dif)o(fer)o(ent)g(versions)g(of)g(the)g
(Lar)o(chant)g(ar)o(chitectur)o(e)f(ar)n(e)h(be)o(ing)g(developed,)523
2426 y(called)25 b(r)o(espectively)f(Lar)o(chant\177BMX)g(and)h(Lar)o
(chant\177RDOSS.)f(Both)i(systems)g(imple\177)523 2526 y(ment)h(essentially)h
(the)f(same)f(ideas)h(and)f(algorithms)i(but)f(dif)o(fer)e(in)i(some)h
(important)523 2626 y(aspects.)666 2764 y(Lar)o(chant\177BMX)14
b(implements)k(an)e(object\177granularity)g(entry\177consistent)h([3])f
(single)523 2864 y(distributed)i(addr)o(ess)e(space)i(abstraction.)28
b(The)19 b(collector)f(r)o(uns)h(concurr)o(ently)f(with)h(the)523
2963 y(mutator)-6 b(,)22 b(in)h(the)f(same)g(addr)o(ess)f(space;)g(ther)o
(efor)o(e)g(updates)g(must)i(be)f(r)o(eported)f(to)h(the)523
3063 y(collector)-6 b(.)30 b(Pointer)21 b(comparisons)h(must)f(use)g(a)f
(special)h(primitive.)666 3202 y(Lar)o(chant\177RDOSS)13 b(is)g(a)g
(simpli\034ed)g(version)g(of)g(Lar)o(chant\177BMX.)g(Lar)o(chant\177RDOSS)523
3301 y(pr)o(ovides)20 b(a)f(mor)o(e)i(r)o(estrictive)e(model,)h(that)h(of)f
(single\177pr)o(ocess)g(transactions,)h(separate)523 3401 y(addr)o(ess)13
b(spaces,)f(and)h(causal)g(br)o(oadcast)g(of)g(committed)g(writes.)25
b(A)13 b(pointer)g(is)g(swizzled)523 3500 y(\(but)24 b(only)h(at)f(\034rst)g
(use\);)h(the)g(collector)f(r)o(uns)h(independently)f(fr)o(om)g(the)g
(mutator)h(\(but)523 3600 y(only)d(collects)f(the)g(persistent)g(memory\).)
523 3881 y Fm(1.4)99 b(Outline)523 4078 y Fo(This)17 b(paper)e(brie\035y)i
(describes)e(the)i(overall)f(design)g(of)g(Lar)o(chant\177RDOSS,)f(in)i
(Section)f(2.)523 4178 y(Section)d(3)g(outlines)g(our)g(garbage)g(collection)
g(algorithm,)19 b(ignoring)13 b(r)o(eplicated)g(caching;)523
4277 y(it)20 b(can)f(collect)h(an)g(arbitrary)e(subset)i(of)g(the)g(object)g
(graph)f(independently;)h(we)g(suggest)523 4377 y(a)15 b(locality\177based)g
(heuristics)h(for)f(choosing)i(the)f(subset)g(that)f(avoids)g(message,)i(I/O)
f(and)523 4477 y(lock)21 b(traf)o(\034c.)29 b(In)21 b(Section)g(4,)f(we)h
(extend)f(the)h(algorithm)g(to)h(the)f(case)f(wher)o(e)g(a)g(cluster)h(is)523
4576 y(multiply)15 b(cached,)f(even)g(when)h(the)g(r)o(eplicas)e(ar)o(e)f
(not)j(known)h(to)e(be)g(coher)o(ent.)28 b(Section)14 b(5)523
4676 y(concludes)21 b(with)h(a)e(summary)h(of)g(our)g(ideas)f(and)g(r)o
(esults.)1934 5147 y(3)p eop
%%Page: 4 4
4 3 bop 748 2421 a @beginspecial @setspecial
%%BeginDocument: F1-gal-arch-rdoss.ps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-8.0 227.0 translate 0.900 -0.900 scale
4.000 setlinewidth
n 281 83 m 281 24 l  194 24 l  194 83 l  clp gs col7 1.00 graycol fill gr gs col7 s gr
n 144 84 m 144 24 l  58 24 l  58 84 l  clp gs col7 1.00 graycol fill gr gs col7 s gr
1.000 setlinewidth
n 150 87 m 54 87 l  54 21 l  150 21 l  clp gs col0 s gr
n 285 87 m 190 87 l  190 21 l  285 21 l  clp gs col0 s gr
0.500 setlinewidth
n 134 221 m 134 243 l gs col0 s gr
n 133 243 m 133 234 l  94 234 l  94 243 l  clp gs col7 1.00 graycol fill gr gs col7 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 98 228 m 95 228 95 243 3 arcto 4 {pop} repeat 95 246 108 246 3 arcto 4 {pop} repeat 111 246 111 231 3 arcto 4 {pop} repeat 111 228 98 228 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
n 64 199 m 102 230 l gs 0.00 setgray fill gr
gs col0 s gr
n 97.065 223.393 m 102.000 230.000 l 94.537 226.493 l gs 2 setlinejoin col0 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 120 228 m 117 228 117 243 3 arcto 4 {pop} repeat 117 246 127 246 3 arcto 4 {pop} repeat 130 246 130 231 3 arcto 4 {pop} repeat 130 228 120 228 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
n 174 223 20 6 0 360 DrawEllipse gs col0 s gr
n 194 223 m 194 244 l gs col0 s gr
n 193 243 m 193 234 l  157 234 l  157 243 l  clp gs col7 1.00 graycol fill gr gs col7 s gr
n 93 221 m 93 243 l gs col0 s gr
n 114 243 20 6 0 360 DrawEllipse gs col0 s gr
n 174 243 20 6 0 360 DrawEllipse gs col0 s gr
n 143 146 m 143 117 l  89 117 l  89 146 l  clp gs col0 s gr
n 114 221 20 6 0 360 DrawEllipse gs col0 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 124 26 m 121 26 121 43 3 arcto 4 {pop} repeat 121 46 132 46 3 arcto 4 {pop} repeat 135 46 135 29 3 arcto 4 {pop} repeat 135 26 124 26 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
n 67 146 m 67 117 l  13 117 l  13 146 l  clp gs col0 s gr
n 263 40 m 210 67 l gs col0 s gr
n 217.582 64.260 m 210.000 67.000 l 216.674 62.478 l gs 2 setlinejoin col0 s gr
n 248 146 m 248 117 l  195 117 l  195 146 l  clp gs col0 s gr
n 207 63 m 206 44 l gs col0 s gr
n 205.422 52.042 m 206.000 44.000 l 207.419 51.936 l gs 2 setlinejoin col0 s gr
n 185 0 m 185 164 l  330 164 l  328 164 l gs col0 s gr
n 321 146 m 321 117 l  267 117 l  267 146 l  clp gs col0 s gr
n 263 61 m 213 41 l gs col0 s gr
n 220.056 44.900 m 213.000 41.000 l 220.799 43.043 l gs 2 setlinejoin col0 s gr
n 237 246 20 6 0 360 DrawEllipse gs col0 s gr
n 237 226 20 6 0 360 DrawEllipse gs col0 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 201 61 m 198 61 198 77 3 arcto 4 {pop} repeat 198 80 210 80 3 arcto 4 {pop} repeat 213 80 213 64 3 arcto 4 {pop} repeat 213 61 201 61 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
n 260 61 m 257 61 257 77 3 arcto 4 {pop} repeat 257 80 269 80 3 arcto 4 {pop} repeat 272 80 272 64 3 arcto 4 {pop} repeat 272 61 260 61 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
n 260 26 m 257 26 257 41 3 arcto 4 {pop} repeat 257 44 269 44 3 arcto 4 {pop} repeat 272 44 272 29 3 arcto 4 {pop} repeat 272 26 260 26 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
n 201 26 m 198 26 198 43 3 arcto 4 {pop} repeat 198 46 210 46 3 arcto 4 {pop} repeat 213 46 213 29 3 arcto 4 {pop} repeat 213 26 201 26 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
1.000 setlinewidth
n 205 94 m 205 100 l  300 100 l  300 33 l  294 33 l gs col0 s gr
0.500 setlinewidth
n 171 2 m 171 165 l  25 165 l  26 165 l gs col0 s gr
1.000 setlinewidth
n 164.938 188.734 m 173.000 187.000 l 166.703 192.324 l gs 2 setlinejoin col0 s gr
n 173 187 m 114 216 l gs col0 s gr
n 122.062 214.266 m 114.000 216.000 l 120.297 210.676 l gs 2 setlinejoin col0 s gr
0.500 setlinewidth
	1 setlinecap [1 3.000000] 3.000000 setdash
n 66 63 m 63 63 63 78 3 arcto 4 {pop} repeat 63 81 73 81 3 arcto 4 {pop} repeat 76 81 76 66 3 arcto 4 {pop} repeat 76 63 66 63 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
n 125 61 m 122 61 122 77 3 arcto 4 {pop} repeat 122 80 132 80 3 arcto 4 {pop} repeat 135 80 135 64 3 arcto 4 {pop} repeat 135 61 125 61 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
1.000 setlinewidth
n 179.461 192.124 m 173.000 187.000 l 181.112 188.480 l gs 2 setlinejoin col0 s gr
n 173 187 m 237 216 l gs col0 s gr
n 230.539 210.876 m 237.000 216.000 l 228.888 214.520 l gs 2 setlinejoin col0 s gr
0.500 setlinewidth
	1 setlinecap [1 3.000000] 3.000000 setdash
n 66 27 m 63 27 63 44 3 arcto 4 {pop} repeat 63 47 73 47 3 arcto 4 {pop} repeat 76 47 76 30 3 arcto 4 {pop} repeat 76 27 66 27 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
1.000 setlinewidth
n 60 89 m 60 94 l  157 94 l  157 27 l  151 27 l gs col0 s gr
n 232.719 96.048 m 237.000 89.000 l 236.539 97.233 l gs 2 setlinejoin col0 s gr
n 237 89 m 228 118 l gs col0 s gr
n 232.281 110.952 m 228.000 118.000 l 228.461 109.767 l gs 2 setlinejoin col0 s gr
n 195 87 m 195 93 l  293 93 l  293 26 l  287 26 l gs col0 s gr
0.500 setlinewidth
n 76 33 m 124 33 l gs col0 s gr
n 116.000 32.000 m 124.000 33.000 l 116.000 34.000 l gs 2 setlinejoin col0 s gr
n 124 40 m 74 68 l gs col0 s gr
n 81.469 64.964 m 74.000 68.000 l 80.491 63.219 l gs 2 setlinejoin col0 s gr
n 126 61 m 77 41 l gs col0 s gr
n 84.029 44.949 m 77.000 41.000 l 84.785 43.097 l gs 2 setlinejoin col0 s gr
n 72 64 m 71 44 l gs col0 s gr
n 70.401 52.040 m 71.000 44.000 l 72.398 51.940 l gs 2 setlinejoin col0 s gr
n 210 33 m 261 33 l gs col0 s gr
n 253.000 32.000 m 261.000 33.000 l 253.000 34.000 l gs 2 setlinejoin col0 s gr
1.000 setlinewidth
n 212.657 149.752 m 220.000 146.000 l 215.286 152.766 l gs 2 setlinejoin col0 s gr
n 220 146 m 173 187 l gs col0 s gr
n 180.343 183.248 m 173.000 187.000 l 177.714 180.234 l gs 2 setlinejoin col0 s gr
0.500 setlinewidth
	1 setlinecap [1 3.000000] 3.000000 setdash
n 240 232 m 237 232 237 244 3 arcto 4 {pop} repeat 237 247 245 247 3 arcto 4 {pop} repeat 248 247 248 235 3 arcto 4 {pop} repeat 248 232 240 232 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
1.000 setlinewidth
n 174.000 195.000 m 176.000 187.000 l 178.000 195.000 l gs 2 setlinejoin col0 s gr
n 176 187 m 176 216 l gs col0 s gr
n 178.000 208.000 m 176.000 216.000 l 174.000 208.000 l gs 2 setlinejoin col0 s gr
0.500 setlinewidth
	1 setlinecap [1 3.000000] 3.000000 setdash
n 224 232 m 221 232 221 244 3 arcto 4 {pop} repeat 221 247 230 247 3 arcto 4 {pop} repeat 233 247 233 235 3 arcto 4 {pop} repeat 233 232 224 232 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
1.000 setlinewidth
n 100.711 96.788 m 98.000 89.000 l 104.057 94.596 l gs 2 setlinejoin col0 s gr
n 98 89 m 117 118 l gs col0 s gr
n 114.289 110.212 m 117.000 118.000 l 110.943 112.404 l gs 2 setlinejoin col0 s gr
0.500 setlinewidth
n 217 223 m 217 244 l gs col0 s gr
1.000 setlinewidth
n 120.570 152.081 m 115.000 146.000 l 122.776 148.745 l gs 2 setlinejoin col0 s gr
n 115 146 m 177 187 l gs col0 s gr
n 171.430 180.919 m 177.000 187.000 l 169.224 184.255 l gs 2 setlinejoin col0 s gr
0.500 setlinewidth
n 256 224 m 256 246 l gs col0 s gr
n 255 244 m 255 240 l  217 240 l  217 244 l  clp gs col7 1.00 graycol fill gr gs col7 s gr
1.000 setlinewidth
n 75.000 134.000 m 67.000 132.000 l 75.000 130.000 l gs 2 setlinejoin col0 s gr
n 67 132 m 89 132 l gs col0 s gr
n 81.000 130.000 m 89.000 132.000 l 81.000 134.000 l gs 2 setlinejoin col0 s gr
n 257.000 135.000 m 249.000 133.000 l 257.000 131.000 l gs 2 setlinejoin col0 s gr
n 249 133 m 267 133 l gs col0 s gr
n 259.000 131.000 m 267.000 133.000 l 259.000 135.000 l gs 2 setlinejoin col0 s gr
0.500 setlinewidth
n 15 236 m
	15.436 235.479 15.436 235.479 15 236 curveto
	15.436 235.479 15.436 235.479 15 236 curveto
gs col0 s gr
n 155 223 m 155 244 l gs col0 s gr
/Times-Roman findfont 9.00 scalefont setfont
39 133 m 
gs 1 -1 scale (Collector) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 181 228 m 178 228 178 243 3 arcto 4 {pop} repeat 178 246 188 246 3 arcto 4 {pop} repeat 191 246 191 231 3 arcto 4 {pop} repeat 191 228 181 228 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
/Times-Roman findfont 9.00 scalefont setfont
278 133 m 
gs 1 -1 scale (Collector) col-1 show gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 160 228 m 157 228 157 243 3 arcto 4 {pop} repeat 157 246 168 246 3 arcto 4 {pop} repeat 171 246 171 231 3 arcto 4 {pop} repeat 171 228 160 228 3 arcto 4 {pop} repeat clp gs col0 s gr
	[] 0 setdash 0 setlinecap
n 58 191 9 9 0 360 DrawEllipse gs col-1 s gr
/Times-Roman findfont 9.00 scalefont setfont
8 211 m 
gs 1 -1 scale (Persistent Root) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
224 240 m 
gs 1 -1 scale (e) col-1 show gr
/Times-Roman findfont 10.00 scalefont setfont
240 240 m 
gs 1 -1 scale (d) col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
240 11 m 
gs 1 -1 scale (Application Processes) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
/Times-Roman findfont 9.00 scalefont setfont
97 11 m 
gs 1 -1 scale (Application Processes) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
$F2psEnd
%%EndDocument
 @endspecial 1453 2308 a
 gsave 0 0 0 setrgbcolor
 Ft(a)1490 2308 y
 grestore
 1595 2308 a
 gsave 0 0 0 setrgbcolor
 Ft(c)1628
2308 y
 grestore
 1910 2323 a
 gsave 0 0 0 setrgbcolor
 Ft(b)1951 2323 y
 grestore
 2060 2308 a
 gsave 0 0 0 setrgbcolor
 Ft(c)2093 2308
y
 grestore
 1198 831 a
 gsave 0 0 0 setrgbcolor
 Ft(a)1235 831 y
 grestore
 1198 1086 a
 gsave 0 0 0 setrgbcolor
 Ft(c)1231 1086 y
 grestore
 1070
2001 a
 gsave 0 0 0 setrgbcolor
 Ft(PR)1165 2001 y
 grestore
 1633 1086 a
 gsave 0 0 0 setrgbcolor
 Ft(d)1679 1086 y
 grestore
 1633
831 a
 gsave 0 0 0 setrgbcolor
 Ft(b)1674 831 y
 grestore
 2218 1086 a
 gsave 0 0 0 setrgbcolor
 Ft(c)2251 1086 y
 grestore
 2660 1079
a
 gsave 0 0 0 setrgbcolor
 Ft(d)2706 1079 y
 grestore
 2660 816 a
 gsave 0 0 0 setrgbcolor
 Ft(b)2701 816 y
 grestore
 2218 831 a
 gsave 0 0 0 setrgbcolor
 Ft(a)2255
831 y
 grestore
 1371 1491 a Ft(Site)19 b(Cache)461 b(Site)19 b(Cache)1437
1574 y(Server)589 b(Server)2135 1933 y Fo(cbcast)1027 2604
y(Figur)o(e)21 b(1:)29 b Fi(General)20 b(ar)o(chitectur)o(e)f(of)i(Lar)o
(chant\177RDOSS)523 2876 y Fn(2)116 b(Overall)29 b(design)523
3104 y Fo(The)24 b(ar)o(chitectur)o(e)f(of)h(Lar)o(chant\177RDOSS)e(is)j
(illustrated)f(in)h(Figur)o(e)f(1.)39 b(An)24 b(application)523
3204 y(pr)o(ogram)34 b(on)h(some)h(site)f(access)f(the)h(shar)o(ed)e(memory)j
(thr)o(ough)f(that)g(site's)g(Cache)523 3303 y(Server)-6 b(.)46
b(Stable)26 b(versions)h(of)g(clusters)g(ar)o(e)e(stor)o(ed)h(on)i(disk)f(by)
g(Backup)f(Servers.)46 b(T)-8 b(o\177)523 3403 y(gether)i(,)21
b(the)g(Cache)g(Servers)f(and)h(the)g(Backup)g(Servers)f(form)h(the)h(Object)
f(Storage)g(Ser)o(\177)523 3503 y(vice.)48 b(Auxiliary)26 b(Collector)i(Pr)o
(ocesses)e(perform)h(the)g(garbage)f(collection)h(algorithm)523
3602 y(on)c(behalf)f(of)g(a)g(Cache)g(or)g(Backup)g(Server)-6
b(.)33 b(This)23 b(section)g(describes)f(the)g(applications)523
3702 y(and)c(the)g(cache)g(and)g(backup)f(servers;)i(garbage)e(collection)i
(will)g(be)f(described)f(in)i(mor)o(e)523 3801 y(detail)h(in)h(Sections)g(3)g
(and)f(4.)523 4083 y Fm(2.1)99 b(Application)25 b(interface)523
4280 y Fo(Applications)13 b(that)g(use)g(Lar)o(chant\177RDOSS)g(ar)o(e)g(or)o
(dinary)g(Unix)g(pr)o(ocesses.)23 b(The)13 b(shar)o(ed)523
4379 y(memory)k(is)g(very)g(similar)g(to)g(an)f(or)o(dinary)g
(memory\177mapped)g(shar)o(ed)f(r)o(egion)i(contain\177)523
4479 y(ing)26 b(pointers.)44 b(An)25 b(application)g(accesses)f(clusters)i
(thr)o(ough)g(the)f(local)g(Cache)g(Server)523 4578 y(\(see)20
b(Section)h(2.3\).)28 b(The)21 b(API)f(primitives)i(ar)o(e)d(dir)o(ected)g
(at)h(the)h(local)g(Cache)f(Server)-6 b(.)3246 4548 y Fk(2)p
523 4655 1146 4 v 614 4711 a Fj(2)643 4734 y Fp(In)13 b(our)g(curr)o(ent)g
(speci\034cation,)i(applications)g(can)e(meaningfully)g(communicate)g
(pointers)g(to)g(each)h(other)523 4813 y(only)25 b(via)g(the)e(Lar)o
(chant\177RDOSS)i(shar)o(ed)f(memory)-7 b(.)47 b(The)24 b(speci\034cation)i
(could)g(be)e(extended)f(to)h(sending)523 4892 y(pointers)12
b(in)f(messages)h(or)g(thr)o(ough)f(other)g(channels,)h(by)f(integrating)g
(the)g(SSPC)g(pr)o(otocols)i([7)q(])e(into)h(Lar)o(chant\177)1934
5147 y Fo(4)p eop
%%Page: 5 5
5 4 bop 523 614 a Fm(2.2)99 b(Clusters)25 b(and)g(pointers)523
811 y Fo(The)18 b(Lar)o(chant\177RDOSS)f(primitive)i Fh(startup\(\))e
Fo(pr)o(ovides)h(a)g(pr)o(ocess)f(with)j(its)e(initial)h(con\177)523
911 y(nection,)41 b(by)36 b(maping)g(in)h(an)f(initial)h(cluster)f
(containing)h(a)f(persistent)g(r)o(oot)g(object,)523 1010 y(itself)25
b(containing)h(pointers)g(to)g(other)f(objects.)43 b(The)25
b(application)g(follows)i(some)e(arbi\177)523 1110 y(trary)d(path)h(thr)o
(ough)g(the)h(object)f(graph,)g(by)g(following)h(pointers.)37
b(When)23 b(following)i(a)523 1210 y(pointer)i(for)f(the)g(\034rst)g(time,)i
(the)e(application)g Fh(bind)p Fo(s)i(it.)46 b(The)26 b Fh(bind)h
Fo(primitive)g(ensur)o(es)523 1309 y(that)c(the)g(tar)o(get)e(object)j(is)f
(completely)g(initialized,)g(and)f(sets)h(a)f(lock.)37 b(Supported)22
b(lock)523 1409 y(modes)j(include)g(the)g(both)g(standar)o(d)e(consistent)j
(locks)f(\(r)o(ead)e(and)h(write\),)h(and)g(weak)523 1509 y(locks)d
(\(optimistic,)f(no\177guarantee\).)666 1647 y(Binding)31 b(a)f(pointer)h
(up\177calls)g(a)f(language\177dependent)f(type\177checking)i(and)f(un\177)
523 1747 y(marshalling)22 b(module.)31 b(Binding)21 b(also)h(ensur)o(es)f
(that,)f(if)h(the)h(tar)o(get)e(pointer)h(contains)h(a)523
1846 y(pointer)i(itself,)g(the)g(latter)f(is)h(valid,)f(by)h
Fh(reserve)p Fo(\177ing)e(a)h(memory)i(location)f(for)f(its)h(own)523
1946 y(tar)o(get.)32 b(\(The)22 b(latter)f(is)h(not)h(actually)e(bound)h
(until)h(it)f(is)g(accessed.\))32 b(At)22 b(the)g(same)f(time,)523
2045 y(the)j(pointer)f(is)h(\020swizzled,\021)e Fl(i.e.,)i
Fo(a)e(corr)o(ect)h(value)f(is)i(assigned)g(to)f(it)h(accor)o(ding)e(to)i
(the)523 2145 y(r)o(esult)c(of)h(the)g(r)o(eservation.)1415
2115 y Fk(3)666 2284 y Fo(Allocating)f(a)e(new)i(object)g(in)f(a)g(cluster)g
(declar)o(es)f(its)h Fl(layout)g Fo(to)h(the)f(system,)h Fl(i.e.,)f
Fo(the)523 2383 y(location)25 b(of)g(any)g(pointers)g(it)f(contains.)42
b(The)25 b(application)f(fr)o(eely)g(r)o(eads)f(and)h(updates)523
2483 y(a)i(bound)g(object,)h(including)g(the)f(pointers)h(it)f(contains,)i
(as)e(long)h(as)e(the)i(new)f(pointer)523 2582 y(values)20
b(ar)o(e)g(valid,)g(and)g(the)h(updates)f(do)h(not)g(change)g(the)g(object)g
(layout.)666 2721 y(This)34 b(shar)o(ed)f(memory)h(abstraction)f(is)h
(natural,)i(and)d(can)h(be)f(used)g(even)h(fr)o(om)523 2821
y(primitive)28 b(languages)g(such)g(as)f(C)h(or)g(C++.)51 b(Binding)29
b(does)e(not)i(dif)o(fer)d(substantially)523 2920 y(fr)o(om)f(the)g(familiar)
g(Unix)g Fh(mmap)h Fo(primitive,)g(and)f(locking)h(is)f(usual)h(for)f
(concurr)o(ency)523 3020 y(contr)o(ol.)k(A)19 b(call)f(to)h(the)g(allocation)
g(primitives)g Fh(malloc)g Fo(or)g Fh(new)g Fo(must)g(pr)o(ovide)f(an)g
(extra)523 3119 y(ar)o(gument)26 b(containing)j(the)e(layout)g(of)g(the)g
(new)g(object.)49 b(Pr)o(ogrammers)26 b(must)i(avoid)523 3219
y(ambiguous)f(unions)h(or)f(casts)f(\(wher)o(e)f(a)h(pointer)h(and)f(a)g
(non\177pointer)i(could)e(occupy)523 3319 y(the)18 b(same)f(location\).)29
b(These)17 b(r)o(ules)h(may)f(be)g(unfamiliar)-6 b(,)17 b(but)h(do)f(not)h(r)
o(epr)o(esent)e(a)h(major)523 3418 y(language)j(change,)h(and)f(do)h(not)g(r)
o(equir)o(e)f(any)h(compiler)g(changes.)666 3557 y(Updates)30
b(r)o(emain)h(private)f(until)j(the)e(application)g(pr)o(ocess)g(commits,)k
(at)c(which)523 3656 y(point)d(all)g(updates)e(ar)o(e)g(pr)o(opagated)g(at)h
(once.)51 b(Locking)28 b(may)f(be)g(pessimistic)i(\(locks)523
3756 y(ar)o(e)24 b(enfor)o(ced)h(when)h(the)g(application)g(r)o(equests)f
(them\))h(or)g(optimistic)h(\(locks)f(ar)o(e)f(not)523 3856
y(enfor)o(ced)18 b(until)h(commit)h(time;)f(if)g(a)f(con\035ict)i(has)f
(arised)f(in)h(the)g(meanwhile,)g(the)g(appli\177)523 3955
y(cation)f(aborts)f(and)g(its)h(updates)f(ar)o(e)f(lost.\))29
b(Optimistic)19 b(locking)g(is)e(useful)h(and)f(ef)o(\034cient)523
4055 y(in)g(many)g(types)f(of)h(applications;)g(it)g(turns)g(out)g(that)f
(the)h(garbage)e(collector)i(uses)g(it)f(also.)666 4193 y(An)22
b(application)h(pays)f(over)o(head)f(only)j(at)e(\034rst)h(use)f(of)h(a)f
(datum)g(\(when)h(binding\))523 4293 y(and)i(when)i(committing)g(an)e(update)
g(\(when)h(unbinding\).)45 b(The)26 b(binding)g(cost)g(is)g(that)523
4393 y(of)36 b(getting)g(a)g(lock,)k(mapping)c(in)g(a)f(private)g(copy)h(and)
g(swizzling)g(pointers.)75 b(The)523 4492 y(unbinding)28 b(cost)f(is)h(that)f
(of)f(constr)o(ucting)j(the)e(new)g(r)o(efer)o(ence)d(map,)k(unlocking)h(and)
p 523 4569 1146 4 v 523 4646 a Fp(RDOSS.)17 b(This)f(is)i(topic)f(for)g
(futur)o(e)f(work.)614 4704 y Fj(3)643 4727 y Fp(This)25 b(follows)j(the)d
(model)g(of)h(W)l(ilson)h([9)q(].)51 b(T)-6 b(o)25 b(simplify)i(the)e
(implementation,)h(the)f(\034rst)h(version)g(of)523 4806 y(RDOSS)17
b(does)g(not)f(swizzle,)i(and)e(a)g(cluster)i(r)o(esides)e(at)h(a)g(\034xed)f
(addr)o(ess)g(at)h(all)g(client)g(pr)o(ocesses.)1934 5147 y
Fo(5)p eop
%%Page: 6 6
6 5 bop 523 614 a Fo(sending)20 b(updates.)29 b(In)20 b(between,)f(the)h
(application)f(r)o(uns)i(at)e(full)g(pr)o(ocessor)h(speed)f(with)523
714 y(no)i(for)o(egr)o(ound)f(over)o(head.)666 852 y(Note)27
b(that)f(we)h(ar)o(e)e(not)j(assuming)f(the)g(existence)g(of)f(a)g(garbage)g
(collector)h(at)f(the)523 951 y(application)k(pr)o(ocess.)56
b(One)30 b(may)g(exist)g(or)g(not.)58 b(The)30 b(garbage)e(collector)i
(described)523 1051 y(her)o(eafter)k(only)j(works)g(on)g(the)g(persistent)f
(stor)o(e,)k(and)35 b(executes)h(in)h(the)f(Collector)523 1151
y(Pr)o(ocesses.)523 1430 y Fm(2.3)99 b(Object)25 b(Storage)g(Service)523
1626 y Fo(The)k(Object)h(Storage)e(Service)h(\(OSS\))f(is)h(composed)h(of)f
(Cache)g(Servers)f(and)h(Backup)523 1726 y(Servers.)g(\(A)20
b(single)h(server)f(pr)o(ocess)g(can)h(actually)f(play)h(both)g(r\364les.\))
666 1863 y(A)33 b(Backup)g(Server)f(\(BS\))g(caches)h(r)o
(ecently\177accessed)e(clusters)j(in)g(memory)-9 b(,)37 b(and)523
1963 y(stor)o(es)g(them)h(on)f(disk.)79 b(Application)37 b(and)g(Collector)g
(pr)o(ocesses)g(access)f(the)i(stor)o(e)523 2063 y(thr)o(ough)c(the)g(single)
g(Cache)f(Server)f(\(CS\))h(r)o(unning)i(on)f(the)g(local)f(machine.)69
b(A)33 b(CS)523 2162 y(caches)21 b(clusters)h(r)o(ecently)f(accessed)g(by)h
(local)g(application)f(pr)o(ocesses.)33 b(It)21 b(caches)h(both)523
2262 y(cluster)e(data)f(and)g(the)h(associated)g(lock)g(tokens.)31
b(A)19 b(cache)g(miss)i(causes)f(a)f(cluster)h(to)h(be)523
2362 y(copied)e(fr)o(om)g(disk)h(into)g(the)g(corr)o(esponding)f(BS)g(cache,)
g(sent)h(to)f(a)g(CS)g(and)g(copied)g(into)523 2461 y(its)31
b(cache,)h(and)e(fr)o(om)g(ther)o(e)f(copied)h(into)h(the)g(r)o(equesting)g
(application)f(or)g(collector)-6 b(.)523 2561 y(When)24 b(an)f(application)g
(commits,)i(it)e(pr)o(opagates)f(any)h(changed)g(clusters)h(to)f(its)h(cache)
523 2660 y(server)-6 b(,)33 b(which)f(multicasts)f(the)h(changes)f(to)h(all)f
(other)g(copies)g(\(dif)o(fer)o(ent)e(coher)o(ence)523 2760
y(pr)o(otocols)21 b(can)g(be)f(plugged)h(in\).)666 2898 y(At)i(some)i(point)f
(in)g(time,)g(any)g(single)g(cluster)g(can)f(be)h(r)o(eplicated)d(in)k(any)e
(number)523 2997 y(of)g(Cache)g(Servers,)f(of)h(Backup)g(Servers,)f(of)h
(disks,)h(of)f(application)g(pr)o(ocesses,)h(and)e(of)523 3097
y(Collector)28 b(pr)o(ocesses.)51 b(The)28 b(server)f(that,)i(either)f(holds)
h(the)f(exclusive)f(\(write\))h(token)523 3197 y(for)d(a)f(cluster)-6
b(,)26 b(or)f(was)g(the)g(last)g(to)h(hold)f(it,)h(is)f(the)h
Fl(owner)f Fo(of)g(that)g(cluster)-6 b(.)42 b(An)25 b(update)523
3296 y(may)20 b(commit)g(updates)f(only)i(at)e(the)g(owner)h(site.)30
b(Updates)18 b(\035ow)j(fr)o(om)e(an)g(application)523 3396
y(or)i(a)g(collector)h(pr)o(ocess,)f(to)g(the)h(local)f(\(owner\))g(CS,)f
(which)j(pr)o(opagates)c(it)j(to)g(the)f(other)523 3495 y(servers.)46
b(A)26 b(BS)g(stor)o(es)g(updates)g(on)h(disk.)47 b(Since)26
b(an)h(update)e(or)i(a)f(token)h(\035ows)g(only)523 3595 y(fr)o(om)22
b(the)h(owner)g(to)g(other)f(pr)o(ocesses,)h(it)f(can)h(be)f(sent)h(using)g
(Isis)g(\020causal)e(br)o(oadcast\021)523 3695 y([4)o(].)641
3665 y Fk(4)523 3974 y Fm(2.4)99 b(Data)25 b(structures)523
4170 y Fo(The)i(contents)h(of)f(a)f(cluster)h(is)g(described)f(by)h(some)g
(special)g(data)e(str)o(uctur)o(es.)48 b(These)523 4270 y(contain)21
b(all)g(the)g(information)h(needed)d(for)i(garbage)e(collection)j(and)f
(swizzling.)666 4408 y(An)h Fl(Object)g(Map)g Fo(describes)f(the)h(location)h
(and)e Fl(class)i Fo(of)f(objects)g(inside)h(the)f(cluster)-6
b(.)523 4507 y(An)28 b Fl(In\177List)f Fo(indicates)h(which)h(of)e(these)h
(objects)h(might)g(be)e(pointed)h(at)g(fr)o(om)f(another)p
523 4582 1146 4 v 614 4638 a Fj(4)643 4662 y Fp(Communication)18
b(between)g(the)f(application)j(and)e(collector)i(pr)o(ocesses)g(and)e(the)f
(storage)i(service,)g(and)523 4741 y(between)j(the)g(storage)h(servers,)h
(uses)f(RDO,)g(a)g(Corba\177compliant)h(veneer)e(to)g(Isis,)j(a)e(pr)o(oduct)
g(of)g(Isis)h(Dis\177)523 4819 y(tributed)15 b(Systems,)h(Inc.)24
b(Since)16 b(application)i(pr)o(ocesses)f(only)g(communicate)f(via)h(the)e
(shar)o(ed)h(memory)-7 b(,)15 b(they)523 4898 y(need)h(not)g(be)g(awar)o(e)h
(of)g(RDO)h(nor)e(use)h(Corba)g(interfaces.)1934 5147 y Fo(6)p
eop
%%Page: 7 7
7 6 bop 523 614 a Fo(clusters.)71 b(Each)33 b(in\177list)i(element,)j(called)
c(a)f Fl(scion)p Fo(,)38 b(identi\034es)d(a)f(dif)o(fer)o(ent)e(potential)523
714 y Fg(f)p Fo(sour)o(ce)15 b(cluster)-6 b(,)17 b(tar)o(get)d(object)p
Fg(g)i Fo(pair)-6 b(.)28 b(A)15 b(special)h(form)g(of)g(scion)h(indicates)f
(a)f(persistent)523 814 y(r)o(oot.)666 952 y(An)27 b(object's)h(class)f
(describes)g(its)h(layout)g(and)e(type.)50 b(A)27 b(class)g(is)h(an)f(object)
h(itself,)523 1052 y(named)23 b(by)h(a)f(pointer)-6 b(.)38
b(The)24 b(layout)f(gives)h(the)g(location)g(and)f(type)g(of)h(pointers)g
(inside)523 1151 y(objects)j(of)g(that)f(class.)48 b(T)-7 b(ype)26
b(information)h(is)g(language\177dependent.)46 b(The)27 b(API)f
Fh(bind)523 1251 y Fo(primitive)d(up\177calls)f(a)h(language\177dependent)e
(type\177checking)i(module)h(to)f(type\177check)523 1351 y(a)d(pointer)h
(against)g(its)g(tar)o(get.)666 1489 y(A)39 b Fl(Refer)o(ence)h(Map)f
Fo(indicates)g(the)g(location)h(and)e(type)h(of)g(pointers)h(inside)f(the)523
1589 y(cluster)-6 b(.)784 1559 y Fk(5)859 1589 y Fo(Each)24
b(pointer)h(is)h(described)d(in)j(location\177independent)f(form,)g
Fl(i.e.,)h Fo(the)f(Ref\177)523 1688 y(er)o(ence)e(Map)g(identi\034es)h(the)h
(tar)o(get)e(cluster)-6 b(,)24 b(and)g(object)g(within)h(that)f(cluster)-6
b(,)25 b(of)f(each)523 1788 y(pointer)-6 b(.)28 b(An)14 b Fl(Out\177List)g
Fo(indicates)g(which)g(of)g(those)g(r)o(efer)o(ences)g(cr)o(oss)g(out)g(of)f
(the)h(cluster)6 b('s)523 1888 y(boundaries;)20 b(elements)h(of)g(the)g
(out\177list)h(ar)o(e)d(call)h Fl(stubs)p Fo(.)666 2026 y(All)k(the)h(above)f
(data)f(str)o(uctur)o(es)i(ar)o(e)e(normally)i(stor)o(ed)f(within)h(the)g
(cluster)g(itself,)523 2126 y(making)k(the)f(cluster)h(a)f(self\177contained)
f(unit)i(of)g(I/O,)f(storage,)i(and)e(collection.)53 b(The)523
2225 y(exception)17 b(is)g(a)g(class,)g(which)h(is)g(identi\034ed)f(by)g(a)f
(pointer)-6 b(,)18 b(and)f(hence)g(may)g(be)f(stor)o(ed)h(in)523
2325 y(another)25 b(cluster)-6 b(.)41 b(Classes)25 b(and)f(types)h(ar)o(e)e
(not)i(used)g(by)f(the)h(language\177independent)523 2425 y(layers)20
b(of)h(RDOSS,)g(and)f(will)i(be)e(ignor)o(ed)h(in)g(the)g(r)o(emainder)e(of)i
(this)g(document.)523 2749 y Fn(3)116 b(Garbage)22 b(collection)c(of)j(the)g
(persistent)f(shared)h(memory)523 2977 y Fo(W)-8 b(e)21 b(now)h(focus)e(on)i
(the)f(Garbage)f(Collection)h(of)g(the)g(persistent)g(shar)o(ed)e(memory)-9
b(.)523 3258 y Fm(3.1)99 b(Requirements)24 b(and)g(limitations)i(of)f
(existing)h(algorithms)523 3455 y Fo(The)f(ideal)f(GC)h(would)g(globally)h
(trace)e(the)g(whole)i(graph)f(of)f(objects)i(r)o(eachable)d(fr)o(om)523
3554 y(the)17 b(persistent)h(r)o(oot)f(set)h(\(called)e Fl(live)h
Fo(objects\).)29 b(But,)17 b(in)h(a)f(lar)o(ge\177scale)e(persistent)i(shar)o
(ed)523 3654 y(memory)-9 b(,)21 b(this)h(is)f(not)g(feasible,)f(for)g(a)h
(number)f(of)h(r)o(easons.)666 3793 y(First,)e(all)e(known)j(tracing)d
(algorithms)i(r)o(equir)o(e)e(a)g(global)h(synchr)o(onization,)h(which)523
3892 y(is)i(not)h(r)o(ealistic)e(in)h(a)f(lar)o(ge\177scale)f(system)i(such)h
(as)e(the)h(Internet.)666 4031 y(Second,)f(at)g(any)g(point)h(in)f(time,)h
(the)f(major)h(part)e(of)i(the)f(object)h(graph)e(is)i(swapped)523
4130 y(out)c(to)h(disk,)f(and)g(cannot)g(be)g(accessed)f(economically)-9
b(.)29 b(Since)16 b(by)h(de\034nition)h(swapped\177)523 4230
y(out)g(data)d(has)i(not)h(been)f(accessed)f(for)h(some)g(time,)h(it)f(is)h
(unlikely)g(that)f(tracing)g(it)g(would)523 4330 y(discover)k(any)f(new)h
(garbage.)666 4468 y(A)c(bene\034cial)h(side\177ef)o(fect)e(of)h(some)i
(garbage)d(collection)j(algorithms)g(is)f(to)h(impr)o(ove)523
4568 y(locality)j(by)f Fl(compacting)e Fo(sparsely\177populated)h(clusters.)
31 b(A)21 b(live)g(object)h(is)f(r)o(e\177allocated)523 4667
y(at)g(a)g(new)h(addr)o(ess,)e(and)h(pointers)h(to)g(it)g Fl(patched)d
Fo(to)j(r)o(efer)e(to)i(the)g(new)g(location.)33 b(Hence)p
523 4744 1146 4 v 614 4800 a Fj(5)643 4823 y Fp(This)16 b(information)h(is)g
(r)o(edundant)e(with)i(classes,)g(but)f(is)h(self\177contained)g(and)f
(language)h(independent.)1934 5147 y Fo(7)p eop
%%Page: 8 8
8 7 bop 523 614 a Fo(the)24 b(thir)o(d)f(pr)o(oblem,)h(that)g(r)o(elocating)f
(appears)g(to)h(r)o(equir)o(e)e(write\177locks)j(that)e(compete)523
714 y(with)f(the)e(applications'.)666 852 y(Fourth,)44 b(existing)c(concurr)o
(ent)f(GC)g(algorithms)h(r)o(equir)o(e)e(synchr)o(onization)i(be\177)523
952 y(tween)30 b(the)f(mutator)h(and)f(the)g(collector)-6 b(.)56
b(This)30 b(is)g(implemented)g(by)f(instr)o(umenting)523 1052
y Fl(every)21 b Fo(mutator)g(instr)o(uction)i(that)e(could)g(either)g(r)o
(ead)e(\(this)i(is)h(called)e(a)g(\020r)o(ead)f(barrier)6 b(\021\))523
1151 y(or)28 b(assign)g(\(a)f(\020write)h(barrier)6 b(\021\))26
b(a)h(pointer)-6 b(,)30 b(in)e(or)o(der)f(to)h(inform)g(the)g(collector)g(of)
g(the)523 1251 y(value)20 b(r)o(ead)f(or)h(written.)30 b(Since)20
b(what)h(would)g(have)f(been)g(a)g(single)h(assembler)f(instr)o(uc\177)523
1351 y(tion)e(is)f(instead)g(r)o(eplaced)e(by)i(a)g(sequence)g(of)g(code,)g
(this)h(slows)g(down)g(the)f(applications)523 1450 y(considerably)-9
b(.)34 b(The)22 b(collector)h(is)g(not)g(portable,)e(being)i(str)o(ongly)g
(coupled)f(with)h(a)f(par)o(\177)523 1550 y(ticular)e(compiler)h(that)g(will)
h(generate)e(the)g(corr)o(ect)g(barrier)g(code.)523 1831 y
Fm(3.2)99 b(Main)25 b(ideas)f(of)h(our)g(algorithm)523 2028
y Fo(Appar)o(ently)-9 b(,)30 b(the)g(pr)o(oblem)f(is)h(hopeless.)56
b(But)30 b(we)f(will)h(now)h(show)f(a)f(solution)i(that)523
2128 y(gives)c(an)f(excellent)h(appr)o(oximation)f(of)g(the)h(global)g
(concurr)o(ent)f(trace)g(and)g(does)h(not)523 2227 y(have)20
b(the)h(same)g(drawbacks.)666 2366 y(Instead)29 b(of)h(a)f(global)h(synchr)o
(onized)f(trace,)i(of)e(the)h(whole)h(object)f(graph)f(on)h(the)523
2465 y(whole)22 b(network,)g(it)g(appr)o(oximates)e(the)i(same)f(r)o(esult)g
(with)h(a)f(series)g(of)g(opportunistic,)523 2565 y(non\177synchr)o(onized,)
31 b(piecewise,)g(local)e(traces.)54 b(Each)28 b(cluster)h(is)g(traced)f(at)h
(each)f(site)523 2665 y(wher)o(e)c(it)h(is)g(cached,)f(and)g(the)h(r)o
(esults)f(summarized)g(at)g(the)h(cluster)g(owner)g(\(this)g(will)523
2764 y(be)18 b(explained)f(in)i(Section)g(4.2.1\).)26 b(Gr)o(oups)19
b(of)f(multiple)h(clusters)f(mapped)f(at)h(some)h(site)523
2864 y(ar)o(e)g(scanned)i(at)f(once,)h(thus)g(collecting)h(cycles)f(of)f
(garbage)g(that)h(span)f(clusters.)666 3002 y(In)k(or)o(der)f(to)i(not)g
(compete)f(with)h(the)f(application,)g(the)g(GC)h(works)f(on)h(a)f(separate)
523 3102 y(data)16 b(set;)j(namely)-9 b(,)18 b(any)f(datum)h(mapped)e(by)i
(an)f(application)h(is)g(ignor)o(ed)f(by)h(the)g(collec\177)523
3202 y(tor)g(\()p Fl(i.e.,)f Fo(is)i(conservatively)e(consider)o(ed)g
(live\).)28 b(T)-8 b(o)19 b(avoid)e(input/output,)i(the)f(collector)523
3301 y(also)j(ignor)o(es)g(data)f(that)g(is)h(swapped)f(to)i(disk.)666
3440 y(The)e(collector)f(does)h(not)g(cause)f(any)h(lock)g(traf)o(\034c,)e
(because)h(it)h(locks)g(an)f(object)h(only)523 3539 y(at)30
b(a)f(server)g(wher)o(e)g(the)h(lock)h(is)f(alr)o(eady)e(cached.)56
b(Its)30 b(locks)h(do)f(not)h(compete)f(with)523 3639 y(application)21
b(locks,)g(because)f(the)h(collector)g(r)o(uns)g(as)g(an)f(optimistic)i
(transaction.)666 3777 y(The)j(collector)g(makes)g(no)h(assumptions,)h(about)
e(the)h(mutual)f(consistency)h(of)f(the)523 3877 y(many)e(r)o(eplicas)e(of)i
(some)g(cluster)-6 b(,)22 b(apart)g(fr)o(om)g(the)h(assumption)g(that)g(only)
g(the)g(owner)523 3977 y(can)k(commit)h(a)f(write.)50 b(Thus,)29
b(data)d(can)h(be)g(incoher)o(ent.)50 b(The)27 b(GC)h(compensates)g(for)523
4076 y(incoher)o(ence)f(by)f(being)h(mor)o(e)g(conservative.)47
b(Any)27 b(object)g(that)g(has)g(been)f(r)o(eachable)523 4176
y(continues)e(to)g(be)e(consider)o(ed)g(r)o(eachable)g(for)g(as)h(long)h(as)f
(the)g(collector)g(does)g(not)h(pos\177)523 4276 y(itively)29
b(determine,)h(at)e(all)g(copies)h(and)f(independently)h(of)g(the)f(coher)o
(ence)g(pr)o(otocol,)523 4375 y(that)21 b(it)g(is)g(not.)666
4514 y(Ther)o(e)j(is)h(no)g(r)o(ead\177)d(or)j(write\177barrier;)g(the)f
(algorithm)i(discovers)e(pointer)h(assign\177)523 4613 y(ments)h(the)g(next)g
(scan)g(of)f(the)h(collector)g(itself,)h(ef)o(fectively)d(batching)i(pointer)
g(assign\177)523 4713 y(ments.)666 4851 y(The)21 b(collector)g(is)g(composed)
g(of)g(thr)o(ee)f(sub\177algorithms:)1934 5147 y(8)p eop
%%Page: 9 9
9 8 bop 627 614 a Fo(1.)41 b(Collecting)21 b(a)f(single)i(r)o(eplica)d(of)i
(a)f(single)i(cluster)f(on)g(a)f(single)i(site,)627 780 y(2.)41
b(Collecting)21 b(a)f(gr)o(oup)h(of)g(clusters)g(on)g(a)f(single)i(site,)627
946 y(3.)41 b(Collecting)19 b(the)g(multiple,)g(possibly)h(incoher)o(ent,)f
(r)o(eplicas)f(of)g(a)h(single)g(cluster)g(at)731 1046 y(all)h(its)h(sites.)
523 1251 y(W)-8 b(e)18 b(will)g(explain)f(each)g(of)h(these)g
(sub\177algorithms)g(and)f(ar)o(gue)g(their)g(corr)o(ectness,)h(while)523
1351 y(also)23 b(justifying)i(the)e(design)h(decisions)g(listed)f(above.)37
b(The)23 b(\034rst)h(two)f(sub\177algorithms)523 1450 y(ar)o(e)j(quite)j
(simple)f(and)f(will)i(be)e(detailed)g(next.)50 b(The)28 b(last)g(one)g(will)
g(be)g(explained)f(in)523 1550 y(Section)21 b(4.)666 1688 y(Our)34
b(algorithm)h(is)g(a)f(hybrid)g(of)g(tracing)g(and)g(counting:)58
b(\(i\))34 b(It)g Fl(traces)g Fo(clusters)523 1788 y(within)18
b(gr)o(oups)f(limited)g(by)f(what)h(is)g(economically)h(feasible.)27
b(Speci\034cally)-9 b(,)17 b(trace)f(stops)523 1888 y(when)h(it)g(would)g(r)o
(equir)o(e)f(input\177output)h(or)f(network)i(or)e(lock)h(traf)o(\034c.)27
b(T)-7 b(race)15 b(gr)o(oups)i(ar)o(e)523 1987 y(dif)o(fer)o(ent)j(at)i(each)
g(site)h(and)f(change)g(dynamically)-9 b(.)34 b(\(ii\))22 b(The)h(algorithm)g
(uses)f Fl(r)o(efer)o(ence)523 2087 y(counting)14 b Fo(\(via)g(the)h(scions,)
i(at)d(the)h(cluster)g(and)f(gr)o(oup)h(boundary\))f(when)h(tracing)g(would)
523 2186 y(be)20 b(too)i(expensive.)523 2468 y Fm(3.3)99 b(Scanning)25
b(a)g(single)g(replica)g(at)g(a)g(single)g(site)523 2665 y
Fo(A)k(particular)f(r)o(eplica)f(of)j(a)e(cluster)h(can)g(be)g(scanned)g(on)g
(its)h(site,)h(independently)e(of)523 2764 y(other)21 b(clusters)g(and)f
(independently)h(of)g(r)o(emote)f(versions)i(of)e(the)h(same)g(cluster)-6
b(.)666 2903 y(The)20 b(in\177list)g(pr)o(esented)e(in)i(Section)g(2.4)e
(identi\034es)i(all)g(the)f(pointers)i(that)e(r)o(each)f(into)523
3002 y(a)33 b(cluster)-6 b(.)69 b(Ignoring)36 b(for)d(a)h(short)g(while)h
(concurr)o(ent)f(updates,)i(it)e(is)g(safe)f(to)i(scan,)523
3102 y(by)28 b(considering)g(the)g(in\177list)h(as)e(its)h(r)o(oot)g(set.)50
b(This)29 b(is)f(illustrated)f(in)h(Figur)o(e)f(2.)50 b(Such)523
3202 y(a)31 b(collection)i(is)f(complete)g(w)-8 b(.r)i(.t.)62
b(the)32 b(cluster)-6 b(,)34 b Fl(i.e.,)g Fo(it)d(will)i(deallocate)d(any)i
(cycle)f(of)523 3301 y(garbage)f(that)h(is)h(entir)o(ely)f(within)h(the)g
(cluster)-6 b(.)61 b(However)31 b(it)g(is)h(conservative)f(w)-8
b(.r)i(.t.)523 3401 y(other)31 b(clusters,)j(since)d(it)g(can)g(not)h
(deallocate)d(a)i(cycle)g(of)g(garbage)e(that)i(cr)o(osses)g(the)523
3500 y(cluster)20 b(boundary;)f(thus,)i(the)e(in\177list)i(serves)e(as)g(a)h
(r)o(efer)o(ence)d(counter)j(for)f(inter)o(\177cluster)523
3600 y(r)o(efer)o(ences.)666 3739 y(Her)o(e)e(is)h(how)h(a)e(trace)g(pr)o
(oceeds.)28 b(Any)18 b(object)g(pointed)g(fr)o(om)g(the)g(in\177list)h(is)f
(marked)523 3838 y(r)o(eachable.)69 b(An)34 b(object)h(inside)f(the)h
(cluster)-6 b(,)37 b(pointed)e(fr)o(om)f(a)g(r)o(eachable)e(object,)38
b(is)523 3938 y(itself)f(marked)f(r)o(eachable.)77 b(If)36
b(a)h(r)o(eachable)e(object)i(points)h(outside)f(the)g(cluster)-6
b(,)41 b(a)523 4037 y(corr)o(esponding)32 b(stub)f(is)h(allocated)e(in)i(the)
g(out\177list)g(\(with)f(no)h(attempt)f(to)h(mark)f(the)523
4137 y(pointed\177to)22 b(object\).)34 b(The)23 b(r)o(esult)e(of)h(the)h
(walk)f(is)g(a)g(r)o(eachable\177set)e(and)i(a)f(new)i(out\177list.)523
4237 y(Any)15 b(objects)f(not)i(in)e(the)h(r)o(eachable\177set)d(can)i(be)g
(deallocated)f(locally;)k(the)e(cluster)f(owner)523 4336 y(may)21
b(safely)f(r)o(eallocate)f(a)h(deallocated)g(object.)666 4475
y(The)c(new)h(out\177list)g(is)f(compar)o(ed)f(with)i(the)g(one)f(r)o
(esulting)h(fr)o(om)e(the)i(pr)o(evious)f(scan.)523 4574 y(Stubs)h(that)h
(didn't)g(pr)o(eviously)f(exist)h(indicate)f(that)g(a)h(new)f(inter)o
(\177cluster)g(r)o(efer)o(ence)e(has)523 4674 y(been)23 b(cr)o(eated;)f(the)i
(collector)f(sends)h(a)f Fh(create)g Fo(message)g(to)g(the)h(\(owner)f(of)g
(the\))g(tar)o(get)523 4774 y(cluster)e(so)g(that)g(it)g(can)f(cr)o(eate)f
(the)i(corr)o(esponding)g(scion.)1934 5147 y(9)p eop
%%Page: 10 10
10 9 bop 1363 2263 a @beginspecial @setspecial
%%BeginDocument: F2-collect-single.ps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-4.0 211.0 translate 0.900 -0.900 scale
0.500 setlinewidth
n 25 96 16 16 0 360 DrawEllipse gs col-1 s gr
n 62 167 16 16 0 360 DrawEllipse gs col-1 s gr
n 85 85 16 16 0 360 DrawEllipse gs col-1 s gr
n 112 136 16 16 0 360 DrawEllipse gs col-1 s gr
n 138 86 16 16 0 360 DrawEllipse gs col-1 s gr
1.000 setlinewidth
n 162 51 m 4 51 l  4 20 l  162 20 l  clp gs col-1 s gr
0.500 setlinewidth
n 86 85 m 123 85 l gs col-1 s gr
n 115.000 83.000 m 123.000 85.000 l 115.000 87.000 l gs 2 setlinejoin col-1 s gr
n 32 109 m 53 154 l gs col-1 s gr
n 51.429 145.905 m 53.000 154.000 l 47.805 147.596 l gs 2 setlinejoin col-1 s gr
n 81 133 m 81 133 l gs col-1 s gr
n 108 146 m 70 162 l gs col-1 s gr
n 78.149 160.739 m 70.000 162.000 l 76.597 157.052 l gs 2 setlinejoin col-1 s gr
n 110 134 m 91 104 l gs col-1 s gr
n 93.591 111.829 m 91.000 104.000 l 96.970 109.688 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
n 162 229 m 4 229 l  4 197 l  162 197 l  clp gs col-1 s gr
0.500 setlinewidth
	1 setlinecap [1 3.000000] 3.000000 setdash
n 162 194 m 162 58 l  4 58 l  4 194 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 139 90 m 120 123 l gs col-1 s gr
n 125.725 117.065 m 120.000 123.000 l 122.258 115.069 l gs 2 setlinejoin col-1 s gr
n 53 26 m 53 45 l  70 45 l  70 24 l  62 34 l  53 26 l gs col-1 s gr
n 16 26 m 16 45 l  35 45 l  35 24 l  25 34 l  16 26 l gs col-1 s gr
n 81 218 m 81 199 l  98 199 l  98 220 l  90 225 l  81 218 l gs col-1 s gr
n 23 220 m 23 200 l  42 200 l  42 221 l  32 225 l  23 220 l gs col-1 s gr
n 58 173 m 24 234 l gs col-1 s gr
n 29.642 227.986 m 24.000 234.000 l 26.148 226.038 l gs 2 setlinejoin col-1 s gr
n 68 173 m 101 234 l gs col-1 s gr
n 98.953 226.012 m 101.000 234.000 l 95.434 227.915 l gs 2 setlinejoin col-1 s gr
n 25 3 m 25 78 l gs col-1 s gr
n 27.000 70.000 m 25.000 78.000 l 23.000 70.000 l gs 2 setlinejoin col-1 s gr
n 62 5 m 62 149 l gs col-1 s gr
n 64.000 141.000 m 62.000 149.000 l 60.000 141.000 l gs 2 setlinejoin col-1 s gr
$F2psEnd
%%EndDocument
 @endspecial 2263 756 a Fu(scions)2285 2181 y(stubs)967 2446
y Fo(Figur)o(e)20 b(2:)29 b Fi(Collecting)22 b(a)e(single)i(r)o(eplica)d(of)i
(a)f(single)i(cluster)666 2709 y Fo(Pointer)34 b(updates)e(ar)o(e)g(not)i
(noticed)f(until)h(the)f(cluster)g(is)h(scanned)f(\(in)g(contrast)523
2809 y(to)24 b(concurr)o(ent)f(garbage)g(collectors)h(wher)o(e)f(the)g
(mutator)h(must)g(immediately)g(inform)523 2908 y(the)29 b(collector)g(of)g
(pointer)g(updates,)h(by)f(using)h(a)e(r)o(ead)g(or)h(write)g(barrier\),)g
(and)f(in)h(an)523 3008 y(arbitrary)16 b(or)o(der)-6 b(.)28
b(T)-8 b(o)18 b(ensur)o(e)f(safety)-9 b(,)17 b(all)g Fh(create)h
Fo(messages)f(ar)o(e)f(sent)i(befor)o(e)f(any)g Fl(delete)p
Fo(s.)666 3144 y(T)-8 b(o)25 b(see)f(why)h(this)g(is)f(important,)i(consider)
e(a)g(pointer)g Fh(x)g Fo(pointing)i(to)e(an)h(object)f Fh(A)p
Fo(,)523 3244 y(and)c(a)h(pointer)g Fh(y)p Fo(;)f(the)h(pr)o(ogram)f(assigns)
h(the)g(value)f(of)h Fh(x)f Fo(to)h Fh(y)p Fo(,)f(then)i(modi\034es)f
Fh(x)p Fo(,)f Fl(e.g.,)1646 3437 y Fh(y)j(:=)g(x;)g(x)f(:=)i(NULL)523
3630 y Fo(The)c(scan)h(could)f(discover)h(the)f(second)h(assignment)g
(earlier)f(than)g(the)h(\034rst.)30 b(Or)o(dering)523 3729
y(the)23 b(cr)o(eate)e(befor)o(e)g(the)i(delete)f(ensur)o(es)g(that)h(the)g
(tar)o(get)e Fh(A)i Fo(is)g(not)h(deallocated)d(pr)o(ema\177)523
3829 y(tur)o(ely)-9 b(,)29 b(even)f(if)g Fh(x)f Fo(contained)h(the)g(last)g
(pointer)h(to)f Fh(A)p Fo(.)g(W)-8 b(e)29 b(will)f(see)g(in)h(Section)f(4)f
(that)523 3929 y(deletes)20 b(may)h(be)f(further)h(delayed)e(in)i(the)g(case)
f(of)h(multiple)g(copies.)666 4065 y(A)k Fh(create)h Fo(message)f(is)h(sent)g
(asynchr)o(onously)-9 b(.)46 b(Since,)26 b(a)f(new)h(pointer)h(value)e(can)
523 4164 y(only)-9 b(,)15 b(either)e(point)g(to)g(a)g(locally\177cr)o(eated)g
(object,)j(or)d(be)g(a)g(copy)g(of)g(an)g(existing,)k(r)o(eachable)523
4264 y(pointer)-6 b(,)21 b(it)g(follows)h(that)e(the)h(tar)o(get)f(object)h
(will)g(not)h(be)e(collected)h(pr)o(ematur)o(ely)-9 b(.)666
4400 y(Stubs)33 b(that)g(have)g(disappear)o(ed)d(since)j(the)h(latest)f(scan)
f(indicate)h(that)g(an)g(inter)o(\177)523 4500 y(cluster)28
b(r)o(efer)o(ence)d(no)j(longer)h(exists.)51 b(A)27 b Fh(delete)i
Fo(message)f(is)g(sent,)i(asynchr)o(onously)-9 b(,)523 4599
y(in)22 b(or)o(der)f(to)h(r)o(emove)f(the)h(corr)o(esponding)g(scion)h(in)f
(the)g(tar)o(get)f(cluster)-6 b(.)33 b(T)-8 b(o)22 b(avoid)f(race)523
4699 y(conditions,)28 b(no)f(delete)e(message)g(is)h(sent)h(until)f(all)g
(the)g(cr)o(eate)e(messages)i(have)f(been.)523 4799 y(Furthermor)o(e,)f(in)g
(the)g(case)f(of)h(a)f(r)o(eplicated)f(cluster)-6 b(,)24 b(a)f(delete)g
(message)h(may)g(need)f(to)523 4898 y(be)d(delayed)g(even)h(further)f(\(see)g
(Section)h(4\).)1914 5147 y(10)p eop
%%Page: 11 11
11 10 bop 666 614 a Fo(The)25 b(collector)f(r)o(uns)i(as)e(an)g(optimistic)i
(transaction:)38 b(if)24 b(the)h(collector)g(has)f(started)523
714 y(scanning)33 b(a)f(cluster)-6 b(,)34 b(and)e(an)g(application)g(later)f
(takes)h(a)g(write)g(lock)h(and)f(modi\034es)523 814 y(it,)39
b(then)c(the)g(collector)h(aborts)f(and)f(its)i(ef)o(fects)d(ar)o(e)h
(undone.)73 b(Thus,)39 b(the)c(collector)523 913 y(does)h(not)g(compete)g
(for)f(data)g(locks)h(with)h(the)f(application,)j(but)d(it)g(is)g(still)g
(safe)f(to)523 1013 y(ignor)o(e)27 b(concurr)o(ent)h(mutator)f(updates.)49
b(The)27 b(collector)h(is)g(trivially)f(safe)g(and)g(live;)j(it)523
1112 y(is)d(complete)g(with)g(r)o(espect)f(to)h(cycles)g(of)f(garbage)g
(enclosed)h(within)h(the)f(cluster)-6 b(,)27 b(but)523 1212
y(conservative)20 b(with)i(r)o(espect)e(to)h(possible)g(garbage)f(r)o(efer)o
(enced)e(fr)o(om)i(another)h(cluster)-6 b(.)666 1351 y(The)22
b(collector)g(may)g(choose)h(to)f(move)g(a)f(r)o(eachable)f(object)i(to)h(a)e
(dif)o(fer)o(ent)f(addr)o(ess)523 1450 y(\(possibly)34 b(in)f(a)g(dif)o(fer)o
(ent)d(cluster\).)66 b(T)-8 b(o)34 b(do)f(this,)j(the)d(collector)h(must)f
(take)g(a)f(write)523 1550 y(r)o(eserve)24 b(lock)i(\(r)o(ecall)e(that)h(the)
h(r)o(eserve)e(lock)i(pr)o(otects)f(the)h(addr)o(esses\);)f(which)i(it)f
(will)523 1649 y(only)d(do)g(if)f(this)h(site)g(is)g(the)f(owner)h(of)g(the)f
(cluster)g(and)g(no)h(application)g(alr)o(eady)d(has)j(a)523
1749 y(r)o(ead)e(or)j(a)e(write)i(r)o(eserve)d(lock.)38 b(This)23
b(ensur)o(es)g(that)g(the)h(collector)f(will)h(not)g(cause)e(any)523
1849 y(r)o(eserve)d(lock)j(traf)o(\034c)d(and)h(will)i(not)f(compete)g(for)f
(locks)i(with)f(the)g(application.)666 1987 y(When)32 b(an)g(object)g(has)f
(been)h(moved,)i(any)e(pointers)g(that)f(r)o(efer)o(ence)e(it)j(must)h(be)523
2087 y(patched.)h(This)23 b(would)g(entail)g(\034nding)g(the)g(clusters)f
(containing)i(these)f(pointers,)g(and)523 2186 y(taking)32
b(a)f(write)g(lock)h(on)g(them.)63 b(In)31 b(fact,)i(pointer)f(patching)g
(can)f(be)g(delayed)g(until)523 2286 y(such)k(sour)o(ce)e(clusters)h(ar)o(e)f
(next)h(mapped)f(and)h(swizzled.)2516 2256 y Fk(6)2618 2286
y Fo(Consistency)i(is)e(not)h(a)523 2386 y(pr)o(oblem)24 b(because)f(the)h
(collector)g(will)h(move)f(an)g(object)h(only)g(if)e(the)h(sour)o(ce)g
(cluster)g(is)523 2485 y(not)e(pr)o(otected)d(by)i(a)f(r)o(eserve)f(lock.)
1667 2455 y Fk(7)523 2767 y Fm(3.4)99 b(Group)25 b(scanning)g(of)g(multiple)g
(clusters)h(at)e(a)h(single)h(site)523 2963 y Fo(Just)d(as)f(the)h(collector)
g(can)g(scan)f(a)g(single)i(cluster)e(r)o(eplica)g(at)g(a)g(single)i(site,)f
(it)g(can)f(scan)523 3063 y(any)32 b(gr)o(oup)f(of)h(clusters)g(at)f(a)g
(single)i(site.)63 b(The)31 b(algorithm)i(is)f(exactly)f(the)h(same)g(as)523
3163 y(above,)23 b(except)f(that)i(scions)g(for)f(pointers)g(internal)h(to)f
(the)h(gr)o(oup)e(ar)o(e)g(not)i(consider)o(ed)523 3262 y(r)o(oots)k(\(this)h
(is)g(easy)e(to)i(check)f(because)f(a)h(scion)h(identi\034es)g(its)f(pr)o
(edecessor)f(cluster\),)523 3362 y(and)22 b(that)h(scanning)h(continues)g
(acr)o(oss)e(cluster)h(boundaries,)g(as)g(long)h(as)e(the)h(gr)o(oup)g(is)523
3462 y(not)f(exited.)29 b(Figur)o(e)20 b(3)g(shows)i(an)f(example)f(gr)o(oup)
g(of)h(two)g(clusters.)666 3600 y(A)g(gr)o(oup)g(will)h(contain)g(only)h
(clusters)e(that)h(ar)o(e)e(not)i(write\177locked)f(by)g(an)h(applica\177)523
3700 y(tion.)31 b(As)21 b(above,)f(a)h(collection)h(aborts)f(if)f(the)h
(application)g(modi\034es)h(a)e(cluster)h(that)g(has)523 3799
y(alr)o(eady)13 b(been)j(scanned.)27 b(This)16 b(ensur)o(es)f(that)g(the)h
(collector)f(does)h(not)g(compete)f(with)h(the)523 3899 y(application)j
(locks.)30 b(For)20 b(the)g(same)f(r)o(easons)g(as)h(the)f(single\177gr)o
(oup)h(case,)f(the)g(algorithm)523 3999 y(is)h(trivially)g(corr)o(ect.)29
b(Gr)o(oup)19 b(collection)i(is)f(complete)g(w)-8 b(.r)i(.t.)20
b(clusters)g(in)g(the)g(gr)o(oup,)g Fl(i.e.,)523 4098 y Fo(a)i(cycle)f(of)h
(garbage,)f(possibly)i(cr)o(ossing)g(cluster)f(boundaries,)g(but)g(r)o
(emaining)g(within)523 4198 y(the)f(gr)o(oup,)f(will)i(be)e(collected.)30
b(It)20 b(is)h(conservative)g(w)-8 b(.r)i(.t.)20 b(clusters)h(not)g(in)h(the)
f(gr)o(oup.)p 523 4274 1146 4 v 614 4330 a Fj(6)643 4354 y
Fp(Since)15 b(the)f(\034rst)h(version)f(of)i(Lar)o(chant\177RDOSS)f(does)f
(not)h(swizzle,)h(it)f(follows)i(that)d(its)h(garbage)f(collector)523
4433 y(doesn't)i(move)g(objects)g(either)-5 b(.)614 4491 y
Fj(7)643 4514 y Fp(Lar)o(chant\177BMX)11 b([6)q(,)h(5])h(does)f(not)g(have)g
(r)o(eserve)g(locks.)24 b(Like)12 b(any)g(update,)g(patch)h(consistency)g(is)
g(ensur)o(ed)523 4593 y(by)j(the)g(fact)h(that)f(only)h(the)e(owner)i(of)g
(an)g(object)f(can)h(move)f(it.)1914 5147 y Fo(11)p eop
%%Page: 12 12
12 11 bop 928 2293 a @beginspecial @setspecial
%%BeginDocument: F3-collect-group.ps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
0.0 211.0 translate 0.900 -0.900 scale
0.500 setlinewidth
n 96 201 m 96 220 l gs col-1 s gr
n 114 201 m 114 220 l gs col-1 s gr
n 114 220 m 105 225 l gs col-1 s gr
n 96 201 m 114 201 l gs col-1 s gr
n 96 220 m 105 225 l gs col-1 s gr
n 6 5 m 6 23 l gs col-1 s gr
n 23 5 m 23 23 l gs col-1 s gr
n 23 23 m 14 28 l gs col-1 s gr
n 6 5 m 23 5 l gs col-1 s gr
n 6 23 m 14 28 l gs col-1 s gr
n 37 91 14 14 0 360 DrawEllipse gs col-1 s gr
n 93 60 14 14 0 360 DrawEllipse gs col-1 s gr
n 140 60 14 14 0 360 DrawEllipse gs col-1 s gr
n 122 141 14 14 0 360 DrawEllipse gs col-1 s gr
n 80 165 14 14 0 360 DrawEllipse gs col-1 s gr
n 89 72 m 89 72 l gs col-1 s gr
n 122 143 m 93 72 l gs col-1 s gr
n 94.173 80.162 m 93.000 72.000 l 97.877 78.650 l gs 2 setlinejoin col-1 s gr
n 140 61 m 126 128 l gs col-1 s gr
n 129.594 120.578 m 126.000 128.000 l 125.679 119.760 l gs 2 setlinejoin col-1 s gr
n 15 28 m 31 78 l gs col-1 s gr
n 30.467 69.771 m 31.000 78.000 l 26.657 70.990 l gs 2 setlinejoin col-1 s gr
n 41 105 m 73 151 l gs col-1 s gr
n 70.073 143.291 m 73.000 151.000 l 66.790 145.575 l gs 2 setlinejoin col-1 s gr
n 93 60 m 126 60 l gs col-1 s gr
n 118.000 58.000 m 126.000 60.000 l 118.000 62.000 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 164 113 m 0 113 l  0 41 l  164 41 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 219 234 m 219 234 l  219 234 l  219 234 l  clp gs col-1 s gr
n 120 144 m 120 144 l gs col-1 s gr
n 122 141 m 94 158 l gs col-1 s gr
n 101.876 155.558 m 94.000 158.000 l 99.800 152.139 l gs 2 setlinejoin col-1 s gr
n 86 178 m 104 201 l gs col-1 s gr
n 100.645 193.467 m 104.000 201.000 l 97.495 195.933 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 164 189 m 0 189 l  0 118 l  164 118 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 165 230 m 165 194 l  0 194 l  0 230 l  clp gs col-1 s gr
n 165 35 m 165 -1 l  0 -1 l  0 35 l  clp gs col-1 s gr
n 242 41 m
	245.457 40.831 246.957 40.831 248 41 curveto
	249.467 41.238 252.722 41.722 254 43 curveto
	255.278 44.278 255.762 47.533 256 49 curveto
	256.715 53.406 256.000 63.672 256 68 curveto
	256.000 74.151 256.000 88.849 256 95 curveto
	256.000 98.873 253.827 107.653 256 112 curveto
	256.639 113.278 258.868 114.531 260 115 curveto
	261.601 115.663 267.020 115.725 267 116 curveto
	266.983 116.233 262.457 115.514 261 116 curveto
	259.786 116.405 257.639 117.722 257 119 curveto
	253.804 125.392 257.000 138.305 257 144 curveto
	257.000 150.151 257.000 164.849 257 171 curveto
	257.000 173.278 257.729 178.594 257 181 curveto
	256.737 181.868 255.571 183.377 255 184 curveto
	253.986 185.106 251.564 187.451 250 188 curveto
	249.023 188.343 246.000 188.000 246 188 curveto
	246.000 188.000 246.250 188.000 247 188 curveto
gs col-1 s gr
/Times-Roman findfont 12.00 scalefont setfont
187 22 m 
gs 1 -1 scale (Group stubs) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
189 80 m 
gs 1 -1 scale (Cluster 1) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
186 146 m 
gs 1 -1 scale (Cluster 2) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
189 216 m 
gs 1 -1 scale (Group scions) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
274 120 m 
gs 1 -1 scale ( Trace group) col-1 show gr
$F2psEnd
%%EndDocument
 @endspecial 963 2476 a Fo(Figur)o(e)20 b(3:)29 b Fi(Collecting)22
b(a)e(gr)o(oup)h(of)g(clusters)f(at)h(a)f(single)i(site)523
2749 y Fm(3.5)99 b(Group)25 b(heuristics)523 2945 y Fo(The)k(signi\034cance)g
(of)f(gr)o(oup)g(scanning)i(is)e(that)h Fl(any)f(arbitrary)h(subset)g(of)g
(the)f(persistent)523 3045 y(memory)17 b(can)g(be)h(scanned,)g
Fo(on)g(a)f(single)h(site,)h(independently)e(of)h(the)f(r)o(est)g(of)g(the)h
(memory)-9 b(.)523 3145 y(The)22 b(choice)g(of)g(a)g(gr)o(oup)f(can)h(only)h
(be)e(heuristic,)i(and)e(should)i(maximize)f(the)g(amount)523
3244 y(of)f(garbage)e(collected)i(while)g(minimizing)i(the)d(cost.)666
3383 y(W)-8 b(e)25 b(will)g(use)g(the)g(locality\177based)e(heuristics)j(of)e
(a)g(gr)o(oup)h(of)f(all)h(the)g(clusters)f(that)523 3482 y(ar)o(e)k(cached)h
(on)i(the)e(site)h(at)g(the)g(time)g(the)g(collector)g(happens)f(to)h(r)o
(un,)j(except)c(those)523 3582 y(curr)o(ently)k(being)g(written)h(by)f(an)g
(application.)67 b(This)34 b(heuristics)g(avoids)f(all)g(input\177)523
3682 y(output)28 b(costs,)h(and)e(minimizes)h(aborts.)49 b(Furthermor)o(e)27
b(ther)o(e)g(is)g(no)h(lock)g(traf)o(\034c)e(cost)523 3781
y(since)21 b(any)g(locks)g(ar)o(e)f(taken)g(only)i(if)f(cached)e(locally)-9
b(.)666 3920 y(These)29 b(heurisitics)h(do)g(not)g(collect)f(cycles)h(of)f
(garbage)f(that)i(r)o(eside)e(partially)h(on)523 4019 y(disk,)d(on)g(another)
g(server)-6 b(,)25 b(or)g(in)h(a)f(cluster)g(that)g(is)h(actively)f(used)g
(by)g(applications)g(\(a)523 4119 y(\020hot)30 b(spot\021\).)56
b(Collecting)31 b(such)f(a)f(cycle)h(involves)g(costs)h(that)f(need)f(to)h
(be)g(balanced)523 4219 y(against)e(the)h(expected)e(gain.)53
b(A)29 b(cluster)f(swapped)g(to)h(disk)f(has)h(not)g(been)f(accessed)523
4318 y(r)o(ecently)-9 b(,)20 b(so)h(it)g(has)g(a)f(low)i(pr)o(obability)e(of)
h(containing)h(new)f(garbage.)666 4457 y(The)g(following)i(strategy)e(theor)o
(etically)g(collects)h(all)f(cycles)g(of)g(garbage)f(that)h(span)523
4556 y(any)14 b(set)g(of)g(clusters)g(small)g(enough)g(to)g(\034t)g(in)g
(some)g(server:)26 b(r)o(epeatedly)14 b(cache)g(a)g(random)523
4656 y(subset)24 b(of)g(clusters,)g(and)f(collect)h(it)g(as)g(a)f(gr)o(oup.)
39 b(While)24 b(theor)o(etically)f(complete,)i(this)523 4756
y(strategy)37 b(is)g(extr)o(emely)g(inef)o(\034cient.)78 b(This)38
b(r)o(esult)e(does)i(tell)f(us)g(however)g(that)h(for)523 4855
y(completeness,)21 b(a)f(heurisitics)i(should)g(contain)f(a)f(stochastic)h
(component.)1914 5147 y(12)p eop
%%Page: 13 13
13 12 bop 523 1649 a @beginspecial @setspecial
%%BeginDocument: F4-race-concurrent.ps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
0.0 144.0 translate 0.900 -0.900 scale
0.500 setlinewidth
n 13 39 m 13 39 l gs col-1 s gr
n 29 83 m 51 134 l gs col-1 s gr
n 49.668 125.862 m 51.000 134.000 l 45.995 127.446 l gs 2 setlinejoin col-1 s gr
n 20 45 m 27 71 l gs col-1 s gr
n 26.851 62.755 m 27.000 71.000 l 22.989 63.795 l gs 2 setlinejoin col-1 s gr
n 84 43 m 91 68 l gs col-1 s gr
n 90.769 59.757 m 91.000 68.000 l 86.917 60.836 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 55 99 m 4 99 l  4 61 l  55 61 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
n 122 99 m 71 99 l  71 61 l  122 61 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
n 78 160 m 27 160 l  27 122 l  78 122 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 272 39 m 272 39 l gs col-1 s gr
n 279 45 m 286 71 l gs col-1 s gr
n 285.851 62.755 m 286.000 71.000 l 281.989 63.795 l gs 2 setlinejoin col-1 s gr
n 343 43 m 350 68 l gs col-1 s gr
n 349.769 59.757 m 350.000 68.000 l 345.917 60.836 l gs 2 setlinejoin col-1 s gr
n 351 85 m 317 134 l gs col-1 s gr
n 323.204 128.567 m 317.000 134.000 l 319.917 126.287 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 314 99 m 263 99 l  263 61 l  314 61 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
n 381 99 m 330 99 l  330 61 l  381 61 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
n 337 160 m 286 160 l  286 122 l  337 122 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
/Times-Bold findfont 12.00 scalefont setfont
307 26 m 
gs 1 -1 scale (After) col-1 show gr
$F2psEnd
%%EndDocument
 @endspecial 1175 1409 a Fu(C3)1400 861 y(C2)523 854 y(C1)1235
1064 y(y)725 1056 y(x)898 1521 y(A)2465 854 y(C1)2668 1056
y(x)3342 861 y(C2)3177 1064 y(y)2840 1521 y(A)3117 1409 y(C3)688
644 y Fm(Before)749 b(Execute)1738 1139 y Fv(f)27 b Ff(y)h(:=)f(x)1738
1364 y Fe(||)d Fu(GC)1738 1251 y Fe(||)g Ff(x)k(:=)f(NULL)1738
1499 y Fv(g)523 1831 y Fo(Figur)o(e)c(4:)34 b Fi(Possible)24
b(race)e(conditions)i(with)g(concurr)o(ent)f(r)o(ead\177write\177scans)e(of)i
(a)f(r)o(epli\177)523 1931 y(cated)e(cluster)-6 b(.)666 2182
y Fo(W)e(e)29 b(plan)f(to)h(implement)g(only)h(the)e(locality\177based)g
(heuristic)h(as)f(a)g(\034rst)h(shot.)54 b(If)523 2281 y(experimental)20
b(r)o(esults)h(mandate,)e(we)i(will)h(explor)o(e)d(others.)523
2606 y Fn(4)116 b(Collecting)27 b(the)i(multiple)f(copies)g(of)h(a)g(cached)g
(cluster)523 2850 y Fm(4.1)99 b(Garbage)25 b(collection)h(and)f(incoherent)f
(replicas)523 3047 y Fo(The)c(simple)h(technique)h(of)e(avoiding)h(concurr)o
(ent)f(mutator)g(updates,)g(by)g(r)o(unning)i(the)523 3146
y(collector)e(as)f(an)g(optimistic)h(transaction,)g(does)f(not)h(work)g(well)
g(if)f(r)o(eplicas)f(of)i(a)e(cluster)523 3246 y(ar)o(e)13
b(pr)o(esent)h(at)g(multiple)h(storage)f(servers.)27 b(Since)14
b(we)g(do)h(not)g(assume)f(coher)o(ent)g(copies,)523 3346 y(the)24
b(collector)g(could)h(observe)e(some)i(pointer)f(value)g(on)g(one)h(site,)f
(while)h(the)f(mutator)523 3445 y(has)d(assigned)g(a)f(dif)o(fer)o(ent)f
(value)h(on)h(another)g(site.)666 3584 y(Let)g(us)g(illustrate)g(this)h(pr)o
(oblem)f(with)h(an)f(example)f(\(see)g(Figur)o(e)h(4\).)30
b(Imagine)21 b(that)523 3683 y(pointer)e Fh(x)f Fo(in)g(cluster)h
Fh(C1)f Fo(points)h(to)g(object)g Fh(A)f Fo(in)h(cluster)g
Fh(C3)p Fo(.)29 b(An)18 b(application)g(pr)o(ogram)523 3783
y(at)23 b(site)g Fh(S1)h Fo(assigns)f(NULL)f(to)i Fh(x)p Fo(.)36
b(Then)24 b(the)f(collector)g(of)g(site)g Fh(S1)h Fo(r)o(uns.)37
b(Site)23 b Fh(S1)h Fo(is)f(the)523 3883 y(owner)e(of)g Fh(C1)p
Fo(.)666 4021 y(Concurr)o(ently)-9 b(,)15 b(another)f(application)g(pr)o
(ogram)g(assigns)h(pointer)g Fh(y)e Fo(\(within)i(cluster)523
4121 y Fh(C2)p Fo(\))f(with)h(the)f(value)f(of)h Fh(x)p Fo(,)h(as)e(such:)27
b Fh(y)c(:=)g(x)p Fo(.)k(Then)15 b(the)f(collector)g(r)o(uns)h(at)e(sites)i
Fh(S2)f Fo(and)g Fh(S3)523 4220 y Fo(\(the)21 b(owner)g(sites)h(of)e
Fh(C2)h Fo(and)g Fh(C3)p Fo(,)g(r)o(espectively\).)29 b(T)-8
b(o)21 b(make)g(the)g(example)f(inter)o(esting,)523 4320 y(we)h(suppose)g
(that)g(the)g(assignment)h(to)g Fh(y)e Fo(is)h(or)o(der)o(ed)e(befor)o(e)h
(the)h(assignment)h(to)f Fh(x)p Fo(,)g Fl(i.e.,)523 4420 y
Fh(y)f Fo(now)i(points)g(to)f(object)g Fh(A)p Fo(.)666 4558
y(When)e(the)h(collector)f(r)o(uns)h(at)e(each)h(site,)g(site)g
Fh(S1)h Fo(sends)f(a)f Fh(delete)23 b(\(C1,)e(A\))e Fo(message)523
4658 y(to)33 b Fh(S3)p Fo(,)k(and)32 b(site)h Fh(S2)h Fo(sends)f
Fh(create)i(\(C2,)j(A\))p Fo(,)33 b(also)g(to)g Fh(S3)p Fo(.)67
b(However)-6 b(,)35 b(in)f(an)e(asyn\177)523 4757 y(chr)o(onous)21
b(system,)f(a)g(message)g(can)f(be)h(delayed)e(inde\034nitely)-9
b(,)21 b(so)f(the)g Fh(delete)i Fo(could)e(be)523 4857 y(r)o(eceived)j(befor)
o(e)h(the)i Fh(create)p Fo(,)f(with)h(catastr)o(ophic)e(r)o(esults.)43
b(\(W)-8 b(e)25 b(will)h(call)f(this)h(a)e(\020fast)1914 5147
y(13)p eop
%%Page: 14 14
14 13 bop 684 1656 a @beginspecial @setspecial
%%BeginDocument: F5-timeline-slow.ps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-17.0 174.0 translate 0.900 -0.900 scale
0.500 setlinewidth
n 54 79 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 127 81 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 208 81 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 97 131 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 130 131 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
	[5.000000] 0 setdash
n 311 131 5 5 0 360 DrawEllipse gs col0 s gr
	[] 0 setdash
n 35 80 m 307 80 l  357 80 l gs col-1 s gr
n 349.000 78.000 m 357.000 80.000 l 349.000 82.000 l gs 2 setlinejoin col-1 s gr
n 38 131 m 307 131 l  357 131 l gs col-1 s gr
n 349.000 129.000 m 357.000 131.000 l 349.000 133.000 l gs 2 setlinejoin col-1 s gr
n 57 84 m 80 129 l gs 0.00 setgray fill gr
gs col-1 s gr
n 78.140 120.966 m 80.000 129.000 l 74.578 122.787 l gs 2 setlinejoin col-1 s gr
n 210 86 m 258 181 l gs 0.00 setgray fill gr
gs col-1 s gr
n 256.177 172.958 m 258.000 181.000 l 252.607 174.762 l gs 2 setlinejoin col-1 s gr
n 132 136 m 154 180 l gs 0.00 setgray fill gr
gs col-1 s gr
n 152.211 171.950 m 154.000 180.000 l 148.633 173.739 l gs 2 setlinejoin col-1 s gr
n 40 181 m 304 181 l  355 181 l gs col-1 s gr
n 347.000 179.000 m 355.000 181.000 l 347.000 183.000 l gs 2 setlinejoin col-1 s gr
n 163 80 m 163 80 l  188 130 l gs 0.00 setgray fill gr
gs col-1 s gr
n 186.211 121.950 m 188.000 130.000 l 182.633 123.739 l gs 2 setlinejoin col-1 s gr
	[5.000000] 0 setdash
n 145 154 m 327 177 l gs 0.00 setgray fill gr
gs col-1 s gr
	[] 0 setdash
n 319.314 174.013 m 327.000 177.000 l 318.812 177.981 l gs 2 setlinejoin col-1 s gr
	[5.000000] 0 setdash
n 312 133 m 335 179 l gs 0.00 setgray fill gr
gs col-1 s gr
	[] 0 setdash
n 333.211 170.950 m 335.000 179.000 l 329.633 172.739 l gs 2 setlinejoin col-1 s gr
$F2psEnd
%%EndDocument
 @endspecial 692 1589 a Fu(S3)684 1221 y(S2)692 839 y(S1)3046
1649 y(?)1614 1656 y(cr)n(eate)2386 1649 y(delete)2049 741
y(GC)1464 1124 y(GC)909 726 y Fo(C1)819 644 y Fu(r)n(eplicate)1854
1274 y(update)1194 1116 y(y)25 b(:=)h(x)1252 741 y(x)g(:=)f(NULL)523
1839 y Fo(Figur)o(e)j(5:)45 b Fi(T)-5 b(imeline)30 b(for)e(the)h(execution)g
(of)g(Figur)o(e)f(4,)i(showing)g(the)f(ef)o(fect)e(of)i(a)f(late)523
1938 y(cr)o(eate)19 b(or)i(a)f(slow)i(cr)o(eate)d(message.)523
2203 y Fo(delete)f(message\021.\))28 b(Furthermor)o(e,)19 b(since)g(the)f
(collectors)h(r)o(un)h(at)e(unpr)o(edictable)f(times,)523 2303
y(the)28 b Fh(delete)h Fo(could)e(actually)h(be)f(sent)h(befor)o(e)e(the)i
Fh(create)p Fo(,)h(with)f(equally)g(catastr)o(ophic)523 2402
y(r)o(esults.)41 b(\(This)24 b(will)i(be)e(called)f(a)h(\020early)g
(delete\021.\))39 b(These)25 b(conditions)h(ar)o(e)d(illustrated)523
2502 y(by)e(Figur)o(e)f(5.)666 2638 y(Figur)o(e)c(6)f(shows)i(an)f(obvious)h
(solution)g(to)g(this)f(pr)o(oblem:)27 b(serializing)16 b(cr)o(eates)f(with)
523 2738 y(r)o(espect)e(to)i(deletes.)27 b(In)15 b(this)h(example,)e
(scanning)i(a)e(cluster)g(as)g(soon)i(as)e(a)h(write)f(commits)523
2838 y(ensur)o(es)27 b(against)g(early)g(deletes.)49 b(The)27
b(cr)o(eate)f(message)h(is)h(sent)f(synchr)o(onously)-9 b(.)51
b(An)523 2937 y(update)24 b(message)g(is)h(also)g(synchr)o(onous,)h(fr)o(om)f
(a)f(site)g(performing)h(an)g(update)e(to)i(the)523 3037 y(cached)18
b(copies)i(of)f(the)g(cluster)-6 b(,)19 b(ensuring)h(that)f(a)g(delete)f
(message)h(is)h(not)g(sent)f(until)h(the)523 3136 y(corr)o(esponding)h
(update)f(has)h(been)f(applied)g(at)g(all)h(copies.)666 3273
y(This)h(simple)g(solution)h(is)e(undesirable,)g(because)f(it)i(slows)g(down)
g(the)f(application)523 3373 y(of)d(updates,)f(and)h(couples)g(the)g(GC)g(to)
g(the)g(coher)o(ence)f(pr)o(otocol.)29 b(It)18 b(should)g(be)g(possible)523
3472 y(to)24 b(impr)o(ove)f(this)i(situation)f(by)g(batching)g(some)g
(messages,)g(but)g(a)f(solution)i(that)f(uses)523 3572 y(only)e(asynchr)o
(onous)f(messages)g(will)h(have)e(better)g(performance.)523
3849 y Fm(4.2)99 b(An)24 b(asynchronous)i(solution)h(to)e(the)g(problem)523
4044 y Fo(An)g(asynchr)o(onous)g(solution)i(to)e(the)f(above)h(pr)o(oblem)f
(r)o(equir)o(es)g(avoiding)h(both)g(early)523 4144 y(deletes)g(and)g(fast)g
(delete)g(messages.)44 b(W)-8 b(e)26 b(will)g(look)g(at)g(these)f(two)h
(elements)g(in)g(turn;)523 4243 y(our)17 b(solution,)i(the)e(\020Union)g(of)f
(Partial)h(Out\177Lists\021)f(\(UPOL\))g(is)h(illustrated)f(by)h(Figur)o(es)g
(7)523 4343 y(and)j(8.)523 4604 y Fd(4.2.1)81 b(A)-6 b(voiding)20
b(early)g(deletes)523 4799 y Fo(W)-8 b(e)25 b(delay)f(the)g(sending)h(of)g(a)
f(delete)g(message)g(until)i(all)e(logically\177pr)o(eceding)g(cr)o(eates)523
4898 y(have)16 b(been)h(sent.)28 b(T)-8 b(o)18 b(do)e(this:)29
b(\(i\))16 b(we)g(delay)g(sending)i(deletes)e(until)h(the)g(corr)o(esponding)
1914 5147 y(14)p eop
%%Page: 15 15
15 14 bop 594 1716 a @beginspecial @setspecial
%%BeginDocument: F6-timeline-serial.ps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-4.0 144.0 translate 0.900 -0.900 scale
0.500 setlinewidth
n 41 40 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 80 94 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 177 40 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 177 40 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 269 40 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 335 94 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 96 94 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 41 40 m 69 91 l gs 0.00 setgray fill gr
gs col-1 s gr
n 67.952 87.012 m 69.000 91.000 l 66.198 87.975 l gs 2 setlinejoin col-1 s gr
n 27 145 m 308 145 l  362 145 l gs col-1 s gr
n 354.000 143.000 m 362.000 145.000 l 354.000 147.000 l gs 2 setlinejoin col-1 s gr
n 117 145 m 340 145 l gs 0.00 setgray fill gr
gs col-1 s gr
n 96 94 m 120 145 l gs 0.00 setgray fill gr
gs col-1 s gr
n 119.202 140.955 m 120.000 145.000 l 117.392 141.807 l gs 2 setlinejoin col-1 s gr
n 175 40 m 200 91 l gs 0.00 setgray fill gr
gs col-1 s gr
n 199.137 86.968 m 200.000 91.000 l 197.341 87.848 l gs 2 setlinejoin col-1 s gr
n 216 91 m 246 40 l gs 0.00 setgray fill gr
gs col-1 s gr
n 243.110 42.941 m 246.000 40.000 l 244.834 43.955 l gs 2 setlinejoin col-1 s gr
n 25 94 m 362 94 l gs 0.00 setgray fill gr
gs col-1 s gr
n 354.000 92.000 m 362.000 94.000 l 354.000 96.000 l gs 2 setlinejoin col-1 s gr
n 25 40 m 367 40 l gs 0.00 setgray fill gr
gs col-1 s gr
n 359.000 38.000 m 367.000 40.000 l 359.000 42.000 l gs 2 setlinejoin col-1 s gr
n 271 40 m 331 145 l gs 0.00 setgray fill gr
gs col-1 s gr
n 328.767 137.062 m 331.000 145.000 l 325.294 139.046 l gs 2 setlinejoin col-1 s gr
n 135 145 m 165 94 l gs 0.00 setgray fill gr
gs col-1 s gr
n 162.110 96.941 m 165.000 94.000 l 163.834 97.955 l gs 2 setlinejoin col-1 s gr
n 156 88 m 161 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 145 88 m 150 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 134 88 m 140 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 123 88 m 129 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 113 88 m 118 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 150 88 m 155 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 139 88 m 144 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 128 88 m 134 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 117 88 m 123 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 107 88 m 112 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 231 34 m 236 45 l gs 0.50 setgray fill gr
gs col-1 s gr
n 220 34 m 225 45 l gs 0.50 setgray fill gr
gs col-1 s gr
n 209 34 m 214 45 l gs 0.50 setgray fill gr
gs col-1 s gr
n 198 34 m 204 45 l gs 0.50 setgray fill gr
gs col-1 s gr
n 187 34 m 193 45 l gs 0.50 setgray fill gr
gs col-1 s gr
n 226 34 m 231 45 l gs 0.50 setgray fill gr
gs col-1 s gr
n 215 34 m 220 45 l gs 0.50 setgray fill gr
gs col-1 s gr
n 204 34 m 209 45 l gs 0.50 setgray fill gr
gs col-1 s gr
n 193 34 m 199 45 l gs 0.50 setgray fill gr
gs col-1 s gr
n 182 34 m 188 45 l gs 0.50 setgray fill gr
gs col-1 s gr
n 102 88 m 107 99 l gs 0.50 setgray fill gr
gs col-1 s gr
n 236 34 m 241 45 l gs 0.50 setgray fill gr
gs col-1 s gr
/Times-Roman findfont 12.00 scalefont setfont
161 83 m 
gs 1 -1 scale (ack) col-1 show gr
/Times-Roman findfont 12.00 scalefont setfont
242 29 m 
gs 1 -1 scale (ack) col-1 show gr
$F2psEnd
%%EndDocument
 @endspecial 2422 w Fu(delete)594 1649 y(S3)594 1229 y(S2)594
846 y(S1)654 651 y(r)n(eplicate)26 b(C1)1202 1056 y Ff(y:=x)1404
1709 y Fu(cr)n(eate)1082 1379 y(GC)2056 1304 y(update)1771
734 y Ff(x:=0)657 b Fu(GC)3031 1139 y(GC)523 1899 y Fo(Figur)o(e)21
b(6:)30 b Fi(T)-5 b(imeline)22 b(fr)o(om)f(Figur)o(e)g(5,)f(modi\034ed)i
(with)g(additional)f(synchr)o(onization)h(to)523 1998 y(delay)e(the)h(delete)
f(after)g(the)g(cr)o(eate.)523 2271 y Fo(update)26 b(has)h(been)f(applied)g
(at)g(all)h(the)g(copies)g(of)g(the)f(cluster)-6 b(,)28 b(and)f(\(ii\))f(we)h
(for)o(ce)e(any)523 2371 y(cr)o(eates)19 b(fr)o(om)i(some)g(site)g(to)g(be)g
(sent)g(befor)o(e)e(applying)i(any)g(update)f(at)g(that)h(site.)666
2509 y(T)-8 b(o)25 b(get)f(\(ii\),)g(we)g(scan)g(any)g(modi\034ed)g(clusters)
h(befor)o(e)d(accepting)i(updates)f(on)i(the)523 2609 y(same)c(cluster)-6
b(.)666 2747 y(Pr)o(operty)24 b(\(i\))g(could)h(be)f(achieved)f(by)i(getting)
g(an)f(acknowlegment)i(fr)o(om)e(the)g(co\177)523 2847 y(her)o(ence)17
b(layer;)i(but)f(this)h(is)f(not)h(necessary)-9 b(,)18 b(since)h(the)f
(necessary)g(information)h(alr)o(eady)523 2946 y(is)26 b(available)e(fr)o(om)
h(the)h(collector)-6 b(.)44 b(W)-8 b(e)26 b(stated)e(earlier)h(that)g(each)g
(copy)h(of)g(a)f(cluster)g(is)523 3046 y(collected)h(at)h(its)g(site,)h(and)e
(the)h(r)o(esults)f(ar)o(e)g(summarized)g(at)g(the)h(cluster)f(owner)-6
b(.)48 b(W)-8 b(e)523 3146 y(can)20 b(now)i(explain)f(pr)o(ecisely)f(what)g
(that)h(means.)666 3284 y(Each)k(cluster)g(copy)h(is)f(collected)h(accor)o
(ding)e(to)i(the)f(algorithm)i(in)f(Section)f(3.3)f(or)523
3384 y(Section)c(3.4,)e(cr)o(eating)g(a)h(new)h(out\177list,)g(the)g
Fl(Partial)f(Out\177List)g Fo(\(POL\))f(for)i(that)f(copy)-9
b(.)29 b(It)20 b(is)523 3483 y(partial)c(because)g(it)i(only)g(takes)e(into)i
(account)f(the)g(objects)h(r)o(eachable)d(at)i(that)g(site.)28
b(After)523 3583 y(the)21 b(collection,)h(each)e(Partial)h(Out\177List)g(is)g
(sent)g(to)h(the)f(owner)g(of)g(the)g(cluster)g(in)h(a)e(POL)523
3683 y(message.)666 3821 y(The)f(owner)f(collects)h(all)g(Partial)f
(Out\177Lists;)h(the)g(complete)f(out\177list)h(for)g(the)f(cluster)523
3921 y(is)27 b(just)h(the)f(union)h(of)f(the)g(most)h(r)o(ecent)e(Partial)g
(Out\177List)h(of)g(each)f(copy)-9 b(.)48 b(The)27 b(owner)523
4020 y(sends)17 b(a)e Fh(delete)j Fo(message)e(only)i(when)e(a)g(stub)h
(disappears)e(fr)o(om)h(the)g(complete)h(out\177list,)523 4120
y(and)j(a)h(non\177owner)g(never)g(sends)g(a)f Fh(delete)p
Fo(.)666 4258 y(This)30 b(works)g(because)e(of)h(thr)o(ee)g(pr)o(operties)f
(of)h(stubs:)47 b(\(i\))29 b(a)g(r)o(eachable)e(stub)j(can)523
4358 y(become)c(unr)o(eachable)f(at)g(any)i(site;)h(\(ii\))e(a)g(stub)g(that)
g(is)h(unr)o(eachable)d(at)i(all)g(sites)h(will)523 4458 y(never)d(become)f
(r)o(eachable;)h(and)f(\(iii\))h(only)h(the)f(owner)g(of)g(a)f(cluster)h(can)
g(make)g(a)f(new)523 4557 y(stub)e(appear)e(in)i(that)g(cluster)-6
b(.)666 4696 y(Pr)o(operty)18 b(\(i\))g(is)i(a)e(consequence)h(of)g(the)g
(transitivity)g(of)g(the)g(r)o(eachability)f(pr)o(operty)-9
b(.)523 4795 y(For)24 b(instance,)g(suppose)h(that)e(the)h(variable)f
Fh(x)g Fo(in)h(the)g(pr)o(evious)f(example)g(is)h(r)o(eachable)523
4895 y(fr)o(om)g(the)g(persistent)g(r)o(oot)g(only)h(thr)o(ough)g(pointer)f
Fh(z)g Fo(located)f(in)i(another)f(cluster)-6 b(,)24 b(say)1914
5147 y(15)p eop
%%Page: 16 16
16 15 bop 797 2612 a @beginspecial @setspecial
%%BeginDocument: F7a-union-before.ps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-2.0 205.0 translate 0.900 -0.900 scale
0.500 setlinewidth
	1 setlinecap [1 1.500000] 1.500000 setdash
n 217 58 m 208 58 l  208 42 l  217 42 l  clp gs 0.75 setgray fill gr
gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 1.500000] 1.500000 setdash
n 59 54 m 50 54 l  50 38 l  59 38 l  clp gs 0.75 setgray fill gr
gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 1.500000] 1.500000 setdash
n 117 192 m 108 192 l  108 176 l  117 176 l  clp gs 0.75 setgray fill gr
gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 1.500000] 1.500000 setdash
n 238 226 m 229 226 l  229 210 l  238 210 l  clp gs 0.75 setgray fill gr
gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 3.000000] 3.000000 setdash
n 229 207 m 237 207 l  237 192 l  229 192 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 202 164 m 202 164 l gs col-1 s gr
n 101 38 m 101 97 l gs col-1 s gr
n 101 97 m 32 97 l gs col-1 s gr
1.000 setlinewidth
n 53 97 m 53 110 l gs 1.00 setgray fill gr
gs col-1 s gr
n 55.000 102.000 m 53.000 110.000 l 51.000 102.000 l gs 2 setlinejoin col-1 s gr
0.500 setlinewidth
n 164 111 m 247 111 l gs col-1 s gr
n 164 35 m 164 111 l gs col-1 s gr
n 45 31 m 51 42 l gs 1.00 setgray fill gr
gs col-1 s gr
n 48.925 34.019 m 51.000 42.000 l 45.413 35.935 l gs 2 setlinejoin col-1 s gr
n 55 50 m 64 63 l gs 1.00 setgray fill gr
gs col-1 s gr
n 61.091 55.284 m 64.000 63.000 l 57.802 57.561 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
n 161 89 m 53 113 l gs 1.00 setgray fill gr
gs col-1 s gr
n 61.243 113.217 m 53.000 113.000 l 60.376 109.312 l gs 2 setlinejoin col-1 s gr
0.500 setlinewidth
n 210 52 m 202 65 l gs 1.00 setgray fill gr
gs col-1 s gr
n 207.896 59.235 m 202.000 65.000 l 204.489 57.139 l gs 2 setlinejoin col-1 s gr
n 202 34 m 209 45 l gs 1.00 setgray fill gr
gs col-1 s gr
n 206.392 37.177 m 209.000 45.000 l 203.018 39.324 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 185 57 m 193 57 l  193 42 l  185 42 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 180 35 m 187 46 l gs 1.00 setgray fill gr
gs col-1 s gr
n 184.392 38.177 m 187.000 46.000 l 181.018 40.324 l gs 2 setlinejoin col-1 s gr
n 190 52 m 199 65 l gs 1.00 setgray fill gr
gs col-1 s gr
n 196.091 57.284 m 199.000 65.000 l 192.802 59.561 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
n 185 111 m 160 142 l gs 1.00 setgray fill gr
gs col-1 s gr
n 166.579 137.028 m 160.000 142.000 l 163.465 134.517 l gs 2 setlinejoin col-1 s gr
0.500 setlinewidth
n 61 197 m 61 144 l  178 144 l  178 195 l gs col0 s gr
n 114 147 m 121 158 l gs 1.00 setgray fill gr
gs col-1 s gr
n 118.392 150.177 m 121.000 158.000 l 115.018 152.324 l gs 2 setlinejoin col-1 s gr
n 91 148 m 98 160 l gs 1.00 setgray fill gr
gs col-1 s gr
n 95.697 152.082 m 98.000 160.000 l 92.241 154.098 l gs 2 setlinejoin col-1 s gr
n 101 164 m 109 176 l gs 1.00 setgray fill gr
gs col-1 s gr
n 106.226 168.234 m 109.000 176.000 l 102.898 170.453 l gs 2 setlinejoin col-1 s gr
n 121 165 m 115 177 l gs 1.00 setgray fill gr
gs col-1 s gr
n 120.367 170.739 m 115.000 177.000 l 116.789 168.950 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
n 52 56 m 62 49 l gs 0.50 setgray fill gr
gs col0 s gr
n 51 52 m 63 53 l gs 0.50 setgray fill gr
gs col0 s gr
$F2psEnd
%%EndDocument
 @endspecial 2514 2327 a Fp(z)2649 2320 y Fc(cluster)16 b(not)i(cached)2649
2417 y(cluster)e(cached)2514 2417 y
 gsave 0 0 0 setrgbcolor
 Fp(x)2548 2417 y
 grestore
 2656 2612
a Fc(owner)2581 1337 y
 gsave 0 0 0 setrgbcolor
 Fp(GC)2679 1337 y
 grestore
 2521 2552 a Fp(y)2581
1240 y
 gsave 0 0 0 setrgbcolor
 Fb(y:=x;)2722 1240 y
 grestore
 2656 2552 a Fc(cluster)h(cached,)2581
1135 y Fp(S2)1689 1022 y Fm(Before)2047 1907 y Fp(cr)o(eate)f(\(C2,z\))1247
1442 y(z)1172 1277 y(x)2007 1720 y(PSL\(C2\)=)p Fa(f)p Fp(z)p
Fa(g)1015 1802 y
 gsave 0 0 0 setrgbcolor
 Fp(SL\(C1\)=)p Fa(f)p Fp(z)p Fa(g)1358 1802
y
 grestore
 2281 1450 a Fp(z)2356 1285 y(y)2184 1292 y
 gsave 0 0 0 setrgbcolor
 Fp(x)2218 1292
y
 grestore
 2014 1607 a Fp(PSL\(C1\)=)p Fa(f)p Fp(z)p Fa(g)1074 1262
y Fp(C1)2071 1255 y(C1)2431 1247 y(C2)1699 1720 y(PSL)797 1337
y
 gsave 0 0 0 setrgbcolor
 Fp(GC)895 1337 y
 grestore
 797 1135 a Fp(S1)797 1240 y
 gsave 0 0 0 setrgbcolor
 Fb(x:=0;)942
1240 y
 grestore
 2011 2380 a Fp(S3)1614 2290 y(z)1689 2132 y(y)1502 2140
y
 gsave 0 0 0 setrgbcolor
 Fp(x)1536 2140 y
 grestore
 1502 2267 a Fp(C3)1021 1592 y(PSL\(C1\)=)p
Fa(;)1037 4214 y @beginspecial @setspecial
%%BeginDocument: F7b-union-after.ps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-2.0 178.0 translate 0.900 -0.900 scale
0.500 setlinewidth
	1 setlinecap [1 1.500000] 1.500000 setdash
n 59 54 m 50 54 l  50 38 l  59 38 l  clp gs 0.75 setgray fill gr
gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 1.500000] 1.500000 setdash
n 117 192 m 108 192 l  108 176 l  117 176 l  clp gs 0.75 setgray fill gr
gs col-1 s gr
	[] 0 setdash 0 setlinecap
	1 setlinecap [1 1.500000] 1.500000 setdash
n 217 58 m 208 58 l  208 42 l  217 42 l  clp gs 0.75 setgray fill gr
gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 101 38 m 101 97 l gs col-1 s gr
n 202 164 m 202 164 l gs col-1 s gr
1.000 setlinewidth
n 53 97 m 53 110 l gs 1.00 setgray fill gr
gs col-1 s gr
n 55.000 102.000 m 53.000 110.000 l 51.000 102.000 l gs 2 setlinejoin col-1 s gr
0.500 setlinewidth
n 101 97 m 32 97 l gs col-1 s gr
n 61 197 m 61 144 l  178 144 l  178 195 l gs col0 s gr
1.000 setlinewidth
n 57 120 m 80 144 l gs 1.00 setgray fill gr
gs col-1 s gr
n 75.909 136.840 m 80.000 144.000 l 73.021 139.608 l gs 2 setlinejoin col-1 s gr
0.500 setlinewidth
n 45 31 m 51 42 l gs 1.00 setgray fill gr
gs col-1 s gr
n 48.925 34.019 m 51.000 42.000 l 45.413 35.935 l gs 2 setlinejoin col-1 s gr
n 164 35 m 164 111 l gs col-1 s gr
n 164 111 m 247 111 l gs col-1 s gr
n 210 52 m 202 65 l gs 1.00 setgray fill gr
gs col-1 s gr
n 207.896 59.235 m 202.000 65.000 l 204.489 57.139 l gs 2 setlinejoin col-1 s gr
n 202 34 m 209 45 l gs 1.00 setgray fill gr
gs col-1 s gr
n 206.392 37.177 m 209.000 45.000 l 203.018 39.324 l gs 2 setlinejoin col-1 s gr
	1 setlinecap [1 3.000000] 3.000000 setdash
n 185 57 m 193 57 l  193 42 l  185 42 l  clp gs col-1 s gr
	[] 0 setdash 0 setlinecap
n 180 35 m 187 46 l gs 1.00 setgray fill gr
gs col-1 s gr
n 184.392 38.177 m 187.000 46.000 l 181.018 40.324 l gs 2 setlinejoin col-1 s gr
n 190 52 m 199 65 l gs 1.00 setgray fill gr
gs col-1 s gr
n 196.091 57.284 m 199.000 65.000 l 192.802 59.561 l gs 2 setlinejoin col-1 s gr
n 55 50 m 64 63 l gs 1.00 setgray fill gr
gs col-1 s gr
n 61.091 55.284 m 64.000 63.000 l 57.802 57.561 l gs 2 setlinejoin col-1 s gr
n 121 165 m 115 177 l gs 1.00 setgray fill gr
gs col-1 s gr
n 120.367 170.739 m 115.000 177.000 l 116.789 168.950 l gs 2 setlinejoin col-1 s gr
n 114 147 m 121 158 l gs 1.00 setgray fill gr
gs col-1 s gr
n 118.392 150.177 m 121.000 158.000 l 115.018 152.324 l gs 2 setlinejoin col-1 s gr
n 91 148 m 98 160 l gs 1.00 setgray fill gr
gs col-1 s gr
n 95.697 152.082 m 98.000 160.000 l 92.241 154.098 l gs 2 setlinejoin col-1 s gr
n 101 164 m 109 176 l gs 1.00 setgray fill gr
gs col-1 s gr
n 106.226 168.234 m 109.000 176.000 l 102.898 170.453 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
n 161 89 m 53 113 l gs 1.00 setgray fill gr
gs col-1 s gr
n 61.243 113.217 m 53.000 113.000 l 60.376 109.312 l gs 2 setlinejoin col-1 s gr
n 102 75 m 164 75 l gs 1.00 setgray fill gr
gs col-1 s gr
n 156.000 73.000 m 164.000 75.000 l 156.000 77.000 l gs 2 setlinejoin col-1 s gr
n 97 173 m 109 158 l gs col-1 s gr
n 112 167 m 94 166 l gs col-1 s gr
n 52 56 m 62 49 l gs 0.50 setgray fill gr
gs col0 s gr
n 51 52 m 63 53 l gs 0.50 setgray fill gr
gs col0 s gr
$F2psEnd
%%EndDocument
 @endspecial 2821 3067 a
 gsave 0 0 0 setrgbcolor
 Fb(y:=x;)2962 3067 y
 grestore
 2821 3164 a
 gsave 0 0 0 setrgbcolor
 Fp(GC)2919
3164 y
 grestore
 2821 2962 a Fp(S2)1960 2849 y Fm(After)1487 3269 y Fp(z)1412
3104 y(x)2247 3547 y(PSL\(C2\)=)p Fa(f)p Fp(z)p Fa(g)2521 3277
y Fp(z)2596 3112 y(y)2424 3119 y
 gsave 0 0 0 setrgbcolor
 Fp(x)2458 3119 y
 grestore
 1314 3089
a Fp(C1)2311 3082 y(C1)2671 3074 y(C2)1939 3547 y(PSL)1037
3164 y
 gsave 0 0 0 setrgbcolor
 Fp(GC)1135 3164 y
 grestore
 1037 2962 a Fp(S1)1037 3067 y
 gsave 0 0 0 setrgbcolor
 Fb(x:=0;)1182
3067 y
 grestore
 2251 4207 a Fp(S3)1854 4116 y(z)1929 3959 y(y)1741 3967
y
 gsave 0 0 0 setrgbcolor
 Fp(x)1775 3967 y
 grestore
 1741 4094 a Fp(C3)1840 3277 y(pr)o(opagate)2275
3419 y(PSL\(C1\)=)p Fa(_)1542 3734 y Fp(delete)g(\(C1,z\))1261
3419 y(PSL\(C1\)=)p Fa(;)1289 3629 y
 gsave 0 0 0 setrgbcolor
 Fp(SL\(C1\)=)p Fa(;)1564
3629 y
 grestore
 523 4397 a Fo(Figur)o(e)23 b(7:)34 b Fi(Union)24 b(of)f(Partial)f
(Out\177Lists)i(solution,)h(befor)o(e)d(and)h(after)f(application)h(of)g(a)
523 4496 y(pointer)e(update.)1914 5147 y Fo(16)p eop
%%Page: 17 17
17 16 bop 538 1671 a @beginspecial @setspecial
%%BeginDocument: F8-timeline-upol.ps
/$F2psDict 200 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
/col8 {.68 .85 .9 setrgbcolor} bind def
/col9 {0 .39 0 setrgbcolor} bind def
/col10 {.65 .17 .17 setrgbcolor} bind def
/col11 {1 .51 0 setrgbcolor} bind def
/col12 {.63 .13 .94 setrgbcolor} bind def
/col13 {1 .75 .8 setrgbcolor} bind def
/col14 {.7 .13 .13 setrgbcolor} bind def
/col15 {1 .84 0 setrgbcolor} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y translate xrad yrad scale 0 0 1 startangle endangle arc
	savematrix setmatrix
	} def

	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
0 setlinecap 0 setlinejoin
-1.0 140.0 translate 0.900 -0.900 scale
0.500 setlinewidth
n 105 85 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 56 28 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 302 30 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 180 32 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 266 85 5 5 0 360 DrawEllipse gs 0.00 setgray fill gr
gs col-1 s gr
n 36 30 m 326 30 l  379 30 l gs col-1 s gr
n 371.000 28.000 m 379.000 30.000 l 371.000 32.000 l gs 2 setlinejoin col-1 s gr
n 40 138 m 322 138 l  377 138 l gs col-1 s gr
n 369.000 136.000 m 377.000 138.000 l 369.000 140.000 l gs 2 setlinejoin col-1 s gr
n 38 85 m 377 85 l gs 0.00 setgray fill gr
gs col-1 s gr
n 369.000 83.000 m 377.000 85.000 l 369.000 87.000 l gs 2 setlinejoin col-1 s gr
n 143 82 m 158 29 l gs 0.00 setgray fill gr
gs col-1 s gr
n 153.897 36.153 m 158.000 29.000 l 157.746 37.242 l gs 2 setlinejoin col-1 s gr
n 339 85 m 366 32 l gs 0.00 setgray fill gr
gs col-1 s gr
n 360.587 38.220 m 366.000 32.000 l 364.151 40.036 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
n 131 138 m 355 138 l gs 0.00 setgray fill gr
gs col-1 s gr
n 104 85 m 265 85 l gs col-1 s gr
n 281 30 m 299 30 l gs 0.00 setgray fill gr
gs col-1 s gr
n 105 85 m 131 138 l gs 0.00 setgray fill gr
gs col-1 s gr
n 129.272 129.937 m 131.000 138.000 l 125.681 131.699 l gs 2 setlinejoin col-1 s gr
0.500 setlinewidth
n 56 28 m 69 85 l gs 0.00 setgray fill gr
gs col-1 s gr
n 69.171 76.756 m 69.000 85.000 l 65.271 77.645 l gs 2 setlinejoin col-1 s gr
1.000 setlinewidth
n 302 30 m 354 139 l gs 0.00 setgray fill gr
gs col-1 s gr
n 352.360 130.918 m 354.000 139.000 l 348.750 132.641 l gs 2 setlinejoin col-1 s gr
n 266 83 m 283 30 l gs 0.00 setgray fill gr
gs col-1 s gr
n 278.652 37.007 m 283.000 30.000 l 282.461 38.229 l gs 2 setlinejoin col-1 s gr
0.500 setlinewidth
n 209 30 m 233 84 l gs 0.00 setgray fill gr
gs col-1 s gr
n 231.579 75.877 m 233.000 84.000 l 227.923 77.502 l gs 2 setlinejoin col-1 s gr
$F2psEnd
%%EndDocument
 @endspecial -112 x Fu(S3)538 1139 y(S2)538 741 y(S1)3245 951
y(POL)2737 666 y(GC)1785 644 y Ff(x:=0)3082 1671 y Fu(delete)1391
1641 y(cr)n(eate)2437 1289 y(GC)2107 1251 y(update)704 636
y(r)n(eplicate)25 b(C1)1655 1056 y(POL)2578 1079 y(POL)1245
1071 y(GC)1234 966 y Ff(y:=x;)523 1854 y Fo(Figur)o(e)18 b(8:)28
b Fi(T)-5 b(imeline)19 b(for)f(the)h(Union)g(of)f(Partial)g(Out\177Lists)g
(solution,)i(illustrating)f(asyn\177)523 1953 y(chr)o(onous)j(messages)e(and)
h(causal)f(or)o(dering.)523 2226 y Fh(C4)p Fo(.)76 b(The)36
b(application)g(r)o(unning)h(at)f(the)g(owner)h(of)f Fh(C4)g
Fo(can)g(modify)g Fh(z)p Fo(,)j(making)e Fh(x)523 2326 y Fo(unr)o(eachable,)
25 b(hence)g(the)h(stub)g(fr)o(om)f Fh(x)g Fo(to)h Fh(A)g Fo(is)g(also)f(unr)
o(eachable,)g(even)g(though)i(the)523 2425 y(cluster)21 b Fh(C1)g
Fo(containing)h Fh(x)e Fo(has)h(not)g(been)g(modi\034ed)g(at)f(that)h(site.)
666 2564 y(Pr)o(operty)f(\(ii\))h(is)g(by)g(de\034nition)g(of)g(garbage.)666
2702 y(Pr)o(operty)30 b(\(iii\))g(is)g(because)g(we)g(assume)g(that)g(only)h
(the)g(owner)g(of)f(a)f(cluster)i(can)523 2802 y(write)21 b(into)g(that)g
(cluster)-6 b(.)666 2940 y(Because)18 b(of)i(these)f(pr)o(operties,)g(and)g
(assuming)h(\(possibly)g(unr)o(eliable\))e(FIFO)i(com\177)523
3040 y(munication,)31 b(it)d(is)g(safe)f(for)h(the)g(owner)h(consider)f(only)
h(the)f(most)h(r)o(ecently\177r)o(eceived)523 3139 y(version)17
b(of)g(each)g(site's)g(Partial)f(Out\177List.)29 b(It)17 b(doesn't)g(matter)g
(how)g(old)g(it)g(is:)29 b(it)17 b(can)f(only)523 3239 y(err)24
b(on)h(the)f(side)g(of)g(conservativeness,)h Fl(i.e.,)g Fo(of)g(considering)g
(as)f(live)g(an)g(object)h(that)f(is)523 3339 y(not)e(r)o(eachable)c(any)j
(mor)o(e.)523 3603 y Fd(4.2.2)81 b(A)-6 b(voiding)20 b(fast)g(delete)523
3800 y Fo(A)f(car)o(eful)e(examination)j(of)f(Figur)o(e)f(8)h(shows)h(that)f
(the)h(POL)f(message)g(cr)o(eates)e(a)i(causal)523 3900 y(dependency)34
b(between)h(the)g(cr)o(eate)e(message)i(and)f(the)h(delete)f(message)h(\(the)
g(thick)523 3999 y(arr)o(ows)20 b(in)h(the)g(\034gur)o(e\).)29
b(Any)21 b(of)f(the)h(well\177known)h(techniques)g(for)e(causal)g(delivery)g
(of)523 4099 y(messages)e([2)o(])f(will)i(ther)o(efor)o(e)d(ensur)o(e)h(that)
g(the)h(cr)o(eate)e(message)i(will)g(not)g(be)g(over)o(come)523
4199 y(by)j(the)g(corr)o(esponding)g(delete.)666 4337 y(Since)37
b(Lar)o(chant\177RDOSS)f(r)o(uns)i(on)h(top)e(of)h(Isis,)k(we)c(simply)g
(send)g(the)f(cr)o(eate,)523 4437 y(POL,)27 b(and)g(delete)f(messages)h
(using)h(the)f(causal)g(communication)h(primitive)g Fh(cbcast)p
Fo(.)523 4536 y(Lar)o(chant\177BMX)g([6)o(,)i(5])g(does)g(not)h(depend)f(on)g
(Isis;)36 b(in)30 b(this)h(system,)j(we)c(use)g(piggy\177)523
4636 y(backing)21 b(to)g(implement)h(causality)-9 b(.)1914
5147 y(17)p eop
%%Page: 18 18
18 17 bop 523 614 a Fn(5)116 b(Conclusion)523 842 y Fo(The)21
b(pr)o(oblem)g(of)g(tracing)g(a)f(lar)o(ge\177scale)g(shar)o(ed)f
(distributed)i(stor)o(e)g(seems)g(intractable)523 942 y(at)28
b(\034rst)g(glance.)51 b(W)-8 b(e)28 b(have)f(shown)j(an)d(algorithm)i(that)f
(gives)g(an)g(appr)o(oximation)f(of)523 1042 y(the)c(global)f(trace,)g(with)h
(none)h(of)e(the)h(drawbacks.)34 b(This)23 b(algorithm)g(causes)f(no)h
(input\177)523 1141 y(output)f(nor)f(lock)h(traf)o(\034c.)30
b(It)21 b(opportunistically)h(scans)g(gr)o(oups)f(of)g(clusters,)g(accor)o
(ding)523 1241 y(to)k(a)g(locality\177based)f(heuristics.)43
b(The)25 b(algorithm)h(is)g(independent)e(of)h(any)g(particular)523
1340 y(coher)o(ence)14 b(management)h(\(it)g(does)g(not)h(assume)e(coher)o
(ent)h(memory\))g(but)g(does)g(assume)523 1440 y(a)g(single)i(writer)e(per)g
(cluster)-6 b(.)28 b(Ther)o(e)15 b(is)h(no)g(coor)o(dination)g(or)g(synchr)o
(onization)g(between)523 1540 y(the)35 b(application)f(pr)o(ograms)g
(\(mutators\))h(and)f(the)h(collector)-6 b(.)71 b(It)35 b(works)g(even)g
(with)523 1639 y(primitive)19 b(pr)o(ogramming)f(languages,)g(with)h(no)g
(language)f(or)h(compiler)f(changes)h(\(but)523 1739 y(small)i(pr)o
(ogramming)g(r)o(estrictions)g(ar)o(e)e(necessary\).)666 1877
y(W)-8 b(e)24 b(have)f(furthermor)o(e)g(shown)i(a)e(version)i(in)f(which)g
(all)g(collector)g(messages)g(ar)o(e)523 1977 y(asynchr)o(onous;)h(however)e
(this)h(version)f(either)g(r)o(ests)f(upon)i(or)f(simulates)h(a)e
(causally\177)523 2077 y(or)o(der)o(ed)d(communication)j(layer)-6
b(.)666 2215 y(W)e(e)30 b(explained)g(our)g(algorithm)h(in)g(the)f(context)g
(of)h(a)e(shar)o(ed)g(persistent)i(virtual)523 2315 y(memory)h(containing)h
(or)o(dinary)e(memory)i(pointers.)63 b(Since)31 b(this)i(is)f(the)g
(worst\177case)523 2414 y(scenario,)19 b(the)f(same)h(algorithm)g(should)g
(be)g(applicable)e(to)i(many)g(other)f(cases,)h(such)g(as)523
2514 y(persistent)i(object)g(stor)o(es)g(and)f(shar)o(ed\177memory)g(multipr)
o(ocessors.)666 2653 y(An)25 b(application)h(pr)o(ocess)f(bears)f(a)h(cost)h
(at)f(the)h(time)g(of)f(binding)h(and)f(unbinding)523 2752
y(a)36 b(datum)g(into)h(memory)-9 b(.)78 b(The)36 b(bind)h(time)g(cost)g(is)f
(the)h(cost)g(of)f(mapping)h(a)f(copy)523 2852 y(of)24 b(the)f(data,)g
(swizzling,)i(and)e(applying)g(a)g(lock.)39 b(The)24 b(unbind)g(cost)g(is)g
(modifying)g(the)523 2951 y(r)o(efer)o(ence)13 b(map\(unswizzling\),)f
(unmapping,)k(unlocking,)g(and)d(pr)o(opagating)g(changes.)523
3051 y(Swizzling)j(and)f(unswizzling)i(ar)o(e)d(useful)i(for)f(supporting)i
(memory)g(compaction.)28 b(The)523 3151 y(other)21 b(costs)g(ar)o(e)f(the)h
(unavoidable)f(consequence)h(of)g(sharing.)523 3475 y Fn(Acknowledgements)523
3703 y Fo(W)-8 b(e)24 b(wish)g(to)g(thank)f(Martin)g(Hampton)h(and)f(W)-8
b(arr)o(en)22 b(Reier)h(for)h(patiently)f(explaining)523 3802
y(the)f(r)o(equir)o(ements)f(of)h(\034nancial)g(applications,)g(and)g(pr)o
(oviding)f(the)h(original)h(impetus)523 3902 y(for)k(this)h(work.)50
b(Rich)28 b(Zippel)f(pr)o(ovided)f(an)h(attentive)g(ear)-6
b(,)27 b(numer)o(ous)h(suggestions,)523 4002 y(and)13 b(moral)g(support.)28
b(Thanks)13 b(also)g(to)g(Ken)g(Birman)g(and)g(Robert)g(Cooper)g(for)g(their)
g(help)523 4101 y(and)19 b(for)h(the)g(opportunity)h(to)f(do)g(this)g(work.)
30 b(This)21 b(work)f(bene\034ted)f(fr)o(om)h(discussions)523
4201 y(with)i(Liuba)e(Shrira)g(and)g(Luc)g(Boug\351.)523 4525
y Fn(References)523 4747 y Fo([1])40 b(M.)15 b(P)-11 b(.)16
b(Atkinson,)i(P)-11 b(.)16 b(J.)f(Bailey)-9 b(,)16 b(K.)g(J.)f(Chisholm,)j(P)
-11 b(.)16 b(W)-8 b(.)16 b(Cockshott,)i(and)d(R.)h(Morrison.)661
4847 y(An)21 b(appr)o(oach)e(to)j(persistent)f(pr)o(ogramming.)29
b Fl(Computer)p Fo(,)21 b(26\(4\):360\025365,)14 b(1983.)1914
5147 y(18)p eop
%%Page: 19 19
19 18 bop 523 614 a Fo([2])40 b(\326zalp)24 b(Babao)9 b(\010)-37
b(glu)23 b(and)g(Keith)i(Marzullo.)37 b Fl(Consistent)24 b(Global)h(States)e
(of)h(Distributed)661 714 y(Systems:)62 b(Fundamental)37 b(Concepts)g(and)f
(Mechanisms)p Fo(,)41 b(chapter)36 b(4,)41 b(pages)36 b(55\02593.)661
814 y(Addison\177W)-8 b(esley)f(,)21 b(ACM)f(Pr)o(ess,)g(second)h(edition)g
(edition,)g(1993.)523 980 y([3])40 b(Brian)14 b(N.)g(Bershad)g(and)f(Matthew)
h(J.)g(Zekauskas.)19 b(Midway:)25 b(Shar)o(ed)13 b(memory)i(par)o(\177)661
1079 y(allel)28 b(pr)o(ogramming)g(with)h(entry)f(consistency)h(for)f
(distributed)f(memory)i(multi\177)661 1179 y(pr)o(ocessors.)23
b(T)-8 b(echnical)16 b(Report)h(CMU\177CS\17791\177170,)12
b(Carnegie\177Mellon)k(University)-9 b(,)661 1279 y(Pittsbur)o(gh,)21
b(P)-8 b(A)21 b(\(USA\),)e(September)g(1991.)523 1445 y([4])40
b(Kenneth)17 b(Birman,)g(Andr)o(e)e(Schiper)-6 b(,)16 b(and)f(Pat)h
(Stephenson.)23 b(Fast)16 b(causal)f(multicast.)661 1544 y(T)-8
b(echnical)28 b(Report)f(TR\1771105,)g(Dept.)f(of)i(Comp.)f(Sc.,)g(Cornell)h
(University)-9 b(,)28 b(Ithaca,)661 1644 y(NY)21 b(\(USA\),)e(April)h(1990.)
523 1810 y([5])40 b(Paulo)18 b(Ferr)o(eira)f(and)g(Mar)o(c)f(Shapir)o(o.)24
b(Garbage)17 b(collection)i(and)e(DSM)h(consistency)-9 b(.)661
1910 y(In)15 b Fl(Pr)o(oc.)e(of)h(the)g(First)h(Symposium)e(on)h(Operating)f
(Systems)h(Design)g(and)g(Implementation)661 2009 y(\(OSDI\))p
Fo(,)19 b(Monter)o(ey)-9 b(,)20 b(CA)g(\(USA\),)e(November)j(1994.)e(ACM.)523
2175 y([6])40 b(Paulo)26 b(Ferr)o(eira)e(and)h(Mar)o(c)f(Shapir)o(o.)42
b(Garbage)25 b(collection)h(of)g(persistent)g(objects)661 2275
y(in)d(distributed)f(shar)o(ed)f(memory)-9 b(.)34 b(In)23 b
Fl(Pr)o(oc.)e(of)h(the)g(6th)f(Int.)g(W)n(orkshop)h(on)h(Persistent)661
2374 y(Object)e(Systems)p Fo(,)f(T)-8 b(arascon)21 b(\(France\),)e(September)
h(1994.)e(Springer)o(\177V)-9 b(erlag.)523 2540 y([7])40 b(Mar)o(c)23
b(Shapir)o(o,)i(Peter)g(Dickman,)h(and)e(David)h(Plainfoss\351.)41
b(SSP)24 b(chains:)39 b(Robust,)661 2640 y(distributed)30 b(r)o(efer)o(ences)
e(supporting)i(acyclic)g(garbage)f(collection.)55 b(Rapport)30
b(de)661 2740 y(Recher)o(che)c(1799,)f(Institut)i(National)f(de)f(la)h
(Recher)o(che)f(en)h(Informatique)g(et)g(Au\177)661 2839 y(tomatique,)j
(Rocquencourt)e(\(France\),)f(nov)h(1992.)43 b(Also)26 b(available)f(as)h(Br)
o(oadcast)661 2939 y(T)-8 b(echnical)21 b(Report)g(#1.)523
3105 y([8])40 b(Mar)o(c)34 b(Shapir)o(o,)j(Olivier)f(Gr)o(uber)-6
b(,)38 b(and)d(David)g(Plainfoss\351.)68 b(A)34 b(garbage)g(detec\177)661
3205 y(tion)26 b(pr)o(otocol)e(for)g(a)g(r)o(ealistic)g(distributed)g
(object\177support)h(system.)39 b(Rapport)25 b(de)661 3304
y(Recher)o(che)h(1320,)f(Institut)i(National)f(de)f(la)h(Recher)o(che)f(en)h
(Informatique)g(et)g(Au\177)661 3404 y(tomatique,)c(Rocquencourt)g
(\(France\),)d(November)i(1990.)523 3570 y([9])40 b(Paul)18
b(R.)g(W)-5 b(ilson)20 b(and)e(Sheetal)f(V)-11 b(.)18 b(Kakkad.)24
b(Pointer)19 b(swizzling)f(at)f(page)h(fault)f(time:)661 3670
y(Ef)o(\034ciently)33 b(and)f(compatibly)h(supporting)g(huge)g(addr)o(ess)f
(spaces)g(on)h(standar)o(d)661 3769 y(har)o(dwar)o(e.)23 b(In)18
b Fl(1992)d(Int.)i(W)n(orkshop)h(on)g(Object)f(Orientation)h(and)f(Operating)
g(Systems)p Fo(,)661 3869 y(pages)k(364\025377,)c(Dour)o(dan)j(\(France\),)f
(October)i(1992.)d(IEEE)i(Comp.)h(Society)-9 b(,)20 b(IEEE)661
3968 y(Comp.)h(Society)g(Pr)o(ess.)1914 5147 y(19)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
