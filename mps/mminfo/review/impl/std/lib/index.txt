             REVIEW OF LIBARY INTERFACE AND IMPLEMENTATION
                          review.impl.std.lib
                              draft review
                             drj 1995-08-30


Status:  requested
library interface:  impl.std.include.h.lib
ANSI implementation: impl.std.src.c.liban

sample module: impl.dw.src.c.dw

 1 policy       m  Sort out debugging, non-debugging, debugging the client, etc.
 2 design       M  Document purpose: fortification, simplified interface, first 
step.
 3              q  LibStream loophole? d
 4              q  Why can we use va_list?
 5              q  Do we need all three streams? d
 6              q  Can we simplify fprintf?
 7 plan         N  What's the plan for this stuff?
 8              q  Do we really want to abort?  [On assertion, for example.]
 9 ?            q  Byte-alignment really necessary anywhere?
10              m  Cryptic names for args to memset. d
11              q  What is FILE *file for in LibFormat? d
12 procedure    m  Line numbers for review
13 procedure    m  Need diffs for review
14 rule.impl.c  m  Document restrictions on calling ANSI libraries
15 design       m  (See also 7) What are we doing with these "standard" streams
16              M  "Default" streams? d
17 design       M  What are standard streams on other environments? d
18              N  LibStreamIn is useless, since we can only output. d
19              m  Superfluous struct declaration. d
20              m  Add references to ANSI standard. d
21              m  "char*" -> "char *" d
22 design       M  Meter module should not use Fopen, probably, but use a 
prepared stream.
23              q  Why unsigned char?
24              M  Shouldn't we use Addr for void * and size_t?
25              q  Does fprintf really return <0?
26              m  Implicit conversion of (int)c d
27 policy       m  Clarify policy for implicit conversions.  Probably shouldn't 
do any.
28              M  Update documentation for defaultHandler. d
29              M  abort -> LibAbort d
30              M  ==EOF should be ErrSUCCESS? d
31              m  Leader comment in liban.c should reference lib.h explicity. d
32              m  Document assumption that it's OK to cast these things, plus 
explanation.  (Link to standard?) d
33 meter        m  When do we close the meter stream?
34              q  Should we allow n=0 in memset?
35              m  Copyright should say 1995 (everywhere) d
36              m  Vertical space between MMStream methods. d
37 policy       q  Do we document what errors can arise?  (We should.)
38 policy       q  const policy?
39              q  Do we use VFormat?  (yes)
40 dw.c         m  defaultHanlder ignores error silently d

Issues logged: 40
Major issues:  9
New issues:   2




