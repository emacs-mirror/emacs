                        REVIEW OF IMPL.H.MPS(10)
                          review.impl.h.mps.10
                              draft review
                           gavinm 1996-07-23

Rules: rule.universal, rule.impl.c.*
Checklists: none
Source: ???
Candidate status: accepted

Leader: gavinm
Editor: richard
Scribe: gavinm
Approved: 1997-04-01

Entry manpower: .1


Entry notes:

estimate


Loggingstart: 15:40
Loggingend: 16:10
Logginglength: 30
Loggingrate: 3.8

Checkers: GavinM (Consistency);Richard (Source);NickB (Clarity);DRJ (Correctness;Conventions)
Rate: 10 lines
Length: 452
Actual checking time: 350

Kickoff start: 1996-07-24 14:00 BST ? (See review.impl.h.mpmtypes.4)


ISSUES:

nickb
1. 61 m comment should include the type unsigned
2. 75 m comment that this will always be zero
3. 90 m mpmty should read mpmtypes
4. 113 m ditto
5. 113 m this tag does not exist
6. 123,124 m either enlarge or give a tag for named documentation
7. 151 m no such tag
8. 153-165 m should have same order as the stuff in mpmtypes
9. 153-165 m should have more similar names to stuff in mpmtypes
10. 159 M shouldn't this be an mps_thr_t?
11. 182-193 m what is this?
12. 218 m what is this?
13. 228,229 m what does this do?
14. 236-238 m what does this do?
15. 242 m more documentation required
16. 263 M more documentation required
17. 289,294 m why is this upper case?
18. 325-349 m these parameters are verbosely named
19. 335,341,342 M the difference between a base+size and base to limit 
convention is bad
20. 340 m indentation screwup
21. 349 m needs documentation
22. 352,353 m needs documentation
23. 356-380 M No idea what's going on here
24. 391 m "it" should be "is"
25. 389-401 M needs more documentation
26. 403 m needs documentation
27. 422-449 M needs some documentation

drj
28. impl.h.mpmst I 174-176 tabbing problem
29. ditto I 204 comments wrong
30. 5 m doesn't reference design
31. 17,208,363 m this symbol should be for other windows platforms as well
32. 22 m these macros belong with line 196 et al
33. 24 m naming problem: mps_begin and mps_end do not begin and end an mps!
34. 54 m should ref doc saying what this type actually is on each platform
35. 57 m what if sizeof(long) * CHAR_BITS > UINT_MAX ?
36. 64 m misnomer: type is not defined here
37. 70 m no such file
38. 93 m this is inconsistent with line 72
39. 94 m this enumeration is explicitly numbered, inconsistent with line 75
`40. 106 m the first occurrence of "by" should be "be"
41. 113 m tag is inconsistent with line 70 (or vice versa?)
42. 151 m mpmty should be mpmtypes
43. 153,155 m these functions are different in the third parameter, which is odd
44. 158 m there's no reg_scan method in mpmtypes.h
45. 196 m unclear where the block referred to ends
46. 196 s could put this in another file and #include it
47. 239 m tabbing or indentation error
48. everywhere m documentation sporadic
49. 292 m not enough doc
50. 313,318 m insert "that are entirely within the specified bounds" after the 
word "pages"
51. 318 m insert "contiguous" before "formatted"
52. 407 q is *mps_space correct?

gavinm
53. 37 m fmt is a poor abbreviation
54. 76 q are these failures other than as specified below?
55. 97 m insert "strong" in comment
56. 98 m insert "exact" in comment
57. 116-117 m could use shift operator to emphasize nature of constants
58. 122,138,170 m ap should read mps_ap_s
59. 153,155,etc m parameters don't need mps_ prefix
60. 154,162,163,etc. mN inconsistent line breaks
61. 164 m function with "is" prefix doesn't return boolean
62. 163-164 m fwd is a bad abbreviation
63. 153-165 m it's not clear that these are function pointer types from the 
type name
64. 171 m surely this isn't an exception but a justification?
65. 184-193 m need more documentation on members and purpose of structure
66. 198-199 m number is confused in comment (block "are" internal)
67. 200 m justify inclusion in this file
68. 198-200 q should internal definitions use MM internal rules?
69. 217 m it's not clear from type name that this is a function pointer
70. 229,246,255 m inconsistent line breaks
71. 276 M should these macros parameters shouldn't start with _?
72. 277 m this line should be simpler
73. 330,359,361 m "s" is an inconsisnent name for this parameter
74. 330,335 m inconsistent line breaks
75. 435 m poor spacing

richard
76. 1 q Are tag references appropriate in this file?
77. 7 q Do we need a legAl notice?
78. 8 m Purpose not stated
79. 17 mN Justify ifdef
80. 18 m Where needed?
81. 22 m Missing documentation
82. 22 m Reference to m_ definitions
83. 30-32,49-51,122-124,138-140,etc q Does this belong here?
84. 66 m Unclear, insert mps_res_p after type
85. 66 m Misplaced design
86. 66 m Irrelevant to following code
87. 75 M Missing documentation about 0
88. 79 m Internal is superfluous
89. 87 m UNclear mps_rank_t needed
90. 87 m Misplaced design
91. 93 m Inconsistent placement, compare with mps_res_t
92. 105 m Misplaced design
93. 116-117 m Inconsistent with declaration of flags in mpmtypes.h
94. 124 m Missing reference to documentation
95. 126 M Broken link
96. 132 m bufferred unclear
97. 142 m UNclear, not really in sync
98. 151 M Broken reference; no such tag
99. 151 M What About the reference for the roots?
100. 159 M mps_reg_t wrong type; inconsistent with mpmtypes
101. 173 M Broken link
102. 176-179 m Missing tag to scan state
103. 182 m No doc
104. 200 m UNclear; should say change without notice
105. 208 m Justify ifdef
106. 271,273 m Refer to macro
107. 276,285,294 m Refer to buffer code
108. 325 m Refer to root.c
109. 363 m Justify ifdef
110. 391 m Incomplete documentation
111. 407-416 I This isn't implemented anywhere
112. 424-end M Design documentation required

nickb again
113. 408 mN where are values of this type defined?



Brainstorm start: 16:30
Brainstorm end: 16:45
Brainstorm length: 15


BRAINSTORM:

10. Change not reflected.  Synch instruction not followed.  Missing sync 
instruction in mpmtypes.h.  Ought to have rule that dependency instructions 
should be symmetric and exist.  Could automation help?

We don't have any rules for external files.  Hence mps.h is inconsistent in 
term of documentation and tagging.    It is intended to talk to the user.  
State policy and make document consistent with it; review policy.

71. mps_ is enough.  Lesson is: don't change conventions without discussing and 
reviewing change.

95. Tags changed without following tag procedure.  Tag changing procedure 
should be more visible.  guide.tag?  proc.edit?  In particular, changing the 
name of the file changes the tag.

112. How can we prevent ourselves from not writing design documentation?  
Richard is better able to write design documentation for this now than when he 
wrote it.  Enforce entry.universal.source-available?

DRJ says he's really tired.  Did we try to review too much.  Secondary choice 
of documents mean that we had 690 lines.  Best stick to 600 lines.  Are header 
files harder than code?


Number of major issues: 15
Number of minor issues: 88
Number of issues: 113
Major defects remaining: 2

Edit manpower: 6


Edit notes:

1. Fix: clarified comment.
2. Fix: clarified comment.
3. Fix: corrected tag.
4. Fix: ditto.
5. Fix: Created placeholder comment in impl.h.mpmtypes.
6. Reject: Documentation removed.
7. Fix: Created tag in impl.h.mpmtypes.
8. Reject: Trivial and questionable.
9. Reject: These names are better.  The internal names should change.
10. Fix: Corrected prototypes.
11. Reject: Not supposed to be documented here.  This does show lack of source 
doc, though.
12. Reject: Ditto.
13. Reject: Ditto.
14. Reject: Ditto.
15. Reject: Ditto.
16. Reject: Ditto.
17. Mail: mail.richard.1996-12-11.13-02?
18. Reject: These parameter names must be deleted anyway.
19. Reject: In one case it's an array, in the other a block of memory.  Our 
conventions for dealing with the former are base and size (naturally) and the 
latter are base and limit.
20. Fixed.
21. Reject: Not supposed to be documented here.
22. Reject: Ditto.
23. Reject: Ditto.
24. Reject: Documentation removed.
25. Reject: Not supposed to be documented here.
26. Reject: Ditto.
27. Reject: Ditto.
28. Fixed.
29. Fixed.
30. Fix: Added reference to design.mps.interface.c.
31. Fix: Corrected to MPS_OS_W3 throughout.
32. Fix: Moved as suggested.
33. Reject: mps_assert does not assert an MPS either.
34. Reject: This will be done when documentation for interface is written.
35. Mail: mail.richard.1996-12-11.13-22?
36. Fix: Altered comment to "Result Codes".
37. Fix: Corrected tag.
38. Fix: Moved definition.
39. Reject: The numbers are explicitly associated with the names in this case.
40. Reject: Documentation deleted.
41. Reject: Trivial.
42. Fix: Already fixed above.
43. Reject: See edit 19.
44. Reject: There's RootScanRegMethod.
45. Fix: It's clearer now the comments are similar.
46. Reject: That makes the files situation more complex than necessary.
47. Reject: Can't see anything wrong.
48. Fix: Documentation removed.  Will be documented in reference doc as planned.
49. Reject: See edit 48.
50. Reject: Documentation removed.
51. Reject: Documentation removed.
52. Answer: That was a defect, but the unused message code stuff has been 
removed anyway.  See issue 111.
53. Issue: request.mps.170217 
54. Mail: mail.richard.1997-03-19.12-30(0) and mail.richard.1997-03-19.13-33.
68. Answer: No, they should be consistent with the external interface so that 
they are immune to internal change.
76. Answer: No.  See rule.impl.h.external.doc.no.internal.
83. Answer: No.  Design and user documentation should be elsewhere.  See 
rule.impl.h.external.no.client.
54-76. [Notes lost due to notes crash.  All minors or questions.]
71. Reject: No, this isn't necessary.
77. Answer: We just need copyright as recommended by legal.  See 
mail.daveb.1997-02-11.18-25.
78. Reject: Add with other documentation.
79. Reject: Appears to be done already.
80. Don't understand issue.
81. Reject: Documentation will be separate.
82. Reject: Not in an external header.
83. Answer: No.  Documentation removed.  It will be provided separately.
84. Reject: Documentation removed.
85. Fixed: Documentation removed.
86. Fixed: Documentation removed.
87. Reject: Documentation not appropriate in header.
88. Fixed.
89. Reject: Documentation removed.
90. Fixed: Documentation removed.
91. Fixed.
92. Fixed: Documentation removed.
93. Fixed.
94. Reject: Reference inappropriate.
95. Fixed.
96. Fixed: Corrected to "available".
97. Reject: Inapproprate to add more documentation here.
98. Fixed.
99. Fixed.
100. Fixed.
101. Fixed.
102. Fixed.
103. Reject: No doc is appropriate for an external header.
104. Reject: No doc is appropriate for an external header.
105. Reject: Not appropriate in external header.
106. Reject: Not appropriate in external header.
107. Fixed.
108. Reject: Not appropriate in external header.
109. Reject: Not appropriate in external header.
110. Reject: Documentation removed.
111. Fixed: Removed pending design and implementation.
112. Partially fixed: See design.mps.interface.c.
113. Reject: These prototypes have been removed.  See issue 111.



Exit manpower: 0.3


Exit notes:

I should have done this two weeks ago -- GavinM 1997-04-01


Manpowerused: 16.2
Manpowersaved: 150


Candidate: [???]
Rules: rule.universal, rule.impl.c.*
Checklists:
Author:
Leader: GavinM
Editor:Richard
Scribe:
Status: [???]
Entry:
Exit:
Checkers: GavinM,Richard,NickB,DRJ
Rate:10 lines/minute
Kickoff: 1996-07-24 14:09 BST, 14:17
Roles: NickB - Clarity, Richard - Source, DRJ - Correctness & Conventions, 
GavinM - Consistency
Checking: 14:17 - 15:27

LOGGING

Started 15:40

nickb
1. 61 m comment should include the type unsigned
2. 75 m comment that this will always be zero
3. 90 m mpmty should read mpmtypes
4. 113 m ditto
5. 113 m this tag does not exist
6. 123,124 m either enlarge or give a tag for named documentation
7. 151 m no such tag
8. 153-165 m should have same order as the stuff in mpmtypes
9. 153-165 m should have more similar names to stuff in mpmtypes
10. 159 M shouldn't this be an mps_thr_t?
11. 182-193 m what is this?
12. 218 m what is this?
13. 228,229 m what does this do?
14. 236-238 m what does this do?
15. 242 m more documentation required
16. 263 M more documentation required
17. 289,294 m why is this upper case?
18. 325-349 m these parameters are verbosely named
19. 335,341,342 M the difference between a base+size and base to limit 
convention is bad
20. 340 m indentation screwup
21. 349 m needs documentation
22. 352,353 m needs documentation
23. 356-380 M No idea what's going on here
24. 391 m "it" should be "is"
25. 389-401 M needs more documentation
26. 403 m needs documentation
27. 422-449 M needs some documentation

drj
28. impl.h.mpmst I 174-176 tabbing problem
29. ditto I 204 comments wrong
30. 5 m doesn't reference design
31. 17,208,363 m this symbol should be for other windows platforms as well
32. 22 m these macros belong with line 196 et al
33. 24 m naming problem: mps_begin and mps_end do not begin and end an mps!
34. 54 m should ref doc saying what this type actually is on each platform
35. 57 m what if sizeof(long) * CHAR_BITS > UINT_MAX ?
36. 64 m misnomer: type is not defined here
37. 70 m no such file
38. 93 m this is inconsistent with line 72
39. 94 m this enumeration is explicitly numbered, inconsistent with line 75
40. 106 m the first occurrence of "by" should be "be"
41. 113 m tag is inconsistent with line 70 (or vice versa?)
42. 151 m mpmty should be mpmtypes
43. 153,155 m these functions are different in the third parameter, which is odd
44. 158 m there's no reg_scan method in mpmtypes.h
45. 196 m unclear where the block referred to ends
46. 196 s could put this in another file and #include it
47. 239 m tabbing or indentation error
48. everywhere m documentation sporadic
49. 292 m not enough doc
50. 313,318 m insert "that are entirely within the specified bounds" after the 
word "pages"
51. 318 m insert "contiguous" before "formatted"
52. 407 q is *mps_space correct?

gavinm
53. 37 m fmt is a poor abbreviation
54. 76 q are these failures other than as specified below?
55. 97 m insert "strong" in comment
56. 98 m insert "exact" in comment
57. 116-117 m could use shift operator to emphasize nature of constants
58. 122,138,170 m ap should read mps_ap_s
59. 153,155,etc m parameters don't need mps_ prefix
60. 154,162,163,etc. mN inconsistent line breaks
61. 164 m function with "is" prefix doesn't return boolean
62. 163-164 m fwd is a bad abbreviation
63. 153-165 m it's not clear that these are function pointer types from the 
type name
64. 171 m surely this isn't an exception but a justification?
65. 184-193 m need more documentation on members and purpose of structure
66. 198-199 m number is confused in comment (block "are" internal)
67. 200 m justify inclusion in this file
68. 198-200 q should internal definitions use MM internal rules?
69. 217 m it's not clear from type name that this is a function pointer
70. 229,246,255 m inconsistent line breaks
71. 276 M should these macros parameters shouldn't start with _?
72. 277 m this line should be simpler
73. 330,359,361 m "s" is an inconsisnent name for this parameter
74. 330,335 m inconsistent line breaks
75. 435 m poor spacing

richard
76. 1 q Are tag references appropriate in this file?
77. 7 q Do we need a legAl notice?
78. 8 m Purpose not stated
79. 17 mN Justify ifdef
80. 18 m Where needed?
81. 22 m Missing documentation
82. 22 m Reference to m_ definitions
83. 30-32,49-51,122-124,138-140,etc q Does this belong here?
84. 66 m Unclear, insert mps_res_p after type
85. 66 m Misplaced design
86. 66 m Irrelevant to following code
87. 75 M Missing documentation about 0
88. 79 m Internal is superfluous
89. 87 m UNclear mps_rank_t needed
90. 87 m Misplaced design
91. 93 m Inconsistent placement, compare with mps_res_t
92. 105 m Misplaced design
93. 116-117 m Inconsistent with declaration of flags in mpmtypes.h
94. 124 m Missing reference to documentation
95. 126 M Broken link
96. 132 m bufferred unclear
97. 142 m UNclear, not really in sync
98. 151 M Broken reference; no such tag
99. 151 M What About the reference for the roots?
100. 159 M mps_reg_t wrong type; inconsistent with mpmtypes
101. 173 M Broken link
102. 176-179 m Missing tag to scan state
103. 182 m No doc
104. 200 m UNclear; should say change without notice
105. 208 m Justify ifdef
106. 271,273 m Refer to macro
107. 276,285,294 m Refer to buffer code
108. 325 m Refer to root.c
109. 363 m Justify ifdef
110. 391 m Incomplete documentation
111. 407-416 I This isn't implemented anywhere
112. 424-end M Design documentation required

nickb again
113. 408 mN where are values of this type defined?

End of logging: 16:10
Logging length: 30
Logging rate: 16 seconds/issue, 3.7 issues/minute

15 majors

Brainstorm: 16:30

10. Change not reflected.  Synch instruction not followed.  Missing sync 
instruction in mpmtypes.h.  Ought to have rule that dependency instructions 
should be symmetric and exist.  Could automation help?

We don't have any rules for external files.  Hence mps.h is inconsistent in 
term of documentation and tagging.    It is intended to talk to the user.  
State policy and make document consistent with it; review policy.

71. mps_ is enough.  Lesson is: don't change conventions without discussing and 
reviewing change.

95. Tags changed without following tag procedure.  Tag changing procedure 
should be more visible.  guide.tag?  proc.edit?  In particular, changing the 
name of the file changes the tag.

112. How can we prevent ourselves from not writing design documentation?  
Richard is better able to write design documentation for this now than when he 
wrote it.  Enforce entry.universal.source-available?

DRJ says he's really tired.  Did we try to review too much.  Secondary choice 
of documents mean that we had 690 lines.  Best stick to 600 lines.  Are header 
files harder than code?

End: 16:45


EDIT (richard)

Started: 1996-12-11 12:30

1. Fix: clarified comment.
2. Fix: clarified comment.
3. Fix: corrected tag.
4. Fix: ditto.
5. Fix: Created placeholder comment in impl.h.mpmtypes.
6. Reject: Documentation removed.
7. Fix: Created tag in impl.h.mpmtypes.
8. Reject: Trivial and questionable.
9. Reject: These names are better.  The internal names should change.
10. Fix: Corrected prototypes.
11. Reject: Not supposed to be documented here.  This does show lack of source 
doc, though.
12. Reject: Ditto.
13. Reject: Ditto.
14. Reject: Ditto.
15. Reject: Ditto.
16. Reject: Ditto.
17. Mail: mail.richard.1996-12-11.13-02?
18. Reject: These parameter names must be deleted anyway.
19. Reject: In one case it's an array, in the other a block of memory.  Our 
conventions for dealing with the former are base and size (naturally) and the 
latter are base and limit.
20. Fixed.
21. Reject: Not supposed to be documented here.
22. Reject: Ditto.
23. Reject: Ditto.
24. Reject: Documentation removed.
25. Reject: Not supposed to be documented here.
26. Reject: Ditto.
27. Reject: Ditto.
28. Fixed.
29. Fixed.
30. Fix: Added reference to design.mps.interface.c.
31. Fix: Corrected to MPS_OS_W3 throughout.
32. Fix: Moved as suggested.
33. Reject: mps_assert does not assert an MPS either.
34. Reject: This will be done when documentation for interface is written.
35. Mail: mail.richard.1996-12-11.13-22?
36. Fix: Altered comment to "Result Codes".
37. Fix: Corrected tag.
38. Fix: Moved definition.
39. Reject: The numbers are explicitly associated with the names in this case.
40. Reject: Documentation deleted.
41. Reject: Trivial.
42. Fix: Already fixed above.
43. Reject: See edit 19.
44. Reject: There's RootScanRegMethod.
45. Fix: It's clearer now the comments are similar.
46. Reject: That makes the files situation more complex than necessary.
47. Reject: Can't see anything wrong.
48. Fix: Documentation removed.  Will be documented in reference doc as planned.
49. Reject: See edit 48.
50. Reject: Documentation removed.
51. Reject: Documentation removed.
52. Answer: That was a defect, but the unused message code stuff has been 
removed anyway.  See issue 111.
53. Issue: request.mps.170217 
54. Mail: mail.richard.1997-03-19.12-30(0) and mail.richard.1997-03-19.13-33.
68. Answer: No, they should be consistent with the external interface so that 
they are immune to internal change.
76. Answer: No.  See rule.impl.h.external.doc.no.internal.
83. Answer: No.  Design and user documentation should be elsewhere.  See 
rule.impl.h.external.no.client.
54-76. [Notes lost due to notes crash.  All minors or questions.]
71. Reject: No, this isn't necessary.
77. Answer: We just need copyright as recommended by legal.  See 
mail.daveb.1997-02-11.18-25.
78. Reject: Add with other documentation.
79. Reject: Appears to be done already.
80. Don't understand issue.
81. Reject: Documentation will be separate.
82. Reject: Not in an external header.
83. Answer: No.  Documentation removed.  It will be provided separately.
84. Reject: Documentation removed.
85. Fixed: Documentation removed.
86. Fixed: Documentation removed.
87. Reject: Documentation not appropriate in header.
88. Fixed.
89. Reject: Documentation removed.
90. Fixed: Documentation removed.
91. Fixed.
92. Fixed: Documentation removed.
93. Fixed.
94. Reject: Reference inappropriate.
95. Fixed.
96. Fixed: Corrected to "available".
97. Reject: Inapproprate to add more documentation here.
98. Fixed.
99. Fixed.
100. Fixed.
101. Fixed.
102. Fixed.
103. Reject: No doc is appropriate for an external header.
104. Reject: No doc is appropriate for an external header.
105. Reject: Not appropriate in external header.
106. Reject: Not appropriate in external header.
107. Fixed.
108. Reject: Not appropriate in external header.
109. Reject: Not appropriate in external header.
110. Reject: Documentation removed.
111. Fixed: Removed pending design and implementation.
112. Partially fixed: See design.mps.interface.c.
113. Reject: These prototypes have been removed.  See issue 111.


