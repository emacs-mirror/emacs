                   REVIEW RECORD FOR IMPL.C.LOCKNT(0)
                         review.impl.c.locknt.0
                              draft review
                           richard 1995-10-17

Leader: richard
Reviewers: drj (OK to good), dsm (headache), richard (semi-lucid)
Roles: none
Rolls: two bagettes (one consumed)
Date: 1995-10-17
Checking start: 13:30

Logging start 14:19 end 14:26 majors 4 minors 8 questions 2 new 0

1. drj, 10, m, Which bit?  Try to be more specific?
2. drj, -, m, Should ANSI modules check __STD__ or something?
3. drj, 35, q, Does InitializeCriticalSection return void?  (Do the others?)
4. drj, 71, M, This code is tricky -- it looks like unsafely examining lock 
structure before locking it.
5. drj, 88, m, Check signature incorrectly.  Check that it's the correct sig.
6. dsm, 43, m, Could AVER lockisvalid in LockFinish.
7. richard, 34, M, No paramter validation.  Check lock is non-NULL.
8. richard, 85, m, IsValid could go earlier in the file.
9. richard, 85, m, #ifdef IsValid method on DEBUG_ASSERT.
10. richard, 89, M, Haven't checked the signature is the correct one.
11. richard, 43, M, No parameter validation.
12. richard, 55, m, Explain the ordering of AVER and the EnterCS.
13. richard, 71, q, Is there a race on checking the claims field?
14. richard, 78, m, Could check that claims > 0, then decrement.

Edit (dsm, 1995-10-18)

1. Added hierarchical reference.
2. __STD__ does not guarantee we are in a hosted environment.  No action taken.
3. Answer: yes.
4. This code is wrong.  Fixed.
5. Sig now checked correctly.
6. AVER added as suggested.
7. Parameter validation added.
8. Moved as suggested. (also in impl.c.lockan).
9. #ifdefed isvalid. (also in impl.c.lockan).
10. see 5.
11. see 6.
12. Added comments
13. No this is just wrong.  Now fixed.
14. Modified as suggested.

