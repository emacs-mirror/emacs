                    HOW TO BUILD SCRIPWORKS ON A MAC
                            proc.build.swmac
                            incomplete proc
                             drj 1999-01-27


INTRODUCTION

.intro: This document describes how to build ScriptWorks on a Mac.

.readership: The intended readership is any MM developer, though it's not very 
MM specific.

REQUIREMENTS

.req: You will need:

.req.elsewhere: HOPE, DEV (The ScriptWorks MPW based developement environment), 
System 7 or 8 (not all versions).  The REQUIREMENTS section of 
proc.build.mac(0) adequately explains exactly what these are and how to get 
them.

.req.signtool: You also need signtool to build release versions of 
ScriptWorks.  This is usually built by developers for developers.  See 
.build.signtool in the appendix of this document. If you only want to build 
debug versions, you don't need signtool.

.req.dongle: You also need a dongle. If you don't have one, ask Scriptworks QA 
or SWIG (who might have spares or lend you one) or manufacturing (i.e. Torill, 
who knows about dongles).


PROCEDURE

.hope: Using hope...

.hope.co: Checkout the SWprod_mac compound:

co -compound SWprod_mac -branch <whatever> -recursive -missing-dir create

This creates and populates a directory called "mac".  Most things you need to 
do in MPW (DEV) will need to be done with this set as your directory.


.mpw: Now, using MPW (DEV).

.mpw.enter: Don't forget when using MPW that to execute a command line you need 
to press Command-Return or Enter.

.mpw.directory: directory needs to be set to the "mac" directory created in the 
hope co step (.hope.co above).  e.g.

directory McCaque:ScriptWorks:mac:

.mpw.build.how: The subdirectory :build:macos contains a number of .mpw files 
which build ScriptWorks in a variety of configurations.  One of these is the 
one we want to run.

.mpw.build.what: Running

:build:macos:BuildGeneRlsPPC.mpw

will build ScriptWorks in a generic (i.e. not OEM customized) release (as 
opposed to debug) flavour. To do this, drag one of these scripts onto the 
ToolServer in DEV:MPW (the Finder icon, that is, not the ToolServer window, 
which you can't drag into.)

errors are logged to :build:macos:thingy.err
e.g.:

:build:macos:BuildGeneRlsPPC.mpw.err

Useful things to know about the internals of the ScriptWorks build system:

:build:macos:StandardOverride.mpw

contains the locations of the MM libraries. It contains lines like:

      echo '-d MM_LIBRARY="s7ppac:we:mmsw_WE.o"'

which you can edit to point to whatever compiled MM library you want to use. It 
may be possible to achieve the same result better with a PersonalOverride file, 
but this hasn't been tested.

:build:macos:MakeCustom.mpw

contains some documentation


ScriptWorks ends up in the mac directory.

To run SW you need a dongle and the EVE init (ScriptWorks will complain pretty 
quickly if you don't have either of these).

I have no idea how you get the EVE init.  I copied mine from rit's machine.


APPENDIX A

How to build SignTool.

.appendix.a.intro: This Appendix describes how to build the signtool.

.signtool.hope: The sources are stored in HOPE.

.signtool.co: With your directory set to the same directory that the SWprod_mac 
directory (called "mac") has for its parent (e.g McCaque:ScriptWorks:) checkout 
the sources.  They are in the HOPE compound HQNsigntool:

co -compound HQNsigntool -branch trunk -missing-dir create

This creates and populates the "signtool" directory.  The signtool directory 
should be alongside the mac directory (the directory for the SWprod_mac 
compound).

.signtool.mpw: Now using MPW (DEV).

.signtool.directory: Set your directory to the signtool directory:

directory McCaque:ScriptWorks:signtool

.signtool.maketool: And run the MakeTool script:

:build:macos:MakeTool.mpw

This should run and build the SignTool program.  It will create the file 
"SignTool" in the signtool directory.  This file is the SignTool application.

.signtool.once: You only need to build SignTool once for all versions of 
ScriptWorks.  You can copy it around as necessary after that.

.signtool.where: For signtool to be found by the ScriptWorks build system it 
must called SignTool and be in the signtool directory and the signtool 
directory should be alongside the mac directory (for the compound SWprod_mac).


