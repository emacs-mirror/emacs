                  MPS C INTERFACE SYMBOL "MPS_RM_PROT"
                        symbol.mps.c.MPS_RM_PROT
                           incomplete symbol
                            pekka 1998-01-26

NAME

MPS_RM_PROT


SUMMARY

"MPS_RM_PROT" is a constant used in root mode arguments to indicate protectable 
roots.


ASSOCIATED PROTOCOLS

Root.


TYPE

Integral constant.


RESOURCES

mps.h


DESCRIPTION

"MPS_RM_PROT" is a preprocessor macro defining a constant that can be OR'ed to 
other "MPS_RM_*" contants, and passed as the root mode argument to certain root 
creation functions ("mps_root_create_fmt", "mps_root_create_table", 
"mps_root_create_table_masked").

Passing "MPS_RM_PROT" means that the MPS may place a hardware write barrier on 
any pages which any part of the root covers.  Format methods and any scanning 
function (except for the one for this root) may not write data in this root.  
They may read it.

You mustn't specify "MPS_RM_PROT" on a root allocated from the MPS.


EXAMPLE

res = mps_root_create_table(&mmRoot, arena, MPS_RANK_EXACT, MPS_RM_PROT,
                            (mps_addr_t)&Objects, rootCOUNT);


SEE ALSO

mps_root_create_fmt, mps_root_create_table, mps_root_create_table_masked, 
MPS_RM_PROT_INNER


NOTES

No page may contain parts of two or more roots with "MPS_RM_PROT" [how does one 
prevent that?].  You mustn't specify "MPS_RM_PROT" if the client program or 
anything other than (this instance of) the MPS is going to protect or unprotect 
the relevant pages.


INTERNAL NOTES

Future meaning: The MPS may place a hardware read and/or write barrier on any 
pages which any part of the root covers.  Format methods and scanning functions 
(except for the one for this root) may not read or write data in this root.  
You may specify "MPS_RM_PROT" on a root allocated from the MPS, as long as it's 
not from a GCd pool.  - drj 1997-12-18

This feature is far too technical for most of our clients: we should think 
about producing some guidelines on how to use it.  - pekka 1998-01-27

There may be problems if the client wants the OS to access the root.  Lots of 
OSes can't cope with writing to protected pages.  So we'll need to document 
that caveat too.  drj 1998-05-20


