              MPS C INTERFACE: MPS_AP_ALLOC_PATTERN_BEGIN
                 symbol.mps.c.mps_ap_alloc_pattern_end
                           incomplete symbol
                           gavinm 1998-10-21

NAME

mps_ap_alloc_pattern_end


SUMMARY

Indicates the end of allocation following a particular pattern.


ASSOCIATED PROTOCOLS

AP, allocation, ramps, GC


SYNTAX

mps_res_t mps_ap_alloc_pattern_end(mps_ap_t ap, mps_alloc_pattern_t 
alloc_pattern)


ARGUMENTS

ap                     The allocation point in which the patterned allocation 
occurred
alloc_pattern          The pattern of the allocation


RETURNED VALUES

Result code indicating whether end of the allocation pattern was successfully 
registered.


DESCRIPTION

This function is used, together with mps_ap_alloc_pattern_begin, to indicate 
periods of allocation in an allocation point that follow some pattern of 
lifetime.  


EXAMPLE

{
  res = mps_ap_alloc_pattern_begin(ap, mps_alloc_pattern_ramp());
  assert(res == mps_res_ok);

  do_some_work(); /* Leaves stuff lying around */

  res = mps_ap_alloc_pattern_begin(ap, mps_alloc_pattern_ramp());
  assert(res == mps_res_ok);

  do_some_more_work(); /* Tidies up after itself */

  res = mps_ap_alloc_pattern_end(ap, mps_alloc_pattern_ramp());
  assert(res == mps_res_ok);

  tidy_up_first_work();

  res = mps_ap_alloc_pattern_end(ap, mps_alloc_pattern_ramp());
  assert(res == mps_res_ok);
}


ERROR HANDLING

Will fail if there is no extant allocation pattern of that type.  May fail in 
future if certain allocation patterns are inappropriate for that allocation 
point at that point in time.


SEE ALSO

symbol.mps.c.mps_alloc_pattern_ramp(0)
symbol.mps.c.mps_alloc_pattern_ramp_collect_all(0)
symbol.mps.c.mps_ap_alloc_pattern_begin(0)
symbol.mps.c.mps_ap_alloc_pattern_reset
protocol.mps.alloc-pattern-ramp(0)


NOTES


INTERNAL NOTES




