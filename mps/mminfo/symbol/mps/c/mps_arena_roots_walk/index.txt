             MPS C INTERFACE: FUNCTION MPS_ARENA_ROOTS_WALK
                   symbol.mps.c.mps_arena_roots_walk
                           incomplete symbol
                            tony 1998-06-18

NAME

mps_arena_roots_walk


SUMMARY

mps_arena_roots_walk is used to iterate over all roots of the MPS heap.


ASSOCIATED PROTOCOLS

None.


SYNTAX

mps_arena_roots_walk(mps_arena, client_step_function, client_step_closure_p, 
client_step_closure_s);


TYPE

extern void mps_arena_roots_walk(mps_arena_t,
                                 mps_roots_stepper_t,
                                 void *,
                                 size_t);


ARGUMENTS

(mps_arena_t mps_arena, mps_roots_stepper_t stepper,
 void *p, size_t s)

mps_arena in an MPS arena object.

stepper is a client-supplied function (pointer) of the right type (see 
symbol.mps.c.mps_roots_stepper_t).  This function is applied to every reference 
to the heap from every root object registered with the arena.  This function 
should take the argument list (mps_addr_t *ref, mps_root_t root, void *p, 
size_t s).  ref is the address of a root which references an object in the 
arena.  root is the registered root (an MPS root object) of which ref is a 
single reference, p and s are copies of the corresponding values that the 
client passed into mps_arena_roots_walk originally.

p and s are passed into the function specified by the stepper argument whenever 
the MPS calls that function.  See mps_roots_stepper_t


RETURNED VALUES

None.


RESOURCES

mps.h


DESCRIPTION

mps_arena_roots_walk is used to iterate over all roots of the MPS heap.  A 
client-supplied function is called for every root reference which points to an 
object in any automatically managed pools; the address of the root reference 
and the MPS root object are passed to the user supplied function, as well as 
some closure variables.

May only be called when the arena is in the parked state.

Applies stepper to each reference in any roots registered with the arena and 
which point to objects in automatically managed pools. If the root has rank 
MPS_RANK_AMBIG then the reference might not be to the start of an object; the 
client should handle this case. There is no guarantee that the reference 
corresponds to the actual location that holds the pointer to the object (since 
this might be a register, for example) - but the actual location will be passed 
if possible. This may aid analysis of roots via a debugger.


EXAMPLE

[not yet]


ERROR HANDLING

There are none.


SEE ALSO

symbol.mps.c.mps_roots_stepper_t
symbol.mps.c.mps_arena_formatted_objects_walk


NOTES





INTERNAL NOTES:

The description needs more work.

