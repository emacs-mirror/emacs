              MPS C INTERFACE SYMBOL MPS_ROOT_CREATE_TABLE
                   symbol.mps.c.mps_root_create_table
                              draft symbol
                            pekka 1997-09-22

NAME

mps_root_create_table


SUMMARY

"mps_root_create_table" creates a root that is a vector of references.


ASSOCIATED PROTOCOLS

Root.


SYNTAX

mps_res_t mps_root_create_table(mps_root_t *root_o,
                                mps_arena_t arena,
                                mps_rank_t rank,
                                mps_rm_t rm,
                                mps_addr_t *base, size_t size)


ARGUMENTS

root_o    a pointer to a variable for storing the new root structure in
arena     the arena
rank      the rank of the references in this root
rm        the root mode
base      a pointer to the vector of references that is being registered
size      the number of references in the vector being registered


RETURNED VALUES

If the return value is "MPS_RES_OK", the new root in "*root_o".


RESOURCES

mps.h


DESCRIPTION

This function declares a root that is a vector of references.

If the rank of the root is not "MPS_RANK_AMBIG", the contents of the root have 
to be valid whenever a GC happens, i.e., they have to be references to actual 
objects or "NULL".  If you're using asynchronous GC, this could be right after 
the root is registered, so the root has to be valid when it is registered.  
It's OK for a root to have entries which point to memory not managed by the MPS 
-- they will simply be ignored.


EXAMPLE

static mps_root_t mmRoot;

Object *Objects[rootCOUNT];

int main(void)
{
  mps_res_t res;

  /* ... */
  res = mps_root_create_table(&mmRoot, arena, MPS_RANK_EXACT, (mps_rm_t)0,
                              (mps_addr_t)&Objects, rootCOUNT);
  if(res != MPS_RES_OK) exit(1);
  /* ... */
}


ERROR HANDLING

"mps_root_create_table" returns "MPS_RES_MEMORY" when it fails to allocate 
memory for the internal root structure; you need to deallocate or reclaim 
something to make enough space, or expand the arena.


SEE ALSO

mps_root_create_table_masked, MPS_RM_PROT, MPS_RM_PROT_INNER, MPS_RM_CONST


NOTES



INTERNAL NOTES


