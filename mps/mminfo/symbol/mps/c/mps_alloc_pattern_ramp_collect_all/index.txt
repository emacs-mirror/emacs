          MPS C INTERFACE: MPS_ALLOC_PATTERN_RAMP_COLLECT_ALL
            symbol.mps.c.mps_alloc_pattern_ramp_collect_all
                           incomplete symbol
                           gavinm 1998-10-21

NAME

mps_alloc_pattern_ramp_collect_all


SUMMARY

Returns a ramp allocation pattern type indicating that a full GC should be done.


ASSOCIATED PROTOCOLS

GC, AP, ramps


SYNTAX

mps_alloc_pattern_t mps_alloc_pattern_ramp_collect_all();


ARGUMENTS

none


RETURNED VALUES

Returns the allocation pattern type for full collection ramps.


DESCRIPTION

This yields an allocation pattern for an AP that is similar to that returned by 
mps_alloc_pattern_ramp, in that it declares a ramp allocation pattern, but 
additionally indicates to the MPS that the next collection following the ramp 
should be a full GC.

This permits the client to indicate useful points for a full GC, either because 
most of the heap is likely to be dead, or because accurate statistics are 
required, with minimal perturbation of the GC strategy.

As usual, this allocation pattern should be used in matching 
mps_ap_alloc_pattern_begin and mps_ap_alloc_pattern_end pairs.  It may nest 
with, but should not otherwise overlap with allocation patterns of type 
mps_alloc_pattern_ramp.  In this case, the MPS may defer the full GC until 
after all ramp allocation patterns have ended.


EXAMPLE

{ 
  mps_ap_alloc_pattern_begin(ap, mps_alloc_pattern_ramp_collect_all());
  do_lots_of_work();
  mps_ap_alloc_pattern_end(ap, mps_alloc_pattern_ramp_collect_all());
  wait_for_collection_statistics_while_doing_other_allocation();
}

ERROR HANDLING

Cannot fail.


SEE ALSO

symbol.mps.c.mps_alloc_pattern_ramp
symbol.mps.c.mps_ap_alloc_pattern_begin
protocol.mps.alloc-pattern-ramp(0)


NOTES


INTERNAL NOTES



