<?xml version="1.0" encoding="UTF-8"?>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">



 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

  <head>

   <title>Description of the MPS C Interface Symbol "mps_epvm_restore"</title>

  </head>

  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>

   <div align='center'>

    <h1>Description of the MPS C Interface Symbol "mps_epvm_restore"</h1>

    <p>draft</p>

    <address>pekka, 1998-01-23</address>

   </div>

   <h2>

    <a id='section-name' name='section-name'>Name</a>

   </h2>

   <p>

    mps_epvm_restore

    <br />

   </p>

   <h2>

    <a id='section-summary' name='section-summary'>Summary</a>

   </h2>

   <p>

    Sets the current save level to a specified lower save

     level and frees all the objects allocated above it.

    <br />

   </p>

   <h2>

    <a id='section-associated-protocols' name='section-associated-protocols'>Associated Protocols</a>

   </h2>

   <p>Allocation point.</p>

   <h2>

    <a id='section-syntax' name='section-syntax'>Syntax</a>

   </h2>

   <p>void mps_epvm_restore(mps_pool_t pool, mps_epvm_save_level_t save_level);</p>

   <h2>

    <a id='section-arguments' name='section-arguments'>Arguments</a>

   </h2>

   <p>pool        the pool whose save level will be changed, must be an EPVM pool</p>

   <p>save_level  the new save level</p>

   <h2>

    <a id='section-returned-values' name='section-returned-values'>Returned Values</a>

   </h2>

   <p>None.</p>

   <h2>

    <a id='section-resources' name='section-resources'>Resources</a>

   </h2>

   <p>mpscepvm.h</p>

   <h2>

    <a id='section-description' name='section-description'>Description</a>

   </h2>

   <p>mps_epvm_restore changes the save level of the pool given to a smaller level.   The new save level must be larger than or equal to zero, but can be smaller than the initial level specified on pool creation.  All objects at higher save levels are freed.</p>

   <h2>

    <a id='section-example' name='section-example'>Example</a>

   </h2>

   <p>mps_epvm_save_level_t currentSaveLevel;</p>

   <p>void doTempJob(Result *res)</p>

   <p>

    {

    <br />

      mps_epvm_save(pool); ++currentSaveLevel;

   </p>

   <p>

      /* calculate result, allocating stuff */

    <br />

      mps_epvm_restore(pool, --currentSaveLevel);

   </p>

   <p>}</p>

   <h2>

    <a id='section-see-also' name='section-see-also'>See Also</a>

   </h2>

   <p>

    mps_epvm_save, mps_class_epvm, mps_pool_create, mps_epvm_save_level_t, 

    mps_epvm_check

   </p>

   <h2>

    <a id='section-notes' name='section-notes'>Notes</a>

   </h2>

   <p>The client must, of course, make sure that there aren't any pointers from scannable objects or roots to the objects being freed.  mps_epvm_check can help to implement that restriction.</p>

   <h2>

    <a id='section-internal-notes' name='section-internal-notes'>Internal Notes</a>

   </h2>

   <p>It's not yet clear how this interacts with finalization.</p>

   <h2>

    <a id='section-A' name='section-A'>A. References</a>

   </h2>

   <h2>

    <a id='section-B' name='section-B'>B. Document History</a>

   </h2>

   <table>

    <tr valign='top'>

     <td>1998-01-23 11:58:13 +00</td>

     <td />

     <td>New document saved</td>

    </tr>

    <tr valign='top'>

     <td>1998-01-23 11:58:18 +00</td>

     <td>pekka</td>

     <td>New document saved</td>

    </tr>

    <tr valign='top'>

     <td>2001-09-26</td>

     <td>

      <a href='mailto:ndl@ravenbrook.com'>NDL</a>

     </td>

     <td>Converted from xml to html (second pass).</td>

    </tr>

   </table>

   <hr />

   <p>

    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>

   </p>

   <div align='center'>

    <p>

     <code>$Id$</code>

    </p>

   </div>

  </body>

 </html>

