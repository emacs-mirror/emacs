<?xml version="1.0" encoding="UTF-8"?>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">



 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

  <head>

   <title>MPS C Interface: function mps_arena_class_vmnz</title>

  </head>

  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>

   <div align='center'>

    <h1>MPS C Interface: function mps_arena_class_vmnz</h1>

    <p>draft</p>

    <address>drj, 1998-09-09</address>

   </div>

   <h2>

    <a id='section-name' name='section-name'>Name</a>

   </h2>

   <p>mps_arena_class_vmnz</p>

   <h2>

    <a id='section-summary' name='section-summary'>Summary</a>

   </h2>

   <p>

    An arena class like 

    <code>mps_arena_class_vm</code>

     but with a different placement policy.

    <br />

   </p>

   <h2>

    <a id='section-associated-protocols' name='section-associated-protocols'>Associated Protocols</a>

   </h2>

   <p>

    Arena.

    <br />

   </p>

   <h2>

    <a id='section-syntax' name='section-syntax'>Syntax</a>

   </h2>

   <p>

    <pre>mps_arena_class_t mps_arena_class_vmnz(void);</pre>

    <br />

   </p>

   <h2>

    <a id='section-arguments' name='section-arguments'>Arguments</a>

   </h2>

   <p>

    None.

    <br />

   </p>

   <h2>

    <a id='section-returned-values' name='section-returned-values'>Returned Values</a>

   </h2>

   <p>

    Returns the VMNZ arena class.

    <br />

   </p>

   <h2>

    <a id='section-resources' name='section-resources'>Resources</a>

   </h2>

   <p>

    mpsavm.h

    <br />

   </p>

   <h2>

    <a id='section-description' name='section-description'>Description</a>

   </h2>

   <p>

    Returns the VMNZ arena class (stands for Virtual Memory No Zones, if you really care.)  This class can be passed to 

    <code>mps_arena_create</code>

     in order to create a VMNZ arena.  The VMNZ arenas use the OS virtual memory interfaces to allocate memory.  The chief consequence of this is that the arena can manage many more virtual addresses than it needs to commit memory to.  This gives it flexibility as to where to place objects.  

   </p>

   <p>

    This class is similar to 

    <code>mps_arena_class_vm</code>

     but uses a simpler placement policy, that makes it slightly faster.

    <br />

   </p>

   <h2>

    <a id='section-example' name='section-example'>Example</a>

   </h2>

   <p>

    <pre>mps_arena_t arena;

int main(void)

{

  if(mps_arena_create(&amp;arena, mps_arena_class_vmnz(), ARENA_SIZE)

     != MPS_RES_OK) {

    printf("Not enough memory!");

    exit(1);

  }

  /* rest of program */

}</pre>

   </p>

   <p>

    <br />

   </p>

   <h2>

    <a id='section-error-handling' name='section-error-handling'>Error Handling</a>

   </h2>

   <p>

    No errors.

    <br />

   </p>

   <h2>

    <a id='section-see-also' name='section-see-also'>See Also</a>

   </h2>

   <p>

    mps_arena_create

    , 

    mps_arena_class_vm

    <br />

   </p>

   <h2>

    <a id='section-notes' name='section-notes'>Notes</a>

   </h2>

   <p>

    This class takes an extra argument when used in 

    <code>mps_arena_create</code>

     (see example).  The extra parameter should be of type 

    <code>size_t</code>

    .  It specifies the amount of virtual address space

    , in bytes,

     that this arena should use.  The arena will reserve this amount of virtual address space from the OS during initialization.  It will not subsequently use any more address space (compare with 

    <code>mps_arena_class_vm</code>

     which can grow).

   </p>

   <p>

    <code>mps_arena_create</code>

     returns 

    <code>MPS_RES_RESOURCE</code>

     if it fails to reserve adequate address space to place the arena in; possibly other parts of the program are reserving too much virtual memory.  It returns 

    <code>MPS_RES_MEMORY</code>

     when it fails to allocate memory for the internal arena structures; either 

    <code>size</code>

     was far too small or you ran out of swap space.  It returns 

    <code>MPS_RES_FAIL</code>

    , if the library is copy-protected by a security device, such as a dongle, and a valid security device cannot be found.

   </p>

   <p>Virtual memory arenas are not available on the Mac platforms, other than MacOS X.  You will get a linking error, if you attempt to use this function.</p>

   <h2>

    <a id='section-A' name='section-A'>A. References</a>

   </h2>

   <h2>

    <a id='section-B' name='section-B'>B. Document History</a>

   </h2>

   <table>

    <tr valign='top'>

     <td>1998-09-09 16:34:28 +00</td>

     <td>drj</td>

     <td>New document saved</td>

    </tr>

    <tr valign='top'>

     <td>1998-09-10 10:20:17 +00</td>

     <td>drj</td>

     <td>more desc</td>

    </tr>

    <tr valign='top'>

     <td>1999-01-05 16:22:14 +00</td>

     <td>pekka</td>

     <td>add example, fix formatting, explain Mac status</td>

    </tr>

    <tr valign='top'>

     <td>2000-07-17 12:19:50 +01</td>

     <td>pekka</td>

     <td>create error handling; clean up</td>

    </tr>

    <tr valign='top'>

     <td>2000-07-17 12:21:56 +01</td>

     <td>pekka</td>

     <td>MacOS X</td>

    </tr>

    <tr valign='top'>

     <td>2000-07-20 19:03:10 +01</td>

     <td>pekka</td>

     <td>Note it's in butes</td>

    </tr>

    <tr valign='top'>

     <td>2001-09-26</td>

     <td>

      <a href='mailto:ndl@ravenbrook.com'>NDL</a>

     </td>

     <td>Converted from xml to html (second pass).</td>

    </tr>

   </table>

   <hr />

   <p>

    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>

   </p>

   <div align='center'>

    <p>

     <code>$Id$</code>

    </p>

   </div>

  </body>

 </html>

