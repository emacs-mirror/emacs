<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">

 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
  <head>
   <title>MPS C Interface: function mps_arena_roots_walk</title>
  </head>
  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>
   <div align='center'>
    <h1>MPS C Interface: function mps_arena_roots_walk</h1>
    <p>incomplete</p>
    <address>tony, 1998-06-18</address>
   </div>
   <h2>
    <a id='section-name' name='section-name'>Name</a>
   </h2>
   <p>
    mps_arena_roots_walk
    <br />
   </p>
   <h2>
    <a id='section-summary' name='section-summary'>Summary</a>
   </h2>
   <p>mps_arena_roots_walk is used to iterate over all roots of the MPS heap.</p>
   <h2>
    <a id='section-associated-protocols' name='section-associated-protocols'>Associated Protocols</a>
   </h2>
   <p>None.</p>
   <h2>
    <a id='section-syntax' name='section-syntax'>Syntax</a>
   </h2>
   <p>mps_arena_roots_walk(mps_arena, client_step_function, client_step_closure_p, client_step_closure_s);</p>
   <h2>
    <a id='section-type' name='section-type'>Type</a>
   </h2>
   <p>
    extern void mps_arena_roots_walk(mps_arena_t,
    <br />
                                     mps_roots_stepper_t,
                                 void *,
    <br />
                                     size_t);
   </p>
   <h2>
    <a id='section-arguments' name='section-arguments'>Arguments</a>
   </h2>
   <p>
    (mps_arena_t mps_arena, mps_roots_stepper_t stepper,
    <br />
     void *p, size_t s)
   </p>
   <p>mps_arena in an MPS arena object.</p>
   <p>
    stepper is a client-supplied function (pointer) of the right type (see symbol.mps.c.mps_roots_stepper_t).  This function is applied to every reference to the heap from every root object registered with the arena.  This function should take the argument list (mps_addr_t *ref, mps_root_t root, void *p, size_t s).  
    ref is the address of a root which references an object in the arena.
      root is the registered root (an MPS root object) of which ref is a single reference, p and s are copies of the corresponding values that the client passed into mps_arena_roots_walk originally.
   </p>
   <p>p and s are passed into the function specified by the stepper argument whenever the MPS calls that function.  See mps_roots_stepper_t</p>
   <h2>
    <a id='section-returned-values' name='section-returned-values'>Returned Values</a>
   </h2>
   <p>None.</p>
   <h2>
    <a id='section-resources' name='section-resources'>Resources</a>
   </h2>
   <p>mps.h</p>
   <h2>
    <a id='section-description' name='section-description'>Description</a>
   </h2>
   <p>mps_arena_roots_walk is used to iterate over all roots of the MPS heap.  A client-supplied function is called for every root reference which points to an object in any automatically managed pools; the address of the root reference and the MPS root object are passed to the user supplied function, as well as some closure variables.</p>
   <p>
    <br />
    May only be called when the arena is in the parked state.
   </p>
   <p>Applies stepper to each reference in any roots registered with the arena and which point to objects in automatically managed pools. If the root has rank MPS_RANK_AMBIG then the reference might not be to the start of an object; the client should handle this case. There is no guarantee that the reference corresponds to the actual location that holds the pointer to the object (since this might be a register, for example) - but the actual location will be passed if possible. This may aid analysis of roots via a debugger.</p>
   <p>
    <br />
   </p>
   <h2>
    <a id='section-example' name='section-example'>Example</a>
   </h2>
   <p>
    [not yet]
    <br />
    <br />
   </p>
   <h2>
    <a id='section-error-handling' name='section-error-handling'>Error Handling</a>
   </h2>
   <p>There are none.</p>
   <h2>
    <a id='section-see-also' name='section-see-also'>See Also</a>
   </h2>
   <p>symbol.mps.c.mps_roots_stepper_t</p>
   <p>symbol.mps.c.mps_arena_formatted_objects_walk</p>
   <h2>
    <a id='section-notes' name='section-notes'>Notes</a>
   </h2>
   <h2>
    <a id='section-A' name='section-A'>A. References</a>
   </h2>
   <h2>
    <a id='section-B' name='section-B'>B. Document History</a>
   </h2>
   <table>
    <tr valign='top'>
     <td>1998-06-18 18:46:11 +01</td>
     <td>tony</td>
     <td>New document saved</td>
    </tr>
    <tr valign='top'>
     <td>1998-06-23 21:23:35 +01</td>
     <td>
      <a href='mailto:grm@ravenbrook.com'>GRM</a>
     </td>
     <td>Fix tag</td>
    </tr>
    <tr valign='top'>
     <td>1999-02-18 18:05:55 +00</td>
     <td>pekka</td>
     <td>fixed formatting</td>
    </tr>
    <tr valign='top'>
     <td>2001-09-26</td>
     <td>
      <a href='mailto:ndl@ravenbrook.com'>NDL</a>
     </td>
     <td>Converted from xml to html (second pass).</td>
    </tr>
   </table>
   <hr />
   <p>
    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>
   </p>
   <div align='center'>
    <p>
     <code>$Id$</code>
    </p>
   </div>
  </body>
 </html>
