<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">

 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
  <head>
   <title>MPS C Interface: function mps_sac_flush</title>
  </head>
  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>
   <div align='center'>
    <h1>MPS C Interface: function mps_sac_flush</h1>
    <p>draft</p>
    <address>pekka, 1999-03-04</address>
   </div>
   <h2>
    <a id='section-name' name='section-name'>Name</a>
   </h2>
   <p>mps_sac_flush</p>
   <h2>
    <a id='section-summary' name='section-summary'>Summary</a>
   </h2>
   <p>
    This function flushes 
    the segregated allocation cache given.
   </p>
   <h2>
    <a id='section-associated-protocols' name='section-associated-protocols'>Associated Protocols</a>
   </h2>
   <p>Allocation cache</p>
   <h2>
    <a id='section-type' name='section-type'>Type</a>
   </h2>
   <p>void mps_sac_flush(mps_sac_t sac);</p>
   <h2>
    <a id='section-arguments' name='section-arguments'>Arguments</a>
   </h2>
   <p>sac                      the segregated allocation cache</p>
   <h2>
    <a id='section-returned-values' name='section-returned-values'>Returned Values</a>
   </h2>
   <p>None.</p>
   <h2>
    <a id='section-resources' name='section-resources'>Resources</a>
   </h2>
   <p>mps.h</p>
   <h2>
    <a id='section-description' name='section-description'>Description</a>
   </h2>
   <p>
    This function flushes the segregated allocation cache given, returning all memory held in it to the associated pool
    .
    <br />
   </p>
   <p>The client is responsible for synchronising the access to the cache, but the MPS will properly synchronize with any other threads that might be accessing the same pool.</p>
   <h2>
    <a id='section-example' name='section-example'>Example</a>
   </h2>
   <p>
    <pre>  mps_sac_t sac_small, sac_large;
  res = mps_sac_create(&amp;sac_small, pool, 3, small_classes);
  if (res != MPS_RES_OK) {
    printf("Failed to create the small allocation cache!"); exit(1);
  }
  res = mps_sac_create(&amp;sac_large, pool, 3, large_classes);
  if (res != MPS_RES_OK) {
    printf("Failed to create the large allocation cache!"); exit(1);
  }
  /* Use sac_small. */
  mps_sac_flush(sac_small);
  /* Use sac_large. */
  mps_sac_flush(sac_large);
  /* Use sac_small. */</pre>
   </p>
   <h2>
    <a id='section-see-also' name='section-see-also'>See Also</a>
   </h2>
   <p>symbol.mps.c.mps_sac_t</p>
   <h2>
    <a id='section-notes' name='section-notes'>Notes</a>
   </h2>
   <p>This is something that you'd typically do when you know you won't be using the cache for a while, but want to hold on to the cache itself.  Destroying a cache has the effect of flushing it, naturally.</p>
   <p>Flushing the cache might well cause the pool to return some memory to the arena, but that's upto the pool's usual policy.</p>
   <p>Note that the MPS might also decide to take memory from the cache without the client requesting a flush.</p>
   <h2>
    <a id='section-A' name='section-A'>A. References</a>
   </h2>
   <h2>
    <a id='section-B' name='section-B'>B. Document History</a>
   </h2>
   <table>
    <tr valign='top'>
     <td>1999-03-04 13:46:27 +00</td>
     <td>pekka</td>
     <td>New document saved</td>
    </tr>
    <tr valign='top'>
     <td>1999-03-23 17:23:11 +00</td>
     <td />
     <td>add example</td>
    </tr>
    <tr valign='top'>
     <td>1999-03-23 17:23:22 +00</td>
     <td>pekka</td>
     <td>add example</td>
    </tr>
    <tr valign='top'>
     <td>2001-09-26</td>
     <td>
      <a href='mailto:ndl@ravenbrook.com'>NDL</a>
     </td>
     <td>Converted from xml to html (second pass).</td>
    </tr>
   </table>
   <hr />
   <p>
    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>
   </p>
   <div align='center'>
    <p>
     <code>$Id$</code>
    </p>
   </div>
  </body>
 </html>
