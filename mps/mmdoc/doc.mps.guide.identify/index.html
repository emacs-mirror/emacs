<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">

 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
  <head>
   <title>Identifying and Categorizing MPS libraries</title>
  </head>
  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>
   <div align='center'>
    <h1>Identifying and Categorizing MPS libraries</h1>
    <p>draft</p>
    <address>drj, 1998-08-27</address>
   </div>
   <h2>
    <a id='section-introduction' name='section-introduction'>Introduction</a>
   </h2>
   <p>
    <strong>.intro</strong>
    : This document describes how to find out what version of the MPS a particular shipped library binary corresponds to.
   </p>
   <h2>
    <a id='section-purpose' name='section-purpose'>Purpose</a>
   </h2>
   <p>
    <strong>.purpose</strong>
    : The purpose of this document is to describe a means by which 
    configurations, versions, and releases
     of the MPS can be identified.  Uses include: debugging, support, performance comparisons
    .
   </p>
   <h2>
    <a id='section-terminology' name='section-terminology'>Terminology</a>
   </h2>
   <p>
    <strong>.product</strong>
    : "Product" is used to encompass a broad range of evolving configurations that are expected to meet the needs of a particular market sector.  The evolutionary stages of a product are divided into "versions" and "releases".  EPCore and Dylan use different products.
   </p>
   <p>
    <strong>.version</strong>
    : A "version" of a product is a set of releases with the same intended specification.  Typically the releases will evolve towards the intended specification as bugs are discovered and removed.
   </p>
   <p>
    <strong>.release</strong>
    : A "release" is a deliverable (but not necessarily delivered) instance of a product version.  It is intended to be reproducible and identifiable.
   </p>
   <p>
    <strong>.variety</strong>
    : A release is often comprised of several "varieties" of essentially the same software.  The core functionality of the software remains the same across different varieties, what changes is the amount of debug information available, the amount of consistency checking performed, and the amount of telemetry produced.
   </p>
   <p>
    <strong>.platform</strong>
    : A software execution environment which allows the execution of software with some of uniform interface.  We typically discuss platforms as being compatible at the binary or ABI level by specifying an operating system and a hardware architecture, additionally we (superfluously for the purposes of binary compatibility) include the compiler tools used to generate the software.  Examples are Sun Solaris (an OS) running on SPARC (an architecture) compiled using GNU GCC (a C compiler).
   </p>
   <h2>
    <a id='section-identification' name='section-identification'>Identification</a>
   </h2>
   <p>
    <strong>.categorize</strong>
    : A shipped MPS library binary can be categorized by the Product, Version, Release, Variety, and Platform.
   </p>
   <p>
    <strong>.mechanism</strong>
    : The MPS library contains a string embedded in it which identifies all of the above.  The string can be identified because it has both of the following as substrings: 
    <strong>.mechanism.what</strong>
    : 
    "@(#)", this is compatible with the UNIX XPG4 what(1) utility; 
    <strong>.mechanism.hqn</strong>
    : 
    "HQNMPS", short for Harlequin MPS.  
    <strong>.mechanism.decl</strong>
    : In addition the string is the value of a C object declared with the identifier MPSVersionString.  
    <strong>.mechanism.fun</strong>
    : The same string is returned from the function MPSVersion.
   </p>
   <p>
    <strong>.how</strong>
    : So an MPS library can be identified by finding the string.  There are a number of ways to do this:
   </p>
   <p>
    <strong>.how.grep</strong>
    : The string can be "grepped" out of the binary.
   </p>
   <p>
    <strong>.how.grep.unix</strong>
    : On UNIX, we suggest:
   </p>
   <p>  strings - mmdw.a | grep HQNMPS</p>
   <p>or</p>
   <p>  what mmdw.a | grep HQNMPS</p>
   <p>where mmdw.a should be replaced with the pathname of whatever binary you are interested in.</p>
   <p>
    <strong>.how.grep.pc</strong>
    : On Windows NT, we suggest:
   </p>
   <p>  strings - mmdw.lib | grep HQNMPS</p>
   <p>This relies on having the non-standard (but common and free) utilities "string" and "grep" installed.</p>
   <p>
    <strong>.how.grep.mac</strong>
    : On a Mac, we suggest using HexEdit (it's a binary file editor).  Open the library or executable and use Command-F to find the string "HQNMPS".  
    <strong>.how.grep.mac.only</strong>
    : Unfortunately HexEdit is hardly standard issue.  Hassle a few Mac users until you find one with a copy.
   </p>
   <p>
    <strong>.how.debug</strong>
    : A debugger can be used to access the C object:
   </p>
   <p>
    <strong>.how.debug.string</strong>
    : By simply printing the value of MPSVersionString.
   </p>
   <p>
    <strong>.how.debug.string.windbg</strong>
    : In WinDBG this would be "? MPSVersionString".
   </p>
   <p>
    <strong>.how.debug.string.gdb</strong>
    : In GDB this would be "print MPSVersionString"
   </p>
   <p>
    <strong>.how.debug.fun</strong>
    : By calling the function MPSVersion and printing its value.
   </p>
   <p>
    <strong>.how.debug.fun.windbg</strong>
    : In WinDBG this would be "? MPSVersion()".
   </p>
   <p>
    <strong>.how.debug.fun.gdb</strong>
    : In GDB this would be "print MPSVersion()".
   </p>
   <h2>
    <a id='section-A' name='section-A'>A. References</a>
   </h2>
   <h2>
    <a id='section-B' name='section-B'>B. Document History</a>
   </h2>
   <table>
    <tr valign='top'>
     <td>1998-08-27 13:29:01 +00</td>
     <td>drj</td>
     <td>New document saved</td>
    </tr>
    <tr valign='top'>
     <td>1998-09-09 12:25:48 +00</td>
     <td>drj</td>
     <td>fixed .purpose, now draft</td>
    </tr>
    <tr valign='top'>
     <td>1998-10-23 13:46:45 +00</td>
     <td>drj</td>
     <td>fixing typo</td>
    </tr>
    <tr valign='top'>
     <td>1999-02-03 16:05:54 +00</td>
     <td>drj</td>
     <td>added mac info</td>
    </tr>
    <tr valign='top'>
     <td>2000-05-22 13:24:16 +01</td>
     <td>pekka</td>
     <td>change tag from guide.mps.identify; clean up; remove internal info</td>
    </tr>
    <tr valign='top'>
     <td>2001-09-26</td>
     <td>
      <a href='mailto:ndl@ravenbrook.com'>NDL</a>
     </td>
     <td>Converted from xml to html (second pass).</td>
    </tr>
   </table>
   <hr />
   <p>
    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>
   </p>
   <div align='center'>
    <p>
     <code>$Id$</code>
    </p>
   </div>
  </body>
 </html>
