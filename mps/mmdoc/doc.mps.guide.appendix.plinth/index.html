<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">

 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
  <head>
   <title>The Plinth Interface</title>
  </head>
  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>
   <div align='center'>
    <h1>The Plinth Interface</h1>
    <p>incomplete</p>
    <address>pekka, 2000-06-06</address>
   </div>
   <h2>
    <a id='section-introduction' name='section-introduction'>Introduction</a>
   </h2>
   <p>
    The purpose and the nature of the plinth is explained in the chapter "
    The MPS Interface".  This appendix describes what the plinth actually contains and how you might work with it.
   </p>
   <p>The interface between the plinth and the MPS consists of the functions named mps_lib_* and mps_io_*.  They are declared in the headers mpslib.h and mpsio.h.  The reference pages for these functions describe what a plinth must do.</p>
   <p>The Library Interface</p>
   <p>The MPS can operate in a "freestanding environment", where there are no C libraries available (see the ISO C Standard, sections 4 and 5.1.2).  However, it does need some external functions in order to:</p>
   <p>
      1. write diagnostic output in case of a fatal error such as an
    <br />
         assertion failure,
  2. terminate the application in case of a fatal error,
    <br />
      3. update blocks of memory efficiently.
   </p>
   <p>These functions are provided to the core MPS via the library interface, which is defined in "mpslib.h".</p>
   <p>The I/O Interface</p>
   <p>[description missing]</p>
   <p>These functions are provided to the core MPS via the I/O interface, which is defined in "mpsio.h".</p>
   <h2>
    <a id='section-how-to-use-the-interface' name='section-how-to-use-the-interface'>How To Use The Interface</a>
   </h2>
   <p>If you are deploying the MPS in a freestanding environment, you will need to implement these functions yourself.  For example, if you are installing the MPS in a washing machine controller, you will need to implement stream output functions to write to your diagnostic test equipment.</p>
   <p>If you are deploying the MPS in a hosted environment (where the C libraries are available), you can just include mpsliban.c and mpsioan.c in your application.</p>
   <p>You might want to implement the functions yourself, even if you're using the MPS in a hosted environment, in order to control how the MPS writes its output.</p>
   <h2>
    <a id='section-details' name='section-details'>Details</a>
   </h2>
   <p>The declarations in "mpslib.h" are exactly like those defined by the standard ANSI libraries (as described in section 7 of the ANSI C Standard) except that the identifiers are prefixed by "mps_lib_".  The reason for the prefix is that you may not want to link the MPS to the ANSI library, even if it is present.  The prefix gives you the flexibility to implement your own functions.</p>
   <p>The MPS will expect the functions to have exactly the behavior defined in the ANSI C Standard.</p>
   <p>The exceptions are "mps_lib_get_stdout", "mps_lib_get_stderr", and "mps_lib_get_EOF", which do not correspond directly to ANSI standard declarations.  These should be functions which return the values corresponding to "stdout", "stderr", "EOF" respectively.</p>
   <p>The declarations in "mpsio.h" implement a simple binary output stream.  You don't actually need these at all, if you don't use a logging variety.</p>
   <h2>
    <a id='section-A' name='section-A'>A. References</a>
   </h2>
   <h2>
    <a id='section-B' name='section-B'>B. Document History</a>
   </h2>
   <table>
    <tr valign='top'>
     <td>2000-06-06 20:32:36 +01</td>
     <td />
     <td>New document saved</td>
    </tr>
    <tr valign='top'>
     <td>2000-06-06 20:32:40 +01</td>
     <td>pekka</td>
     <td>New document saved</td>
    </tr>
    <tr valign='top'>
     <td>2000-06-06 20:34:35 +01</td>
     <td>pekka</td>
     <td>try another tag</td>
    </tr>
    <tr valign='top'>
     <td>2001-09-26</td>
     <td>
      <a href='mailto:ndl@ravenbrook.com'>NDL</a>
     </td>
     <td>Converted from xml to html (second pass).</td>
    </tr>
   </table>
   <hr />
   <p>
    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>
   </p>
   <div align='center'>
    <p>
     <code>$Id$</code>
    </p>
   </div>
  </body>
 </html>
