<?xml version="1.0" encoding="UTF-8"?>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">



 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

  <head>

   <title>MPS C Interface: type mps_fmt_copy_t</title>

  </head>

  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>

   <div align='center'>

    <h1>MPS C Interface: type mps_fmt_copy_t</h1>

    <p>draft</p>

    <address> <a href='mailto:grm@ravenbrook.com'>GRM</a>

, 1997-05-12</address>

   </div>

   <h2>

    <a id='section-name' name='section-name'>Name</a>

   </h2>

   <p>mps_fmt_copy_t</p>

   <h2>

    <a id='section-summary' name='section-summary'>Summary</a>

   </h2>

   <p>"mps_fmt_copy_t" is a function pointer type for the copy method of a format.</p>

   <h2>

    <a id='section-associated-protocols' name='section-associated-protocols'>Associated Protocols</a>

   </h2>

   <p>Format.</p>

   <h2>

    <a id='section-type' name='section-type'>Type</a>

   </h2>

   <p>typedef void (*mps_fmt_copy_t)(mps_addr_t old, mps_addr_t new);</p>

   <h2>

    <a id='section-arguments' name='section-arguments'>Arguments</a>

   </h2>

   <p>old -- the address of the object</p>

   <p>new -- the address to which the object should be copied</p>

   <h2>

    <a id='section-resources' name='section-resources'>Resources</a>

   </h2>

   <p>mps.h</p>

   <h2>

    <a id='section-description' name='section-description'>Description</a>

   </h2>

   <p>

    "mps_fmt_copy_t" is a function pointer type for the copy method of a format.

      A copy method copies an object to a new location.

      It may be called by the MPS as part of copying garbage collection, for example.

   </p>

   <p>

    A copy method is required in some formats (in particular formats A and B (see "mps_fmt_A_t" and "mps_fmt_B_t")).

      A copy method takes the address of an object and another address, and copies the object to the new address.  The new and the old locations are guaranteed not to overlap.

   </p>

   <h2>

    <a id='section-example' name='section-example'>Example</a>

   </h2>

   <p>

    void my_copy_method(mps_addr_t old, mps_addr_t new)

    {

      size_t length = (char *)my_skip_method(old) - (char *)old;

  memcpy(new, old, length);

    }

   </p>

   <h2>

    <a id='section-error-handling' name='section-error-handling'>Error Handling</a>

   </h2>

   <p>A copy method is not allowed to fail.</p>

   <h2>

    <a id='section-see-also' name='section-see-also'>See Also</a>

   </h2>

   <p>mps_fmt_t, mps_fmt_create_A, mps_fmt_A_t, mps_fmt_B_t, mps_fmt_create_B</p>

   <h2>

    <a id='section-notes' name='section-notes'>Notes</a>

   </h2>

   <p>

    Most pools 

    will just ignore Copy methods, and do the copy themselves.

   </p>

   <h2>

    <a id='section-A' name='section-A'>A. References</a>

   </h2>

   <h2>

    <a id='section-B' name='section-B'>B. Document History</a>

   </h2>

   <table>

    <tr valign='top'>

     <td>1997-05-12 19:17:44 +01</td>

     <td>

      <a href='mailto:grm@ravenbrook.com'>GRM</a>

     </td>

     <td>New document saved</td>

    </tr>

    <tr valign='top'>

     <td>1997-05-12 19:30:00 +01</td>

     <td>

      <a href='mailto:grm@ravenbrook.com'>GRM</a>

     </td>

     <td></td>

    </tr>

    <tr valign='top'>

     <td>1997-05-12 21:25:21 +01</td>

     <td>

      <a href='mailto:grm@ravenbrook.com'>GRM</a>

     </td>

     <td></td>

    </tr>

    <tr valign='top'>

     <td>1997-06-10 16:21:29 -04</td>

     <td>lmb</td>

     <td>Some small edits.</td>

    </tr>

    <tr valign='top'>

     <td>1997-06-21 16:08:38 -04</td>

     <td>lmb</td>

     <td>Some minor edits.</td>

    </tr>

    <tr valign='top'>

     <td>1997-10-28 12:59:57 -05</td>

     <td>lmb</td>

     <td>Minor edits to TYPE and ARGUMENTS</td>

    </tr>

    <tr valign='top'>

     <td>1999-04-19 12:53:39 +00</td>

     <td />

     <td>i have no idea</td>

    </tr>

    <tr valign='top'>

     <td>1999-04-19 12:56:19 +00</td>

     <td>drj</td>

     <td>cleaned up and raised question of overlapping copies</td>

    </tr>

    <tr valign='top'>

     <td>2000-05-22 16:30:41 +01</td>

     <td>pekka</td>

     <td>clean up</td>

    </tr>

    <tr valign='top'>

     <td>2000-05-23 16:17:45 +01</td>

     <td>pekka</td>

     <td>simplify; guarantee no overlap</td>

    </tr>

    <tr valign='top'>

     <td>2001-09-26</td>

     <td>

      <a href='mailto:ndl@ravenbrook.com'>NDL</a>

     </td>

     <td>Converted from xml to html (second pass).</td>

    </tr>

   </table>

   <hr />

   <p>

    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>

   </p>

   <div align='center'>

    <p>

     <code>$Id$</code>

    </p>

   </div>

  </body>

 </html>

