<?xml version="1.0" encoding="UTF-8"?>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">



 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

  <head>

   <title>MPS C Interface Symbol "MPS_RM_PROT"</title>

  </head>

  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>

   <div align='center'>

    <h1>MPS C Interface Symbol "MPS_RM_PROT"</h1>

    <p>incomplete</p>

    <address>pekka, 1998-01-26</address>

   </div>

   <h2>

    <a id='section-name' name='section-name'>Name</a>

   </h2>

   <p>MPS_RM_PROT</p>

   <h2>

    <a id='section-summary' name='section-summary'>Summary</a>

   </h2>

   <p>

    "

    MPS_RM_PROT"

     is a constant used in 

    root mode arguments 

    to indicate protectable roots.

   </p>

   <h2>

    <a id='section-associated-protocols' name='section-associated-protocols'>Associated Protocols</a>

   </h2>

   <p>

    Root.

    <br />

   </p>

   <h2>

    <a id='section-type' name='section-type'>Type</a>

   </h2>

   <p>Integral constant.</p>

   <h2>

    <a id='section-resources' name='section-resources'>Resources</a>

   </h2>

   <p>mps.h</p>

   <h2>

    <a id='section-description' name='section-description'>Description</a>

   </h2>

   <p>

    "MPS_RM_PROT" is a preprocessor macro 

    defining a constant that can be OR'ed to other 

    "MPS_RM_*"

     contants, and passed as the root mode argument to certain root creation functions (

    "mps_root_create_fmt", "mps_root_create_table", "mps_root_create_table_masked")

    .

   </p>

   <p>

    Passing 

    "MPS_RM_PROT" means that t

    he MPS may place a hardware write barrier on any pages which any part of the root covers.  Format methods and any scanning function (except for the one for this root) may not write data in this root.  They may read it.

   </p>

   <p>You mustn't specify "MPS_RM_PROT" on a root allocated from the MPS.</p>

   <h2>

    <a id='section-example' name='section-example'>Example</a>

   </h2>

   <p>res = mps_root_create_table(&amp;mmRoot, arena, MPS_RANK_EXACT, MPS_RM_PROT,

                            (mps_addr_t)&amp;Objects, rootCOUNT);</p>

   <h2>

    <a id='section-see-also' name='section-see-also'>See Also</a>

   </h2>

   <p>

    mps_root_create_fmt, mps_root_create_table, mps_root_create_table_masked

    , MPS_RM_PROT_INNER

   </p>

   <h2>

    <a id='section-notes' name='section-notes'>Notes</a>

   </h2>

   <p>

    No page may contain parts of two or more roots with "MPS_RM_PROT" [how does one prevent

     that?].  

    You mustn't specify "MPS_RM_PROT" if the client program or anything other than (this instance of) the MPS is going to protect or unprotect the relevant pages.

   </p>

   <h2>

    <a id='section-internal-notes' name='section-internal-notes'>Internal Notes</a>

   </h2>

   <p>

    Future meaning: The MPS may place a hardware read and/or write barrier on any pages which any part of the root covers.  Format methods and scanning functions (except for the one for this root) may not read or write data in this root.  

    You may specify "MPS_RM_PROT" on a root allocated from the MPS, as long as it's not from a GCd pool.

      - drj 1997-12-18

   </p>

   <p>This feature is far too technical for most of our clients: we should think about producing some guidelines on how to use it.  - pekka 1998-01-27</p>

   <p>There may be problems if the client wants the OS to access the root.  Lots of OSes can't cope with writing to protected pages.  So we'll need to document that caveat too.  drj 1998-05-20</p>

   <h2>

    <a id='section-A' name='section-A'>A. References</a>

   </h2>

   <h2>

    <a id='section-B' name='section-B'>B. Document History</a>

   </h2>

   <table>

    <tr valign='top'>

     <td>1998-01-26 16:49:37 +00</td>

     <td>pekka</td>

     <td>New document saved</td>

    </tr>

    <tr valign='top'>

     <td>1998-01-27 17:47:58 +00</td>

     <td>pekka</td>

     <td>Add one more restriction</td>

    </tr>

    <tr valign='top'>

     <td>1998-05-20 10:01:45 +00</td>

     <td>drj</td>

     <td>add comment about OSes</td>

    </tr>

    <tr valign='top'>

     <td>2001-09-26</td>

     <td>

      <a href='mailto:ndl@ravenbrook.com'>NDL</a>

     </td>

     <td>Converted from xml to html (second pass).</td>

    </tr>

   </table>

   <hr />

   <p>

    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>

   </p>

   <div align='center'>

    <p>

     <code>$Id$</code>

    </p>

   </div>

  </body>

 </html>

