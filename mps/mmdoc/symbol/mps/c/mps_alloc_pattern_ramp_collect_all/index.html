<?xml version="1.0" encoding="UTF-8"?>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">



 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

  <head>

   <title>MPS C Interface: mps_alloc_pattern_ramp_collect_all</title>

  </head>

  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>

   <div align='center'>

    <h1>MPS C Interface: mps_alloc_pattern_ramp_collect_all</h1>

    <p>incomplete</p>

    <address> <a href='mailto:grm@ravenbrook.com'>GRM</a>

, 1998-10-21</address>

   </div>

   <h2>

    <a id='section-name' name='section-name'>Name</a>

   </h2>

   <p>mps_alloc_pattern_ramp_collect_all</p>

   <h2>

    <a id='section-summary' name='section-summary'>Summary</a>

   </h2>

   <p>

    Returns a ramp allocation pattern type indicating that a full GC should be done.

    <br />

   </p>

   <h2>

    <a id='section-associated-protocols' name='section-associated-protocols'>Associated Protocols</a>

   </h2>

   <p>

    GC, AP, ramps

    <br />

   </p>

   <h2>

    <a id='section-syntax' name='section-syntax'>Syntax</a>

   </h2>

   <p>mps_alloc_pattern_t mps_alloc_pattern_ramp_collect_all();</p>

   <h2>

    <a id='section-arguments' name='section-arguments'>Arguments</a>

   </h2>

   <p>none</p>

   <h2>

    <a id='section-returned-values' name='section-returned-values'>Returned Values</a>

   </h2>

   <p>Returns the allocation pattern type for full collection ramps.</p>

   <h2>

    <a id='section-description' name='section-description'>Description</a>

   </h2>

   <p>This yields an allocation pattern for an AP that is similar to that returned by mps_alloc_pattern_ramp, in that it declares a ramp allocation pattern, but additionally indicates to the MPS that the next collection following the ramp should be a full GC.</p>

   <p>This permits the client to indicate useful points for a full GC, either because most of the heap is likely to be dead, or because accurate statistics are required, with minimal perturbation of the GC strategy.</p>

   <p>As usual, this allocation pattern should be used in matching mps_ap_alloc_pattern_begin and mps_ap_alloc_pattern_end pairs.  It may nest with, but should not otherwise overlap with allocation patterns of type mps_alloc_pattern_ramp.  In this case, the MPS may defer the full GC until after all ramp allocation patterns have ended.</p>

   <h2>

    <a id='section-example' name='section-example'>Example</a>

   </h2>

   <p>{ </p>

   <p>  mps_ap_alloc_pattern_begin(ap, mps_alloc_pattern_ramp_collect_all());</p>

   <p>  do_lots_of_work();</p>

   <p>  mps_ap_alloc_pattern_end(ap, mps_alloc_pattern_ramp_collect_all());</p>

   <p>

      wait_for_collection_statistics_while_doing_other_allocation();

    <br />

    }

   </p>

   <h2>

    <a id='section-error-handling' name='section-error-handling'>Error Handling</a>

   </h2>

   <p>Cannot fail.</p>

   <h2>

    <a id='section-see-also' name='section-see-also'>See Also</a>

   </h2>

   <p>symbol.mps.c.mps_alloc_pattern_ramp</p>

   <p>symbol.mps.c.mps_ap_alloc_pattern_begin</p>

   <p>

    protocol.mps.alloc-pattern-ramp(0)

    <br />

   </p>

   <h2>

    <a id='section-notes' name='section-notes'>Notes</a>

   </h2>

   <h2>

    <a id='section-internal-notes' name='section-internal-notes'>Internal Notes</a>

   </h2>

   <h2>

    <a id='section-A' name='section-A'>A. References</a>

   </h2>

   <h2>

    <a id='section-B' name='section-B'>B. Document History</a>

   </h2>

   <table>

    <tr valign='top'>

     <td>1998-10-21 12:41:14 +01</td>

     <td>

      <a href='mailto:grm@ravenbrook.com'>GRM</a>

     </td>

     <td>New document saved</td>

    </tr>

    <tr valign='top'>

     <td>1998-10-21 12:45:05 +01</td>

     <td>

      <a href='mailto:grm@ravenbrook.com'>GRM</a>

     </td>

     <td>Minor</td>

    </tr>

    <tr valign='top'>

     <td>1998-10-21 12:48:14 +01</td>

     <td>

      <a href='mailto:grm@ravenbrook.com'>GRM</a>

     </td>

     <td>Minor</td>

    </tr>

    <tr valign='top'>

     <td>1998-10-21 13:10:01 +01</td>

     <td>

      <a href='mailto:grm@ravenbrook.com'>GRM</a>

     </td>

     <td>Clarify nesting</td>

    </tr>

    <tr valign='top'>

     <td>1998-10-22 14:51:44 +01</td>

     <td>

      <a href='mailto:grm@ravenbrook.com'>GRM</a>

     </td>

     <td>Updates</td>

    </tr>

    <tr valign='top'>

     <td>2001-09-26</td>

     <td>

      <a href='mailto:ndl@ravenbrook.com'>NDL</a>

     </td>

     <td>Converted from xml to html (second pass).</td>

    </tr>

   </table>

   <hr />

   <p>

    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>

   </p>

   <div align='center'>

    <p>

     <code>$Id$</code>

    </p>

   </div>

  </body>

 </html>

