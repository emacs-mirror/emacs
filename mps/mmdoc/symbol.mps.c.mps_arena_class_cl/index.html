<?xml version="1.0" encoding="UTF-8"?>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">



 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

  <head>

   <title>MPS C Interface: function mps_arena_class_cl</title>

  </head>

  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>

   <div align='center'>

    <h1>MPS C Interface: function mps_arena_class_cl</h1>

    <p>draft</p>

    <address>pekka, 1997-09-26</address>

   </div>

   <h2>

    <a id='section-name' name='section-name'>Name</a>

   </h2>

   <p>mps_arena_class_cl</p>

   <h2>

    <a id='section-summary' name='section-summary'>Summary</a>

   </h2>

   <p>

    <code>mps_arena_class_cl</code>

     returns the client arena class.

   </p>

   <h2>

    <a id='section-associated-protocols' name='section-associated-protocols'>Associated Protocols</a>

   </h2>

   <p>Arena.</p>

   <h2>

    <a id='section-type' name='section-type'>Type</a>

   </h2>

   <p>

    <pre>mps_arena_class_t mps_arena_class_cl(void)</pre>

    <br />

   </p>

   <h2>

    <a id='section-arguments' name='section-arguments'>Arguments</a>

   </h2>

   <p>None.</p>

   <h2>

    <a id='section-returned-values' name='section-returned-values'>Returned Values</a>

   </h2>

   <p>

    Returns the client arena class.

    <br />

   </p>

   <h2>

    <a id='section-resources' name='section-resources'>Resources</a>

   </h2>

   <p>mpsacl.h</p>

   <h2>

    <a id='section-description' name='section-description'>Description</a>

   </h2>

   <p>

    This function is used to get hold of the client arena class, for the purpose of passing it to 

    <code>mps_arena_create</code>

    .

   </p>

   <h2>

    <a id='section-example' name='section-example'>Example</a>

   </h2>

   <p>mps_arena_t arena;</p>

   <p>int main(void)</p>

   <p>{</p>

   <p> void *block;</p>

   <p>

      block = malloc(ARENA_SIZE);

    <br />

      if(block == NULL) {

   </p>

   <p>    printf("Not enough memory!"); exit(1);</p>

   <p>

      }

    <br />

      if(mps_arena_create(&amp;arena, mps_arena_class_cl(), ARENA_SIZE, block)

   </p>

   <p>     != MPS_RES_OK) {</p>

   <p>    printf("ARENA_SIZE too small"); exit(2);</p>

   <p>

      }

    <br />

      /* rest of program */

   </p>

   <p>}</p>

   <h2>

    <a id='section-error-handling' name='section-error-handling'>Error Handling</a>

   </h2>

   <p>None.</p>

   <h2>

    <a id='section-see-also' name='section-see-also'>See Also</a>

   </h2>

   <p>mps_arena_create</p>

   <h2>

    <a id='section-notes' name='section-notes'>Notes</a>

   </h2>

   <p>

    A client arena gets its managed memory from the client.  This memory block is passed when the arena is created

    .  When creating a client arena, 

    <pre>mps_arena_create</pre>

     takes two extra arguments:

   </p>

   <p>

    <br />

    <pre>mps_res_t mps_arena_create(mps_arena_t *mps_arena_o, mps_arena_class_t mps_arena_class_cl, size_t size, void *block)</pre>

    <br />

   </p>

   <p>

    <code>block</code>

     is the address of the memory block managed by the arena, and 

    <code>size</code>

     is its size in bytes.  If 

    <code>mps_arena_create</code>

     returns 

    <code>MPS_RES_MEMORY</code>

    , then the block was too small to hold the internal arena structures.  Allocate a (much) larger one, and try again.

    <code>mps_arena_create</code>

     returns 

    <code>MPS_RES_FAIL</code>

    , if the MPS library is copy-protected by a security device, such as a dongle, and a valid security device cannot be found.

   </p>

   <h2>

    <a id='section-A' name='section-A'>A. References</a>

   </h2>

   <h2>

    <a id='section-B' name='section-B'>B. Document History</a>

   </h2>

   <table>

    <tr valign='top'>

     <td>1997-09-26 19:53:33 +01</td>

     <td>pekka</td>

     <td>New document saved</td>

    </tr>

    <tr valign='top'>

     <td>1997-10-21 11:34:11 +01</td>

     <td>pekka</td>

     <td>Clean up</td>

    </tr>

    <tr valign='top'>

     <td>1997-10-21 11:50:35 +01</td>

     <td>pekka</td>

     <td>make it draft</td>

    </tr>

    <tr valign='top'>

     <td>1997-10-24 15:48:56 -04</td>

     <td>lmb</td>

     <td>Put formatting in line with other symbol doc</td>

    </tr>

    <tr valign='top'>

     <td>2000-05-22 16:12:20 +01</td>

     <td>pekka</td>

     <td>fix title</td>

    </tr>

    <tr valign='top'>

     <td>2000-07-17 12:06:54 +01</td>

     <td>pekka</td>

     <td>add dongle</td>

    </tr>

    <tr valign='top'>

     <td>2001-09-26</td>

     <td>

      <a href='mailto:ndl@ravenbrook.com'>NDL</a>

     </td>

     <td>Converted from xml to html (second pass).</td>

    </tr>

   </table>

   <hr />

   <p>

    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>

   </p>

   <div align='center'>

    <p>

     <code>$Id$</code>

    </p>

   </div>

  </body>

 </html>

