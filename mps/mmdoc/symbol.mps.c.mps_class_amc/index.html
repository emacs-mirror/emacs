<?xml version="1.0" encoding="UTF-8"?>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">



 <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

  <head>

   <title>MPS C Interface: function mps_class_amc</title>

  </head>

  <body bgcolor='#FFFFFF' text='#000000' link='#000099' vlink='#660066' alink='#FF0000'>

   <div align='center'>

    <h1>MPS C Interface: function mps_class_amc</h1>

    <p>incomplete</p>

    <address> <a href='mailto:grm@ravenbrook.com'>GRM</a>

, 1998-10-21</address>

   </div>

   <h2>

    <a id='section-name' name='section-name'>Name</a>

   </h2>

   <p>mps_class_amc</p>

   <p>

    <br />

   </p>

   <h2>

    <a id='section-summary' name='section-summary'>Summary</a>

   </h2>

   <p>

    mps_class_amc 

    returns the pool class object for the Automatic Mostly Copying pool class.

    <br />

    <br />

   </p>

   <h2>

    <a id='section-associated-protocols' name='section-associated-protocols'>Associated Protocols</a>

   </h2>

   <p>

    Pool

    <br />

    <br />

   </p>

   <h2>

    <a id='section-syntax' name='section-syntax'>Syntax</a>

   </h2>

   <p>

    mps_class_t mps_class_amc(void)

    <br />

    <br />

   </p>

   <h2>

    <a id='section-arguments' name='section-arguments'>Arguments</a>

   </h2>

   <p>

    No arguments.

    <br />

    <br />

   </p>

   <h2>

    <a id='section-returned-values' name='section-returned-values'>Returned Values</a>

   </h2>

   <p>

    Returns a pool class object.

    <br />

    <br />

   </p>

   <h2>

    <a id='section-resources' name='section-resources'>Resources</a>

   </h2>

   <p>

    mpscamc.h

    <br />

    <br />

   </p>

   <h2>

    <a id='section-description' name='section-description'>Description</a>

   </h2>

   <p>This function returns an object of type mps_class_t which represents the Automatic Mostly Copying pool class.</p>

   <p>This pool class requires an extra argument when used in mps_pool_create:</p>

   <p>res = mps_pool_create(&amp;pool, arena, mps_class_amc(), format);</p>

   <p>The extra argument, format, should be of type mps_fmt_t and specifies the format of the objects allocated in the pool.</p>

   <p>An AMC pool is both scannable and collectable.  Objects may contain exact references to other objects that will preserve such other objects.  Objects may be reclaimed if they are not reachable from a root.  Objects may move during collection, unless reachable via a (direct) ambiguous reference.  Objects in an AMC pool may be registered for finalization.  Exact (that is, non-ambiguous) references into an object in an AMC pool must be to the start of the object.</p>

   <p>The AMC pool class exploits assumptions about object lifetimes and inter-connection variously referred to as "the generational hypothesis".  In particular, the following tendencies will be efficiently exploited by such a pool:</p>

   <p>  - Most objects die young;</p>

   <p>  - Objects that don't die young will live a long time;</p>

   <p>  - Most references are backwards in time.</p>

   <p>mps_ap_frame_push and mps_ap_frame_pop may be used on an allocation point in an AMC pool.  They do not declare the affected objects to be definitely dead (compare with the SNC pool class), but have an undefined effect on the collection strategy.  </p>

   <p>If an allocation point is created in an AMC pool, the call to mps_ap_create will take no additional parameters.</p>

   <p>

    <br />

   </p>

   <h2>

    <a id='section-example' name='section-example'>Example</a>

   </h2>

   <h2>

    <a id='section-see-also' name='section-see-also'>See Also</a>

   </h2>

   <p>

    mps_ap_frame_pop

    , 

    mps_ap_frame_push, 

    mps_ap_create

   </p>

   <h2>

    <a id='section-A' name='section-A'>A. References</a>

   </h2>

   <h2>

    <a id='section-B' name='section-B'>B. Document History</a>

   </h2>

   <table>

    <tr valign='top'>

     <td>1998-10-21 15:09:19 +01</td>

     <td>

      <a href='mailto:grm@ravenbrook.com'>GRM</a>

     </td>

     <td>New document saved</td>

    </tr>

    <tr valign='top'>

     <td>1998-10-21 15:14:38 +01</td>

     <td>

      <a href='mailto:grm@ravenbrook.com'>GRM</a>

     </td>

     <td>Correct tag</td>

    </tr>

    <tr valign='top'>

     <td>1998-10-22 12:35:24 +00</td>

     <td>drj</td>

     <td>some SNC-&gt;AMC, added internal note re dylan</td>

    </tr>

    <tr valign='top'>

     <td>2000-05-22 17:55:46 +01</td>

     <td>pekka</td>

     <td>clean up</td>

    </tr>

    <tr valign='top'>

     <td>2001-09-26</td>

     <td>

      <a href='mailto:ndl@ravenbrook.com'>NDL</a>

     </td>

     <td>Converted from xml to html (second pass).</td>

    </tr>

   </table>

   <hr />

   <p>

    <small>Copyright &copy; 2001 Ravenbrook Limited.  This document is provided "as is", without any express or implied warranty.  In no event will the authors be held liable for any damages arising from the use of this document.  You may not duplicate or reproduce this document in any form without the express permission of the copyright holder.</small>

   </p>

   <div align='center'>

    <p>

     <code>$Id$</code>

    </p>

   </div>

  </body>

 </html>

